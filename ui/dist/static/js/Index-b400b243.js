import{b as E,r as I,V as R,a as O,i as $,o as T,c as d,j as r,d as h,f as n,w as t,l,q as f,A as k,C as m,F as C,x as z,n as p,e as F,t as A}from"./index-fb834bef.js";import P from"./List-252f7c02.js";import{I as U,s as y}from"./Info-b7da12ed.js";import"./WangEditor-3a610747.js";import"./FindBack-c07c58e7.js";import"./Index-c39c13d2.js";import"./Info-e1d6f50f.js";import"./organizationService-71817d40.js";const K=p("\u67E5\u8BE2"),M=p("\u91CD\u7F6E"),q=p(" \u65B0\u5EFA "),G=p(" \u6279\u91CF\u5220\u9664 "),H=p("\u5BFC\u51FA Excel"),J=p(" \u66F4\u591A\u64CD\u4F5C "),Q=p("\u91CD\u7F6E"),W=p(" \u68C0\u7D22 "),X=["src"],Y=["onClick"],Z=["onClick"],ee=F("a",{class:"text-danger"},"\u5220\u9664",-1),te={name:"base_member"},ue=Object.assign(te,{setup(oe){const S=E(),o=I({search:{state:!1,fieldCount:2,vm:{name:""}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,columns:[],data:[],domainName:R.domainName}),x=O(null),b=O(null),c=S.getPowerByMenuId($.currentRoute.value.meta.menuId),i={onChange(a){const{currentPage:e,pageSize:u}=a;o.page=e==0?1:e,o.rows=u,i.findList()},onResetSearch(){o.page=1;let a=o.search.vm;for(let e in a)a[e]="";i.findList()},findList(){o.loading=!0,y.findList(o.rows,o.page,o.search.vm).then(a=>{let e=a.data;o.loading=!1,o.page=e.page,o.rows=e.size,o.total=e.total,o.columns=e.columns,o.data=e.dataSource})},deleteList(a){let e=[];a?e.push(a):e=b.value.table.getCheckboxRecords().map(u=>u.id),y.deleteList(e).then(u=>{u.code==1&&(A.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),i.findList())})},openForm(a){x.value.openForm({visible:!0,key:a})},exportExcel(){y.exportExcel(o.search.vm)},jumpDetails(a){$.push(`/base/member/details/${a.id}/${a.name}`)}};return T(()=>{i.findList()}),(a,e)=>{const u=d("a-input"),L=d("a-col"),_=d("a-button"),D=d("a-row"),w=d("a-popconfirm"),j=d("a-menu-item"),B=d("a-menu"),V=d("a-dropdown"),g=d("vxe-column"),N=d("a-divider");return r(),h("div",null,[n(P,{ref_key:"refList",ref:b,tableData:l(o),onOnChange:i.onChange},{search:t(()=>[n(D,{gutter:[15,15]},{default:t(()=>[n(L,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[n(u,{value:l(o).search.vm.name,"onUpdate:value":e[0]||(e[0]=s=>l(o).search.vm.name=s),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),n(L,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:t(()=>[n(_,{type:"primary",class:"mr-15",onClick:i.findList},{default:t(()=>[K]),_:1},8,["onClick"]),n(_,{class:"mr-15",onClick:i.onResetSearch},{default:t(()=>[M]),_:1},8,["onClick"])]),_:1})]),_:1})]),"toolbar-left":t(()=>[l(c).insert?(r(),f(_,{key:0,type:"primary",onClick:e[1]||(e[1]=s=>i.openForm())},{icon:t(()=>[n(k,{name:"PlusOutlined"})]),default:t(()=>[q]),_:1})):m("",!0),l(c).delete?(r(),f(w,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:e[2]||(e[2]=s=>i.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[n(_,{type:"danger"},{icon:t(()=>[n(k,{name:"DeleteOutlined"})]),default:t(()=>[G]),_:1})]),_:1})):m("",!0),n(V,null,{overlay:t(()=>[n(B,null,{default:t(()=>[n(j,{key:"1",onClick:i.exportExcel},{default:t(()=>[H]),_:1},8,["onClick"])]),_:1})]),default:t(()=>[n(_,null,{default:t(()=>[J,n(k,{name:"DownOutlined"})]),_:1})]),_:1})]),"toolbar-right":t(()=>[n(u,{value:l(o).search.vm.name,"onUpdate:value":e[3]||(e[3]=s=>l(o).search.vm.name=s),placeholder:"\u540D\u79F0",onKeyup:i.findList},null,8,["value","onKeyup"]),n(_,{onClick:i.onResetSearch},{default:t(()=>[Q]),_:1},8,["onClick"]),l(c).search?(r(),f(_,{key:0,onClick:e[4]||(e[4]=s=>l(o).search.state=!l(o).search.state)},{icon:t(()=>[n(k,{name:l(o).search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:t(()=>[W]),_:1})):m("",!0)]),"table-col-default":t(()=>[(r(!0),h(C,null,z(l(o).columns,s=>(r(),h(C,null,[s.fieldName=="photo"?(r(),f(g,{key:0,field:"photo",title:"\u5934\u50CF"},{default:t(({row:v})=>[F("img",{src:a.domainName+v.photo,width:"35",height:"35"},null,8,X)]),_:1})):(r(),h(C,{key:1},[s.fieldName!="id"?(r(),f(g,{field:s.fieldName,title:s.title,visible:s.show,key:s.id},null,8,["field","title","visible"])):m("",!0)],64))],64))),256)),(l(c).update||l(c).delete)&&!a.$props.isFindBack?(r(),f(g,{key:0,field:"id",title:"\u64CD\u4F5C"},{default:t(({row:s})=>[l(c).update?(r(),h("a",{key:0,href:"javascript:void(0)",onClick:v=>i.jumpDetails(s)},"\u8BE6\u60C5",8,Y)):m("",!0),n(N,{type:"vertical"}),l(c).update?(r(),h("a",{key:1,href:"javascript:void(0)",onClick:v=>i.openForm(s.id)},"\u7F16\u8F91",8,Z)):m("",!0),n(N,{type:"vertical"}),l(c).delete?(r(),f(w,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:v=>i.deleteList(s.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[ee]),_:2},1032,["onConfirm"])):m("",!0)]),_:1})):m("",!0)]),_:1},8,["tableData","onOnChange"]),n(U,{ref_key:"refForm",ref:x,onOnSuccess:e[5]||(e[5]=()=>i.findList())},null,512)])}}});export{ue as default};
