import{c as h,G as s,a as f,m as a,N as l,M as g,b as m,S as d}from"./track-088c911e.js";import{W as C,h as y,d as v,t as b,q as x,v as k}from"./vendor-d5c27e5b.js";import O from"./Index3Count-a8002718.js";import{_}from"./index-54f9c979.js";const u=h({type:"vue componnet"});s.registerVueComponent=u.register;s.unregisterVueComponent=u.unregister;s.Hook.prototype.getVueComponent=function(o){const n=this.options.getVueComponent;if(typeof n=="function"){const t=f(n,this.graph,o);if(t!=null)return t}let e=o.getComponent();if(typeof e=="string"){const t=u.get(e);if(t==null)return u.onNotFound(e);e=t}return e};class c extends l{get component(){return this.getComponent()}set component(n){this.setComponent(n)}getComponent(){return this.store.get("component")}setComponent(n,e={}){return n==null?this.removeComponent(e):this.store.set("component",n,e),this}removeComponent(n={}){return this.store.remove("component",n),this}}(function(o){function n(e,t="rect"){const r=[{tagName:t,selector:"body"}];return e?r.push(g.getForeignObjectMarkup()):r.push({tagName:"g",selector:"content"}),r.push({tagName:"text",selector:"label"}),r}o.config({view:"vue-shape-view",markup:n(!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks(e){if(e.markup==null){const t=e.primer,r=e.useForeignObject;if((t!=null||r!=null)&&(e.markup=n(r!==!1,t),t)){e.attrs==null&&(e.attrs={});let i={};t==="circle"?i={refCx:"50%",refCy:"50%",refR:"50%"}:t==="ellipse"&&(i={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),t!=="rect"&&(e.attrs=a({},e.attrs,{body:Object.assign({refWidth:null,refHeight:null},i)}))}}return e}}),l.registry.register("vue-shape",o,!0)})(c||(c={}));globalThis&&globalThis.__rest;class p extends m{init(){super.init()}getComponentContainer(){return this.selectors.foContent}confirmUpdate(n){const e=super.confirmUpdate(n);return this.handleAction(e,p.action,()=>{d.scheduleTask(()=>{this.renderVueComponent()})})}renderVueComponent(){this.unmountVueComponent();const n=this.getComponentContainer(),e=this.cell,t=this.graph;if(n){const r=this.graph.hook.getVueComponent(e);this.vm=C({render(){return y(r)},provide(){return{getGraph:()=>t,getNode:()=>e}}}),this.vm.mount(n)}}unmountVueComponent(){const n=this.getComponentContainer();return n.innerHTML="",this.vm&&(this.vm.unmount(),this.vm=null),n}unmount(){return this.unmountVueComponent(),super.unmount(),this}}(function(o){o.action="vue",o.config({bootstrap:[o.action],actions:{component:o.action}}),m.registry.register("vue-shape-view",o,!0)})(p||(p={}));s.registerNode("hzy-count",{inherit:"vue-shape",x:200,y:150,width:150,height:100,component:{template:"<Count />",components:{Count:O}}});const N=v({setup(){return b(()=>{new s({container:document.getElementById("x6-container3"),height:400,grid:!0}).addNode({id:"1",shape:"hzy-count",x:400,y:150,width:150,height:100,data:{num:0}})}),{}}}),j={id:"x6-container3",style:{"min-height":"500px"}};function w(o,n,e,t,r,i){return x(),k("div",j)}var F=_(N,[["render",w]]);export{F as default};
