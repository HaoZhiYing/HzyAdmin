var P=Object.defineProperty;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var O=(e,o,l)=>o in e?P(e,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[o]=l,$=(e,o)=>{for(var l in o||(o={}))q.call(o,l)&&O(e,l,o[l]);if(S)for(var l of S(o))Y.call(o,l)&&O(e,l,o[l]);return e};import{d as A,p as I,t as k,_ as G,A as H,h as J}from"./index-af5e2f14.js";import{d as W,b3 as X,s as Z,e as x,w as ee,u as ne,f as m,q as g,j as b,m as n,y as t,A as h,B as s,C as te,x as w}from"./vendor-4ca571b9.js";const y="admin/SysMenu";var R={getMenus(){return A(`${y}/getMenus`)},findList(e,o,l={}){return I(`${y}/findList/${e}/${o}`,l,!1)},deleteList(e){return console.log(e),e&&e.length===0?k.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):I(`${y}/deleteList`,e,!1)},findForm(e){return A(`${y}/findForm${e?"/"+e:""}`)},saveForm(e){return I(`${y}/saveForm`,e)},getMenusFunctionTree(){return A(`${y}/getMenusFunctionTree`)},getAll(e={}){return I(`${y}/getAll`,e,!1)}};const oe=W({name:"system_menu_info",props:{onSuccess:Function},components:{AppIcon:H,AppIconList:X(()=>J(()=>import("./AppIconList-64b55519.js"),["static/js/AppIconList-64b55519.js","static/css/AppIconList-9bc28226.css","static/js/index-af5e2f14.js","static/css/index-00861f3d.css","static/js/vendor-4ca571b9.js"]))},setup(e,o){const l=Z({vm:{id:"",form:{},allFunctions:[],menuFunctionList:[]},visible:!1,saveLoading:!1,parentId:null,checkAll:!1,indeterminate:!1,activeKey:x("1"),iconFormcVisible:!1}),c={findForm(){l.saveLoading=!0,R.findForm(l.vm.id).then(u=>{l.saveLoading=!1,u.code==1&&(l.vm=u.data)})},saveForm(){if(l.vm.form.type==2&&l.vm.menuFunctionList.length==0)return k.message("\u8BF7\u8BBE\u7F6E\u529F\u80FD\u6A21\u5757!","\u8B66\u544A");if(l.vm.form.type==2&&l.vm.menuFunctionList.length>0){var u=l.vm.menuFunctionList;for(let i=0;i<u.length;i++){const d=u[i];if(!d.number)return k.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${i+1}\u884C \u8BF7\u586B\u5199\u5E8F\u53F7!`,"\u8B66\u544A");if(!d.functionCode)return k.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${i+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u7F16\u7801!`,"\u8B66\u544A");if(!d.functionName)return k.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${i+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u540D\u79F0!`,"\u8B66\u544A")}}l.saveLoading=!0,l.vm.form.parentId=l.parentId?l.parentId:null,R.saveForm(l.vm).then(i=>{l.saveLoading=!1,i.code==1&&(k.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),o.emit("onSuccess",i.data),l.visible=!1)})},openForm({visible:u,key:i,parentId:d}){l.visible=u,u&&(l.vm.id=i,l.parentId=d,c.findForm())},onCheckAllChange(u){u.target.checked?l.vm.functionIds=l.vm.allFunctions.map(i=>i.id):l.vm.functionIds=[]},functionToMenuFunction(u){return{number:u.number,menuId:l.vm.id?l.vm.id:0,functionCode:u.byName,functionName:u.name,remark:u.remark}},defaultRows(){l.vm.menuFunctionList=[],l.vm.allFunctions.forEach(u=>{c.addRow(c.functionToMenuFunction(u))})},defaultDisplayRows(){l.vm.menuFunctionList=[];var u=l.vm.allFunctions.filter(i=>i.byName=="Display");u.length>0&&l.vm.menuFunctionList.push(c.functionToMenuFunction(u[0]))},removeRow(u){var i=l.vm.menuFunctionList;l.vm.menuFunctionList=[];for(let d=0;d<i.length;d++){const v=i[d];d!=u&&l.vm.menuFunctionList.push(v)}},addRow(u){u?l.vm.menuFunctionList.push(u):(l.vm.menuFunctionList.push({number:0,menuId:l.vm.id?l.vm.id:0,functionCode:"",functionName:"",remark:""}),console.log(l.vm.menuFunctionList))}};return ee(()=>l.vm.functionIds,u=>{l.indeterminate=!!u.length&&u.length<l.vm.allFunctions.length,l.checkAll=u.length===l.vm.allFunctions.length}),o.expose($({},c)),$($({},ne(l)),c)}}),le=s("\u63D0\u4EA4"),ae=s("\u5173\u95ED"),ue=s("\u76EE\u5F55"),se=s("\u83DC\u5355"),me=s(" \u83DC\u5355\u8DEF\u7531 \xA0\xA0 "),ie=s("\u8DF3\u8F6C\u5916\u90E8\u5730\u5740\u4F7F\u7528\u6B64\u8868\u8FBE\u5F0F\uFF1A/external/jump/:path(.*) \u3002\u5E76\u4E14\u8981\u5728\u8DF3\u8F6C\u5730\u5740\u586B\u4E0A\u5916\u90E8\u7F51\u5740"),de=s(" \u8DF3\u8F6C\u5730\u5740 \xA0\xA0 "),re=s("\u8DF3\u8F6C\u5730\u5740\uFF08\u4E0D\u586B\u9ED8\u8BA4\u4F7F\u7528 \u83DC\u5355\u8DEF\u7531\u5730\u5740\uFF09\u652F\u6301 http\u3001https"),fe=w("a",{href:"https://next.antdv.com/components/icon-cn",target:"black"}," \u56FE\u6807\uFF08\u8BF7\u4F7F\u7528AntdV 3.0 \u5B98\u65B9icon\uFF09 ",-1),ve=s(" \u663E\u793A\u72B6\u6001\xA0"),pe=w("span",{class:"text-danger"},"\u9690\u85CF\u540E\u6B64\u83DC\u5355\u5C31\u53D8\u6210\u4E86\u8DEF\u7531",-1),_e=s("\xA0 "),ce=s(" \u9690\u85CF\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u4F46\u662F\u8DEF\u7531\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D "),ge=s("\u663E\u793A"),be=s("\u9690\u85CF"),ye=s(" \u83DC\u5355\u72B6\u6001 \xA0\xA0 "),Fe=s("\u505C\u7528\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u5E76\u4E14\u8DEF\u7531\u4E5F\u4E0D\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D"),he=s("\u6B63\u5E38"),ke=s("\u505C\u7528"),Ce=s("\u662F"),Le=s("\u5426"),Ue=s("\u662F"),$e=s("\u5426"),Ie=s("\u79FB\u9664"),Ae={class:"text-center p-15"},we=s("\u6DFB\u52A0\u4E00\u884C"),Ne=s("\u4F7F\u7528\u9ED8\u8BA4\u529F\u80FD\u96C6"),Ve=s("\u4F7F\u7528\u663E\u793A\u529F\u80FD");function Me(e,o,l,c,u,i){const d=m("a-button"),v=m("a-radio"),C=m("a-radio-group"),f=m("a-form-item"),r=m("a-col"),p=m("a-input"),L=m("AppIcon"),U=m("a-tooltip"),T=m("a-input-search"),K=m("AppIconList"),N=m("a-modal"),V=m("a-row"),j=m("a-form"),M=m("a-tab-pane"),F=m("a-table-column"),B=m("a-input-number"),D=m("a-popconfirm"),Q=m("a-table"),E=m("a-tabs"),z=m("a-spin");return g(),b(N,{visible:e.visible,"onUpdate:visible":o[21]||(o[21]=a=>e.visible=a),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:o[22]||(o[22]=a=>e.visible=!1),width:"1000px",bodyStyle:{overflowY:"auto",height:"calc(100vh - 150px)"}},{footer:n(()=>[t(d,{type:"primary",onClick:o[0]||(o[0]=a=>e.saveForm()),loading:e.saveLoading},{default:n(()=>[le]),_:1},8,["loading"]),t(d,{type:"danger",ghost:"",onClick:o[1]||(o[1]=a=>e.visible=!1),class:"ml-15"},{default:n(()=>[ae]),_:1})]),default:n(()=>[t(z,{spinning:e.saveLoading},{default:n(()=>[t(E,{activeKey:e.activeKey,"onUpdate:activeKey":o[20]||(o[20]=a=>e.activeKey=a)},{default:n(()=>[t(M,{key:"1",tab:"\u57FA\u7840\u6570\u636E\u8BBE\u7F6E"},{default:n(()=>[t(j,{layout:"vertical",model:e.vm.form},{default:n(()=>[t(V,{gutter:[15,15]},{default:n(()=>[t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u9009\u9879\u7C7B\u578B"},{default:n(()=>[t(C,{value:e.vm.form.type,"onUpdate:value":o[2]||(o[2]=a=>e.vm.form.type=a)},{default:n(()=>[t(v,{value:1},{default:n(()=>[ue]),_:1}),t(v,{value:2},{default:n(()=>[se]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u83DC\u5355Id"},{default:n(()=>[t(p,{value:e.vm.form.id,"onUpdate:value":o[3]||(o[3]=a=>e.vm.form.id=a),placeholder:"\u8BF7\u8F93\u5165",readonly:""},null,8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u7F16\u53F7"},{default:n(()=>[t(p,{value:e.vm.form.number,"onUpdate:value":o[4]||(o[4]=a=>e.vm.form.number=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u83DC\u5355\u540D\u79F0"},{default:n(()=>[t(p,{value:e.vm.form.name,"onUpdate:value":o[5]||(o[5]=a=>e.vm.form.name=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),e.vm.form.type==2?(g(),b(r,{key:0,xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u7EC4\u4EF6\u540D\u79F0"},{default:n(()=>[t(p,{value:e.vm.form.componentName,"onUpdate:value":o[6]||(o[6]=a=>e.vm.form.componentName=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):h("",!0),e.vm.form.type==2?(g(),b(r,{key:1,xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u83DC\u5355\u9875\u9762\u7269\u7406\u5730\u5740"},{default:n(()=>[t(p,{value:e.vm.form.url,"onUpdate:value":o[7]||(o[7]=a=>e.vm.form.url=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):h("",!0),e.vm.form.type==2?(g(),b(r,{key:2,xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,null,{label:n(()=>[me,t(U,null,{title:n(()=>[ie]),default:n(()=>[t(L,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:n(()=>[t(p,{value:e.vm.form.router,"onUpdate:value":o[8]||(o[8]=a=>e.vm.form.router=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):h("",!0),e.vm.form.type==2?(g(),b(r,{key:3,xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,null,{label:n(()=>[de,t(U,null,{title:n(()=>[re]),default:n(()=>[t(L,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:n(()=>[t(p,{value:e.vm.form.jumpUrl,"onUpdate:value":o[9]||(o[9]=a=>e.vm.form.jumpUrl=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):h("",!0),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,null,{label:n(()=>[fe]),default:n(()=>[t(T,{value:e.vm.form.icon,"onUpdate:value":o[10]||(o[10]=a=>e.vm.form.icon=a),placeholder:"\u8BF7\u8F93\u5165",onSearch:o[11]||(o[11]=a=>e.iconFormcVisible=!e.iconFormcVisible)},{enterButton:n(()=>[t(L,{name:e.vm.form.icon},null,8,["name"])]),_:1},8,["value"]),t(N,{visible:e.iconFormcVisible,"onUpdate:visible":o[14]||(o[14]=a=>e.iconFormcVisible=a),title:"\u56FE\u6807\u5E93",width:"100%","wrap-class-name":"full-modal",footer:!1},{default:n(()=>[t(K,{name:e.vm.form.icon,"onUpdate:name":o[12]||(o[12]=a=>e.vm.form.icon=a),onOnChangeName:o[13]||(o[13]=()=>e.iconFormcVisible=!e.iconFormcVisible)},null,8,["name"])]),_:1},8,["visible"])]),_:1})]),_:1}),e.vm.form.type==2?(g(),b(r,{key:4,xs:24},{default:n(()=>[t(V,{style:{width:"100%"}},{default:n(()=>[t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,null,{label:n(()=>[ve,pe,_e,t(U,null,{title:n(()=>[ce]),default:n(()=>[t(L,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:n(()=>[t(C,{value:e.vm.form.show,"onUpdate:value":o[15]||(o[15]=a=>e.vm.form.show=a)},{default:n(()=>[t(v,{value:!0},{default:n(()=>[ge]),_:1}),t(v,{value:!1},{default:n(()=>[be]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,null,{label:n(()=>[ye,t(U,null,{title:n(()=>[Fe]),default:n(()=>[t(L,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:n(()=>[t(C,{value:e.vm.form.state,"onUpdate:value":o[16]||(o[16]=a=>e.vm.form.state=a)},{default:n(()=>[t(v,{value:!0},{default:n(()=>[he]),_:1}),t(v,{value:!1},{default:n(()=>[ke]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u662F\u5426\u7F13\u5B58\u7EC4\u4EF6"},{default:n(()=>[t(C,{value:e.vm.form.keepAlive,"onUpdate:value":o[17]||(o[17]=a=>e.vm.form.keepAlive=a)},{default:n(()=>[t(v,{value:!0},{default:n(()=>[Ce]),_:1}),t(v,{value:!1},{default:n(()=>[Le]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:n(()=>[t(f,{label:"\u9009\u9879\u5361\u80FD\u5426\u5173\u95ED"},{default:n(()=>[t(C,{value:e.vm.form.close,"onUpdate:value":o[18]||(o[18]=a=>e.vm.form.close=a)},{default:n(()=>[t(v,{value:!0},{default:n(()=>[Ue]),_:1}),t(v,{value:!1},{default:n(()=>[$e]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})):h("",!0)]),_:1})]),_:1},8,["model"])]),_:1}),e.vm.form.type==2?(g(),b(M,{key:"2",tab:"\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E","force-render":""},{default:n(()=>[t(Q,{"data-source":e.vm.menuFunctionList,size:"small",pagination:!1},{default:n(()=>[t(F,{key:"index",title:"\u7D22\u5F15"},{default:n(({index:a})=>[s(te(a+1),1)]),_:1}),t(F,{key:"number",title:"\u5E8F\u53F7","data-index":"number"},{default:n(({record:a})=>[t(B,{value:a.number,"onUpdate:value":_=>a.number=_,min:1,max:500},null,8,["value","onUpdate:value"])]),_:1}),t(F,{key:"functionCode",title:"\u529F\u80FD\u7F16\u7801","data-index":"functionCode"},{default:n(({record:a})=>[t(p,{value:a.functionCode,"onUpdate:value":_=>a.functionCode=_,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(F,{key:"functionName",title:"\u529F\u80FD\u540D\u79F0","data-index":"functionName"},{default:n(({record:a})=>[t(p,{value:a.functionName,"onUpdate:value":_=>a.functionName=_,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(F,{key:"remark",title:"\u5907\u6CE8","data-index":"remark"},{default:n(({record:a})=>[t(p,{value:a.remark,"onUpdate:value":_=>a.remark=_,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(F,{key:"action",title:"\u64CD\u4F5C"},{default:n(({index:a})=>[t(D,{title:"\u786E\u5B9A\u8981\u79FB\u9664\u5417\uFF1F","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:_=>e.removeRow(a)},{default:n(()=>[t(d,{type:"link",danger:""},{default:n(()=>[Ie]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data-source"]),w("div",Ae,[t(d,{type:"primary",onClick:o[19]||(o[19]=a=>e.addRow())},{default:n(()=>[we]),_:1}),t(d,{class:"ml-15",onClick:e.defaultRows},{default:n(()=>[Ne]),_:1},8,["onClick"]),t(d,{class:"ml-15",onClick:e.defaultDisplayRows},{default:n(()=>[Ve]),_:1},8,["onClick"])])]),_:1})):h("",!0)]),_:1},8,["activeKey"])]),_:1},8,["spinning"])]),_:1},8,["visible","title","bodyStyle"])}var Se=G(oe,[["render",Me]]),Ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Se});export{Se as I,Ke as a,R as s};
