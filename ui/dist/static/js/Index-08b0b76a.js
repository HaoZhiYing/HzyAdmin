var j=Object.defineProperty,E=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var $=(e,t,s)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t)=>{for(var s in t||(t={}))Y.call(t,s)&&$(e,s,t[s]);if(A)for(var s of A(t))z.call(t,s)&&$(e,s,t[s]);return e},D=(e,t)=>E(e,O(t));import{d as U,h as x,r as S,v as H,t as P,i as r,o as c,p as f,A as q,B as G,l as a,j as o,c as p,e as _,q as d,s as F,H as J,I as K,k as Q}from"./vendor-c8880a38.js";import{_ as W,A as X,u as Z,r as ee,t as te}from"./index-603a80b4.js";import ae from"./Info-b9d59510.js";import{o as B}from"./organizationService-b03d9876.js";const oe=U({name:"system_organization",components:{AppIcons:X,Info:ae},setup(){const e=Z(),t=x({table:{search:{state:!1,vm:{name:null,state:1}},loading:!1,data:[]}}),s=S(null),k=S(null),y=e.getPowerByMenuId(ee.currentRoute.value.meta.menuId),u={onResetSearch(){let l=t.table.search.vm;for(let i in l)l[i]=null;l.state=1,u.findList()},findList(){t.table.loading=!0,B.findList(t.table.search.vm).then(l=>{let i=l.data;t.table.loading=!1,t.table.data=i,J(()=>{u.setAllTreeExpand()})})},deleteList(l){let i=[];l&&i.push(l),B.deleteList(i).then(v=>{v.code==1&&(te.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),u.findList())})},openForm(l,i){s.value.openForm({visible:!0,key:l,parentId:i})},formatDate(l){return K(l).format("YYYY-MM-DD")},setAllTreeExpand(){k.value.setAllTreeExpand(!0)}};return H(()=>{u.findList()}),D(g(g({},P(t)),u),{power:y,formRef:s,refTable:k})}}),ne={class:"p-24"},se=d(" \u6B63\u5E38 "),le=d(" \u505C\u7528 "),re=d("\u67E5\u8BE2"),ie=d("\u91CD\u7F6E"),de={key:0},ce=d("\xA0\xA0\u6536\u8D77"),me={key:1},ue=d("\xA0\xA0\u5C55\u5F00"),fe=d(" \u65B0\u5EFA "),pe=d("\u6B63\u5E38"),_e=d("\u505C\u7528"),ve=["onClick"],he=["onClick"],ke=Q("a",{class:"text-danger"},"\u5220\u9664",-1);function be(e,t,s,k,y,u){const l=r("a-input"),i=r("a-col"),v=r("a-radio"),M=r("a-radio-group"),h=r("a-button"),C=r("a-row"),w=r("a-card"),b=r("AppIcons"),m=r("vxe-column"),T=r("a-tag"),I=r("a-divider"),R=r("a-popconfirm"),N=r("vxe-table"),V=r("Info");return c(),f("div",ne,[q(a(w,{class:"mb-24"},{default:o(()=>[a(C,{gutter:[24,24]},{default:o(()=>[a(i,{xs:24,sm:12,md:8,lg:6,xl:4},{default:o(()=>[a(l,{value:e.table.search.vm.name,"onUpdate:value":t[0]||(t[0]=n=>e.table.search.vm.name=n),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),a(i,{xs:24,sm:12,md:8,lg:6,xl:4,class:"pt-10"},{default:o(()=>[a(M,{value:e.table.search.vm.state,"onUpdate:value":t[1]||(t[1]=n=>e.table.search.vm.state=n)},{default:o(()=>[a(v,{value:1},{default:o(()=>[se]),_:1}),a(v,{value:2},{default:o(()=>[le]),_:1})]),_:1},8,["value"])]),_:1}),a(i,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:o(()=>[a(h,{type:"primary",class:"mr-24",onClick:e.findList},{default:o(()=>[re]),_:1},8,["onClick"]),a(h,{class:"mr-24",onClick:e.onResetSearch},{default:o(()=>[ie]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[G,e.table.search.state]]),a(w,null,{default:o(()=>[a(C,{gutter:[24,24]},{default:o(()=>[a(i,{xs:24,sm:24,md:12,lg:12,xl:12},{default:o(()=>[e.power.search?(c(),p(h,{key:0,class:"mr-24",onClick:t[2]||(t[2]=n=>e.table.search.state=!e.table.search.state)},{default:o(()=>[e.table.search.state?(c(),f("div",de,[a(b,{name:"UpOutlined"}),ce])):(c(),f("div",me,[a(b,{name:"DownOutlined"}),ue]))]),_:1})):_("",!0),e.power.insert?(c(),p(h,{key:1,type:"primary",class:"mr-24",onClick:t[3]||(t[3]=n=>e.openForm())},{icon:o(()=>[a(b,{name:"PlusOutlined"})]),default:o(()=>[fe]),_:1})):_("",!0)]),_:1})]),_:1}),a(N,{class:"mt-24",ref:"refTable",resizable:"",data:e.table.data,"row-config":{isHover:!0},"tree-config":{transform:!0,rowField:"id",parentField:"parentId"}},{default:o(()=>[a(m,{field:"name",title:"\u90E8\u95E8\u540D\u79F0","tree-node":""}),a(m,{field:"orderNumber",title:"\u6392\u5E8F\u53F7"}),a(m,{field:"levelCode",title:"\u7EA7\u522B\u7801"}),a(m,{field:"state",title:"\u72B6\u6001"},{default:o(({row:n})=>[n.state==1?(c(),p(T,{key:0,color:"success"},{default:o(()=>[pe]),_:1})):(c(),p(T,{key:1,color:"warning"},{default:o(()=>[_e]),_:1}))]),_:1}),a(m,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"},{default:o(({row:n})=>[d(F(e.formatDate(n.lastModificationTime)),1)]),_:1}),a(m,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"},{default:o(({row:n})=>[d(F(e.formatDate(n.creationTime)),1)]),_:1}),a(m,{field:"id",title:"\u64CD\u4F5C"},{default:o(({row:n})=>[e.power.insert?(c(),f("a",{key:0,href:"javascript:void(0)",onClick:L=>e.openForm(null,n.id)},"\u65B0\u5EFA",8,ve)):_("",!0),a(I,{type:"vertical"}),e.power.update?(c(),f("a",{key:1,href:"javascript:void(0)",onClick:L=>e.openForm(n.id)},"\u7F16\u8F91",8,he)):_("",!0),a(I,{type:"vertical"}),e.power.delete?(c(),p(R,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:L=>e.deleteList(n.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[ke]),_:2},1032,["onConfirm"])):_("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),a(V,{ref:"formRef",onOnSuccess:t[4]||(t[4]=()=>e.findList())},null,512)])}var Ie=W(oe,[["render",be]]);export{Ie as default};
