var j=Object.defineProperty,J=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var $=(t,e,r)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F=(t,e)=>{for(var r in e||(e={}))M.call(e,r)&&$(t,r,e[r]);if(S)for(var r of S(e))q.call(e,r)&&$(t,r,e[r]);return t},I=(t,e)=>J(t,U(e));import{d as G,s as H,e as v,t as K,u as Q,f as l,q as u,v as h,E as X,G as Y,y as o,m as n,j as f,A as g,x as A,B as c}from"./vendor-d5c27e5b.js";import{_ as Z,A as ee,a as te,r as oe,t as ne}from"./index-54f9c979.js";import{I as ae,s as L}from"./Info-f7b07ec2.js";import le from"./RoleFunction-99363f92.js";import se from"./RoleDataAuthority-ee443d71.js";import"./organizationService-10381a73.js";const ie=G({name:"system_role",components:{AppIcon:ee,Info:ae,RoleFunction:le,RoleDataAuthority:se},setup(){const t=te(),e=H({table:{search:{state:!1,fieldCount:2,vm:{name:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}}),r=v(null),b=v(null),k=v(null),y=v(null),w=t.getPowerByMenuId(oe.currentRoute.value.meta.menuId),d={onChange(a){const{currentPage:s,pageSize:p}=a;e.table.page=s==0?1:s,e.table.rows=p,d.findList()},onResetSearch(){e.table.page=1;let a=e.table.search.vm;for(let s in a)a[s]=null;d.findList()},findList(){e.table.loading=!0,L.findList(e.table.rows,e.table.page,e.table.search.vm).then(a=>{let s=a.data;e.table.loading=!1,e.table.page=s.page,e.table.rows=s.size,e.table.total=s.total,e.table.data=s.dataSource})},deleteList(a){let s=[];a?s.push(a):s=k.value.getCheckboxRecords().map(p=>p.id),L.deleteList(s).then(p=>{p.code==1&&(ne.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),d.findList())})},openForm(a){r.value.openForm({visible:!0,key:a})},exportExcel(){L.exportExcel(e.table.search.vm)},openRoleFunctionWindow(a){b.value.openWindow({visible:!0,key:a})},openRoleDataAuthorityWindow(a){y.value.openWindow({visible:!0,key:a})}};return K(()=>{d.findList()}),I(F(F({},Q(e)),d),{power:w,refTable:k,refForm:r,refRoleFunction:b,refRoleDataAuthority:y})}}),re=c("\u67E5\u8BE2"),de=c("\u91CD\u7F6E"),ue={key:0},ce=c("\xA0\xA0\u6536\u8D77"),pe={key:1},me=c("\xA0\xA0\u5C55\u5F00"),fe=c(" \u65B0\u5EFA "),_e=c(" \u6279\u91CF\u5220\u9664 "),ge=c("\u5BFC\u51FA Excel"),ve=c(" \u66F4\u591A\u64CD\u4F5C "),he=c("\u9501\u5B9A"),be=c("\u4E0D\u9501\u5B9A"),ke=["onClick"],ye=A("a",{class:"text-danger"},"\u5220\u9664",-1),we=["onClick"],Ce=["onClick"];function Re(t,e,r,b,k,y){const w=l("a-input"),d=l("a-col"),a=l("a-button"),s=l("a-row"),p=l("a-card"),_=l("AppIcon"),z=l("a-popconfirm"),T=l("a-menu-item"),x=l("a-menu"),P=l("a-dropdown"),m=l("vxe-column"),D=l("a-tag"),C=l("a-divider"),O=l("vxe-table"),N=l("vxe-pager"),B=l("a-spin"),E=l("Info"),W=l("RoleFunction"),V=l("RoleDataAuthority");return u(),h("div",null,[X(o(p,{class:"mb-15"},{default:n(()=>[o(s,{gutter:[15,15]},{default:n(()=>[o(d,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[o(w,{value:t.table.search.vm.name,"onUpdate:value":e[0]||(e[0]=i=>t.table.search.vm.name=i),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),o(d,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:n(()=>[o(a,{type:"primary",class:"mr-15",onClick:t.findList},{default:n(()=>[re]),_:1},8,["onClick"]),o(a,{class:"mr-15",onClick:t.onResetSearch},{default:n(()=>[de]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[Y,t.table.search.state]]),o(p,null,{default:n(()=>[o(s,{gutter:[15,15]},{default:n(()=>[o(d,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[t.power.search?(u(),f(a,{key:0,class:"mr-15",onClick:e[1]||(e[1]=i=>t.table.search.state=!t.table.search.state)},{default:n(()=>[t.table.search.state?(u(),h("div",ue,[o(_,{name:"UpOutlined"}),ce])):(u(),h("div",pe,[o(_,{name:"DownOutlined"}),me]))]),_:1})):g("",!0),t.power.insert?(u(),f(a,{key:1,type:"primary",class:"mr-15",onClick:e[2]||(e[2]=i=>t.openForm())},{icon:n(()=>[o(_,{name:"PlusOutlined"})]),default:n(()=>[fe]),_:1})):g("",!0),t.power.delete?(u(),f(z,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:e[3]||(e[3]=i=>t.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[o(a,{type:"danger",class:"mr-15"},{icon:n(()=>[o(_,{name:"DeleteOutlined"})]),default:n(()=>[_e]),_:1})]),_:1})):g("",!0)]),_:1}),o(d,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:n(()=>[o(P,null,{overlay:n(()=>[o(x,null,{default:n(()=>[o(T,{key:"1",onClick:t.exportExcel},{default:n(()=>[ge]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[o(a,null,{default:n(()=>[ve,o(_,{name:"DownOutlined"})]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{spinning:t.table.loading},{default:n(()=>[o(O,{class:"mt-15",ref:"refTable",size:"medium",border:"",stripe:"",data:t.table.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0}},{default:n(()=>[o(m,{type:"checkbox",width:"60"}),o(m,{field:"number",title:"\u7F16\u53F7",width:"100"}),o(m,{field:"name",title:"\u89D2\u8272\u540D\u79F0"}),o(m,{field:"deleteLock",title:"\u5220\u9664\u9501\u5B9A"},{default:n(({row:i})=>[i.deleteLock?(u(),f(D,{key:0,color:"success"},{default:n(()=>[he]),_:1})):(u(),f(D,{key:1,color:"warning"},{default:n(()=>[be]),_:1}))]),_:1}),o(m,{field:"remark",title:"\u5907\u6CE8"}),o(m,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"}),o(m,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"}),o(m,{field:"id",title:"\u64CD\u4F5C",width:"300"},{default:n(({row:i})=>[t.power.update?(u(),h("a",{key:0,href:"javascript:void(0)",onClick:R=>t.openForm(i.id)},"\u7F16\u8F91",8,ke)):g("",!0),o(C,{type:"vertical"}),t.power.delete?(u(),f(z,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:R=>t.deleteList(i.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[ye]),_:2},1032,["onConfirm"])):g("",!0),o(C,{type:"vertical"}),A("a",{href:"javascript:void(0)",onClick:R=>t.openRoleFunctionWindow(i.id)},"\u529F\u80FD\u6743\u9650",8,we),o(C,{type:"vertical"}),A("a",{href:"javascript:void(0)",onClick:R=>t.openRoleDataAuthorityWindow(i.id)},"\u6570\u636E\u6743\u9650",8,Ce)]),_:1})]),_:1},8,["data"]),o(N,{class:"mt-15",background:"","current-page":t.table.page,"onUpdate:current-page":e[4]||(e[4]=i=>t.table.page=i),"page-size":t.table.rows,"onUpdate:page-size":e[5]||(e[5]=i=>t.table.rows=i),total:t.table.total,"page-sizes":t.table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:t.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1}),o(E,{ref:"refForm",onOnSuccess:e[6]||(e[6]=()=>t.findList())},null,512),o(W,{ref:"refRoleFunction"},null,512),o(V,{ref:"refRoleDataAuthority"},null,512)])}var Ie=Z(ie,[["render",Re]]);export{Ie as default};
