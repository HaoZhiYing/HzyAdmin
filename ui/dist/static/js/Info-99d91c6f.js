var P=Object.defineProperty,V=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var F=(e,a,t)=>a in e?P(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,g=(e,a)=>{for(var t in a||(a={}))D.call(a,t)&&F(e,t,a[t]);if(I)for(var t of I(a))E.call(a,t)&&F(e,t,a[t]);return e},U=(e,a)=>V(e,j(a));import{_ as H,s as c,t as T}from"./index-2d81a173.js";import{o as Q}from"./organizationService-ecf4abcb.js";import{d as x,s as A,e as G,u as J,f as r,q as v,j as y,m as o,y as l,v as N,z as $,B as i,C,F as R,Q as K}from"./vendor-4ca571b9.js";const M=x({name:"system_user_info",props:{onSuccess:Function},setup(e,a){const t=A({vm:{id:"",form:{},roleIds:[],allRoleList:[],allPostList:[]},visible:!1,saveLoading:!1,organizationTree:[]}),p=G(null),k={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D",trigger:"blur"}],loginName:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",trigger:"blur"}]},f={findForm(){return t.saveLoading=!0,c.findForm(t.vm.id).then(s=>{t.saveLoading=!1,s.code==1&&(t.vm=s.data,t.vm.form.password="")})},saveForm(){if(!t.vm.form.organizationId)return T.message("\u8BF7\u9009\u62E9\u7EC4\u7EC7","\u8B66\u544A");p.value.validate().then(()=>{t.saveLoading=!0,c.saveForm(t.vm).then(s=>{s.code==1&&(T.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),a.emit("onSuccess",s.data),t.visible=!1)}).finally(()=>{t.saveLoading=!1})})},openForm({visible:s,key:u,organizationId:m}){t.visible=s,s&&(t.vm.id=u,K(()=>{p.value.resetFields(),f.sysOrganizationTree()}),f.findForm().then(d=>{u||(t.vm.form.organizationId=m)}))},sysOrganizationTree(){Q.sysOrganizationTree().then(s=>{t.organizationTree=s.data.rows})}};return a.expose(g({},f)),U(g(g({},J(t)),f),{rules:k,formRef:p})}}),W=i("\u63D0\u4EA4"),X=i("\u5173\u95ED"),Y=i("\u9501\u5B9A"),Z=i("\u4E0D\u9501\u5B9A");function ee(e,a,t,p,k,f){const s=r("a-button"),u=r("a-input"),m=r("a-form-item"),d=r("a-col"),B=r("a-tree-select"),L=r("a-radio"),O=r("a-radio-group"),w=r("a-checkbox"),_=r("a-row"),z=r("a-checkbox-group"),S=r("a-form"),h=r("a-spin"),q=r("a-modal");return v(),y(q,{visible:e.visible,"onUpdate:visible":a[11]||(a[11]=n=>e.visible=n),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:a[12]||(a[12]=n=>e.visible=!1),width:800},{footer:o(()=>[l(s,{type:"primary",onClick:a[0]||(a[0]=n=>e.saveForm()),loading:e.saveLoading},{default:o(()=>[W]),_:1},8,["loading"]),l(s,{type:"danger",ghost:"",onClick:a[1]||(a[1]=n=>e.visible=!1),class:"ml-15"},{default:o(()=>[X]),_:1})]),default:o(()=>[l(h,{spinning:e.saveLoading},{default:o(()=>[l(S,{ref:"formRef",layout:"vertical",model:e.vm.form,rules:e.rules},{default:o(()=>[l(_,{gutter:[15,15]},{default:o(()=>[l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u771F\u5B9E\u59D3\u540D",ref:"name",name:"name"},{default:o(()=>[l(u,{value:e.vm.form.name,"onUpdate:value":a[2]||(a[2]=n=>e.vm.form.name=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u8D26\u6237\u540D\u79F0",ref:"loginName",name:"loginName"},{default:o(()=>[l(u,{value:e.vm.form.loginName,"onUpdate:value":a[3]||(a[3]=n=>e.vm.form.loginName=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u8D26\u6237\u5BC6\u7801"},{default:o(()=>[l(u,{value:e.vm.form.password,"onUpdate:value":a[4]||(a[4]=n=>e.vm.form.password=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:o(()=>[l(u,{value:e.vm.form.phone,"onUpdate:value":a[5]||(a[5]=n=>e.vm.form.phone=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u90AE\u7BB1\u5730\u5740"},{default:o(()=>[l(u,{value:e.vm.form.email,"onUpdate:value":a[6]||(a[6]=n=>e.vm.form.email=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u6240\u5C5E\u7EC4\u7EC7"},{default:o(()=>[l(B,{value:e.vm.form.organizationId,"onUpdate:value":a[7]||(a[7]=n=>e.vm.form.organizationId=n),"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"\u6240\u5C5E\u7EC4\u7EC7","allow-clear":"","tree-default-expand-all":"","tree-data":e.organizationTree,"field-names":{children:"children",label:"title",key:"key",value:"key"}},null,8,["value","tree-data"])]),_:1})]),_:1}),l(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[l(m,{label:"\u5220\u9664\u9501\u5B9A"},{default:o(()=>[l(O,{value:e.vm.form.deleteLock,"onUpdate:value":a[8]||(a[8]=n=>e.vm.form.deleteLock=n)},{default:o(()=>[l(L,{value:!0},{default:o(()=>[Y]),_:1}),l(L,{value:!1},{default:o(()=>[Z]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[l(m,{label:"\u6240\u5C5E\u5C97\u4F4D"},{default:o(()=>[l(z,{value:e.vm.postIds,"onUpdate:value":a[9]||(a[9]=n=>e.vm.postIds=n),class:"w100"},{default:o(()=>[l(_,{gutter:[16,16]},{default:o(()=>[(v(!0),N(R,null,$(e.vm.allPostList,(n,b)=>(v(),y(d,{span:6,key:b},{default:o(()=>[l(w,{value:n.id},{default:o(()=>[i(C(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(d,{xs:24},{default:o(()=>[l(m,{label:"\u6240\u5C5E\u89D2\u8272"},{default:o(()=>[l(z,{value:e.vm.roleIds,"onUpdate:value":a[10]||(a[10]=n=>e.vm.roleIds=n),class:"w100"},{default:o(()=>[l(_,{gutter:[16,16]},{default:o(()=>[(v(!0),N(R,null,$(e.vm.allRoleList,(n,b)=>(v(),y(d,{span:6,key:b},{default:o(()=>[l(w,{value:n.id},{default:o(()=>[i(C(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}var te=H(M,[["render",ee],["__scopeId","data-v-75614277"]]);export{te as default};
