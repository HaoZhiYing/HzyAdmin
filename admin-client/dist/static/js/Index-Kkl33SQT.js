import{d as j,r as A,b_ as M,b as C,e as E,f as i,o as n,l as _,w as s,a,u as x,j as d,B as v,c as g,t as h,M as K,g as D,T as $,p as P,k as R}from"./index-C9oHGpmd.js";import{_ as b}from"./AppIcon.vue_vue_type_script_setup_true_lang-o_ph5tPH.js";import{S as I,_ as q}from"./Info.vue_vue_type_script_setup_true_lang-zmG6Vobr.js";import{_ as G}from"./PageContainer.vue_vue_type_script_setup_true_lang-w--qcJ6v.js";import{_ as H}from"./TableCurd.vue_vue_type_script_setup_true_lang-nb7-a0jh.js";import{_ as J}from"./_plugin-vue_export-helper-x3n3nnut.js";import"./ColumnSetting.vue_vue_type_script_setup_true_lang-dsx0k3kj.js";const Q=w=>(P("data-v-86b6aed7"),w=w(),R(),w),W={key:0},X={key:1},Y={key:0,class:"cell",style:{background:"orange"}},Z={key:1,class:"cell",style:{background:"red"}},ee={key:2,class:"cell",style:{background:"#87d068"}},te=["onClick"],ae=Q(()=>D("a",{class:"text-danger"},"删除",-1)),oe=j({name:"system_function",__name:"Index",setup(w){const t=A({search:{state:!1,vm:{api:void 0,browser:void 0,ip:void 0,os:void 0,rangeTime:[],startTime:void 0,endTime:void 0},sort:[]},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),y=M(),S=C(),T=C(),U=C();E(()=>{p()});async function p(){try{t.loading=!0;const l=await I.findList(t.page,t.size,t.search.vm,t.search.sort);if(t.loading=!1,l.code!=200)return;t.page=l.data.page,t.size=l.data.size,t.total=l.data.total,t.columns=l.data.columns,t.data=l.data.dataSource}catch{t.loading=!1}}async function z(l){var c;let o=[];if(l?o.push(l):o=((c=S.value)==null?void 0:c.getSelectedRowKeys())??[],o.length==0)return $.message.error("请选择要删除的行!");try{t.loading=!0;const m=await I.deleteList(o);if(t.loading=!1,m.code!=200)return;$.message.success("删除成功!"),p()}catch{t.loading=!1}}return(l,o)=>{const c=i("a-input"),m=i("a-form-item"),f=i("a-col"),B=i("a-range-picker"),k=i("a-button"),L=i("a-space"),O=i("a-row"),F=i("a-form"),N=i("a-popconfirm"),r=i("a-table-column"),V=i("a-divider");return n(),_(G,null,{default:s(()=>[a(H,{ref_key:"refTableCurd",ref:S,config:t,"onUpdate:config":o[10]||(o[10]=e=>t=e),onChange:o[11]||(o[11]=e=>{t.page=e.pagination.current??1,t.size=e.pagination.pageSize??t.size,t.search.sort=e.sorter instanceof Array?[...e.sorter]:[e.sorter],p()}),onShowSizeChange:o[12]||(o[12]=({current:e,size:u})=>{t.page=e==0?1:e,t.size=u,p()}),"column-setting":!1},{search:s(()=>[x(y).search?(n(),_(F,{key:0,ref_key:"refSearchForm",ref:U,model:t.search.vm},{default:s(()=>[a(O,{gutter:[16,0]},{default:s(()=>[a(f,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[a(m,{name:"api",label:"接口地址"},{default:s(()=>[a(c,{value:t.search.vm.api,"onUpdate:value":o[0]||(o[0]=e=>t.search.vm.api=e),placeholder:"接口地址"},null,8,["value"])]),_:1})]),_:1}),a(f,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[a(m,{name:"browser",label:"浏览器"},{default:s(()=>[a(c,{value:t.search.vm.browser,"onUpdate:value":o[1]||(o[1]=e=>t.search.vm.browser=e),placeholder:"浏览器"},null,8,["value"])]),_:1})]),_:1}),a(f,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[a(m,{name:"ip",label:"ip地址"},{default:s(()=>[a(c,{value:t.search.vm.ip,"onUpdate:value":o[2]||(o[2]=e=>t.search.vm.ip=e),placeholder:"ip地址"},null,8,["value"])]),_:1})]),_:1}),a(f,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[a(m,{name:"os",label:"操作系统"},{default:s(()=>[a(c,{value:t.search.vm.os,"onUpdate:value":o[3]||(o[3]=e=>t.search.vm.os=e),placeholder:"操作系统"},null,8,["value"])]),_:1})]),_:1}),a(f,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[a(m,{name:"rangeTime",label:"日期区间"},{default:s(()=>[a(B,{value:t.search.vm.rangeTime,"onUpdate:value":o[4]||(o[4]=e=>t.search.vm.rangeTime=e),class:"w100"},null,8,["value"])]),_:1})]),_:1}),a(f,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:s(()=>[a(L,{size:8},{default:s(()=>[a(k,{onClick:o[5]||(o[5]=e=>{var u;t.page=1,(u=U.value)==null||u.resetFields(),p()})},{default:s(()=>[d(" 重置 ")]),_:1}),a(k,{type:"primary",onClick:o[6]||(o[6]=e=>{t.page=1,p()})},{default:s(()=>[d(" 查询 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):v("",!0)]),"toolbar-left":s(()=>[x(y).search?(n(),_(k,{key:0,onClick:o[7]||(o[7]=e=>t.search.state=!t.search.state)},{default:s(()=>[t.search.state?(n(),g("div",W,[a(b,{name:"UpOutlined"}),d("  收起")])):(n(),g("div",X,[a(b,{name:"DownOutlined"}),d("  展开")]))]),_:1})):v("",!0),x(y).insert?(n(),_(k,{key:1,type:"primary",onClick:o[8]||(o[8]=()=>{var e;return(e=T.value)==null?void 0:e.open()})},{icon:s(()=>[a(b,{name:"PlusOutlined"})]),default:s(()=>[d(" 新建 ")]),_:1})):v("",!0),x(y).delete?(n(),_(N,{key:2,title:"您确定要删除?",onConfirm:o[9]||(o[9]=e=>z()),okText:"确定",cancelText:"取消"},{default:s(()=>[a(k,{type:"primary",danger:""},{icon:s(()=>[a(b,{name:"DeleteOutlined"})]),default:s(()=>[d(" 批量删除 ")]),_:1})]),_:1})):v("",!0)]),"toolbar-right":s(()=>[]),"table-col":s(()=>[a(r,{title:"接口地址","data-index":"api",width:250,ellipsis:!0,fixed:"left"}),a(r,{title:"操作系统","data-index":"os",width:100}),a(r,{title:"浏览器","data-index":"browser",width:100}),a(r,{title:"ip地址","data-index":"ip",width:120}),a(r,{title:"接口描述",width:200},{default:s(({record:e})=>[d(h(e.controllerDisplayName)+" ",1),e.controllerDisplayName&&e.actionDisplayName?(n(),g(K,{key:0},[d(" -")],64)):v("",!0),d(" "+h(e.actionDisplayName),1)]),_:1}),a(r,{title:"接口耗时","data-index":"takeUpTime",width:100},{default:s(({record:e})=>[e.takeUpTime>=1e3?(n(),g("div",Y,h(e.takeUpTime)+"(毫秒)",1)):e.takeUpTime>=2e3?(n(),g("div",Z,h(e.takeUpTime)+"(毫秒)",1)):(n(),g("div",ee,h(e.takeUpTime)+"(毫秒)",1))]),_:1}),a(r,{title:"操作人姓名","data-index":"userName",width:100}),a(r,{title:"操作人账号","data-index":"loginName",width:100}),a(r,{title:"创建时间","data-index":"creationTime",width:150}),a(r,{title:"操作","data-index":"id",width:100},{default:s(({record:e})=>[D("a",{href:"javascript:;",onClick:()=>{var u;return(u=T.value)==null?void 0:u.open(e.id)}},"详情",8,te),a(V,{type:"vertical"}),x(y).delete?(n(),_(N,{key:0,title:"您确定要删除?",onConfirm:u=>z(e.id),okText:"确定",cancelText:"取消"},{default:s(()=>[ae]),_:2},1032,["onConfirm"])):v("",!0)]),_:1})]),_:1},8,["config"]),a(q,{ref_key:"refInfo",ref:T,onSuccess:()=>p()},null,8,["onSuccess"])]),_:1})}}}),ue=J(oe,[["__scopeId","data-v-86b6aed7"]]);export{ue as default};
