import{T as x}from"./TimedTaskService-cU1EcDFL.js";import{d as k,r as w,f as r,o as m,l as f,w as l,a as p,c as C,G as L,j as c,t as g,M as T}from"./index-cV5RpzD5.js";const N=k({__name:"LogInfo",setup(h,{expose:u}){const e=w({vm:{id:"",form:{}},visible:!1,loading:!1,page:1});u({open:(n="")=>{e.visible=!0,e.visible&&(e.vm.id=n),d(n,!0)}});function d(n,t){e.loading=!0,x.getJobLoggers(n,e.page).then(a=>{if(e.loading=!1,a.code!=200)return;if(e.vm.form.data=a.data,!a.data||a.data.length==0){e.page=e.page-1;return}const o=[];t||e.vm.form.data.forEach(i=>{o.push(i)}),a.data.forEach(i=>{o.push(i)}),e.vm.form.data=o})}function _(){e.page=e.page+1,d(e.vm.id,!1)}return(n,t)=>{const a=r("a-timeline-item"),o=r("a-timeline"),i=r("a-button"),v=r("a-spin"),b=r("a-drawer");return m(),f(b,{open:e.visible,"onUpdate:open":t[1]||(t[1]=s=>e.visible=s),title:"任务日志",centered:"",onOk:t[2]||(t[2]=s=>e.visible=!1),width:1200},{default:l(()=>[p(v,{spinning:e.loading},{default:l(()=>[p(o,null,{default:l(()=>[(m(!0),C(T,null,L(e.vm.form.data,s=>(m(),f(a,null,{default:l(()=>[c(g(s.text),1)]),_:2},1024))),256))]),_:1}),p(i,{type:"primary",class:"mt-18",block:"",onClick:t[0]||(t[0]=s=>_())},{default:l(()=>[c("Next Page "+g(e.page),1)]),_:1})]),_:1},8,["spinning"])]),_:1},8,["open"])}}});export{N as _};
