import{d as A,y as k,C as q,r as l,o as D,e as N,w as o,a as u,i as r,u as T,g as U,v as j,f as P,m as S}from"./index-1d0f4517.js";import{_ as M}from"./GenerateCron.vue_vue_type_script_setup_true_lang-50cd7a31.js";import{T as F}from"./TimedTaskService-177a0ee8.js";const $=P("a",{target:"_blank",href:"https://www.bejson.com/othertools/cron/"},"\u5728\u7EBF\u751F\u6210\u89C4\u5219",-1),G=A({__name:"Info",props:{onSuccess:{type:Function}},setup(g,{expose:c}){const b=g,e=k({vm:{id:"",form:{}},visible:!1,loading:!1}),B={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u540D\u79F0",trigger:"blur"}],groupName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5206\u7EC4\u540D\u79F0",trigger:"blur"}],cron:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9A\u65F6\u89C4\u5219",trigger:"blur"}],jobPoint:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F5C\u4E1A\u70B9",trigger:"blur"}]},v=q();c({open:(s="")=>{var t;e.visible=!0,e.visible&&(e.vm.id=s),(t=v.value)==null||t.resetFields(),e.loading=!0,F.findForm(s).then(i=>{var d;e.loading=!1,i.code==1&&(e.vm.form=i.data,e.vm.form.cron=(d=e.vm.form.cron)!=null?d:"* * * * * ? *")})}});function x(){var s;(s=v.value)==null||s.validate().then(async()=>{e.loading=!0,(await F.saveForm(e.vm.id,e.vm.form)).code==1&&(S.message.success("\u64CD\u4F5C\u6210\u529F!"),b.onSuccess(),e.visible=!1)})}return(s,t)=>{const i=l("a-button"),d=l("a-input"),n=l("a-form-item"),m=l("a-col"),f=l("a-select-option"),p=l("a-select"),_=l("a-textarea"),C=l("a-row"),E=l("a-form"),w=l("a-spin"),y=l("a-modal");return D(),N(y,{visible:e.visible,"onUpdate:visible":t[9]||(t[9]=a=>e.visible=a),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:t[10]||(t[10]=a=>e.visible=!1),width:800},{footer:o(()=>[u(i,{type:"primary",loading:e.loading,onClick:t[0]||(t[0]=a=>x())},{default:o(()=>[r(" \u63D0\u4EA4")]),_:1},8,["loading"]),u(i,{onClick:t[1]||(t[1]=a=>e.visible=!1)},{default:o(()=>[r("\u5173\u95ED")]),_:1})]),default:o(()=>[u(w,{spinning:e.loading},{default:o(()=>[u(E,{ref_key:"refForm",ref:v,layout:"vertical",model:e.vm.form,rules:T(B)},{default:o(()=>[u(C,{gutter:[16,0]},{default:o(()=>[u(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[u(n,{label:"\u5206\u7EC4",ref:"groupName",name:"groupName"},{default:o(()=>[u(d,{value:e.vm.form.groupName,"onUpdate:value":t[2]||(t[2]=a=>e.vm.form.groupName=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),u(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[u(n,{label:"\u4EFB\u52A1\u540D\u79F0",ref:"name",name:"name"},{default:o(()=>[u(d,{value:e.vm.form.name,"onUpdate:value":t[3]||(t[3]=a=>e.vm.form.name=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),u(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[u(n,{label:"\u4EFB\u52A1\u7C7B\u578B",ref:"type",name:"type"},{default:o(()=>[u(p,{value:e.vm.form.type,"onUpdate:value":t[4]||(t[4]=a=>e.vm.form.type=a)},{default:o(()=>[u(f,{value:1},{default:o(()=>[r("WebApi")]),_:1}),u(f,{value:2},{default:o(()=>[r("Local")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1}),u(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[u(n,{ref:"cron",name:"cron"},{label:o(()=>[r(" \u5B9A\u65F6\u89C4\u5219 \xA0 "),$]),default:o(()=>[u(M,{value:e.vm.form.cron,"onUpdate:value":t[5]||(t[5]=a=>e.vm.form.cron=a)},null,8,["value"])]),_:1},512)]),_:1}),U(u(m,{xs:24,sm:12,md:12,lg:12,xl:12},{default:o(()=>[u(n,{label:"\u8BF7\u6C42\u65B9\u5F0F",ref:"requsetMode",name:"requsetMode"},{default:o(()=>[u(p,{value:e.vm.form.requsetMode,"onUpdate:value":t[6]||(t[6]=a=>e.vm.form.requsetMode=a)},{default:o(()=>[u(f,{value:0},{default:o(()=>[r("POST")]),_:1}),u(f,{value:1},{default:o(()=>[r("GET")]),_:1}),u(f,{value:2},{default:o(()=>[r("DELETE")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1},512),[[j,e.vm.form.type==1]]),u(m,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[u(n,{label:"jobPoint",ref:"jobPoint",name:"jobPoint"},{default:o(()=>[u(_,{value:e.vm.form.jobPoint,"onUpdate:value":t[7]||(t[7]=a=>e.vm.form.jobPoint=a),placeholder:"\u8BF7\u8F93\u5165",rows:4},null,8,["value"])]),_:1},512)]),_:1}),u(m,{xs:24,sm:24,md:24,lg:24,xl:24},{default:o(()=>[u(n,{label:"\u63CF\u8FF0"},{default:o(()=>[u(_,{value:e.vm.form.remark,"onUpdate:value":t[8]||(t[8]=a=>e.vm.form.remark=a),placeholder:"\u8BF7\u8F93\u5165",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{G as _};
