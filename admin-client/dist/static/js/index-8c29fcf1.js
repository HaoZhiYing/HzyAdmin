import{i as ot,a as gt,b as J,r as xt,g as ul,t as cl,c as fl,z as dl,d as hl,e as vl,f as gl,p as pl,h as yl,j as xl,k as ml,l as Fl,m as bl,_ as rt,n as E,o as $,q as Al,s as x,u as Je,v as tn,w as wl,x as qn,y as Qr,A as Jr,B as lt,D as Zi,E as Sl,F as be,G as B,C as Dl,H as El,I as se,J as It,K as An,L as pt,M as ze,N as Ar,O as Ki,P as Xt,Q as nt,R as bt,S as Mt,T as Qi,U as Ol,V as Ji,W as wr,X as Il,Y as st,Z as Lt,$ as Ct,a0 as Qt,a1 as ti,a2 as Ml,a3 as kl,a4 as Ne,a5 as ta,a6 as Tl,a7 as ea,a8 as Pl,a9 as Ce,aa as ei,ab as wn,ac as ni,ad as ri,ae as $l,af as Un,ag as Ll,ah as Cl,ai as Rl,aj as Sn,ak as Xn,al as zl,am as Nl}from"./index-1aebf46e.js";function na(t,e,n){n===void 0&&(n=0);for(var r=n;r<t.length;r++)if(e(t[r],r))return r;return-1}function _l(t,e){var n;if(ot(e))n=function(i,a){return e(i)-e(a)};else{var r=[];gt(e)?r.push(e):J(e)&&(r=e),n=function(i,a){for(var o=0;o<r.length;o+=1){var u=r[o];if(i[u]>a[u])return 1;if(i[u]<a[u])return-1}return 0}}return t.sort(n),t}const ra=function(t,e){if(J(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=ot(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}},Vl=function(t,e){if(J(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=ot(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}},Dn=function(t,e){return xt(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})};var mt={getLegendItems:ul,translate:cl,rotate:fl,zoom:dl,transform:hl,getAngle:vl,getSectorPath:gl,polarToCartesian:pl,getDelegationObject:yl,getTooltipItems:xl,getMappingValue:ml,getPath:Fl,getPathPoints:bl};function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(n){return t.reduce(function(r,i){return i(r)},n)}}function K(t,e){var n={};return t!==null&&typeof t=="object"&&e.forEach(function(r){var i=t[r];i!==void 0&&(n[r]=i)}),n}function ia(t,e){return e?xt(e,function(n,r,i){return n.replace(new RegExp("{\\s*"+i+"\\s*}","g"),r)},t):t}var Pt;(function(t){t.ERROR="error",t.WARN="warn",t.INFO="log"})(Pt||(Pt={}));var Wl="AntV/G2Plot";function Bl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=0;return Wl+": "+t.replace(/%s/g,function(){return""+e[r++]})}function Ut(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e||console[t](Bl.apply(void 0,rt([n],r)))}function or(t){if(!t)return{width:0,height:0};var e=getComputedStyle(t);return{width:(t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10),height:(t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)}}function ht(t,e){return t.geometries.find(function(n){return n.type===e})}function gn(t){return xt(t.geometries,function(e,n){return e.concat(n.elements)},[])}function _e(t){return E(t,["views","length"],0)<=0?gn(t):xt(t.views,function(e,n){return e.concat(_e(n))},gn(t))}function Gl(t){return E(t,["views","length"],0)<=0?t.geometries:xt(t.views,function(e,n){return e.concat(n.geometries)},t.geometries)}function q(t,e){return t.views.find(function(n){return n.id===e})}function Pe(t){var e=t.parent;return e?e.views:[]}function ii(t){return Pe(t).filter(function(e){return e!==t})}function Ye(t,e,n){n===void 0&&(n=t.geometries),typeof e=="boolean"?t.animate(e):t.animate(!0),$(n,function(r){var i;ot(e)?i=e(r.type||r.shapeType,r)||!0:i=e,r.animate(i)})}function dt(t){if(!Al(t,"Object"))return t;var e=x({},t);return e.formatter&&!e.content&&(e.content=e.formatter),e}function ql(t,e){var n=[];if(t.length){n.push(["M",t[0].x,t[0].y]);for(var r=1,i=t.length;r<i;r+=1){var a=t[r];n.push(["L",a.x,a.y])}e&&n.push(["Z"])}return n}var Ul=function(t,e,n,r){var i=[],a,o,u=!!r,l,s;if(u){l=[1/0,1/0],s=[-1/0,-1/0];for(var c=0,f=t.length;c<f;c++){var d=t[c];l=Je([0,0],l,d),s=tn([0,0],s,d)}l=Je([0,0],l,r[0]),s=tn([0,0],s,r[1])}for(var c=0,h=t.length;c<h;c++){var d=t[c];if(n)a=t[c?c-1:h-1],o=t[(c+1)%h];else if(c===0||c===h-1){i.push(d);continue}else a=t[c-1],o=t[c+1];var v=[0,0];v=wl(v,o,a),v=qn(v,v,e);var g=Qr(d,a),y=Qr(d,o),p=g+y;p!==0&&(g/=p,y/=p);var m=qn([0,0],v,-g),b=qn([0,0],v,y),F=Jr([0,0],d,m),w=Jr([0,0],d,b);u&&(F=tn([0,0],F,l),F=Je([0,0],F,s),w=tn([0,0],w,l),w=Je([0,0],w,s)),i.push(F),i.push(w)}return n&&i.push(i.shift()),i};function Xl(t,e,n){for(var r=!!e,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var u=Ul(i,.4,r,n),l=i.length,s=[],c,f,d,a=0;a<l-1;a++)c=u[a*2],f=u[a*2+1],d=i[a+1],s.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]]);return r&&(c=u[l],f=u[l+1],d=i[0],s.push(["C",c[0],c[1],f[0],f[1],d[0],d[1]])),s}function Yl(t,e,n){var r=[],i=t[0],a=null;if(t.length<=2)return ql(t,e);for(var o=0,u=t.length;o<u;o++){var l=t[o];(!a||!(a.x===l.x&&a.y===l.y))&&(r.push(l.x),r.push(l.y),a=l)}var s=n||[[0,0],[1,1]],c=Xl(r,e,s);return c.unshift(["M",i.x,i.y]),c}var Hl=5,jl={}.toString,aa=function(t,e){return jl.call(t)==="[object "+e+"]"},Zl=function(t){return aa(t,"Array")},Kl=function(t){return typeof t=="object"&&t!==null},ai=function(t){if(!Kl(t)||!aa(t,"Object"))return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},oa=function(t,e,n,r){n=n||0,r=r||Hl;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=e[i];a?ai(a)?(ai(t[i])||(t[i]={}),n<r?oa(t[i],a,n+1,r):t[i]=e[i]):Zl(a)?(t[i]=[],t[i]=t[i].concat(a)):t[i]=a:t[i]=a}},A=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)oa(t,e[r]);return t};function oi(t){if(!t)return t;var e=t.match(/(([A-Z]{0,1}[a-z]*[^A-Z])|([A-Z]{1}))/g);return e.map(function(n){return n.toLowerCase()}).join("-")}function la(t){var e={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"flex",justifyContent:"center",alignItems:"center"},n=["stroke","lineWidth","shadowColor","strokeOpacity","shadowBlur","shadowOffsetX","shadowOffsetY","fill"];E(t,"fill")&&(e.color=t.fill);var r=K(t,n),i=r.shadowColor,a=r.shadowBlur,o=a===void 0?0:a,u=r.shadowOffsetX,l=u===void 0?0:u,s=r.shadowOffsetY,c=s===void 0?0:s;e["text-shadow"]=""+[i,l+"px",c+"px",o+"px"].join(" ");var f=K(t,n),d=f.stroke,h=f.lineWidth,v=h===void 0?0:h;return e["-webkit-text-stroke"]=""+[v+"px",d].join(" "),$(t,function(g,y){["fontSize"].includes(y)&&lt(g)?e[oi(y)]=g+"px":y&&!n.includes(y)&&(e[oi(y)]=""+g)}),e}function sa(t,e){t.style["pointer-events"]="none",$(e,function(n,r){r&&n&&(t.style[r]=n)})}var En=function(t,e,n){var r=e.statistic,i=e.plotType,a=r.title,o=r.content;[a,o].forEach(function(u,l){if(u){var s="";l===0?s=o?"translate(-50%, -100%)":"translate(-50%, -50%)":s=a?"translate(-50%, 0)":"translate(-50%, -50%)";var c=ot(u.style)?u.style(n):u.style;t.annotation().html(x({position:["50%","50%"],html:function(f,d){var h=d.getCoordinate(),v=0;if(i==="pie"||i==="ring-progress")v=h.getRadius()*h.innerRadius*2;else if(i==="liquid"){var g=E(d.geometries,[0,"elements",0,"shape"]);if(g){var y=g.find(function(F){return F.get("name")==="wrap"}),p=y.getCanvasBBox().width;v=p}}else v||(v=h.getWidth());sa(f,x({width:v+"px",transform:s},la(c)));var m=d.getData();if(u.customHtml)return u.customHtml(f,d,n,m);var b=u.content;return u.formatter&&(b=u.formatter(n,m)),b?gt(b)?b:""+b:"<div></div>"},key:(l===0?"top":"bottom")+"-statistic"},K(u,["offsetX","offsetY","rotate","style","formatter"])))}})},Ql=function(t,e,n){var r=e.statistic,i=r.title,a=r.content;[i,a].forEach(function(o){if(o){var u=ot(o.style)?o.style(n):o.style;t.annotation().html(x({position:["50%","100%"],html:function(l,s){var c=s.getCoordinate(),f=s.views[0].getCoordinate(),d=f.getCenter(),h=f.getRadius(),v=Math.max(Math.sin(f.startAngle),Math.sin(f.endAngle))*h,g=d.y+v-c.y.start-parseFloat(E(u,"fontSize",0)),y=c.getRadius()*c.innerRadius*2;sa(l,x({width:y+"px",transform:"translate(-50%, "+g+"px)"},la(u)));var p=s.getData();if(o.customHtml)return o.customHtml(l,s,n,p);var m=o.content;return o.formatter&&(m=o.formatter(n,p)),m?gt(m)?m:""+m:"<div></div>"}},K(o,["offsetX","offsetY","rotate","style","formatter"])))}})},Yn;function Jl(){return Yn||(Yn=document.createElement("canvas").getContext("2d")),Yn}Zi(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,u=e.fontVariant,l=Jl();l.font=[o,a,u,n+"px",i].join(" ");var s=l.measureText(gt(t)?t:"");return s.width},function(t,e){return e===void 0&&(e={}),rt([t],Sl(e)).join("")});function ae(t){return typeof t=="number"&&!isNaN(t)}function ts(t,e,n){var r=Math.min(e,n),i=Math.max(e,n);return t>=r&&t<=i}function Sr(t,e){if(!t)return{};var n=t.filter(function(a){var o=E(a,[e]);return lt(o)&&!isNaN(o)}),r=n.every(function(a){return E(a,[e])>=0}),i=n.every(function(a){return E(a,[e])<=0});return r?{min:0}:i?{max:0}:{}}function ua(t,e,n,r,i){if(i===void 0&&(i=[]),!Array.isArray(t))return{nodes:[],links:[]};var a=[],o={},u=-1;return t.forEach(function(l){var s=l[e],c=l[n],f=l[r],d=K(l,i);o[s]||(o[s]=x({id:++u,name:s},d)),o[c]||(o[c]=x({id:++u,name:c},d)),a.push(x({source:o[s].id,target:o[c].id,value:f},d))}),{nodes:Object.values(o).sort(function(l,s){return l.id-s.id}),links:a}}function pe(t,e){var n=be(t,function(r){var i=r[e];return i===null||typeof i=="number"&&!isNaN(i)});return Ut(Pt.WARN,n.length===t.length,"illegal data existed in chart data."),n}function Ht(t){if(lt(t))return[t,t,t,t];if(J(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}function On(t,e,n){e===void 0&&(e="bottom"),n===void 0&&(n=25);var r=Ht(t),i=[e.startsWith("top")?n:0,e.startsWith("right")?n:0,e.startsWith("bottom")?n:0,e.startsWith("left")?n:0];return[r[0]+i[0],r[1]+i[1],r[2]+i[2],r[3]+i[3]]}function Dr(t){var e=t.map(function(r){return Ht(r)}),n=[0,0,0,0];return e.length>0&&(n=n.map(function(r,i){return e.forEach(function(a,o){r+=e[o][i]}),r})),n}var es={locale:"en-US"},sn={};function ca(t,e){sn[t]=e}function In(t){return{get:function(e,n){return ia(E(sn[t],e)||E(sn[es.locale],e)||E(sn["en-US"],e)||e,n)}}}var ns={locale:"en-US",general:{increase:"Increase",decrease:"Decrease",root:"Root"},statistic:{total:"Total"},conversionTag:{label:"Rate"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"Total"}},rs={locale:"zh-CN",general:{increase:"增加",decrease:"减少",root:"初始"},statistic:{total:"总计"},conversionTag:{label:"转化率"},legend:{},tooltip:{},slider:{},scrollbar:{},waterfall:{total:"总计"}},re={},ye={},fa={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=1,n=function(){return"".concat(e++)};t.default=n})(fa);var Mn={},kn={},Er={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,a=null;return function(){for(var o=this,u=arguments.length,l=new Array(u),s=0;s<u;s++)l[s]=arguments[s];clearTimeout(a),a=setTimeout(function(){r.apply(o,l)},i)}};t.default=e})(Er);var Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.SensorTabIndex=Bt.SensorClassName=Bt.SizeSensorId=void 0;var is="size-sensor-id";Bt.SizeSensorId=is;var as="size-sensor-object";Bt.SensorClassName=as;var os="-1";Bt.SensorTabIndex=os;Object.defineProperty(kn,"__esModule",{value:!0});kn.createSensor=void 0;var ls=ss(Er),li=Bt;function ss(t){return t&&t.__esModule?t:{default:t}}var us=function(e){var n=void 0,r=[],i=function(){getComputedStyle(e).position==="static"&&(e.style.position="relative");var c=document.createElement("object");return c.onload=function(){c.contentDocument.defaultView.addEventListener("resize",a),a()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("class",li.SensorClassName),c.setAttribute("tabindex",li.SensorTabIndex),c.type="text/html",e.appendChild(c),c.data="about:blank",c},a=(0,ls.default)(function(){r.forEach(function(s){s(e)})}),o=function(c){n||(n=i()),r.indexOf(c)===-1&&r.push(c)},u=function(){n&&n.parentNode&&(n.contentDocument&&n.contentDocument.defaultView.removeEventListener("resize",a),n.parentNode.removeChild(n),n=void 0,r=[])},l=function(c){var f=r.indexOf(c);f!==-1&&r.splice(f,1),r.length===0&&n&&u()};return{element:e,bind:o,destroy:u,unbind:l}};kn.createSensor=us;var Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.createSensor=void 0;var cs=fs(Er);function fs(t){return t&&t.__esModule?t:{default:t}}var ds=function(e){var n=void 0,r=[],i=(0,cs.default)(function(){r.forEach(function(s){s(e)})}),a=function(){var c=new ResizeObserver(i);return c.observe(e),i(),c},o=function(c){n||(n=a()),r.indexOf(c)===-1&&r.push(c)},u=function(){n.disconnect(),r=[],n=void 0},l=function(c){var f=r.indexOf(c);f!==-1&&r.splice(f,1),r.length===0&&n&&u()};return{element:e,bind:o,destroy:u,unbind:l}};Tn.createSensor=ds;Object.defineProperty(Mn,"__esModule",{value:!0});Mn.createSensor=void 0;var hs=kn,vs=Tn,gs=typeof ResizeObserver<"u"?vs.createSensor:hs.createSensor;Mn.createSensor=gs;Object.defineProperty(ye,"__esModule",{value:!0});ye.removeSensor=ye.getSensor=void 0;var ps=xs(fa),ys=Mn,pn=Bt;function xs(t){return t&&t.__esModule?t:{default:t}}var Re={},ms=function(e){var n=e.getAttribute(pn.SizeSensorId);if(n&&Re[n])return Re[n];var r=(0,ps.default)();e.setAttribute(pn.SizeSensorId,r);var i=(0,ys.createSensor)(e);return Re[r]=i,i};ye.getSensor=ms;var Fs=function(e){var n=e.element.getAttribute(pn.SizeSensorId);e.element.removeAttribute(pn.SizeSensorId),e.destroy(),n&&Re[n]&&delete Re[n]};ye.removeSensor=Fs;Object.defineProperty(re,"__esModule",{value:!0});re.ver=re.clear=da=re.bind=void 0;var lr=ye,bs=function(e,n){var r=(0,lr.getSensor)(e);return r.bind(n),function(){r.unbind(n)}},da=re.bind=bs,As=function(e){var n=(0,lr.getSensor)(e);(0,lr.removeSensor)(n)};re.clear=As;var ws="1.0.1";re.ver=ws;var si="data-chart-source-type",ha=["padding","appendPadding","renderer","pixelRatio","syncViewPadding","supportCSSTransform","limitInPlot"],G=function(t){B(e,t);function e(n,r){var i=t.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=A({},i.getDefaultOptions(),r),i.createG2(),i.bindEvents(),i}return e.getDefaultOptions=function(){return{renderer:"canvas",xAxis:{nice:!0,label:{autoRotate:!1,autoHide:{type:"equidistance",cfg:{minGap:6}}}},yAxis:{nice:!0,label:{autoHide:!0,autoRotate:!1}},animation:!0}},e.prototype.createG2=function(){var n=this.options,r=n.width,i=n.height,a=n.defaultInteractions;this.chart=new Dl(x(x(x(x({container:this.container,autoFit:!1},this.getChartSize(r,i)),{localRefresh:!1}),K(this.options,ha)),{defaultInteractions:a})),this.container.setAttribute(si,"G2Plot")},e.prototype.getChartSize=function(n,r){var i=or(this.container);return{width:n||i.width||400,height:r||i.height||400}},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){this.chart.clear(),this.chart.options={data:[],animate:!0},this.chart.views=[],this.execAdaptor(),this.chart.render(),this.bindSizeSensor()},e.prototype.update=function(n){this.updateOption(n),this.render()},e.prototype.updateOption=function(n){this.options=A({},this.options,n)},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=_e(this.chart);$(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=_e(this.chart),r=[];return $(n,function(i){var a=i.getData(),o=i.getStates();$(o,function(u){r.push({data:a,state:u,geometry:i.geometry,element:i})})}),r},e.prototype.changeData=function(n){this.update({data:n})},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.addAnnotations=function(n,r){r=r||this.chart;var i=rt(n),a=r.getController("annotation"),o=a.getComponents().map(function(s){return s.extra});a.clear(!0);for(var u=function(s){var c=o[s],f=i.findIndex(function(d){return d.id&&d.id===c.id});f!==-1&&(c=A({},c,i[f]),i.splice(f,1)),a.annotation(c)},l=0;l<o.length;l++)u(l);i.forEach(function(s){return a.annotation(s)}),r.render(!0)},e.prototype.removeAnnotations=function(n){var r=this.chart.getController("annotation"),i=r.getComponents().map(function(u){return u.extra});r.clear(!0);for(var a=function(u){var l=i[u];n.find(function(s){return s.id&&s.id===l.id})||r.annotation(l)},o=0;o<i.length;o++)a(o);this.chart.render(!0)},e.prototype.destroy=function(){this.unbindSizeSensor(),this.chart.destroy(),this.off(),this.container.removeAttribute(si)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor(),r=this.options,i=r.padding,a=r.appendPadding;this.chart.padding=i,this.chart.appendPadding=a,n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this;if(!this.unbind){var r=this.options.autoFit,i=r===void 0?!0:r;i&&(this.unbind=da(this.container,function(){var a=or(n.container),o=a.width,u=a.height;(o!==n.chart.width||u!==n.chart.height)&&n.triggerResize()}))}},e.prototype.unbindSizeSensor=function(){this.unbind&&(this.unbind(),this.unbind=void 0)},e}(El),yt=["type","alias","tickCount","tickInterval","min","max","nice","minLimit","maxLimit","range","tickMethod","base","exponent","mask","sync"];function Pn(){return typeof window=="object"?window==null?void 0:window.devicePixelRatio:2}function Or(t,e){e===void 0&&(e=t);var n=document.createElement("canvas"),r=Pn();n.width=t*r,n.height=e*r,n.style.width=t+"px",n.style.height=e+"px";var i=n.getContext("2d");return i.scale(r,r),n}function Ir(t,e,n,r){r===void 0&&(r=n);var i=e.backgroundColor,a=e.opacity;t.globalAlpha=a,t.fillStyle=i,t.beginPath(),t.fillRect(0,0,n,r),t.closePath()}function va(t,e,n){var r=t+e;return n?r*2:r}function ga(t,e){var n=e?[[t*.25,t*.25],[t*.75,t*.75]]:[[t*.5,t*.5]];return n}function Mr(t,e){var n=e*Math.PI/180,r={a:Math.cos(n)*(1/t),b:Math.sin(n)*(1/t),c:-Math.sin(n)*(1/t),d:Math.cos(n)*(1/t),e:0,f:0};return r}var Ss={size:6,padding:2,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0,isStagger:!0};function Ds(t,e,n,r){var i=e.size,a=e.fill,o=e.lineWidth,u=e.stroke,l=e.fillOpacity;t.beginPath(),t.globalAlpha=l,t.fillStyle=a,t.strokeStyle=u,t.lineWidth=o,t.arc(n,r,i/2,0,2*Math.PI,!1),t.fill(),o&&t.stroke(),t.closePath()}function Es(t){var e=A({},Ss,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=va(n,r,i),u=ga(o,i),l=Or(o,o),s=l.getContext("2d");Ir(s,e,o);for(var c=0,f=u;c<f.length;c++){var d=f[c],h=d[0],v=d[1];Ds(s,e,h,v)}var g=s.createPattern(l,"repeat");if(g){var y=Pn(),p=Mr(y,a);g.setTransform(p)}return g}var Os={rotation:45,spacing:5,opacity:1,backgroundColor:"transparent",strokeOpacity:.5,stroke:"#fff",lineWidth:2};function Is(t,e,n){var r=e.stroke,i=e.lineWidth,a=e.strokeOpacity,o=new Path2D(n);t.globalAlpha=a,t.lineCap="square",t.strokeStyle=i?r:"transparent",t.lineWidth=i,t.stroke(o)}function Ms(t){var e=A({},Os,t),n=e.spacing,r=e.rotation,i=e.lineWidth,a=n+i||1,o=n+i||1,u=`
            M 0 0 L `+a+` 0
            M 0 `+o+" L "+a+" "+o+`
            `,l=Or(a,o),s=l.getContext("2d");Ir(s,e,a,o),Is(s,e,u);var c=s.createPattern(l,"repeat");if(c){var f=Pn(),d=Mr(f,r);c.setTransform(d)}return c}var ks={size:6,padding:1,isStagger:!0,backgroundColor:"transparent",opacity:1,rotation:0,fill:"#fff",fillOpacity:.5,stroke:"transparent",lineWidth:0};function Ts(t,e,n,r){var i=e.stroke,a=e.size,o=e.fill,u=e.lineWidth,l=e.fillOpacity;t.globalAlpha=l,t.strokeStyle=i,t.lineWidth=u,t.fillStyle=o,t.strokeRect(n-a/2,r-a/2,a,a),t.fillRect(n-a/2,r-a/2,a,a)}function Ps(t){var e=A({},ks,t),n=e.size,r=e.padding,i=e.isStagger,a=e.rotation,o=va(n,r,i),u=ga(o,i),l=Or(o,o),s=l.getContext("2d");Ir(s,e,o);for(var c=0,f=u;c<f.length;c++){var d=f[c],h=d[0],v=d[1];Ts(s,e,h,v)}var g=s.createPattern(l,"repeat");if(g){var y=Pn(),p=Mr(y,a);g.setTransform(p)}return g}function $s(t){var e=t.type,n=t.cfg,r;switch(e){case"dot":r=Es(n);break;case"line":r=Ms(n);break;case"square":r=Ps(n);break}return r}function At(t){var e=this;return function(n){var r,i=n.options,a=n.chart,o=i.pattern;if(!o)return n;var u=function(l){for(var s,c,f,d=[],h=1;h<arguments.length;h++)d[h-1]=arguments[h];var v=a.getTheme().defaultColor,g=v,y=(c=(s=a.geometries)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.getAttribute("color");if(y){var p=y.getFields()[0],m=E(l,p);g=mt.getMappingValue(y,m,((f=y.values)===null||f===void 0?void 0:f[0])||v)}var b=o;typeof o=="function"&&(b=o.call(e,l,g)),b instanceof CanvasPattern||(b=$s(A({},{cfg:{backgroundColor:g}},b)));var F=i[t];return x(x({},typeof F=="function"?F.call.apply(F,rt([e,l],d)):F||{}),{fill:b||g})};return A({},n,{options:(r={},r[t]=u,r)})}}function Ae(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.seriesField;return r===!1?e.legend(!1):(i||a)&&e.legend(i||a,r),t}function ft(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==void 0&&e.tooltip(r),t}function et(t){var e=t.chart,n=t.options,r=n.interactions;return $(r,function(i){i.enable===!1?e.removeInteraction(i.type):e.interaction(i.type,i.cfg||{})}),t}function Q(t){var e=t.chart,n=t.options,r=n.animation;return Ye(e,r),t}function j(t){var e=t.chart,n=t.options,r=n.theme;return r&&e.theme(r),t}function Jt(t){var e=t.chart,n=t.options,r=n.state;return r&&$(e.geometries,function(i){i.state(r)}),t}function He(t){var e=t.chart,n=t.options,r=n.slider;return e.option("slider",r),t}function kr(t){var e=t.chart,n=t.options,r=n.scrollbar;return e.option("scrollbar",r),t}function at(t,e){return function(n){var r=n.chart,i=n.options,a={};return $(t,function(o,u){a[u]=K(o,yt)}),a=A({},e,i.meta,a),r.scale(a),n}}function it(t){return function(e){var n=e.chart,r=e.options,i=n.getController("annotation");return $(rt(r.annotations||[],t||[]),function(a){i.annotation(a)}),e}}function oe(t){var e=t.chart,n=t.options,r=n.yAxis,i=n.limitInPlot,a=i;return se(r)&&It(i)&&(Object.values(K(r,["min","max","minLimit","maxLimit"])).some(function(o){return!It(o)})?a=!0:a=!1),e.limitInPlot=a,t}function pa(t){return t===void 0&&(t="rect"),function(e){var n=e.chart,r=e.options,i=r.coordinate,a=Array.from(i||[]).map(function(o){return o.type==="reflectX"?["reflect","x"]:o.type==="reflectY"?["reflect","y"]:o.type==="transpose"?["transpose"]:null}).filter(function(o){return!!o});return a.length!==0&&n.coordinate({type:t,actions:a}),e}}function kt(t,e){if(t===!1)return{fields:!1};var n=E(t,"fields"),r=E(t,"formatter");return r&&!n&&(n=e),{fields:n,formatter:r}}function en(t,e){var n=t.type,r=t.xField,i=t.yField,a=t.colorField,o=t.shapeField,u=t.sizeField,l=t.styleField,s=t.rawFields,c=[];if(s=(ot(s)?s(n,e):s)||[],e==="color")c=rt([a||r],s);else if(e==="shape")c=rt([o||r],s);else if(e==="size")c=rt([u||r],s);else{c=rt([r,i,a,o,u,l],s);var f=["x","y","color","shape","size","style"].indexOf(e),d=c[f];c.splice(f,1),c.unshift(d)}var h=ze(c.filter(function(g){return!!g})),v=n==="line"&&[r,i].includes(h.join("*"))?"":h.join("*");return{mappingFields:h,tileMappingField:v}}function de(t,e){if(e)return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={};return t.forEach(function(a,o){i[a]=n[o]}),delete i.undefined,e(i)}}function Ft(t){var e=t.chart,n=t.options,r=n.type,i=n.args,a=n.mapping,o=n.xField,u=n.yField,l=n.colorField,s=n.shapeField,c=n.sizeField,f=n.tooltipFields,d=n.label,h=n.state,v=n.customInfo;if(!a)return t;var g=a.color,y=a.shape,p=a.size,m=a.style,b=a.tooltip,F=e[r](i).position(o+"*"+u);if(gt(g))l?F.color(l,g):F.color(g);else if(ot(g)){var w=en(n,"color"),D=w.mappingFields,M=w.tileMappingField;F.color(M,de(D,g))}else l&&F.color(l,g);if(gt(y))s?F.shape(s,[y]):F.shape(y);else if(ot(y)){var k=en(n,"shape"),D=k.mappingFields,M=k.tileMappingField;F.shape(M,de(D,y))}else s&&F.shape(s,y);if(lt(p))c?F.size(c,p):F.size(p);else if(ot(p)){var C=en(n,"size"),D=C.mappingFields,M=C.tileMappingField;F.size(M,de(D,p))}else c&&F.size(c,p);if(ot(m)){var T=en(n,"style"),D=T.mappingFields,M=T.tileMappingField;F.style(M,de(D,m))}else se(m)&&F.style(m);if(f===!1?F.tooltip(!1):An(f)||F.tooltip(f.join("*"),de(f,b)),d===!1)F.label(!1);else if(d){var O=d.callback,L=d.fields,W=pt(d,["callback","fields"]);F.label({fields:L||[u],callback:O,cfg:dt(W)})}return h&&F.state(h),v&&F.customInfo(v),[o,u].filter(function(H){return H!==l}).forEach(function(H){e.legend(H,!1)}),x(x({},t),{ext:{geometry:F}})}function $n(t){var e=t.options,n=e.area,r=e.xField,i=e.yField,a=e.seriesField,o=e.smooth,u=e.tooltip,l=e.useDeferredLabel,s=kt(u,[r,i,a]),c=s.fields,f=s.formatter;return n?Ft(A({},t,{options:{type:"area",colorField:a,tooltipFields:c,mapping:x({shape:o?"smooth":"area",tooltip:f},n),args:{useDeferredLabel:l}}})):t}function we(t){var e=t.options,n=e.line,r=e.stepType,i=e.xField,a=e.yField,o=e.seriesField,u=e.smooth,l=e.connectNulls,s=e.tooltip,c=e.useDeferredLabel,f=kt(s,[i,a,o]),d=f.fields,h=f.formatter;return n?Ft(A({},t,{options:{type:"line",colorField:o,tooltipFields:d,mapping:Ar({shape:r||(u?"smooth":"line"),tooltip:h},n),args:{connectNulls:l,useDeferredLabel:c}}})):t}function wt(t){var e=t.options,n=e.point,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=e.shapeField,l=e.tooltip,s=e.useDeferredLabel,c=kt(l,[r,i,a,o,u]),f=c.fields,d=c.formatter;return n?Ft(A({},t,{options:{type:"point",colorField:a,shapeField:u,tooltipFields:f,mapping:x({tooltip:d},n),args:{useDeferredLabel:s}}})):t}function Ls(t){var e=t.chart,n=t.options,r=t.ext,i=n.seriesField,a=n.isGroup,o=n.isStack,u=n.marginRatio,l=n.widthRatio,s=n.groupField,c=n.theme,f=[];if(i&&(a&&f.push({type:"dodge",dodgeBy:s||i,marginRatio:u}),o&&f.push({type:"stack",marginRatio:u})),f.length&&(r!=null&&r.geometry)){var d=r==null?void 0:r.geometry;d.adjust(f)}return It(l)||e.theme(A({},se(c)?c:Ki(c),{columnWidthRatio:l})),t}function vt(t){var e=t.options,n=e.xField,r=e.yField,i=e.interval,a=e.seriesField,o=e.tooltip,u=e.minColumnWidth,l=e.maxColumnWidth,s=e.columnBackground,c=e.dodgePadding,f=e.intervalPadding,d=e.useDeferredLabel,h=kt(o,[n,r,a]),v=h.fields,g=h.formatter,y=(i?Ft(A({},t,{options:{type:"interval",colorField:a,tooltipFields:v,mapping:x({tooltip:g},i),args:{dodgePadding:c,intervalPadding:f,minColumnWidth:u,maxColumnWidth:l,background:s,useDeferredLabel:d}}})):t).ext;return Ls(x(x({},t),{ext:y}))}function Ln(t){var e=t.options,n=e.polygon,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,l=kt(o,[r,i,a]),s=l.fields,c=l.formatter;return n?Ft(A({},t,{options:{type:"polygon",colorField:a,tooltipFields:s,mapping:x({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function ya(t){var e=t.options,n=e.edge,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,l=kt(o,[r,i,a]),s=l.fields,c=l.formatter;return n?Ft(A({},t,{options:{type:"edge",colorField:a,tooltipFields:s,mapping:x({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function Tr(t){var e=t.options,n=e.schema,r=e.xField,i=e.yField,a=e.seriesField,o=e.tooltip,u=e.useDeferredLabel,l=kt(o,[r,i,a]),s=l.fields,c=l.formatter;return n?Ft(A({},t,{options:{type:"schema",colorField:a,tooltipFields:s,mapping:x({tooltip:c},n),args:{useDeferredLabel:u}}})):t}function Cs(t){var e=t.options,n=e.violin,r=e.xField,i=e.yField,a=e.seriesField,o=e.sizeField,u=e.tooltip,l=kt(u,[r,i,a,o]),s=l.fields,c=l.formatter;return n?Ft(A({},t,{options:{type:"violin",colorField:a,tooltipFields:s,mapping:x({tooltip:c},n)}})):t}function Rs(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.lineShape,u=n.point,l=n.area,s=n.seriesField,c=u==null?void 0:u.state,f=l==null?void 0:l.state;e.data(r);var d=A({},t,{options:{shapeField:s,line:{color:i,style:a,shape:o},point:u&&x({color:i,shape:"circle"},u),area:l&&x({color:i},l),label:void 0}}),h=A({},d,{options:{tooltip:!1,state:c}}),v=A({},d,{options:{tooltip:!1,state:f}});return we(d),wt(h),$n(v),t}function Cn(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,l=r.data;return _(at((e={},e[o]=i,e[u]=a,e),(n={},n[o]={type:"cat"},n[u]=Sr(l,u),n)))(t)}function zs(t){var e=t.chart,n=t.options,r=n.reflect;if(r){var i=r;J(i)||(i=[i]);var a=i.map(function(o){return["reflect",o]});e.coordinate({type:"rect",actions:a})}return t}function xa(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function ma(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function Ns(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=ht(e,"line");if(!r)a.label(!1);else{var o=r.callback,u=pt(r,["callback"]);a.label({fields:[i],callback:o,cfg:x({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},dt(u))})}return t}function _s(t){var e=t.chart,n=t.options,r=n.isStack;return r&&$(e.geometries,function(i){i.adjust("stack")}),t}function Fa(t){return _(Rs,Cn,_s,j,zs,xa,ma,ft,Ns,He,kr,et,Q,it(),oe)(t)}var Vs=A({},G.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},legend:{position:"top-left",radio:{}},isStack:!1}),Ws=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.active=function(){var n=this.getView(),r=this.context.event;if(r.data){var i=r.data.items,a=n.geometries.filter(function(o){return o.type==="point"});$(a,function(o){$(o.elements,function(u){var l=na(i,function(s){return s.data===u.data})!==-1;u.setState("active",l)})})}},e.prototype.reset=function(){var n=this.getView(),r=n.geometries.filter(function(i){return i.type==="point"});$(r,function(i){$(i.elements,function(a){a.setState("active",!1)})})},e.prototype.getView=function(){return this.context.view},e}(Xt);bt("marker-active",Ws);nt("marker-active",{start:[{trigger:"tooltip:show",action:"marker-active:active"}],end:[{trigger:"tooltip:hide",action:"marker-active:reset"}]});var Bs=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return Vs},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;Cn({chart:i,options:a}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Fa},e}(G);function ba(t,e,n,r){var i=xt(t,function(a,o){var u=o[n],l=a.has(u)?a.get(u):0,s=o[e];return l=ae(s)?l+s:l,a.set(u,l),a},new Map);return Mt(t,function(a){var o,u=a[e],l=a[n],s=ae(u)&&i.get(l)!==0?u/i.get(l):0;return x(x({},a),(o={},o[r]=s,o))})}function Gs(t,e,n,r){var i=xt(t,function(a,o){var u=xt(n,function(c,f){return""+c+o[f]},""),l=a.has(u)?a.get(u):0,s=o[e];return l=ae(s)?l+s:l,a.set(u,l),a},new Map);return Mt(t,function(a){var o,u=a[e],l=xt(n,function(c,f){return""+c+a[f]},""),s=ae(u)&&i.get(l)!==0?u/i.get(l):0;return x(x({},a),(o={},o[r]=s,o))})}function je(t,e,n,r,i){return i?ba(t,e,n,r):t}function qs(t){var e=t.chart,n=t.options,r=n.data,i=n.areaStyle,a=n.color,o=n.point,u=n.line,l=n.isPercent,s=n.xField,c=n.yField,f=n.tooltip,d=n.seriesField,h=n.startOnZero,v=o==null?void 0:o.state,g=je(r,c,s,c,l);e.data(g);var y=l?x({formatter:function(F){return{name:F[d]||F[s],value:(Number(F[c])*100).toFixed(2)+"%"}}},f):f,p=A({},t,{options:{area:{color:a,style:i},point:o&&x({color:a},o),tooltip:y,label:void 0,args:{startOnZero:h}}}),m={chart:e,options:A({line:{size:2}},Dn(n,["state"]),{line:u&&x({color:a},u),sizeField:d,state:u==null?void 0:u.state,tooltip:!1,label:void 0,args:{startOnZero:h}})},b=A({},p,{options:{tooltip:!1,state:v}});return $n(p),we(m),wt(b),t}function Us(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=ht(e,"area");if(!r)a.label(!1);else{var o=r.callback,u=pt(r,["callback"]);a.label({fields:[i],callback:o,cfg:x({layout:[{type:"limit-in-plot"},{type:"path-adjust-position"},{type:"point-adjust-position"},{type:"limit-in-plot",cfg:{action:"hide"}}]},dt(u))})}return t}function Xs(t){var e=t.chart,n=t.options,r=n.isStack,i=n.isPercent,a=n.seriesField;return(i||r)&&a&&$(e.geometries,function(o){o.adjust("stack")}),t}function Aa(t){return _(j,At("areaStyle"),pa("rect"),qs,Cn,Xs,xa,ma,ft,Us,He,it(),et,Q,oe)(t)}var Ys=A({},G.getDefaultOptions(),{tooltip:{shared:!0,showMarkers:!0,showCrosshairs:!0,crosshairs:{type:"x"}},isStack:!0,line:{},legend:{position:"top-left",radio:{}}}),Hs=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return Ys},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.isPercent,a=r.xField,o=r.yField,u=this,l=u.chart,s=u.options;Cn({chart:l,options:s}),this.chart.changeData(je(n,o,a,o,i))},e.prototype.getSchemaAdaptor=function(){return Aa},e}(G);function wa(t,e){return!lt(t)||!lt(e)||t===0&&e===0?"-":t===e?"100%":t===0?"∞":(100*e/t).toFixed(2)+"%"}function js(t,e){return A({size:e?32:80,spacing:e?8:12,offset:e?32:0,arrow:t.arrow!==!1&&{headSize:12,style:{fill:"rgba(0, 0, 0, 0.05)"}},text:t.text!==!1&&{style:{fontSize:12,fill:"rgba(0, 0, 0, 0.85)",textAlign:"center",textBaseline:"middle"},formatter:wa}},t)}function yn(t,e){return Mt(e.getModel().points,function(n){return t.convertPoint(n)})}function Zs(t,e,n){var r=t.view,i=t.geometry,a=t.group,o=t.options,u=t.horizontal,l=o.offset,s=o.size,c=o.arrow,f=r.getCoordinate(),d=yn(f,e)[3],h=yn(f,n)[0],v=h.y-d.y,g=h.x-d.x;if(typeof c!="boolean"){var y=c.headSize,p=o.spacing,m;u?(g-y)/2<p?(p=Math.max(1,(g-y)/2),m=[[d.x+p,d.y-l],[d.x+p,d.y-l-s],[h.x-p,h.y-l-s/2]]):m=[[d.x+p,d.y-l],[d.x+p,d.y-l-s],[h.x-p-y,h.y-l-s],[h.x-p,h.y-l-s/2],[h.x-p-y,h.y-l]]:(v-y)/2<p?(p=Math.max(1,(v-y)/2),m=[[d.x+l,d.y+p],[d.x+l+s,d.y+p],[h.x+l+s/2,h.y-p]]):m=[[d.x+l,d.y+p],[d.x+l+s,d.y+p],[h.x+l+s,h.y-p-y],[h.x+l+s/2,h.y-p],[h.x+l,h.y-p-y]],a.addShape("polygon",{id:r.id+"-conversion-tag-arrow-"+i.getElementId(e.getModel().mappingData),name:"conversion-tag-arrow",origin:{element:e,nextElement:n},attrs:x(x({},c.style||{}),{points:m})})}}function Ks(t,e,n){var r,i,a,o=t.view,u=t.geometry,l=t.group,s=t.options,c=t.field,f=t.horizontal,d=s.offset,h=s.size;if(typeof s.text!="boolean"){var v=o.getCoordinate(),g=((r=s.text)===null||r===void 0?void 0:r.formatter)&&((i=s.text)===null||i===void 0?void 0:i.formatter(e.getData()[c],n.getData()[c])),y=yn(v,e)[f?3:0],p=yn(v,n)[f?0:3],m=l.addShape("text",{id:o.id+"-conversion-tag-text-"+u.getElementId(e.getModel().mappingData),name:"conversion-tag-text",origin:{element:e,nextElement:n},attrs:x(x({},((a=s.text)===null||a===void 0?void 0:a.style)||{}),{text:g,x:f?(y.x+p.x)/2:y.x+d+h/2,y:f?y.y-d-h/2:(y.y+p.y)/2})});if(f){var b=p.x-y.x,F=m.getBBox().width;if(F>b){var w=F/g.length,D=Math.max(1,Math.ceil(b/w)-1),M=g.slice(0,D)+"...";m.attr("text",M)}}}}function Qs(t,e,n){Zs(t,e,n),Ks(t,e,n)}function Js(t,e,n){return e===void 0&&(e=!0),n===void 0&&(n=!1),function(r){var i=r.options,a=r.chart,o=i.conversionTag,u=i.theme;return o&&!n&&(a.theme(A({},se(u)?u:Ki(u),{columnWidthRatio:1/3})),a.annotation().shape({render:function(l,s){var c=l.addGroup({id:a.id+"-conversion-tag-group",name:"conversion-tag-group"}),f=Qi(a.geometries,function(v){return v.type==="interval"}),d={view:s,geometry:f,group:c,field:t,horizontal:e,options:js(o,e)},h=f.elements;$(h,function(v,g){g>0&&Qs(d,h[g-1],v)})}})),r}}var ie={hover:"__interval-connected-area-hover__",click:"__interval-connected-area-click__"},Pr=function(t,e){return t==="hover"?[{trigger:"interval:mouseenter",action:["element-highlight-by-color:highlight","element-link-by-color:link"],arg:[null,{style:e}]}]:[{trigger:"interval:click",action:["element-highlight-by-color:clear","element-highlight-by-color:highlight","element-link-by-color:clear","element-link-by-color:unlink","element-link-by-color:link"],arg:[null,null,null,null,{style:e}]}]};nt(ie.hover,{start:Pr(ie.hover),end:[{trigger:"interval:mouseleave",action:["element-highlight-by-color:reset","element-link-by-color:unlink"]}]});nt(ie.click,{start:Pr(ie.click),end:[{trigger:"document:mousedown",action:["element-highlight-by-color:clear","element-link-by-color:clear"]}]});function tu(t){return t===void 0&&(t=!1),function(e){var n=e.chart,r=e.options,i=r.connectedArea,a=function(){n.removeInteraction(ie.hover),n.removeInteraction(ie.click)};if(!t&&i){var o=i.trigger||"hover";a(),n.interaction(ie[o],{start:Pr(o,i.style)})}else a();return e}}var eu=10,nu=5,ru={padding:[8,10],text:"reset",textStyle:{default:{x:0,y:0,fontSize:12,fill:"#333333",cursor:"pointer"}},buttonStyle:{default:{fill:"#f7f7f7",stroke:"#cccccc",cursor:"pointer"},active:{fill:"#e6e6e6"}}},iu=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.buttonGroup=null,n.buttonCfg=x({name:"button"},ru),n}return e.prototype.getButtonCfg=function(){var n=this.context.view,r=E(n,["interactions","filter-action","cfg","buttonConfig"]);return A(this.buttonCfg,r,this.cfg)},e.prototype.drawButton=function(){var n=this.getButtonCfg(),r=this.context.view.foregroundGroup.addGroup({name:n.name}),i=this.drawText(r);this.drawBackground(r,i.getBBox()),this.buttonGroup=r},e.prototype.drawText=function(n){var r,i=this.getButtonCfg();return n.addShape({type:"text",name:"button-text",attrs:x({text:i.text},(r=i.textStyle)===null||r===void 0?void 0:r.default)})},e.prototype.drawBackground=function(n,r){var i,a=this.getButtonCfg(),o=Ht(a.padding),u=n.addShape({type:"rect",name:"button-rect",attrs:x({x:r.x-o[3],y:r.y-o[0],width:r.width+o[1]+o[3],height:r.height+o[0]+o[2]},(i=a.buttonStyle)===null||i===void 0?void 0:i.default)});return u.toBack(),n.on("mouseenter",function(){var l;u.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.active)}),n.on("mouseleave",function(){var l;u.attr((l=a.buttonStyle)===null||l===void 0?void 0:l.default)}),u},e.prototype.resetPosition=function(){var n=this.context.view,r=n.getCoordinate(),i=r.convert({x:1,y:1}),a=this.buttonGroup,o=a.getBBox(),u=mt.transform(null,[["t",i.x-o.width-eu,i.y+o.height+nu]]);a.setMatrix(u)},e.prototype.show=function(){this.buttonGroup||this.drawButton(),this.resetPosition(),this.buttonGroup.show()},e.prototype.hide=function(){this.buttonGroup&&this.buttonGroup.hide()},e.prototype.destroy=function(){var n=this.buttonGroup;n&&n.remove(),t.prototype.destroy.call(this)},e}(Xt);bt("brush-reset-button",iu,{name:"brush-reset-button"});nt("filter-action",{});function Nt(t){return t.isInPlot()}function ue(t,e,n){var r=n||{},i=r.mask,a=r.isStartEnable,o=e||"rect";switch(t){case"brush":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Nt,action:["brush:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Nt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Nt,action:["brush:filter","brush:end",o+"-mask:end",o+"-mask:hide","brush-reset-button:show"]}],rollback:[{trigger:"brush-reset-button:click",action:["brush:reset","brush-reset-button:hide","cursor:crosshair"]}]};case"brush-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mousemove",action:"cursor:default",isEnable:function(u){return a?!a(u):!1}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-x":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Nt,action:["brush-x:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Nt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Nt,action:["brush-x:filter","brush-x:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-x:reset"]}]};case"brush-x-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};case"brush-y":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"}],start:[{trigger:"mousedown",isEnable:a||Nt,action:["brush-y:start",o+"-mask:start",o+"-mask:show"],arg:[null,{maskStyle:i==null?void 0:i.style}]}],processing:[{trigger:"mousemove",isEnable:Nt,action:[o+"-mask:resize"]}],end:[{trigger:"mouseup",isEnable:Nt,action:["brush-y:filter","brush-y:end",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["brush-y:reset"]}]};case"brush-y-highlight":return{showEnable:[{trigger:"plot:mouseenter",action:"cursor:crosshair",isEnable:a||function(){return!0}},{trigger:"mask:mouseenter",action:"cursor:move",isEnable:a||function(){return!0}},{trigger:"plot:mouseleave",action:"cursor:default"},{trigger:"mask:mouseleave",action:"cursor:crosshair"}],start:[{trigger:"plot:mousedown",isEnable:a||function(u){return!u.isInShape("mask")},action:[o+"-mask:start",o+"-mask:show"],arg:[{maskStyle:i==null?void 0:i.style}]},{trigger:"mask:dragstart",action:[o+"-mask:moveStart"]}],processing:[{trigger:"plot:mousemove",action:[o+"-mask:resize"]},{trigger:"mask:drag",action:[o+"-mask:move"]},{trigger:"mask:change",action:["element-range-highlight:highlight"]}],end:[{trigger:"plot:mouseup",action:[o+"-mask:end"]},{trigger:"mask:dragend",action:[o+"-mask:moveEnd"]},{trigger:"document:mouseup",isEnable:function(u){return!u.isInPlot()},action:["element-range-highlight:clear",o+"-mask:end",o+"-mask:hide"]}],rollback:[{trigger:"dblclick",action:["element-range-highlight:clear",o+"-mask:hide"]}]};default:return{}}}nt("brush",ue("brush"));nt("brush-highlight",ue("brush-highlight"));nt("brush-x",ue("brush-x","x-rect"));nt("brush-y",ue("brush-y","y-rect"));nt("brush-x-highlight",ue("brush-x-highlight","x-rect"));nt("brush-y-highlight",ue("brush-y-highlight","y-rect"));var ui=["brush","brush-x","brush-y","brush-highlight","brush-x-highlight","brush-y-highlight"];function Sa(t){var e=t.options,n=e.brush,r=be(e.interactions||[],function(i){return ui.indexOf(i.type)===-1});return n!=null&&n.enabled&&(ui.forEach(function(i){var a=!1;switch(n.type){case"x-rect":a=i===(n.action==="highlight"?"brush-x-highlight":"brush-x");break;case"y-rect":a=i===(n.action==="highlight"?"brush-y-highlight":"brush-y");break;default:a=i===(n.action==="highlight"?"brush-highlight":"brush");break}var o={type:i,enable:a};n&&(o.cfg=ue(i,n.type,n)),r.push(o)}),(n==null?void 0:n.action)!=="highlight"&&r.push({type:"filter-action",cfg:{buttonConfig:n.button}})),A({},t,{options:{interactions:r}})}function au(t){var e=t.options,n=e.legend,r=e.seriesField,i=e.isStack;return r?n!==!1&&(n=x({position:i?"right-top":"top-left"},n)):n=!1,t.options.legend=n,t}function ou(t){var e=t.chart,n=t.options,r=n.data,i=n.columnStyle,a=n.color,o=n.columnWidthRatio,u=n.isPercent,l=n.isGroup,s=n.isStack,c=n.xField,f=n.yField,d=n.seriesField,h=n.groupField,v=n.tooltip,g=n.shape,y=u&&l&&s?Gs(r,f,[c,h],f):je(r,f,c,f,u),p=[];s&&d&&!l?y.forEach(function(F){var w=p.find(function(D){return D[c]===F[c]&&D[d]===F[d]});w?w[f]+=F[f]||0:p.push(x({},F))}):p=y,e.data(p);var m=u?x({formatter:function(F){return{name:l&&s?F[d]+" - "+F[h]:F[d]||F[c],value:(Number(F[f])*100).toFixed(2)+"%"}}},v):v,b=A({},t,{options:{data:p,widthRatio:o,tooltip:m,interval:{shape:g,style:i,color:a}}});return vt(b),b}function $r(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,l=r.data,s=r.isPercent,c=s?{max:1,min:0,minLimit:0,maxLimit:1}:{};return _(at((e={},e[o]=i,e[u]=a,e),(n={},n[o]={type:"cat"},n[u]=x(x({},Sr(l,u)),c),n)))(t)}function lu(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function su(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r&&i?e.legend(i,r):r===!1&&e.legend(!1),t}function uu(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=n.isRange,o=ht(e,"interval");if(!r)o.label(!1);else{var u=r.callback,l=pt(r,["callback"]);o.label({fields:[i],callback:u,cfg:x({layout:l!=null&&l.position?void 0:[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}]},dt(a?x({content:function(s){var c;return(c=s[i])===null||c===void 0?void 0:c.join("-")}},l):l))})}return t}function cu(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.isGroup,a=n.isStack,o=n.groupField,u=n.data,l=n.xField,s=n.yField,c=n.seriesField;if(r===!1)e.tooltip(!1);else{var f=r;if(i&&a){var d=f.customItems,h=(f==null?void 0:f.formatter)||function(v){return{name:v[c]+" - "+v[o],value:v[s]}};f=x(x({},f),{customItems:function(v){var g=[];return $(v,function(y){var p=be(u,function(m){return Ol(m,K(y.data,[l,c]))});p.forEach(function(m){g.push(x(x(x({},y),{value:m[s],data:m,mappingData:{_origin:m}}),h(m)))})}),d?d(g):g}})}e.tooltip(f)}return t}function Rn(t,e){e===void 0&&(e=!1);var n=t.options,r=n.seriesField;return _(au,j,At("columnStyle"),Jt,pa("rect"),ou,$r,lu,su,cu,He,kr,uu,Sa,et,Q,it(),Js(n.yField,!e,!!r),tu(!n.isStack),oe)(t)}var fu=A({},G.getDefaultOptions(),{columnWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),du=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return fu},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.yField,a=r.xField,o=r.isPercent,u=this,l=u.chart,s=u.options;$r({chart:l,options:s}),this.chart.changeData(je(n,i,a,i,o))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Rn},e}(G);function hu(t){var e=t.options,n=e.xField,r=e.yField,i=e.xAxis,a=e.yAxis,o={left:"bottom",right:"top",top:"left",bottom:"right"},u=a!==!1?x({position:o[(a==null?void 0:a.position)||"left"]},a):!1,l=i!==!1?x({position:o[(i==null?void 0:i.position)||"bottom"]},i):!1;return x(x({},t),{options:x(x({},e),{xField:r,yField:n,xAxis:u,yAxis:l})})}function vu(t){var e=t.options,n=e.label;return n&&!n.position&&(n.position="left",n.layout||(n.layout=[{type:"interval-adjust-position"},{type:"interval-hide-overlap"},{type:"adjust-color"},{type:"limit-in-plot",cfg:{action:"hide"}}])),A({},t,{options:{label:n}})}function gu(t){var e=t.options,n=e.seriesField,r=e.isStack,i=e.legend;return n?i!==!1&&(i=x({position:r?"top-left":"right-top"},i||{})):i=!1,A({},t,{options:{legend:i}})}function pu(t){var e=t.options,n=[{type:"transpose"},{type:"reflectY"}].concat(e.coordinate||[]);return A({},t,{options:{coordinate:n}})}function yu(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.barWidthRatio,a=n.minBarWidth,o=n.maxBarWidth,u=n.barBackground;return Rn({chart:e,options:x(x({},n),{columnStyle:r,columnWidthRatio:i,minColumnWidth:a,maxColumnWidth:o,columnBackground:u})},!0)}function Da(t){return _(hu,vu,gu,ft,pu,yu)(t)}var xu=A({},G.getDefaultOptions(),{barWidthRatio:.6,marginRatio:1/32,tooltip:{shared:!0,showMarkers:!1,offset:20},legend:{radio:{}},interactions:[{type:"active-region"}]}),mu=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bar",n}return e.getDefaultOptions=function(){return xu},e.prototype.changeData=function(n){var r,i;this.updateOption({data:n});var a=this,o=a.chart,u=a.options,l=u.isPercent,s=u.xField,c=u.yField,f=u.xAxis,d=u.yAxis;r=[c,s],s=r[0],c=r[1],i=[d,f],f=i[0],d=i[1];var h=x(x({},u),{xField:s,yField:c,yAxis:d,xAxis:f});$r({chart:o,options:h}),o.changeData(je(n,s,c,s,l))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Da},e}(G),Ea=A({},G.getDefaultOptions(),{legend:{position:"right",radio:{}},tooltip:{shared:!1,showTitle:!1,showMarkers:!1},label:{layout:{type:"limit-in-plot",cfg:{action:"ellipsis"}}},pieStyle:{stroke:"white",lineWidth:1},statistic:{title:{style:{fontWeight:300,color:"#4B535E",textAlign:"center",fontSize:"20px",lineHeight:1}},content:{style:{fontWeight:"bold",color:"rgba(44,53,66,0.85)",textAlign:"center",fontSize:"32px",lineHeight:1}}},theme:{components:{annotation:{text:{animate:!1}}}}});function Fu(t,e){var n=null;return $(t,function(r){typeof r[e]=="number"&&(n+=r[e])}),n}function bu(t,e){var n;switch(t){case"inner":return n="-30%",gt(e)&&e.endsWith("%")?parseFloat(e)*.01>0?n:e:e<0?e:n;case"outer":return n=12,gt(e)&&e.endsWith("%")?parseFloat(e)*.01<0?n:e:e>0?e:n;default:return e}}function xn(t,e){return Ji(pe(t,e),function(n){return n[e]===0})}var Au=[1,0,0,0,1,0,0,0,1];function sr(t,e){var n=e?rt(e):rt(Au);return mt.transform(n,t)}var wu=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getActiveElements=function(){var n=mt.getDelegationObject(this.context);if(n){var r=this.context.view,i=n.component,a=n.item,o=i.get("field");if(o){var u=r.geometries[0].elements;return u.filter(function(l){return l.getModel().data[o]===a.value})}}return[]},e.prototype.getActiveElementLabels=function(){var n=this.context.view,r=this.getActiveElements(),i=n.geometries[0].labelsContainer.getChildren();return i.filter(function(a){return r.find(function(o){return wr(o.getData(),a.get("data"))})})},e.prototype.transfrom=function(n){n===void 0&&(n=7.5);var r=this.getActiveElements(),i=this.getActiveElementLabels();r.forEach(function(a,o){var u=i[o],l=a.geometry.coordinate;if(l.isPolar&&l.isTransposed){var s=mt.getAngle(a.getModel(),l),c=s.startAngle,f=s.endAngle,d=(c+f)/2,h=n,v=h*Math.cos(d),g=h*Math.sin(d);a.shape.setMatrix(sr([["t",v,g]])),u.setMatrix(sr([["t",v,g]]))}})},e.prototype.active=function(){this.transfrom()},e.prototype.reset=function(){this.transfrom(0)},e}(Xt);function Su(t){var e=t.event,n,r=e.target;return r&&(n=r.get("element")),n}var Du=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAnnotations=function(n){var r=n||this.context.view;return r.getController("annotation").option},e.prototype.getInitialAnnotation=function(){return this.initialAnnotation},e.prototype.init=function(){var n=this,r=this.context.view;r.removeInteraction("tooltip"),r.on("afterchangesize",function(){var i=n.getAnnotations(r);n.initialAnnotation=i})},e.prototype.change=function(n){var r=this.context,i=r.view,a=r.event;this.initialAnnotation||(this.initialAnnotation=this.getAnnotations());var o=E(a,["data","data"]);if(a.type.match("legend-item")){var u=mt.getDelegationObject(this.context),l=i.getGroupedFields()[0];if(u&&l){var s=u.item;o=i.getData().find(function(h){return h[l]===s.value})}}if(o){var c=E(n,"annotations",[]),f=E(n,"statistic",{});i.getController("annotation").clear(!0),$(c,function(h){typeof h=="object"&&i.annotation()[h.type](h)}),En(i,{statistic:f,plotType:"pie"},o),i.render(!0)}var d=Su(this.context);d&&d.shape.toFront()},e.prototype.reset=function(){var n=this.context.view,r=n.getController("annotation");r.clear(!0);var i=this.getInitialAnnotation();$(i,function(a){n.annotation()[a.type](a)}),n.render(!0)},e}(Xt),Oa="pie-statistic";bt(Oa,Du);nt("pie-statistic-active",{start:[{trigger:"element:mouseenter",action:"pie-statistic:change"}],end:[{trigger:"element:mouseleave",action:"pie-statistic:reset"}]});bt("pie-legend",wu);nt("pie-legend-active",{start:[{trigger:"legend-item:mouseenter",action:"pie-legend:active"}],end:[{trigger:"legend-item:mouseleave",action:"pie-legend:reset"}]});function Eu(t){var e=t.chart,n=t.options,r=n.data,i=n.angleField,a=n.colorField,o=n.color,u=n.pieStyle,l=n.shape,s=pe(r,i);if(xn(s,i)){var c="$$percentage$$";s=s.map(function(d){var h;return x(x({},d),(h={},h[c]=1/s.length,h))}),e.data(s);var f=A({},t,{options:{xField:"1",yField:c,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}});vt(f)}else{e.data(s);var f=A({},t,{options:{xField:"1",yField:i,seriesField:a,isStack:!0,interval:{color:o,shape:l,style:u},args:{zIndexReversed:!0,sortZIndex:!0}}});vt(f)}return t}function Ou(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.colorField,o=A({},i);return n.scale(o,(e={},e[a]={type:"cat"},e)),t}function Iu(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"theta",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function Mu(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.angleField,o=e.geometries[0];if(!r)o.label(!1);else{var u=r.callback,l=pt(r,["callback"]),s=dt(l);if(s.content){var c=s.content;s.content=function(v,g,y){var p=v[i],m=v[a],b=e.getScaleByField(a),F=b==null?void 0:b.scale(m);return ot(c)?c(x(x({},v),{percent:F}),g,y):gt(c)?ia(c,{value:m,name:p,percentage:lt(F)&&!It(m)?(F*100).toFixed(2)+"%":null}):c}}var f={inner:"",outer:"pie-outer",spider:"pie-spider"},d=s.type?f[s.type]:"pie-outer",h=s.layout?J(s.layout)?s.layout:[s.layout]:[];s.layout=(d?[{type:d}]:[]).concat(h),o.label({fields:i?[a,i]:[a],callback:u,cfg:x(x({},s),{offset:bu(s.type,s.offset),type:"pie"})})}return t}function Ia(t){var e=t.innerRadius,n=t.statistic,r=t.angleField,i=t.colorField,a=t.meta,o=t.locale,u=In(o);if(e&&n){var l=A({},Ea.statistic,n),s=l.title,c=l.content;return s!==!1&&(s=A({},{formatter:function(f){var d=f?f[i]:It(s.content)?u.get(["statistic","total"]):s.content,h=E(a,[i,"formatter"])||function(v){return v};return h(d)}},s)),c!==!1&&(c=A({},{formatter:function(f,d){var h=f?f[r]:Fu(d,r),v=E(a,[r,"formatter"])||function(g){return g};return f||It(c.content)?v(h):c.content}},c)),A({},{statistic:{title:s,content:c}},t)}return t}function Ma(t){var e=t.chart,n=t.options,r=Ia(n),i=r.innerRadius,a=r.statistic;return e.getController("annotation").clear(!0),_(it())(t),i&&a&&En(e,{statistic:a,plotType:"pie"}),t}function ku(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.colorField,a=n.angleField,o=n.data;if(r===!1)e.tooltip(r);else if(e.tooltip(A({},r,{shared:!1})),xn(o,a)){var u=E(r,"fields"),l=E(r,"formatter");An(E(r,"fields"))&&(u=[i,a],l=l||function(s){return{name:s[i],value:Il(s[a])}}),e.geometries[0].tooltip(u.join("*"),de(u,l))}return t}function Tu(t){var e=t.chart,n=t.options,r=Ia(n),i=r.interactions,a=r.statistic,o=r.annotations;return $(i,function(u){var l,s;if(u.enable===!1)e.removeInteraction(u.type);else if(u.type==="pie-statistic-active"){var c=[];!((l=u.cfg)===null||l===void 0)&&l.start||(c=[{trigger:"element:mouseenter",action:Oa+":change",arg:{statistic:a,annotations:o}}]),$((s=u.cfg)===null||s===void 0?void 0:s.start,function(f){c.push(x(x({},f),{arg:{statistic:a,annotations:o}}))}),e.interaction(u.type,A({},u.cfg,{start:c}))}else e.interaction(u.type,u.cfg||{})}),t}function ka(t){return _(At("pieStyle"),Eu,Ou,j,Iu,Ae,ku,Mu,Jt,Ma,Tu,Q)(t)}var Pu=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return Ea},e.prototype.changeData=function(n){this.chart.emit(st.BEFORE_CHANGE_DATA,Lt.fromData(this.chart,st.BEFORE_CHANGE_DATA,null));var r=this.options,i=this.options.angleField,a=pe(r.data,i),o=pe(n,i);xn(a,i)||xn(o,i)?this.update({data:n}):(this.updateOption({data:n}),this.chart.data(o),Ma({chart:this.chart,options:this.options}),this.chart.render(!0)),this.chart.emit(st.AFTER_CHANGE_DATA,Lt.fromData(this.chart,st.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ka},e}(G);function $u(t){var e=t.chart,n=t.options,r=n.data,i=n.sectorStyle,a=n.color;return e.data(r),_(vt)(A({},t,{options:{marginRatio:1,interval:{style:i,color:a}}})),t}function Lu(t){var e=t.chart,n=t.options,r=n.label,i=n.xField,a=ht(e,"interval");if(r===!1)a.label(!1);else if(se(r)){var o=r.callback,u=r.fields,l=pt(r,["callback","fields"]),s=l.offset,c=l.layout;(s===void 0||s>=0)&&(c=c?J(c)?c:[c]:[],l.layout=be(c,function(f){return f.type!=="limit-in-shape"}),l.layout.length||delete l.layout),a.label({fields:u||[i],callback:o,cfg:dt(l)})}else Ut(Pt.WARN,r===null,"the label option must be an Object."),a.label({fields:[i]});return t}function Cu(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField;return r===!1?e.legend(!1):i&&e.legend(i,r),t}function Ru(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}),t}function zu(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return _(at((e={},e[a]=r,e[o]=i,e)))(t)}function Nu(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r?e.axis(a,r):e.axis(a,!1),i?e.axis(o,i):e.axis(o,!1),t}function _u(t){_(At("sectorStyle"),$u,zu,Lu,Ru,Nu,Cu,ft,et,Q,j,it(),Jt)(t)}var Vu=A({},G.getDefaultOptions(),{xAxis:!1,yAxis:!1,legend:{position:"right",radio:{}},sectorStyle:{stroke:"#fff",lineWidth:1},label:{layout:{type:"limit-in-shape"}},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return Vu},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _u},e})(G);var Wu={font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:3e3};function Bu(t,e){return e=Ct({},Wu,e),Gu(t,e)}function Gu(t,e){var n=nc();["font","fontSize","fontWeight","padding","rotate","size","spiral","timeInterval","random"].forEach(function(l){It(e[l])||n[l](e[l])}),n.words(t),e.imageMask&&n.createMask(e.imageMask);var r=n.start(),i=r._tags;i.forEach(function(l){l.x+=e.size[0]/2,l.y+=e.size[1]/2});var a=e.size,o=a[0],u=a[1];return i.push({text:"",value:0,x:0,y:0,opacity:0}),i.push({text:"",value:0,x:o,y:u,opacity:0}),i}var Hn=Math.PI/180,$e=1<<11>>5,un=1<<11;function qu(t){return t.text}function Uu(){return"serif"}function ci(){return"normal"}function Xu(t){return t.value}function Yu(){return~~(Math.random()*2)*90}function Hu(){return 1}function ju(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,($e<<5)/a,un/a);var o=0,u=0,l=0,s=n.length;for(--r;++r<s;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var c=i.measureText(e.text+"m").width*a,f=e.size<<1;if(e.rotate){var d=Math.sin(e.rotate*Hn),h=Math.cos(e.rotate*Hn),v=c*h,g=c*d,y=f*h,p=f*d;c=Math.max(Math.abs(v+p),Math.abs(v-p))+31>>5<<5,f=~~Math.max(Math.abs(g+y),Math.abs(g-y))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=$e<<5&&(o=0,u+=l,l=0),u+f>=un)break;i.translate((o+(c>>1))/a,(u+(f>>1))/a),e.rotate&&i.rotate(e.rotate*Hn),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=f,e.xoff=o,e.yoff=u,e.x1=c>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var m=i.getImageData(0,0,($e<<5)/a,un/a).data,b=[];--r>=0;)if(e=n[r],!!e.hasText){for(var c=e.width,F=c>>5,f=e.y1-e.y0,w=0;w<f*F;w++)b[w]=0;if(o=e.xoff,o==null)return;u=e.yoff;for(var D=0,M=-1,k=0;k<f;k++){for(var w=0;w<c;w++){var C=F*k+(w>>5),T=m[(u+k)*($e<<5)+(o+w)<<2]?1<<31-w%32:0;b[C]|=T,D|=T}D?M=k:(e.y0++,f--,k--,u++)}e.y1=e.y0+M,e.sprite=b.slice(0,(e.y1-e.y0)*F)}}}function Zu(t,e,n){n>>=5;for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,u=32-o,l=t.y1-t.y0,s=(t.y+t.y0)*n+(a>>5),c,f=0;f<l;f++){c=0;for(var d=0;d<=i;d++)if((c<<u|(d<i?(c=r[f*i+d])>>>o:0))&e[s+d])return!0;s+=n}return!1}function Ku(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Qu(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Ta(t){var e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Ju(t){var e=4,n=e*t[0]/t[1],r=0,i=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=n;break;case 1:i+=e;break;case 2:r-=n;break;default:i-=e;break}return[r,i]}}function fi(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function tc(){return document.createElement("canvas")}function $t(t){return ot(t)?t:function(){return t}}var ec={archimedean:Ta,rectangular:Ju};function nc(){var t=[256,256],e=Uu,n=Xu,r=ci,i=Yu,a=Hu,o=Ta,u=Math.random,l=[],s=1/0,c=qu,f=ci,d=tc,h={};h.start=function(){var y=t[0],p=t[1],m=v(d()),b=h.board?h.board:fi((t[0]>>5)*t[1]),F=l.length,w=[],D=l.map(function(T,O,L){return T.text=c.call(this,T,O,L),T.font=e.call(this,T,O,L),T.style=f.call(this,T,O,L),T.weight=r.call(this,T,O,L),T.rotate=i.call(this,T,O,L),T.size=~~n.call(this,T,O,L),T.padding=a.call(this,T,O,L),T}).sort(function(T,O){return O.size-T.size}),M=-1,k=h.board?[{x:0,y:0},{x:y,y:p}]:null;C();function C(){for(var T=Date.now();Date.now()-T<s&&++M<F;){var O=D[M];O.x=y*(u()+.5)>>1,O.y=p*(u()+.5)>>1,ju(m,O,D,M),O.hasText&&g(b,O,k)&&(w.push(O),k?h.hasImage||Ku(k,O):k=[{x:O.x+O.x0,y:O.y+O.y0},{x:O.x+O.x1,y:O.y+O.y1}],O.x-=t[0]>>1,O.y-=t[1]>>1)}h._tags=w,h._bounds=k}return h};function v(y){y.width=y.height=1;var p=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=($e<<5)/p,y.height=un/p;var m=y.getContext("2d");return m.fillStyle=m.strokeStyle="red",m.textAlign="center",{context:m,ratio:p}}function g(y,p,m){for(var b=p.x,F=p.y,w=Math.sqrt(t[0]*t[0]+t[1]*t[1]),D=o(t),M=u()<.5?1:-1,k,C=-M,T,O;(k=D(C+=M))&&(T=~~k[0],O=~~k[1],!(Math.min(Math.abs(T),Math.abs(O))>=w));)if(p.x=b+T,p.y=F+O,!(p.x+p.x0<0||p.y+p.y0<0||p.x+p.x1>t[0]||p.y+p.y1>t[1])&&(!m||!Zu(p,y,t[0]))&&(!m||Qu(p,m))){for(var L=p.sprite,W=p.width>>5,H=t[0]>>5,Z=p.x-(W<<4),S=Z&127,I=32-S,N=p.y1-p.y0,R=void 0,P=(p.y+p.y0)*H+(Z>>5),z=0;z<N;z++){R=0;for(var X=0;X<=W;X++)y[P+X]|=R<<I|(X<W?(R=L[z*W+X])>>>S:0);P+=H}return delete p.sprite,!0}return!1}return h.createMask=function(y){var p=document.createElement("canvas"),m=t[0],b=t[1];if(!(!m||!b)){var F=m>>5,w=fi((m>>5)*b);p.width=m,p.height=b;var D=p.getContext("2d");D.drawImage(y,0,0,y.width,y.height,0,0,m,b);for(var M=D.getImageData(0,0,m,b).data,k=0;k<b;k++)for(var C=0;C<m;C++){var T=F*k+(C>>5),O=k*m+C<<2,L=M[O]>=250&&M[O+1]>=250&&M[O+2]>=250,W=L?1<<31-C%32:0;w[T]|=W}h.board=w,h.hasImage=!0}},h.timeInterval=function(y){s=y??1/0},h.words=function(y){l=y},h.size=function(y){t=[+y[0],+y[1]]},h.font=function(y){e=$t(y)},h.fontWeight=function(y){r=$t(y)},h.rotate=function(y){i=$t(y)},h.spiral=function(y){o=ec[y]||y},h.fontSize=function(y){n=$t(y)},h.padding=function(y){a=$t(y)},h.random=function(y){u=$t(y)},h}function Pa(t){var e=t.options,n=t.chart,r=n,i=r.width,a=r.height,o=r.padding,u=r.appendPadding,l=r.ele,s=e.data,c=e.imageMask,f=e.wordField,d=e.weightField,h=e.colorField,v=e.wordStyle,g=e.timeInterval,y=e.random,p=e.spiral,m=e.autoFit,b=m===void 0?!0:m,F=e.placementStrategy;if(!s||!s.length)return[];var w=v.fontFamily,D=v.fontWeight,M=v.padding,k=v.fontSize,C=lc(s,d),T=[cc(C),fc(C)],O=s.map(function(H){return{text:H[f],value:H[d],color:H[h],datum:H}}),L={imageMask:c,font:w,fontSize:oc(k,T),fontWeight:D,size:rc({width:i,height:a,padding:o,appendPadding:u,autoFit:b,container:l}),padding:M,timeInterval:g,random:y,spiral:p,rotate:sc(e)};if(ot(F)){var W=O.map(function(H,Z,S){return x(x(x({},H),{hasText:!!H.text,font:$t(L.font)(H,Z,S),weight:$t(L.fontWeight)(H,Z,S),rotate:$t(L.rotate)(H,Z,S),size:$t(L.fontSize)(H,Z,S),style:"normal"}),F.call(n,H,Z,S))});return W.push({text:"",value:0,x:0,y:0,opacity:0}),W.push({text:"",value:0,x:L.size[0],y:L.size[1],opacity:0}),W}return Bu(O,L)}function rc(t){var e=t.width,n=t.height,r=t.container,i=t.autoFit,a=t.padding,o=t.appendPadding;if(i){var u=or(r);e=u.width,n=u.height}e=e||400,n=n||400;var l=ic({padding:a,appendPadding:o}),s=l[0],c=l[1],f=l[2],d=l[3],h=[e-(d+c),n-(s+f)];return h}function ic(t){var e=Ht(t.padding),n=Ht(t.appendPadding),r=e[0]+n[0],i=e[1]+n[1],a=e[2]+n[2],o=e[3]+n[3];return[r,i,a,o]}function ac(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement){e(t);return}if(gt(t)){var r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=function(){e(r)},r.onerror=function(){Ut(Pt.ERROR,!1,"image %s load failed !!!",t),n()};return}Ut(Pt.WARN,t===void 0,"The type of imageMask option must be String or HTMLImageElement."),n()})}function oc(t,e){if(ot(t))return t;if(J(t)){var n=t[0],r=t[1];if(!e)return function(){return(r+n)/2};var i=e[0],a=e[1];return a===i?function(){return(r+n)/2}:function(u){var l=u.value;return(r-n)/(a-i)*(l-i)+n}}return function(){return t}}function lc(t,e){return t.map(function(n){return n[e]}).filter(function(n){return typeof n=="number"&&!isNaN(n)})}function sc(t){var e=uc(t),n=e.rotation,r=e.rotationSteps;if(!J(n))return n;var i=n[0],a=n[1],o=r===1?0:(a-i)/(r-1);return function(){return a===i?a:Math.floor(Math.random()*r)*o}}function uc(t){var e=t.wordStyle.rotationSteps;return e<1&&(Ut(Pt.WARN,!1,"The rotationSteps option must be greater than or equal to 1."),e=1),{rotation:t.wordStyle.rotation,rotationSteps:e}}function cc(t){return Math.min.apply(Math,t)}function fc(t){return Math.max.apply(Math,t)}var Lr="color",dc=A({},G.getDefaultOptions(),{timeInterval:2e3,legend:!1,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!1,fields:["text","value",Lr],formatter:function(t){return{name:t.text,value:t.value}}},wordStyle:{fontFamily:"Verdana",fontWeight:"normal",padding:1,fontSize:[12,60],rotation:[0,90],rotationSteps:2,rotateRatio:.5}});function hc(t){var e=t.chart,n=t.options,r=n.colorField,i=n.color,a=Pa(t);e.data(a);var o=A({},t,{options:{xField:"x",yField:"y",seriesField:r&&Lr,rawFields:ot(i)&&rt(E(n,"rawFields",[]),["datum"]),point:{color:i,shape:"word-cloud"}}}),u=wt(o).ext;return u.geometry.label(!1),e.coordinate().reflect("y"),e.axis(!1),t}function vc(t){return _(at({x:{nice:!1},y:{nice:!1}}))(t)}function gc(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField;return r===!1?e.legend(!1):i&&e.legend(Lr,r),t}function pc(t){_(hc,vc,ft,gc,et,Q,j,Jt)(t)}Qt("point","word-cloud",{draw:function(t,e){var n=t.x,r=t.y,i=e.addShape("text",{attrs:x(x({},yc(t)),{x:n,y:r})}),a=t.data.rotate;return typeof a=="number"&&mt.rotate(i,a*Math.PI/180),i}});function yc(t){return{fontSize:t.data.size,text:t.data.text,textAlign:"center",fontFamily:t.data.font,fontWeight:t.data.weight,fill:t.color||t.defaultStyle.stroke,textBaseline:"alphabetic"}}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="word-cloud",n}return e.getDefaultOptions=function(){return dc},e.prototype.changeData=function(n){this.updateOption({data:n}),this.options.imageMask?this.render():this.chart.changeData(Pa({chart:this.chart,options:this.options}))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.render=function(){var n=this;return new Promise(function(r){var i=n.options.imageMask;if(!i){t.prototype.render.call(n),r();return}var a=function(o){n.options=x(x({},n.options),{imageMask:o||null}),t.prototype.render.call(n),r()};ac(i).then(a).catch(a)})},e.prototype.getSchemaAdaptor=function(){return pc},e.prototype.triggerResize=function(){var n=this;this.chart.destroyed||(this.execAdaptor(),window.setTimeout(function(){t.prototype.triggerResize.call(n)}))},e})(G);function jt(t,e){return xc(t)||mc(t,e)||Fc()}function xc(t){if(Array.isArray(t))return t}function mc(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),u;!(r=(u=o.next()).done)&&(n.push(u.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}function Fc(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Cr(t,e,n,r){t=t.filter(function(v,g){var y=e(v,g),p=n(v,g);return y!=null&&isFinite(y)&&p!=null&&isFinite(p)}),r&&t.sort(function(v,g){return e(v)-e(g)});for(var i=t.length,a=new Float64Array(i),o=new Float64Array(i),u=0,l=0,s,c,f,d=0;d<i;)f=t[d],a[d]=s=+e(f,d,t),o[d]=c=+n(f,d,t),++d,u+=(s-u)/d,l+=(c-l)/d;for(var h=0;h<i;++h)a[h]-=u,o[h]-=l;return[a,o,u,l]}function ce(t,e,n,r){for(var i=0,a=0,o=t.length;a<o;a++){var u=t[a],l=+e(u,a,t),s=+n(u,a,t);l!=null&&isFinite(l)&&s!=null&&isFinite(s)&&r(l,s,i++)}}function Se(t,e,n,r,i){var a=0,o=0;return ce(t,e,n,function(u,l){var s=l-i(u),c=l-r;a+=s*s,o+=c*c}),1-a/o}function di(t){return Math.atan2(t[1][1]-t[0][1],t[1][0]-t[0][0])*180/Math.PI}function bc(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}function Ze(t,e,n){for(var r=Math.log(e-t)*Math.LOG10E+1|0,i=1*Math.pow(10,-r/2-1),a=1e4,o=[l(t),l(e)],u=0;s(o)&&u<a;);return o;function l(c){return[c,n(c)]}function s(c){u++;for(var f=c.length,d=!1,h=0;h<f-1;h++){var v=c[h],g=c[h+1],y=bc([v,g]),p=l(y[0]),m=di([v,y]),b=di([v,p]),F=Math.abs(m-b);F>i&&(c.splice(h+1,0,p),d=!0)}return d}}function Ke(t,e,n,r){var i=r-t*t,a=Math.abs(i)<1e-24?0:(n-t*e)/i,o=e-a*t;return[o,a]}function Ac(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,l=0,s=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0;ce(i,t,e,function(b,F){var w=Math.log(F),D=b*F;++a,o+=(F-o)/a,l+=(D-l)/a,c+=(b*D-c)/a,u+=(F*w-u)/a,s+=(D*w-s)/a,n||(b<f&&(f=b),b>d&&(d=b))});var h=Ke(l/o,u/o,s/o,c/o),v=jt(h,2),g=v[0],y=v[1];g=Math.exp(g);var p=function(F){return g*Math.exp(y*F)},m=Ze(f,d,p);return m.a=g,m.b=y,m.predict=p,m.rSquared=Se(i,t,e,o,p),m}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function $a(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,l=0,s=0,c=n?+n[0]:1/0,f=n?+n[1]:-1/0;ce(i,t,e,function(m,b){++a,o+=(m-o)/a,u+=(b-u)/a,l+=(m*b-l)/a,s+=(m*m-s)/a,n||(m<c&&(c=m),m>f&&(f=m))});var d=Ke(o,u,l,s),h=jt(d,2),v=h[0],g=h[1],y=function(b){return g*b+v},p=[[c,y(c)],[f,y(f)]];return p.a=g,p.b=v,p.predict=y,p.rSquared=Se(i,t,e,u,y),p}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function wc(t){t.sort(function(n,r){return n-r});var e=t.length/2;return e%1===0?(t[e-1]+t[e])/2:t[Math.floor(e)]}var hi=2,vi=1e-12;function Sc(){var t=function(a){return a[0]},e=function(a){return a[1]},n=.3;function r(i){for(var a=Cr(i,t,e,!0),o=jt(a,4),u=o[0],l=o[1],s=o[2],c=o[3],f=u.length,d=Math.max(2,~~(n*f)),h=new Float64Array(f),v=new Float64Array(f),g=new Float64Array(f).fill(1),y=-1;++y<=hi;){for(var p=[0,d-1],m=0;m<f;++m){for(var b=u[m],F=p[0],w=p[1],D=b-u[F]>u[w]-b?F:w,M=0,k=0,C=0,T=0,O=0,L=1/Math.abs(u[D]-b||1),W=F;W<=w;++W){var H=u[W],Z=l[W],S=Dc(Math.abs(b-H)*L)*g[W],I=H*S;M+=S,k+=I,C+=Z*S,T+=Z*I,O+=H*I}var N=Ke(k/M,C/M,T/M,O/M),R=jt(N,2),P=R[0],z=R[1];h[m]=P+z*b,v[m]=Math.abs(l[m]-h[m]),Ec(u,m+1,p)}if(y===hi)break;var X=wc(v);if(Math.abs(X)<vi)break;for(var Y=0,V,U;Y<f;++Y)V=v[Y]/(6*X),g[Y]=V>=1?vi:(U=1-V*V)*U}return Oc(u,h,s,c)}return r.bandwidth=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Dc(t){return(t=1-t*t*t)*t*t}function Ec(t,e,n){var r=t[e],i=n[0],a=n[1]+1;if(!(a>=t.length))for(;e>i&&t[a]-r<=r-t[i];)n[0]=++i,n[1]=a,++a}function Oc(t,e,n,r){for(var i=t.length,a=[],o=0,u=0,l=[],s;o<i;++o)s=t[o]+n,l[0]===s?l[1]+=(e[o]-l[1])/++u:(u=0,l[1]+=r,l=[s,e[o]],a.push(l));return l[1]+=r,a}function Ic(){var t=function(o){return o[0]},e=function(o){return o[1]},n=Math.E,r;function i(a){var o=0,u=0,l=0,s=0,c=0,f=r?+r[0]:1/0,d=r?+r[1]:-1/0,h=Math.log(n);ce(a,t,e,function(F,w){var D=Math.log(F)/h;++o,u+=(D-u)/o,l+=(w-l)/o,s+=(D*w-s)/o,c+=(D*D-c)/o,r||(F<f&&(f=F),F>d&&(d=F))});var v=Ke(u,l,s,c),g=jt(v,2),y=g[0],p=g[1],m=function(w){return p*Math.log(w)/h+y},b=Ze(f,d,m);return b.a=p,b.b=y,b.predict=m,b.rSquared=Se(a,t,e,l,m),b}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.base=function(a){return arguments.length?(n=a,i):n},i}function La(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=Cr(i,t,e),o=jt(a,4),u=o[0],l=o[1],s=o[2],c=o[3],f=u.length,d=0,h=0,v=0,g=0,y=0,p,m,b,F;for(p=0;p<f;)m=u[p],b=l[p++],F=m*m,d+=(F-d)/p,h+=(F*m-h)/p,v+=(F*F-v)/p,g+=(m*b-g)/p,y+=(F*b-y)/p;var w=0,D=0,M=n?+n[0]:1/0,k=n?+n[1]:-1/0;ce(i,t,e,function(S,I){D++,w+=(I-w)/D,n||(S<M&&(M=S),S>k&&(k=S))});var C=v-d*d,T=d*C-h*h,O=(y*d-g*h)/T,L=(g*C-y*h)/T,W=-O*d,H=function(I){return I=I-s,O*I*I+L*I+W+c},Z=Ze(M,k,H);return Z.a=O,Z.b=L-2*O*s,Z.c=W-L*s+O*s*s+c,Z.predict=H,Z.rSquared=Se(i,t,e,w,H),Z}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}function Mc(){var t=function(o){return o[0]},e=function(o){return o[1]},n=3,r;function i(a){if(n===1){var o=$a().x(t).y(e).domain(r)(a);return o.coefficients=[o.b,o.a],delete o.a,delete o.b,o}if(n===2){var u=La().x(t).y(e).domain(r)(a);return u.coefficients=[u.c,u.b,u.a],delete u.a,delete u.b,delete u.c,u}var l=Cr(a,t,e),s=jt(l,4),c=s[0],f=s[1],d=s[2],h=s[3],v=c.length,g=[],y=[],p=n+1,m=0,b=0,F=r?+r[0]:1/0,w=r?+r[1]:-1/0;ce(a,t,e,function(H,Z){++b,m+=(Z-m)/b,r||(H<F&&(F=H),H>w&&(w=H))});var D,M,k,C,T;for(D=0;D<p;++D){for(k=0,C=0;k<v;++k)C+=Math.pow(c[k],D)*f[k];for(g.push(C),T=new Float64Array(p),M=0;M<p;++M){for(k=0,C=0;k<v;++k)C+=Math.pow(c[k],D+M);T[M]=C}y.push(T)}y.push(g);var O=Tc(y),L=function(Z){Z-=d;var S=h+O[0]+O[1]*Z+O[2]*Z*Z;for(D=3;D<p;++D)S+=O[D]*Math.pow(Z,D);return S},W=Ze(F,w,L);return W.coefficients=kc(p,O,-d,h),W.predict=L,W.rSquared=Se(a,t,e,m,L),W}return i.domain=function(a){return arguments.length?(r=a,i):r},i.x=function(a){return arguments.length?(t=a,i):t},i.y=function(a){return arguments.length?(e=a,i):e},i.order=function(a){return arguments.length?(n=a,i):n},i}function kc(t,e,n,r){var i=Array(t),a,o,u,l;for(a=0;a<t;++a)i[a]=0;for(a=t-1;a>=0;--a)for(u=e[a],l=1,i[a]+=u,o=1;o<=a;++o)l*=(a+1-o)/o,i[a-o]+=u*Math.pow(n,o)*l;return i[0]+=r,i}function Tc(t){var e=t.length-1,n=[],r,i,a,o,u;for(r=0;r<e;++r){for(o=r,i=r+1;i<e;++i)Math.abs(t[r][i])>Math.abs(t[r][o])&&(o=i);for(a=r;a<e+1;++a)u=t[a][r],t[a][r]=t[a][o],t[a][o]=u;for(i=r+1;i<e;++i)for(a=e;a>=r;a--)t[a][i]-=t[a][r]*t[r][i]/t[r][r]}for(i=e-1;i>=0;--i){for(u=0,a=i+1;a<e;++a)u+=t[a][i]*n[a];n[i]=(t[e][i]-u)/t[i][i]}return n}function Pc(){var t=function(a){return a[0]},e=function(a){return a[1]},n;function r(i){var a=0,o=0,u=0,l=0,s=0,c=0,f=n?+n[0]:1/0,d=n?+n[1]:-1/0;ce(i,t,e,function(b,F){var w=Math.log(b),D=Math.log(F);++a,o+=(w-o)/a,u+=(D-u)/a,l+=(w*D-l)/a,s+=(w*w-s)/a,c+=(F-c)/a,n||(b<f&&(f=b),b>d&&(d=b))});var h=Ke(o,u,l,s),v=jt(h,2),g=v[0],y=v[1];g=Math.exp(g);var p=function(F){return g*Math.pow(F,y)},m=Ze(f,d,p);return m.a=g,m.b=y,m.predict=p,m.rSquared=Se(i,t,e,c,p),m}return r.domain=function(i){return arguments.length?(n=i,r):n},r.x=function(i){return arguments.length?(t=i,r):t},r.y=function(i){return arguments.length?(e=i,r):e},r}var $c={exp:Ac,linear:$a,loess:Sc,log:Ic,poly:Mc,pow:Pc,quad:La};function Lc(t,e){var n=10,r={regionStyle:[{position:{start:[t,"max"],end:["max",e]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:["min","max"],end:[t,e]},style:{fill:"#a3dda1",opacity:.4}},{position:{start:["min",e],end:[t,"min"]},style:{fill:"#d8d0c0",opacity:.4}},{position:{start:[t,e],end:["max","min"]},style:{fill:"#a3dda1",opacity:.4}}],lineStyle:{stroke:"#9ba29a",lineWidth:1},labelStyle:[{position:["max",e],offsetX:-n,offsetY:-n,style:{textAlign:"right",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:-n,style:{textAlign:"left",textBaseline:"bottom",fontSize:14,fill:"#ccc"}},{position:["min",e],offsetX:n,offsetY:n,style:{textAlign:"left",textBaseline:"top",fontSize:14,fill:"#ccc"}},{position:["max",e],offsetX:-n,offsetY:n,style:{textAlign:"right",textBaseline:"top",fontSize:14,fill:"#ccc"}}]};return r}var Cc=function(t,e){var n=e.view,r=e.options,i=r.xField,a=r.yField,o=n.getScaleByField(i),u=n.getScaleByField(a),l=t.map(function(s){return n.getCoordinate().convert({x:o.scale(s[0]),y:u.scale(s[1])})});return Yl(l,!1)},Rc=function(t){var e=t.options,n=e.xField,r=e.yField,i=e.data,a=e.regressionLine,o=a.type,u=o===void 0?"linear":o,l=a.algorithm,s;if(l)s=J(l)?l:l(i);else{var c=$c[u]().x(function(f){return f[n]}).y(function(f){return f[r]});s=c(i)}return Cc(s,t)},zc=function(t){var e,n=t.meta,r=n===void 0?{}:n,i=t.xField,a=t.yField,o=t.data,u=o[0][i],l=o[0][a],s=u>0,c=l>0;function f(d,h){var v=E(r,[d]);function g(p){return E(v,p)}var y={};return h==="x"?(lt(u)&&(lt(g("min"))||(y.min=s?0:u*2),lt(g("max"))||(y.max=s?u*2:0)),y):(lt(l)&&(lt(g("min"))||(y.min=c?0:l*2),lt(g("max"))||(y.max=c?l*2:0)),y)}return x(x({},r),(e={},e[i]=x(x({},r[i]),f(i,"x")),e[a]=x(x({},r[a]),f(a,"y")),e))};function Ca(t){var e=t.data,n=e===void 0?[]:e,r=t.xField,i=t.yField;if(n.length){for(var a=!0,o=!0,u=n[0],l=void 0,s=1;s<n.length&&(l=n[s],u[r]!==l[r]&&(a=!1),u[i]!==l[i]&&(o=!1),!(!a&&!o));s++)u=l;var c=[];a&&c.push(r),o&&c.push(i);var f=K(zc(t),c);return A({},t,{meta:f})}return t}function Nc(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.color,o=n.shape,u=n.pointStyle,l=n.shapeField,s=n.colorField,c=n.xField,f=n.yField,d=n.sizeField,h=n.size,v=n.tooltip;d&&(h||(h=[2,8]),lt(h)&&(h=[h,h])),v&&!v.fields&&(v=x(x({},v),{fields:[c,f,s,d,l]})),e.data(r),wt(A({},t,{options:{seriesField:s,point:{color:a,shape:o,size:h,style:u},tooltip:v}}));var g=ht(e,"point");return i&&g.adjust(i),t}function cn(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=Ca(n);return _(at((e={},e[a]=r,e[o]=i,e)))(A({},t,{options:u}))}function _c(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return e.axis(a,r),e.axis(o,i),t}function Vc(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.shapeField,o=n.sizeField,u=n.shapeLegend,l=n.sizeLegend,s=r!==!1;return i&&e.legend(i,s?r:!1),a&&(u?e.legend(a,u):e.legend(a,u===!1?!1:r)),o&&e.legend(o,l||!1),!s&&!u&&!l&&e.legend(!1),t}function Wc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=ht(e,"point");if(!r)a.label(!1);else{var o=r.callback,u=pt(r,["callback"]);a.label({fields:[i],callback:o,cfg:dt(u)})}return t}function Bc(t){var e=t.options,n=e.quadrant,r=[];if(n){var i=n.xBaseline,a=i===void 0?0:i,o=n.yBaseline,u=o===void 0?0:o,l=n.labels,s=n.regionStyle,c=n.lineStyle,f=Lc(a,u),d=new Array(4).join(",").split(",");d.forEach(function(h,v){r.push(x(x({type:"region",top:!1},f.regionStyle[v].position),{style:A({},f.regionStyle[v].style,s==null?void 0:s[v])}),x({type:"text",top:!0},A({},f.labelStyle[v],l==null?void 0:l[v])))}),r.push({type:"line",top:!1,start:["min",u],end:["max",u],style:A({},f.lineStyle,c)},{type:"line",top:!1,start:[a,"min"],end:[a,"max"],style:A({},f.lineStyle,c)})}return _(it(r))(t)}function Gc(t){var e=t.options,n=t.chart,r=e.regressionLine;if(r){var i=r.style,a=r.top,o=a===void 0?!1:a,u={stroke:"#9ba29a",lineWidth:2,opacity:.5};n.annotation().shape({top:o,render:function(l,s){var c=l.addGroup({id:n.id+"-regression-line",name:"regression-line-group"}),f=Rc({view:s,options:e});c.addShape("path",{name:"regression-line",attrs:x(x({path:f},u),i)})}})}return t}function qc(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(r):r===!1&&e.tooltip(!1),t}function Ra(t){return _(Nc,cn,_c,Vc,qc,Wc,Sa,He,kr,et,Bc,Q,j,Gc)(t)}var Uc=A({},G.getDefaultOptions(),{size:4,tooltip:{showTitle:!1,showMarkers:!1,showCrosshairs:!0,crosshairs:{type:"xy"}}});nt("drag-move",{start:[{trigger:"plot:mousedown",action:"scale-translate:start"}],processing:[{trigger:"plot:mousemove",action:"scale-translate:translate",throttle:{wait:100,leading:!0,trailing:!1}}],end:[{trigger:"plot:mouseup",action:"scale-translate:end"}]});var Xc=function(t){B(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.type="scatter",i.on(st.BEFORE_RENDER,function(a){var o,u,l=i,s=l.options,c=l.chart;if(((o=a.data)===null||o===void 0?void 0:o.source)===ti.FILTER){var f=i.chart.filterData(i.chart.getData());cn({chart:c,options:x(x({},s),{data:f})})}((u=a.data)===null||u===void 0?void 0:u.source)===ti.RESET&&cn({chart:c,options:s})}),i}return e.getDefaultOptions=function(){return Uc},e.prototype.changeData=function(n){this.updateOption(Ca(A({},this.options,{data:n})));var r=this,i=r.options,a=r.chart;cn({chart:a,options:i}),this.chart.changeData(n)},e.prototype.getSchemaAdaptor=function(){return Ra},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e}(G);function Yc(t){var e=t.chart,n=t.options,r=n.data,i=n.lineStyle,a=n.color,o=n.point,u=n.area;e.data(r);var l=A({},t,{options:{line:{style:i,color:a},point:o&&x({color:a},o),area:u&&x({color:a},u),label:void 0}}),s=A({},l,{options:{tooltip:!1}}),c=(o==null?void 0:o.state)||n.state,f=A({},l,{options:{tooltip:!1,state:c}});return we(l),wt(f),$n(s),t}function Hc(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return _(at((e={},e[a]=r,e[o]=i,e)))(t)}function jc(t){var e=t.chart,n=t.options,r=n.radius,i=n.startAngle,a=n.endAngle;return e.coordinate("polar",{radius:r,startAngle:i,endAngle:a}),t}function Zc(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis,a=n.yField,o=n.yAxis;return e.axis(r,i),e.axis(a,o),t}function Kc(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=ht(e,"line");if(!r)a.label(!1);else{var o=r.callback,u=pt(r,["callback"]);a.label({fields:[i],callback:o,cfg:dt(u)})}return t}function Qc(t){return _(Yc,Hc,j,jc,Zc,Ae,ft,Kc,et,Q,it())(t)}var Jc=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"name",{get:function(){return"radar-tooltip"},enumerable:!1,configurable:!0}),e.prototype.getTooltipItems=function(n){var r=this.getTooltipCfg(),i=r.shared,a=r.title,o=t.prototype.getTooltipItems.call(this,n);if(o.length>0){var u=this.view.geometries[0],l=u.dataArray,s=o[0].name,c=[];return l.forEach(function(f){f.forEach(function(d){var h=mt.getTooltipItems(d,u),v=h[0];if(!i&&v&&v.name===s){var g=It(a)?s:a;c.push(x(x({},v),{name:v.title,title:g}))}else if(i&&v){var g=It(a)?v.name||s:a;c.push(x(x({},v),{name:v.title,title:g}))}})}),c}return[]},e}(Ml);kl("radar-tooltip",Jc);var tf=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(){var n=this.context.view;n.removeInteraction("tooltip")},e.prototype.show=function(){var n=this.context.event,r=this.getTooltipController();r.showTooltip({x:n.x,y:n.y})},e.prototype.hide=function(){var n=this.getTooltipController();n.hideTooltip()},e.prototype.getTooltipController=function(){var n=this.context.view;return n.getController("radar-tooltip")},e}(Xt);bt("radar-tooltip",tf);nt("radar-tooltip",{start:[{trigger:"plot:mousemove",action:"radar-tooltip:show"}],end:[{trigger:"plot:mouseleave",action:"radar-tooltip:hide"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return A({},t.prototype.getDefaultOptions.call(this),{xAxis:{label:{offset:15},grid:{line:{type:"line"}}},yAxis:{grid:{line:{type:"circle"}}},legend:{position:"top"},tooltip:{shared:!0,showCrosshairs:!0,showMarkers:!0,crosshairs:{type:"xy",line:{style:{stroke:"#565656",lineDash:[4]}},follow:!0}}})},e.prototype.getSchemaAdaptor=function(){return Qc},e})(G);var xe;(function(t){t.Left="Left",t.Right="Right"})(xe||(xe={}));var le;(function(t){t.Line="line",t.Column="column"})(le||(le={}));var St="left-axes-view",Dt="right-axes-view",za={nice:!0,label:{autoHide:!0,autoRotate:!1}},ef=x(x({},za),{position:"left"}),nf=x(x({},za),{position:"right",grid:null});function ur(t){return E(t,"geometry")===le.Line}function Rr(t){return E(t,"geometry")===le.Column}function gi(t,e,n){return Rr(n)?A({},{geometry:le.Column,label:n.label&&n.isRange?{content:function(r){var i;return(i=r[e])===null||i===void 0?void 0:i.join("-")}}:void 0},n):x({geometry:le.Line},n)}function pi(t,e){var n=t[0],r=t[1];if(J(e)){var i=e[0],a=e[1];return[i,a]}var o=E(e,n),u=E(e,r);return[o,u]}function yi(t,e){return e===xe.Left?t===!1?!1:A({},ef,t):e===xe.Right?t===!1?!1:A({},nf,t):t}function xi(t){var e=t.view,n=t.geometryOption,r=t.yField,i=t.legend,a=E(i,"marker"),o=ht(e,ur(n)?"line":"interval");if(!n.seriesField){var u=E(e,"options.scales."+r+".alias")||r,l=o.getAttribute("color"),s=e.getTheme().defaultColor;l&&(s=mt.getMappingValue(l,u,E(l,["values",0],s)));var c=(ot(a)?a:!An(a)&&A({},{style:{stroke:s,fill:s}},a))||(ur(n)?{symbol:function(d,h,v){return[["M",d-v,h],["L",d+v,h]]},style:{lineWidth:2,r:6,stroke:s}}:{symbol:"square",style:{fill:s}});return[{value:r,name:u,marker:c,isGeometry:!0,viewId:e.id}]}var f=o.getGroupAttributes();return xt(f,function(d,h){var v=mt.getLegendItems(e,o,h,e.getTheme(),a);return d.concat(v)},[])}function rf(t){var e=t.options,n=t.chart,r=e.geometryOption,i=r.isStack,a=r.color,o=r.seriesField,u=r.groupField,l=r.isGroup,s=["xField","yField"];if(ur(r)){we(A({},t,{options:x(x(x({},K(e,s)),r),{line:{color:r.color,style:r.lineStyle}})})),wt(A({},t,{options:x(x(x({},K(e,s)),r),{point:r.point&&x({color:a,shape:"circle"},r.point)})}));var c=[];l&&c.push({type:"dodge",dodgeBy:u||o,customOffset:0}),i&&c.push({type:"stack"}),c.length&&$(n.geometries,function(f){f.adjust(c)})}return Rr(r)&&Rn(A({},t,{options:x(x(x({},K(e,s)),r),{widthRatio:r.columnWidthRatio,interval:x(x({},K(r,["color"])),{style:r.columnStyle})})})),t}var mi=function(t,e){var n=e[0],r=e[1],i=t.getOptions().data,a=t.getXScale(),o=Ne(i);if(!(!a||!o)){var u=ta(i,a.field),l=u,s=Ne(l),c=Math.floor(n*(s-1)),f=Math.floor(r*(s-1));t.filter(a.field,function(d){var h=l.indexOf(d);return h>-1?ts(h,c,f):!0}),t.getRootView().render(!0)}};function af(t){var e,n=t.options,r=n.geometryOptions,i=r===void 0?[]:r,a=n.xField,o=n.yField,u=Ji(i,function(l){var s=l.geometry;return s===le.Line||s===void 0});return A({},{options:{geometryOptions:[],meta:(e={},e[a]={type:"cat",sync:!0,range:u?[0,1]:void 0},e),tooltip:{showMarkers:u,showCrosshairs:u,shared:!0,crosshairs:{type:"x"}},interactions:u?[{type:"legend-visible-filter"}]:[{type:"legend-visible-filter"},{type:"active-region"}],legend:{position:"top-left"}}},t,{options:{yAxis:pi(o,n.yAxis),geometryOptions:[gi(a,o[0],i[0]),gi(a,o[1],i[1])],annotations:pi(o,n.annotations)}})}function of(t){var e,n,r=t.chart,i=t.options,a=i.geometryOptions,o={line:0,column:1},u=[{type:(e=a[0])===null||e===void 0?void 0:e.geometry,id:St},{type:(n=a[1])===null||n===void 0?void 0:n.geometry,id:Dt}];return u.sort(function(l,s){return-o[l.type]+o[s.type]}).forEach(function(l){return r.createView({id:l.id})}),t}function lf(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.geometryOptions,o=n.data,u=n.tooltip,l=[x(x({},a[0]),{id:St,data:o[0],yField:i[0]}),x(x({},a[1]),{id:Dt,data:o[1],yField:i[1]})];return l.forEach(function(s){var c=s.id,f=s.data,d=s.yField,h=Rr(s)&&s.isPercent,v=h?ba(f,d,r,d):f,g=q(e,c).data(v),y=h?x({formatter:function(p){return{name:p[s.seriesField]||d,value:(Number(p[d])*100).toFixed(2)+"%"}}},u):u;rf({chart:g,options:{xField:r,yField:d,tooltip:y,geometryOption:s}})}),t}function sf(t){var e,n=t.chart,r=t.options,i=r.geometryOptions,a=((e=n.getTheme())===null||e===void 0?void 0:e.colors10)||[],o=0;return n.once("beforepaint",function(){$(i,function(u,l){var s=q(n,l===0?St:Dt);if(!u.color){var c=s.getGroupScales(),f=E(c,[0,"values","length"],1),d=a.slice(o,o+f).concat(l===0?[]:a);s.geometries.forEach(function(h){u.seriesField?h.color(u.seriesField,d):h.color(d[0])}),o+=f}}),n.render(!0)}),t}function uf(t){var e,n,r=t.chart,i=t.options,a=i.xAxis,o=i.yAxis,u=i.xField,l=i.yField;return at((e={},e[u]=a,e[l[0]]=o[0],e))(A({},t,{chart:q(r,St)})),at((n={},n[u]=a,n[l[1]]=o[1],n))(A({},t,{chart:q(r,Dt)})),t}function cf(t){var e=t.chart,n=t.options,r=q(e,St),i=q(e,Dt),a=n.xField,o=n.yField,u=n.xAxis,l=n.yAxis;return e.axis(a,!1),e.axis(o[0],!1),e.axis(o[1],!1),r.axis(a,u),r.axis(o[0],yi(l[0],xe.Left)),i.axis(a,!1),i.axis(o[1],yi(l[1],xe.Right)),t}function ff(t){var e=t.chart,n=t.options,r=n.tooltip,i=q(e,St),a=q(e,Dt);return e.tooltip(r),i.tooltip({shared:!0}),a.tooltip({shared:!0}),t}function df(t){var e=t.chart;return et(A({},t,{chart:q(e,St)})),et(A({},t,{chart:q(e,Dt)})),t}function hf(t){var e=t.chart,n=t.options,r=n.annotations,i=E(r,[0]),a=E(r,[1]);return it(i)(A({},t,{chart:q(e,St),options:{annotations:i}})),it(a)(A({},t,{chart:q(e,Dt),options:{annotations:a}})),t}function vf(t){var e=t.chart;return j(A({},t,{chart:q(e,St)})),j(A({},t,{chart:q(e,Dt)})),j(t),t}function gf(t){var e=t.chart;return Q(A({},t,{chart:q(e,St)})),Q(A({},t,{chart:q(e,Dt)})),t}function pf(t){var e=t.chart,n=t.options,r=n.yAxis;return oe(A({},t,{chart:q(e,St),options:{yAxis:r[0]}})),oe(A({},t,{chart:q(e,Dt),options:{yAxis:r[1]}})),t}function yf(t){var e=t.chart,n=t.options,r=n.legend,i=n.geometryOptions,a=n.yField,o=n.data,u=q(e,St),l=q(e,Dt);if(r===!1)e.legend(!1);else if(se(r)&&r.custom===!0)e.legend(r);else{var s=E(i,[0,"legend"],r),c=E(i,[1,"legend"],r);e.once("beforepaint",function(){var f=o[0].length?xi({view:u,geometryOption:i[0],yField:a[0],legend:s}):[],d=o[1].length?xi({view:l,geometryOption:i[1],yField:a[1],legend:c}):[];e.legend(A({},r,{custom:!0,items:f.concat(d)}))}),i[0].seriesField&&u.legend(i[0].seriesField,s),i[1].seriesField&&l.legend(i[1].seriesField,c),e.on("legend-item:click",function(f){var d=E(f,"gEvent.delegateObject",{});if(d&&d.item){var h=d.item,v=h.value,g=h.isGeometry,y=h.viewId;if(g){var p=na(a,function(F){return F===v});if(p>-1){var m=E(q(e,y),"geometries");$(m,function(F){F.changeVisible(!d.item.unchecked)})}}else{var b=E(e.getController("legend"),"option.items",[]);$(e.views,function(F){var w=F.getGroupScales();$(w,function(D){D.values&&D.values.indexOf(v)>-1&&F.filter(D.field,function(M){var k=Qi(b,function(C){return C.value===M});return!k.unchecked})}),e.render(!0)})}}})}return t}function xf(t){var e=t.chart,n=t.options,r=n.slider,i=q(e,St),a=q(e,Dt);return r&&(i.option("slider",r),i.on("slider:valuechanged",function(o){var u=o.event,l=u.value,s=u.originValue;wr(l,s)||mi(a,l)}),e.once("afterpaint",function(){if(!Tl(r)){var o=r.start,u=r.end;(o||u)&&mi(a,[o,u])}})),t}function mf(t){return _(af,of,vf,lf,uf,cf,pf,ff,df,hf,gf,sf,yf,xf)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="dual-axes",n}return e.prototype.getDefaultOptions=function(){return A({},t.prototype.getDefaultOptions.call(this),{yAxis:[],syncViewPadding:!0})},e.prototype.getSchemaAdaptor=function(){return mf},e})(G);var Ve="x",ve="y",Na={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+E(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}},showCrosshairs:!0,crosshairs:{type:"x"}},Ff={appendPadding:2,tooltip:x({},Na),animation:{}};function fe(t){return Mt(t||[],function(e,n){return{x:""+n,y:e}})}function bf(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.areaStyle,o=n.point,u=n.line,l=o==null?void 0:o.state,s=fe(r);e.data(s);var c=A({},t,{options:{xField:Ve,yField:ve,area:{color:i,style:a},line:u,point:o}}),f=A({},c,{options:{tooltip:!1}}),d=A({},c,{options:{tooltip:!1,state:l}});return $n(c),we(f),wt(d),e.axis(!1),e.legend(!1),t}function De(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.data,u=fe(o);return _(at((e={},e[Ve]=i,e[ve]=a,e),(n={},n[Ve]={type:"cat"},n[ve]=Sr(u,ve),n)))(t)}function _a(t){return _(At("areaStyle"),bf,De,ft,j,Q,it())(t)}function Af(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.lineStyle,o=n.point,u=o==null?void 0:o.state,l=fe(r);e.data(l);var s=A({},t,{options:{xField:Ve,yField:ve,line:{color:i,style:a},point:o}}),c=A({},s,{options:{tooltip:!1,state:u}});return we(s),wt(c),e.axis(!1),e.legend(!1),t}function Va(t){return _(Af,De,j,ft,Q,it())(t)}var wf=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-line",n}return e.getDefaultOptions=function(){return Ff},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;De({chart:i,options:a}),i.changeData(fe(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Va},e}(G);function Sf(t){var e=t.chart,n=t.options,r=n.data,i=n.color,a=n.columnStyle,o=n.columnWidthRatio,u=fe(r);e.data(u);var l=A({},t,{options:{xField:Ve,yField:ve,widthRatio:o,interval:{style:a,color:i}}});return vt(l),e.axis(!1),e.legend(!1),e.interaction("element-active"),t}function Wa(t){return _(j,At("columnStyle"),Sf,De,ft,Q,it())(t)}var Df={showTitle:!1,shared:!0,showMarkers:!1,customContent:function(t,e){return""+E(e,[0,"data","y"],0)},containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',itemTpl:"<span>{value}</span>",domStyles:{"g2-tooltip":{padding:"2px 4px",fontSize:"10px"}}},Ef={appendPadding:2,tooltip:x({},Df),animation:{}},Of=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-column",n}return e.getDefaultOptions=function(){return Ef},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;De({chart:i,options:a}),i.changeData(fe(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Wa},e}(G),If={appendPadding:2,tooltip:x({},Na),color:"l(90) 0:#E5EDFE 1:#ffffff",areaStyle:{fillOpacity:.6},line:{size:1,color:"#5B8FF9"},animation:{}},Mf=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="tiny-area",n}return e.getDefaultOptions=function(){return If},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this,i=r.chart,a=r.options;De({chart:i,options:a}),i.changeData(fe(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _a},e}(G);function Fi(t,e,n){if(n===1)return[0,e];var r=Math.floor(t/e);return[e*r,e*(r+1)]}function kf(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function Ba(t,e,n,r,i){var a=ea(t);_l(a,e);var o=ta(a,e),u=Pl(o),l=u.max-u.min,s=n;if(!n&&r&&(s=r>1?l/(r-1):u.max),!n&&!r){var c=kf(o);s=l/c}var f={},d=Ce(a,i);An(d)?$(a,function(v){var g=v[e],y=Fi(g,s,r),p=y[0]+"-"+y[1];ei(f,p)||(f[p]={range:y,count:0}),f[p].count+=1}):Object.keys(d).forEach(function(v){$(d[v],function(g){var y=g[e],p=Fi(y,s,r),m=p[0]+"-"+p[1],b=m+"-"+v;ei(f,b)||(f[b]={range:p,count:0},f[b][i]=v),f[b].count+=1})});var h=[];return $(f,function(v){h.push(v)}),h}var mn="range",We="count",Tf=A({},G.getDefaultOptions(),{columnStyle:{stroke:"#FFFFFF"},tooltip:{shared:!0,showMarkers:!1},interactions:[{type:"active-region"}]});function Pf(t){var e=t.chart,n=t.options,r=n.data,i=n.binField,a=n.binNumber,o=n.binWidth,u=n.color,l=n.stackField,s=n.legend,c=n.columnStyle,f=Ba(r,i,o,a,l);e.data(f);var d=A({},t,{options:{xField:mn,yField:We,seriesField:l,isStack:!0,interval:{color:u,style:c}}});return vt(d),s&&l?e.legend(l,s):e.legend(!1),t}function $f(t){var e,n=t.options,r=n.xAxis,i=n.yAxis;return _(at((e={},e[mn]=r,e[We]=i,e)))(t)}function Lf(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis;return r===!1?e.axis(mn,!1):e.axis(mn,r),i===!1?e.axis(We,!1):e.axis(We,i),t}function Cf(t){var e=t.chart,n=t.options,r=n.label,i=ht(e,"interval");if(!r)i.label(!1);else{var a=r.callback,o=pt(r,["callback"]);i.label({fields:[We],callback:a,cfg:dt(o)})}return t}function Ga(t){return _(j,At("columnStyle"),Pf,$f,Lf,Jt,Cf,ft,et,Q)(t)}var Rf=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="histogram",n}return e.getDefaultOptions=function(){return Tf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options,i=r.binField,a=r.binNumber,o=r.binWidth,u=r.stackField;this.chart.changeData(Ba(n,i,o,a,u))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ga},e}(G),qa=["#FAAD14","#E8EDF3"],zf={percent:.2,color:qa,animation:{}};function zr(t){var e=wn(ae(t)?t:0,0,1);return[{current:""+e,type:"current",percent:e},{current:""+e,type:"target",percent:1}]}function Ua(t){var e=t.chart,n=t.options,r=n.percent,i=n.progressStyle,a=n.color,o=n.barWidthRatio;e.data(zr(r));var u=A({},t,{options:{xField:"current",yField:"percent",seriesField:"type",widthRatio:o,interval:{style:i,color:gt(a)?[a,qa[1]]:a},args:{zIndexReversed:!0,sortZIndex:!0}}});return vt(u),e.tooltip(!1),e.axis(!1),e.legend(!1),t}function Nf(t){var e=t.chart;return e.coordinate("rect").transpose(),t}function Xa(t){return _(Ua,at({}),Nf,Q,j,it())(t)}var _f=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="process",n}return e.getDefaultOptions=function(){return zf},e.prototype.changeData=function(n){this.updateOption({percent:n}),this.chart.changeData(zr(n))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Xa},e}(G);function Vf(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius;return e.coordinate("theta",{innerRadius:r,radius:i}),t}function Ya(t,e){var n=t.chart,r=t.options,i=r.innerRadius,a=r.statistic,o=r.percent,u=r.meta;if(n.getController("annotation").clear(!0),i&&a){var l=E(u,["percent","formatter"])||function(c){return(c*100).toFixed(2)+"%"},s=a.content;s&&(s=A({},s,{content:It(s.content)?l(o):s.content})),En(n,{statistic:x(x({},a),{content:s}),plotType:"ring-progress"},{percent:o})}return e&&n.render(!0),t}function Ha(t){return _(Ua,at({}),Vf,Ya,Q,j,it())(t)}var Wf={percent:.2,innerRadius:.8,radius:.98,color:["#FAAD14","#E8EDF3"],statistic:{title:!1,content:{style:{fontSize:"14px",fontWeight:300,fill:"#4D4D4D",textAlign:"center",textBaseline:"middle"}}},animation:{}},Bf=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="ring-process",n}return e.getDefaultOptions=function(){return Wf},e.prototype.changeData=function(n){this.chart.emit(st.BEFORE_CHANGE_DATA,Lt.fromData(this.chart,st.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(zr(n)),Ya({chart:this.chart,options:this.options},!0),this.chart.emit(st.AFTER_CHANGE_DATA,Lt.fromData(this.chart,st.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ha},e}(G);function Gf(t){var e=t.chart,n=t.options,r=n.data,i=n.type,a=n.xField,o=n.yField,u=n.colorField,l=n.sizeField,s=n.sizeRatio,c=n.shape,f=n.color,d=n.tooltip,h=n.heatmapStyle,v=n.meta;e.data(r);var g="polygon";i==="density"&&(g="heatmap");var y=kt(d,[a,o,u]),p=y.fields,m=y.formatter,b=1;return(s||s===0)&&(!c&&!l?console.warn("sizeRatio is not in effect: Must define shape or sizeField first"):s<0||s>1?console.warn("sizeRatio is not in effect: It must be a number in [0,1]"):b=s),Ft(A({},t,{options:{type:g,colorField:u,tooltipFields:p,shapeField:l||"",label:void 0,mapping:{tooltip:m,shape:c&&(l?function(F){var w=r.map(function(C){return C[l]}),D=(v==null?void 0:v[l])||{},M=D.min,k=D.max;return M=lt(M)?M:Math.min.apply(Math,w),k=lt(k)?k:Math.max.apply(Math,w),[c,(E(F,l)-M)/(k-M),b]}:function(){return[c,1,b]}),color:f||u&&e.getTheme().sequenceColors.join("-"),style:h}}})),t}function qf(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return _(at((e={},e[a]=r,e[o]=i,e)))(t)}function Uf(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(o,!1):e.axis(o,i),t}function Xf(t){var e=t.chart,n=t.options,r=n.legend,i=n.colorField,a=n.sizeField,o=n.sizeLegend,u=r!==!1;return i&&e.legend(i,u?r:!1),a&&e.legend(a,o===void 0?r:o),!u&&!o&&e.legend(!1),t}function Yf(t){var e=t.chart,n=t.options,r=n.label,i=n.colorField,a=n.type,o=ht(e,a==="density"?"heatmap":"polygon");if(!r)o.label(!1);else if(i){var u=r.callback,l=pt(r,["callback"]);o.label({fields:[i],callback:u,cfg:dt(l)})}return t}function Hf(t){var e,n,r=t.chart,i=t.options,a=i.coordinate,o=i.reflect,u=A({actions:[]},a??{type:"rect"});return o&&((n=(e=u.actions)===null||e===void 0?void 0:e.push)===null||n===void 0||n.call(e,["reflect",o])),r.coordinate(u),t}function jf(t){return _(j,At("heatmapStyle"),qf,Hf,Gf,Uf,Xf,ft,Yf,it(),et,Q,Jt)(t)}var Zf=A({},G.getDefaultOptions(),{type:"polygon",legend:!1,coordinate:{type:"rect"},xAxis:{tickLine:null,line:null,grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}},yAxis:{grid:{alignTick:!1,line:{style:{lineWidth:1,lineDash:null,stroke:"#f0f0f0"}}}}});Qt("polygon","circle",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),s=Math.min(u,l)/2,c=Number(t.shape[1]),f=Number(t.shape[2]),d=Math.sqrt(f),h=s*d*Math.sqrt(c),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),g=e.addShape("circle",{attrs:x(x(x({x:i,y:a,r:h},t.defaultStyle),t.style),{fill:v})});return g}});Qt("polygon","square",{draw:function(t,e){var n,r,i=t.x,a=t.y,o=this.parsePoints(t.points),u=Math.abs(o[2].x-o[1].x),l=Math.abs(o[1].y-o[0].y),s=Math.min(u,l),c=Number(t.shape[1]),f=Number(t.shape[2]),d=Math.sqrt(f),h=s*d*Math.sqrt(c),v=((n=t.style)===null||n===void 0?void 0:n.fill)||t.color||((r=t.defaultStyle)===null||r===void 0?void 0:r.fill),g=e.addShape("rect",{attrs:x(x(x({x:i-h/2,y:a-h/2,width:h,height:h},t.defaultStyle),t.style),{fill:v})});return g}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return Zf},e.prototype.getSchemaAdaptor=function(){return jf},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(G);var jn,me="$$range$$",Kf="low-q1-median-q3-high",Qf="$$y_outliers$$",ja="outliers_view",Jf=A({},G.getDefaultOptions(),{meta:(jn={},jn[me]={min:0,alias:Kf},jn),interactions:[{type:"active-region"}],tooltip:{showMarkers:!1,shared:!0},boxStyle:{lineWidth:1}}),Za=function(t,e){var n=t;if(Array.isArray(e)){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4];n=Mt(t,function(l){return l[me]=[l[r],l[i],l[a],l[o],l[u]],l})}return n};function td(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.groupField,o=n.color,u=n.tooltip,l=n.boxStyle;e.data(Za(n.data,i));var s=J(i)?me:i,c=i?J(i)?i:[i]:[],f=u;f!==!1&&(f=A({},{fields:J(i)?i:[]},f));var d=Tr(A({},t,{options:{xField:r,yField:s,seriesField:a,tooltip:f,rawFields:c,label:!1,schema:{shape:"box",color:o,style:l}}})).ext;return a&&d.geometry.adjust("dodge"),t}function ed(t){var e=t.chart,n=t.options,r=n.xField,i=n.data,a=n.outliersField,o=n.outliersStyle,u=n.padding,l=n.label;if(!a)return t;var s=e.createView({padding:u,id:ja}),c=i.reduce(function(f,d){var h=d[a];return h.forEach(function(v){var g;return f.push(x(x({},d),(g={},g[a]=v,g)))}),f},[]);return s.data(c),wt({chart:s,options:{xField:r,yField:a,point:{shape:"circle",style:o},label:l}}),s.axis(!1),t}function nd(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,l=i.xField,s=i.yField,c=i.outliersField,f=Array.isArray(s)?me:s,d={};if(c){var h=Qf;d=(e={},e[c]={sync:h,nice:!0},e[f]={sync:h,nice:!0},e)}var v=A(d,a,(n={},n[l]=K(o,yt),n[f]=K(u,yt),n));return r.scale(v),t}function rd(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=Array.isArray(o)?me:o;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(me,!1):e.axis(u,i),t}function id(t){var e=t.chart,n=t.options,r=n.legend,i=n.groupField;return i?r?e.legend(i,r):e.legend(i,{position:"bottom"}):e.legend(!1),t}function ad(t){return _(td,ed,nd,rd,id,ft,it(),et,Q,j)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return Jf},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField,i=this.chart.views.find(function(a){return a.id===ja});i&&i.data(n),this.chart.changeData(Za(n,r))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ad},e})(G);var cr={},od={get exports(){return cr},set exports(t){cr=t}},fr={},ld={get exports(){return fr},set exports(t){fr=t}};(function(t){var e=t.exports;t.exports.isNumber=function(n){return typeof n=="number"},t.exports.findMin=function(n){if(n.length===0)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r},t.exports.findMax=function(n){if(n.length===0)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r},t.exports.findMinMulti=function(n){for(var r=e.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,e.findMin(n[i]));return r},t.exports.findMaxMulti=function(n){for(var r=e.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,e.findMax(n[i]));return r},t.exports.inside=function(n,r,i){return n<=i&&i<=r}})(ld);(function(t){var e=50,n=2,r=Math.log(2),i=t.exports,a=fr;function o(l){return 1-Math.abs(l)}t.exports.getUnifiedMinMax=function(l,s){return i.getUnifiedMinMaxMulti([l],s)},t.exports.getUnifiedMinMaxMulti=function(l,s){s=s||{};var c=!1,f=!1,d=a.isNumber(s.width)?s.width:n,h=a.isNumber(s.size)?s.size:e,v=a.isNumber(s.min)?s.min:(c=!0,a.findMinMulti(l)),g=a.isNumber(s.max)?s.max:(f=!0,a.findMaxMulti(l)),y=g-v,p=y/(h-1);return c&&(v=v-2*d*p),f&&(g=g+2*d*p),{min:v,max:g}},t.exports.create=function(l,s){if(s=s||{},!l||l.length===0)return[];var c=a.isNumber(s.size)?s.size:e,f=a.isNumber(s.width)?s.width:n,d=i.getUnifiedMinMax(l,{size:c,width:f,min:s.min,max:s.max}),h=d.min,v=d.max,g=v-h,y=g/(c-1);if(g===0)return[{x:h,y:1}];for(var p=[],m=0;m<c;m++)p.push({x:h+m*y,y:0});var b=function(O){return Math.floor((O-h)/y)},F=u(o,f),w=F[f],D=F[f-1]-F[f-2],M=0;l.forEach(function(O){var L=b(O);if(!(L+f<0||L-f>=p.length)){var W=Math.max(L-f,0),H=L,Z=Math.min(L+f,p.length-1),S=W-(L-f),I=L+f-Z,N=F[-f-1+S]||0,R=F[-f-1+I]||0,P=w/(w-N-R);S>0&&(M+=P*(S-1)*D);var z=Math.max(0,L-f+1);a.inside(0,p.length-1,z)&&(p[z].y+=P*1*D),a.inside(0,p.length-1,H+1)&&(p[H+1].y-=P*2*D),a.inside(0,p.length-1,Z+1)&&(p[Z+1].y+=P*1*D)}});var k=M,C=0,T=0;return p.forEach(function(O){C+=O.y,k+=C,O.y=k,T+=k}),T>0&&p.forEach(function(O){O.y/=T}),p};function u(l,s){for(var c={},f=0,d=-s;d<=s;d++)f+=l(d/s),c[d]=f;return c}t.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var s=0;return l.forEach(function(c){s+=c.x*c.y}),s}},t.exports.getXWithLeftTailArea=function(l,s){if(!(!l||l.length===0)){for(var c=0,f=0,d=0;d<l.length&&(f=d,c+=l[d].y,!(c>=s));d++);return l[f].x}},t.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var s=0;return l.forEach(function(c){var f=Math.log(c.y);isFinite(f)&&(s+=c.y*f)}),s=-s/r,Math.pow(2,s)}}})(od);const sd=cr;function bi(t,e){var n=t.length*e;if(t.length===0)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return e===1?t[t.length-1]:e===0?t[0]:n%1!==0?t[Math.ceil(n)-1]:t.length%2===0?(t[n-1]+t[n])/2:t[n]}function ke(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function fn(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var i=r-n+1,a=e-n+1,o=Math.log(i),u=.5*Math.exp(2*o/3),l=.5*Math.sqrt(o*u*(i-u)/i);a-i/2<0&&(l*=-1);var s=Math.max(n,Math.floor(e-a*u/i+l)),c=Math.min(r,Math.floor(e+(i-a)*u/i+l));fn(t,e,s,c)}var f=t[e],d=n,h=r;for(ke(t,n,e),t[r]>f&&ke(t,n,r);d<h;){for(ke(t,d,h),d++,h--;t[d]<f;)d++;for(;t[h]>f;)h--}t[n]===f?ke(t,n,h):(h++,ke(t,h,r)),h<=e&&(n=h+1),e<=h&&(r=h-1)}}function Te(t,e){var n=t.slice();if(Array.isArray(e)){ud(n,e);for(var r=[],i=0;i<e.length;i++)r[i]=bi(n,e[i]);return r}else{var a=Qa(n.length,e);return Ka(n,a,0,n.length-1),bi(n,e)}}function Ka(t,e,n,r){e%1===0?fn(t,e,n,r):(e=Math.floor(e),fn(t,e,n,r),fn(t,e+1,e+1,r))}function ud(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(Qa(t.length,e[r]));n.push(t.length-1),n.sort(cd);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var u=Math.floor((o+a)/2);Ka(t,n[u],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,u,u,a)}}}function cd(t,e){return t-e}function Qa(t,e){var n=t*e;return e===1?t-1:e===0?0:n%1!==0?Math.ceil(n)-1:t%2===0?n-.5:n}var Ai=function(t){return{low:ni(t),high:ri(t),q1:Te(t,.25),q3:Te(t,.75),median:Te(t,[.5]),minMax:[ni(t),ri(t)],quantile:[Te(t,.25),Te(t,.75)]}},wi=function(t,e){var n=sd.create(t,e);return{violinSize:n.map(function(r){return r.y}),violinY:n.map(function(r){return r.x})}},Ja=function(t){var e=t.xField,n=t.yField,r=t.seriesField,i=t.data,a=t.kde,o={min:a.min,max:a.max,size:a.sampleSize,width:a.width};if(!r){var u=Ce(i,e);return Object.keys(u).map(function(c){var f=u[c],d=f.map(function(h){return h[n]});return x(x({x:c},wi(d,o)),Ai(d))})}var l=[],s=Ce(i,r);return Object.keys(s).forEach(function(c){var f=Ce(s[c],e);return Object.keys(f).forEach(function(d){var h,v=f[d],g=v.map(function(y){return y[n]});l.push(x(x((h={x:d},h[r]=c,h),wi(g,o)),Ai(g)))})}),l},Et="x",ee="violinY",fd="violinSize",to="minMax",eo="quantile",no="median",Nr="violin_view",dd="min_max_view",hd="quantile_view",vd="median_view",gd=A({},G.getDefaultOptions(),{syncViewPadding:!0,kde:{type:"triangular",sampleSize:32,width:3},violinStyle:{lineWidth:1,fillOpacity:.3,strokeOpacity:.75},xAxis:{grid:{line:null},tickLine:{alignTick:!1}},yAxis:{grid:{line:{style:{lineWidth:.5,lineDash:[4,4]}}}},legend:{position:"top-left"},tooltip:{showMarkers:!1}}),dn=["low","high","q1","q3","median"],hn=[{type:"dodge",marginRatio:1/32}];function pd(t){var e=t.chart,n=t.options;return e.data(Ja(n)),t}function yd(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.shape,o=a===void 0?"violin":a,u=n.violinStyle,l=n.tooltip,s=n.state,c=e.createView({id:Nr});return Cs({chart:c,options:{xField:Et,yField:ee,seriesField:r||Et,sizeField:fd,tooltip:x({fields:dn},l),violin:{style:u,color:i,shape:o},state:s}}),c.geometries[0].adjust(hn),t}function xd(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.color,a=n.tooltip,o=n.box;if(o===!1)return t;var u=e.createView({id:dd});vt({chart:u,options:{xField:Et,yField:to,seriesField:r||Et,tooltip:x({fields:dn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:1,style:{lineWidth:0}}}}),u.geometries[0].adjust(hn);var l=e.createView({id:hd});vt({chart:l,options:{xField:Et,yField:eo,seriesField:r||Et,tooltip:x({fields:dn},a),state:typeof o=="object"?o.state:{},interval:{color:i,size:8,style:{fillOpacity:1}}}}),l.geometries[0].adjust(hn);var s=e.createView({id:vd});return wt({chart:s,options:{xField:Et,yField:no,seriesField:r||Et,tooltip:x({fields:dn},a),state:typeof o=="object"?o.state:{},point:{color:i,size:1,style:{fill:"white",lineWidth:0}}}}),s.geometries[0].adjust(hn),l.axis(!1),u.axis(!1),s.axis(!1),s.legend(!1),u.legend(!1),l.legend(!1),t}function md(t){var e,n=t.chart,r=t.options,i=r.meta,a=r.xAxis,o=r.yAxis,u={},l=A(u,i,(e={},e[Et]=x(x({sync:!0},K(a,yt)),{type:"cat"}),e[ee]=x({sync:!0},K(o,yt)),e[to]=x({sync:ee},K(o,yt)),e[eo]=x({sync:ee},K(o,yt)),e[no]=x({sync:ee},K(o,yt)),e));return n.scale(l),t}function Fd(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=q(e,Nr);return r===!1?a.axis(Et,!1):a.axis(Et,r),i===!1?a.axis(ee,!1):a.axis(ee,i),e.axis(!1),t}function bd(t){var e=t.chart,n=t.options,r=n.legend,i=n.seriesField,a=n.shape;if(r===!1)e.legend(!1);else{var o=i||Et,u=Dn(r,["selected"]);(!a||!a.startsWith("hollow"))&&(E(u,["marker","style","lineWidth"])||$l(u,["marker","style","lineWidth"],0)),e.legend(o,u),E(r,"selected")&&$(e.views,function(l){return l.legend(o,r)})}return t}function Ad(t){var e=t.chart,n=q(e,Nr);return it()(x(x({},t),{chart:n})),t}function wd(t){var e=t.chart,n=t.options,r=n.animation;return $(e.views,function(i){Ye(i,r)}),t}function Sd(t){return _(j,pd,yd,xd,md,ft,Fd,bd,et,Ad,wd)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return gd},e.prototype.changeData=function(n){this.updateOption({data:n}),this.chart.changeData(Ja(this.options))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Sd},e})(G);var Dd=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},Si={normal:function(t){return t},multiply:function(t,e){return t*e/255},screen:function(t,e){return 255*(1-(1-t/255)*(1-e/255))},overlay:function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},darken:function(t,e){return t>e?e:t},lighten:function(t,e){return t>e?t:e},dodge:function(t,e){return t===255?255:(t=255*(e/255)/(1-t/255),t>255?255:t)},burn:function(t,e){return e===255?255:t===0?0:255*(1-Math.min(1,(1-e/255)/(t/255)))}},Ed=function(t){if(!Si[t])throw new Error("unknown blend mode "+t);return Si[t]};function Od(t,e,n){n===void 0&&(n="normal");var r=Dd(Ed(n))(nn(t),nn(e)),i=nn(t),a=i[0],o=i[1],u=i[2],l=i[3],s=nn(e),c=s[0],f=s[1],d=s[2],h=s[3],v=Number((l+h*(1-l)).toFixed(2)),g=Math.round((l*(1-h)*(a/255)+l*h*(r[0]/255)+(1-l)*h*(c/255))/v*255),y=Math.round((l*(1-h)*(o/255)+l*h*(r[1]/255)+(1-l)*h*(f/255))/v*255),p=Math.round((l*(1-h)*(u/255)+l*h*(r[2]/255)+(1-l)*h*(d/255))/v*255);return"rgba("+g+", "+y+", "+p+", "+v+")"}function nn(t){var e=t.replace("/s+/g",""),n;return typeof e=="string"&&!e.startsWith("rgba")&&!e.startsWith("#")?n=Un.rgb2arr(Un.toRGB(e)).concat([1]):(e.startsWith("rgba")&&(n=e.replace("rgba(","").replace(")","").split(",")),e.startsWith("#")&&(n=Un.rgb2arr(e).concat([1])),n.map(function(r,i){return i===3?Number(r):r|0}))}function Id(t,e,n,r){r=r||{};var i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(e),u=t(n),l=n-e;if(o*u>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(u===0)return n;for(var s=0;s<i;++s){l/=2;var c=e+l,f=t(c);if(f*o>=0&&(e=c),Math.abs(l)<a||f===0)return c}return e+l}function dr(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function Di(t,e){return dr(t).map(function(){return dr(e)})}function ge(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function hr(t){return Math.sqrt(ge(t,t))}function vr(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function _t(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function ro(t,e,n){n=n||{};var r=n.maxIterations||e.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,u=n.minErrorDelta||1e-5,l=n.rho!==void 0?n.rho:1,s=n.chi!==void 0?n.chi:2,c=n.psi!==void 0?n.psi:-.5,f=n.sigma!==void 0?n.sigma:.5,d,h=e.length,v=new Array(h+1);v[0]=e,v[0].fx=t(e),v[0].id=0;for(var g=0;g<h;++g){var y=e.slice();y[g]=y[g]?y[g]*i:a,v[g+1]=y,v[g+1].fx=t(y),v[g+1].id=g+1}function p(L){for(var W=0;W<L.length;W++)v[h][W]=L[W];v[h].fx=L.fx}for(var m=function(L,W){return L.fx-W.fx},b=e.slice(),F=e.slice(),w=e.slice(),D=e.slice(),M=0;M<r;++M){if(v.sort(m),n.history){var k=v.map(function(L){var W=L.slice();return W.fx=L.fx,W.id=L.id,W});k.sort(function(L,W){return L.id-W.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:k})}for(d=0,g=0;g<h;++g)d=Math.max(d,Math.abs(v[0][g]-v[1][g]));if(Math.abs(v[0].fx-v[h].fx)<o&&d<u)break;for(g=0;g<h;++g){b[g]=0;for(var C=0;C<h;++C)b[g]+=v[C][g];b[g]/=h}var T=v[h];if(_t(F,1+l,b,-l,T),F.fx=t(F),F.fx<v[0].fx)_t(D,1+s,b,-s,T),D.fx=t(D),D.fx<F.fx?p(D):p(F);else if(F.fx>=v[h-1].fx){var O=!1;if(F.fx>T.fx?(_t(w,1+c,b,-c,T),w.fx=t(w),w.fx<T.fx?p(w):O=!0):(_t(w,1-c*l,b,c*l,T),w.fx=t(w),w.fx<F.fx?p(w):O=!0),O){if(f>=1)break;for(g=1;g<v.length;++g)_t(v[g],1-f,v[0],f,v[g]),v[g].fx=t(v[g])}}else p(F)}return v.sort(m),{fx:v[0].fx,x:v[0]}}function Md(t,e,n,r,i,a,o){var u=n.fx,l=ge(n.fxprime,e),s=u,c=u,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(g,y,p){for(var m=0;m<16;++m)if(i=(g+y)/2,_t(r.x,1,n.x,i,e),s=r.fx=t(r.x,r.fxprime),f=ge(r.fxprime,e),s>u+a*i*l||s>=p)y=i;else{if(Math.abs(f)<=-o*l)return i;f*(y-g)>=0&&(y=g),g=i,p=s}return 0}for(var v=0;v<10;++v){if(_t(r.x,1,n.x,i,e),s=r.fx=t(r.x,r.fxprime),f=ge(r.fxprime,e),s>u+a*i*l||v&&s>=c)return h(d,i,c);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,s);c=s,d=i,i*=2}return i}function kd(t,e,n){var r={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()},a=e.slice(),o,u,l=1,s;n=n||{},s=n.maxIterations||e.length*20,r.fx=t(r.x,r.fxprime),o=r.fxprime.slice(),vr(o,r.fxprime,-1);for(var c=0;c<s;++c){if(l=Md(t,o,r,i,l),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),!l)vr(o,r.fxprime,-1);else{_t(a,1,i.fxprime,-1,r.fxprime);var f=ge(r.fxprime,r.fxprime),d=Math.max(0,ge(a,i.fxprime)/f);_t(o,d,o,-1,i.fxprime),u=r,r=i,i=u}if(hr(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:l}),r}var io=1e-10;function _r(t,e){var n=Pd(t),r=n.filter(function(M){return Td(M,t)}),i=0,a=0,o,u=[];if(r.length>1){var l=lo(r);for(o=0;o<r.length;++o){var s=r[o];s.angle=Math.atan2(s.x-l.x,s.y-l.y)}r.sort(function(M,k){return k.angle-M.angle});var c=r[r.length-1];for(o=0;o<r.length;++o){var f=r[o];a+=(c.x+f.x)*(f.y-c.y);for(var d={x:(f.x+c.x)/2,y:(f.y+c.y)/2},h=null,v=0;v<f.parentIndex.length;++v)if(c.parentIndex.indexOf(f.parentIndex[v])>-1){var g=t[f.parentIndex[v]],y=Math.atan2(f.x-g.x,f.y-g.y),p=Math.atan2(c.x-g.x,c.y-g.y),m=p-y;m<0&&(m+=2*Math.PI);var b=p-m/2,F=Tt(d,{x:g.x+g.radius*Math.sin(b),y:g.y+g.radius*Math.cos(b)});F>g.radius*2&&(F=g.radius*2),(h===null||h.width>F)&&(h={circle:g,width:F,p1:f,p2:c})}h!==null&&(u.push(h),i+=gr(h.circle.radius,h.width),c=f)}}else{var w=t[0];for(o=1;o<t.length;++o)t[o].radius<w.radius&&(w=t[o]);var D=!1;for(o=0;o<t.length;++o)if(Tt(t[o],w)>Math.abs(w.radius-t[o].radius)){D=!0;break}D?i=a=0:(i=w.radius*w.radius*Math.PI,u.push({circle:w,p1:{x:w.x,y:w.y+w.radius},p2:{x:w.x-io,y:w.y+w.radius},width:w.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=u,e.innerPoints=r,e.intersectionPoints=n),i+a}function Td(t,e){for(var n=0;n<e.length;++n)if(Tt(t,e[n])>e[n].radius+io)return!1;return!0}function Pd(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=oo(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}function gr(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function Tt(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function ao(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return gr(t,r)+gr(e,i)}function oo(t,e){var n=Tt(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),u=t.x+a*(e.x-t.x)/n,l=t.y+a*(e.y-t.y)/n,s=-(e.y-t.y)*(o/n),c=-(e.x-t.x)*(o/n);return[{x:u+s,y:l-c},{x:u-s,y:l+c}]}function lo(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function $d(t,e){e=e||{},e.maxIterations=e.maxIterations||500;var n=e.initialLayout||zd,r=e.lossFunction||Vr;t=Ld(t);var i=n(t,e),a=[],o=[],u;for(u in i)i.hasOwnProperty(u)&&(a.push(i[u].x),a.push(i[u].y),o.push(u));for(var l=ro(function(f){for(var d={},h=0;h<o.length;++h){var v=o[h];d[v]={x:f[2*h],y:f[2*h+1],radius:i[v].radius}}return r(d,t)},a,e),s=l.x,c=0;c<o.length;++c)u=o[c],i[u].x=s[2*c],i[u].y=s[2*c+1];return i}var so=1e-10;function pr(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+so?Math.abs(t-e):Id(function(r){return ao(t,e,r)-n},0,t+e)}function Ld(t){t=t.slice();var e=[],n={},r,i,a,o;for(r=0;r<t.length;++r){var u=t[r];u.sets.length==1?e.push(u.sets[0]):u.sets.length==2&&(a=u.sets[0],o=u.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(e.sort(function(l,s){return l>s?1:-1}),r=0;r<e.length;++r)for(a=e[r],i=r+1;i<e.length;++i)o=e[i],[a,o]in n||t.push({sets:[a,o],size:0});return t}function Cd(t,e,n){var r=Di(e.length,e.length),i=Di(e.length,e.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){var o=n[a.sets[0]],u=n[a.sets[1]],l=Math.sqrt(e[o].size/Math.PI),s=Math.sqrt(e[u].size/Math.PI),c=pr(l,s,a.size);r[o][u]=r[u][o]=c;var f=0;a.size+1e-10>=Math.min(e[o].size,e[u].size)?f=1:a.size<=1e-10&&(f=-1),i[o][u]=i[u][o]=f}),{distances:r,constraints:i}}function Rd(t,e,n,r){var i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a)for(var o=t[2*a],u=t[2*a+1],l=a+1;l<n.length;++l){var s=t[2*l],c=t[2*l+1],f=n[a][l],d=r[a][l],h=(s-o)*(s-o)+(c-u)*(c-u),v=Math.sqrt(h),g=h-f*f;d>0&&v<=f||d<0&&v>=f||(i+=2*g*g,e[2*a]+=4*g*(o-s),e[2*a+1]+=4*g*(u-c),e[2*l]+=4*g*(s-o),e[2*l+1]+=4*g*(c-u))}return i}function zd(t,e){var n=_d(t,e),r=e.lossFunction||Vr;if(t.length>=8){var i=Nd(t,e),a=r(i,t),o=r(n,t);a+1e-8<o&&(n=i)}return n}function Nd(t,e){e=e||{};var n=e.restarts||10,r=[],i={},a;for(a=0;a<t.length;++a){var o=t[a];o.sets.length==1&&(i[o.sets[0]]=r.length,r.push(o))}var u=Cd(t,r,i),l=u.distances,s=u.constraints,c=hr(l.map(hr))/l.length;l=l.map(function(m){return m.map(function(b){return b/c})});var f=function(m,b){return Rd(m,b,l,s)},d,h;for(a=0;a<n;++a){var v=dr(l.length*2).map(Math.random);h=kd(f,v,e),(!d||h.fx<d.fx)&&(d=h)}var g=d.x,y={};for(a=0;a<r.length;++a){var p=r[a];y[p.sets[0]]={x:g[2*a]*c,y:g[2*a+1]*c,radius:Math.sqrt(p.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)vr(e.history[a].x,c);return y}function _d(t,e){for(var n=e&&e.lossFunction?e.lossFunction:Vr,r={},i={},a,o=0;o<t.length;++o){var u=t[o];u.sets.length==1&&(a=u.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:u.size,radius:Math.sqrt(u.size/Math.PI)},i[a]=[])}t=t.filter(function(S){return S.sets.length==2});for(var o=0;o<t.length;++o){var l=t[o],s=l.hasOwnProperty("weight")?l.weight:1,c=l.sets[0],f=l.sets[1];l.size+so>=Math.min(r[c].size,r[f].size)&&(s=0),i[c].push({set:f,size:l.size,weight:s}),i[f].push({set:c,size:l.size,weight:s})}var d=[];for(a in i)if(i.hasOwnProperty(a)){for(var h=0,o=0;o<i[a].length;++o)h+=i[a][o].size*i[a][o].weight;d.push({set:a,size:h})}function v(S,I){return I.size-S.size}d.sort(v);var g={};function y(S){return S.set in g}function p(S,I){r[I].x=S.x,r[I].y=S.y,g[I]=!0}p({x:0,y:0},d[0].set);for(var o=1;o<d.length;++o){var m=d[o].set,b=i[m].filter(y);if(a=r[m],b.sort(v),b.length===0)throw"ERROR: missing pairwise overlap information";for(var F=[],w=0;w<b.length;++w){var D=r[b[w].set],M=pr(a.radius,D.radius,b[w].size);F.push({x:D.x+M,y:D.y}),F.push({x:D.x-M,y:D.y}),F.push({y:D.y+M,x:D.x}),F.push({y:D.y-M,x:D.x});for(var k=w+1;k<b.length;++k)for(var C=r[b[k].set],T=pr(a.radius,C.radius,b[k].size),O=oo({x:D.x,y:D.y,radius:M},{x:C.x,y:C.y,radius:T}),L=0;L<O.length;++L)F.push(O[L])}for(var W=1e50,H=F[0],w=0;w<F.length;++w){r[m].x=F[w].x,r[m].y=F[w].y;var Z=n(r,t);Z<W&&(W=Z,H=F[w])}p(H,m)}return r}function Vr(t,e){var n=0;function r(c){return c.map(function(f){return t[f]})}for(var i=0;i<e.length;++i){var a=e[i],o=void 0;if(a.sets.length!=1){if(a.sets.length==2){var u=t[a.sets[0]],l=t[a.sets[1]];o=ao(u.radius,l.radius,Tt(u,l))}else o=_r(r(a.sets));var s=a.hasOwnProperty("weight")?a.weight:1;n+=s*(o-a.size)*(o-a.size)}}return n}function Vd(t){var e=function(n){var r=Math.max.apply(null,t.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function Wd(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var u=Vd(i),l=u.xRange,s=u.yRange;if(l.max==l.min||s.max==s.min)return console.log("not scaling solution: zero size detected"),t;for(var c=e/(l.max-l.min),f=n/(s.max-s.min),d=Math.min(f,c),h=(e-(l.max-l.min)*d)/2,v=(n-(s.max-s.min)*d)/2,g={},y=0;y<i.length;++y){var p=i[y];g[a[y]]={radius:d*p.radius,x:r+h+(p.x-l.min)*d,y:r+v+(p.y-s.min)*d}}return g}function Zn(t,e,n){var r=e[0].radius-Tt(e[0],t),i,a;for(i=1;i<e.length;++i)a=e[i].radius-Tt(e[i],t),a<=r&&(r=a);for(i=0;i<n.length;++i)a=Tt(n[i],t)-n[i].radius,a<=r&&(r=a);return r}function uo(t,e){var n=[],r;for(r=0;r<t.length;++r){var i=t[r];n.push({x:i.x,y:i.y}),n.push({x:i.x+i.radius/2,y:i.y}),n.push({x:i.x-i.radius/2,y:i.y}),n.push({x:i.x,y:i.y+i.radius/2}),n.push({x:i.x,y:i.y-i.radius/2})}var a=n[0],o=Zn(n[0],t,e);for(r=1;r<n.length;++r){var u=Zn(n[r],t,e);u>=o&&(a=n[r],o=u)}var l=ro(function(d){return-1*Zn({x:d[0],y:d[1]},t,e)},[a.x,a.y],{maxIterations:500,minErrorDelta:1e-10}).x,s={x:l[0],y:l[1]},c=!0;for(r=0;r<t.length;++r)if(Tt(s,t[r])>t[r].radius){c=!1;break}for(r=0;r<e.length;++r)if(Tt(s,e[r])<e[r].radius){c=!1;break}if(!c)if(t.length==1)s={x:t[0].x,y:t[0].y};else{var f={};_r(t,f),f.arcs.length===0?s={x:0,y:-1e3,disjoint:!0}:f.arcs.length==1?s={x:f.arcs[0].circle.x,y:f.arcs[0].circle.y}:e.length?s=uo(t,[]):s=lo(f.arcs.map(function(d){return d.p1}))}return s}function Bd(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var a=t[n[i]],o=i+1;o<n.length;++o){var u=t[n[o]],l=Tt(a,u);l+u.radius<=a.radius+1e-10?e[n[o]].push(n[i]):l+a.radius<=u.radius+1e-10&&e[n[i]].push(n[o])}return e}function Gd(t,e){for(var n={},r=Bd(t),i=0;i<e.length;++i){for(var a=e[i].sets,o={},u={},l=0;l<a.length;++l){o[a[l]]=!0;for(var s=r[a[l]],c=0;c<s.length;++c)u[s[c]]=!0}var f=[],d=[];for(var h in t)h in o?f.push(t[h]):h in u||d.push(t[h]);var v=uo(f,d);n[a]=v,v.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}function qd(t,e,n){var r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function Ud(t){var e={};_r(t,e);var n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){var r=n[0].circle;return qd(r.x,r.y,r.radius)}else{for(var i=[`
M`,n[0].p2.x,n[0].p2.y],a=0;a<n.length;++a){var o=n[a],u=o.circle.radius,l=o.width>u;i.push(`
A`,u,u,0,l?1:0,1,o.p1.x,o.p1.y)}return i.join(" ")}}var Gt="id",yr="path",Xd={appendPadding:[10,0,20,0],blendMode:"multiply",tooltip:{showTitle:!1,showMarkers:!1,fields:["id","size"],formatter:function(t){return{name:t.id,value:t.size}}},legend:{position:"top-left"},label:{style:{textAlign:"center",fill:"#fff"}},interactions:[{type:"legend-filter",enable:!1}],state:{active:{style:{stroke:"#000"}},selected:{style:{stroke:"#000",lineWidth:2}},inactive:{style:{fillOpacity:.3,strokeOpacity:.3}}},defaultInteractions:["tooltip","venn-legend-active"]},Yd=Zi(function(t,e,n,r){var i=new Map,a=t.length;return e.forEach(function(o,u){if(o[r].length===1)i.set(o[Gt],t[(u+a)%a]);else{var l=o[r].map(function(s){return i.get(s)});i.set(o[Gt],l.slice(1).reduce(function(s,c){return Od(s,c,n)},l[0]))}}),i},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return JSON.stringify(t)});function Hd(t,e,n,r){r===void 0&&(r=0);var i=t.data,a=t.setsField,o=t.sizeField;if(i.length===0)return Ut(Pt.WARN,!1,"warn: %s","数据不能为空"),[];var u=i.map(function(f){var d;return x(x({},f),(d={sets:f[a]||[],size:f[o]},d[yr]="",d[Gt]="",d))});u.sort(function(f,d){return f.sets.length-d.sets.length});var l=$d(u),s=Wd(l,e,n,r),c=Gd(s,u);return u.forEach(function(f){var d=f.sets,h=d.join(",");f[Gt]=h;var v=d.map(function(p){return s[p]}),g=Ud(v);/[zZ]$/.test(g)||(g+=" Z"),f[yr]=g;var y=c[h]||{x:0,y:0};Ct(f,y)}),u}function jd(t,e){for(var n=0;n<e.length;n++)if(!t.includes(e[n]))return!1;return!0}function Zd(t){return A({},t.defaultStyle,{fill:t.color},t.style)}Qt("schema","venn",{draw:function(t,e){var n=t.data,r=Ll(n[yr]),i=Zd(t),a=e.addGroup({name:"venn-shape"});a.addShape("path",{attrs:x(x({},i),{path:r}),name:"venn-path"});var o=t.customInfo,u=o.offsetX,l=o.offsetY,s=mt.transform(null,[["t",u,l]]);return a.setMatrix(s),a},getMarker:function(t){var e=t.color;return{symbol:"circle",style:{lineWidth:0,stroke:e,fill:e,r:4}}}});var Kd=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getLabelPoint=function(n,r,i){var a=n.data,o=a.x,u=a.y,l=n.customLabelInfo,s=l.offsetX,c=l.offsetY;return{content:n.content[i],x:o+s,y:u+c}},e}(Rl);Cl("venn",Kd);function zn(t){if(t){var e=t.geometries[0].elements;e.forEach(function(n){n.shape.toFront()})}}var Qd=Sn("element-active"),Jd=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){zn(this.context.view)},e.prototype.active=function(){t.prototype.active.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(Qd),th=Sn("element-highlight"),eh=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){zn(this.context.view)},e.prototype.highlight=function(){t.prototype.highlight.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.clear=function(){t.prototype.clear.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(th),nh=Sn("element-selected"),rh=Sn("element-single-selected"),ih=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){zn(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(nh),ah=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.syncElementsPos=function(){zn(this.context.view)},e.prototype.selected=function(){t.prototype.selected.call(this),this.syncElementsPos()},e.prototype.toggle=function(){t.prototype.toggle.call(this),this.syncElementsPos()},e.prototype.reset=function(){t.prototype.reset.call(this),this.syncElementsPos()},e}(rh);bt("venn-element-active",Jd);bt("venn-element-highlight",eh);bt("venn-element-selected",ih);bt("venn-element-single-selected",ah);nt("venn-element-active",{start:[{trigger:"element:mouseenter",action:"venn-element-active:active"}],end:[{trigger:"element:mouseleave",action:"venn-element-active:reset"}]});nt("venn-element-highlight",{start:[{trigger:"element:mouseenter",action:"venn-element-highlight:highlight"}],end:[{trigger:"element:mouseleave",action:"venn-element-highlight:reset"}]});nt("venn-element-selected",{start:[{trigger:"element:click",action:"venn-element-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-selected:reset"]}]});nt("venn-element-single-selected",{start:[{trigger:"element:click",action:"venn-element-single-selected:toggle"}],rollback:[{trigger:"dblclick",action:["venn-element-single-selected:reset"]}]});nt("venn-legend-active",{start:[{trigger:"legend-item:mouseenter",action:["list-active:active","venn-element-active:active"]}],end:[{trigger:"legend-item:mouseleave",action:["list-active:reset","venn-element-active:reset"]}]});nt("venn-legend-highlight",{start:[{trigger:"legend-item:mouseenter",action:["legend-item-highlight:highlight","venn-element-highlight:highlight"]}],end:[{trigger:"legend-item:mouseleave",action:["legend-item-highlight:reset","venn-element-highlight:reset"]}]});var oh=40;function co(t,e,n){var r=t.chart,i=t.options,a=i.blendMode,o=i.setsField,u=r.getTheme(),l=u.colors10,s=u.colors20,c=n;J(c)||(c=e.filter(function(d){return d[o].length===1}).length<=10?l:s);var f=Yd(c,e,a,o);return function(d){return f.get(d)||c[0]}}function lh(t,e){var n=t.options,r=n.color;if(typeof r!="function"){var i=typeof r=="string"?[r]:r,a=co(t,e,i);return function(o){return a(o[Gt])}}return r}function sh(t){var e=t.chart,n=t.options,r=n.legend,i=n.appendPadding,a=n.padding,o=Ht(i);return r!==!1&&(o=On(i,E(r,"position"),oh)),e.appendPadding=Dr([o,a]),t}function uh(t){var e=t.options,n=e.data;n||(Ut(Pt.WARN,!1,"warn: %s","数据不能为空"),n=[]);var r=n.filter(function(a){return a.sets.length===1}).map(function(a){return a.sets[0]}),i=n.filter(function(a){var o=a.sets;return jd(r,o)});return wr(i,n)||Ut(Pt.WARN,!1,"warn: %s","交集中不能出现不存在的集合, 请输入合法数据"),Ar({},t,{options:{data:i}})}function ch(t){var e=t.chart,n=t.options,r=n.pointStyle,i=n.setsField,a=n.sizeField,o=Ht(e.appendPadding),u=o[0],l=o[1],s=o[2],c=o[3],f={offsetX:c,offsetY:u},d=e.viewBBox,h=d.width,v=d.height,g=Hd(n,Math.max(h-(l+c),0),Math.max(v-(u+s),0),0);e.data(g);var y=Tr(A({},t,{options:{xField:"x",yField:"y",sizeField:a,seriesField:Gt,rawFields:[i,a],schema:{shape:"venn",style:r}}})).ext,p=y.geometry;p.customInfo(f);var m=lh(t,g);return typeof m=="function"&&p.color(Gt,function(b){var F=g.find(function(D){return D[Gt]===b}),w=co(t,g)(b);return m(F,w)}),t}function fh(t){var e=t.chart,n=t.options,r=n.label,i=Ht(e.appendPadding),a=i[0],o=i[3],u={offsetX:o,offsetY:a},l=ht(e,"schema");if(!r)l.label(!1);else{var s=r.callback,c=pt(r,["callback"]);l.label({fields:["id"],callback:s,cfg:Ar({},dt(c),{type:"venn",customLabelInfo:u})})}return t}function dh(t){var e=t.chart,n=t.options,r=n.legend,i=n.sizeField;return e.legend(Gt,r),e.legend(i,!1),t}function hh(t){var e=t.chart;return e.axis(!1),t}function vh(t){var e=t.options,n=t.chart,r=e.interactions;if(r){var i={"legend-active":"venn-legend-active","legend-highlight":"venn-legend-highlight"};et(A({},t,{options:{interactions:r.map(function(a){return x(x({},a),{type:i[a.type]||a.type})})}}))}return n.removeInteraction("legend-active"),n.removeInteraction("legend-highlight"),t}function gh(t){return _(sh,j,uh,ch,fh,at({}),dh,hh,ft,vh,Q)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return Xd},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return gh},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(G);var Be="$$stock-range$$",Nn="trend",fo="up",ho="down",ph={showMarkers:!1,showCrosshairs:!0,shared:!0,crosshairs:{type:"xy",follow:!0,text:function(t,e,n){var r;if(t==="x"){var i=n[0];r=i?i.title:e}else r=e;return{position:t==="y"?"start":"end",content:r,style:{fill:"#dfdfdf"}}},textBackground:{padding:[2,4],style:{fill:"#666"}}}},yh=A({},G.getDefaultOptions(),{tooltip:ph,interactions:[{type:"tooltip"}],legend:{position:"top-left"},risingFill:"#ef5350",fallingFill:"#26a69a"});function vo(t,e){return Mt(t,function(n){var r=n&&x({},n);if(J(e)&&r){var i=e[0],a=e[1],o=e[2],u=e[3];r[Nn]=r[i]<=r[a]?fo:ho,r[Be]=[r[i],r[a],r[o],r[u]]}return r})}function xh(t){var e=t.chart,n=t.options,r=n.yField,i=n.data,a=n.risingFill,o=n.fallingFill,u=n.tooltip,l=n.stockStyle;e.data(vo(i,r));var s=u;return s!==!1&&(s=A({},{fields:r},s)),Tr(A({},t,{options:{schema:{shape:"candle",color:[a,o],style:l},yField:Be,seriesField:Nn,rawFields:r,tooltip:s}})),t}function mh(t){var e,n,r=t.chart,i=t.options,a=i.meta,o=i.xAxis,u=i.yAxis,l=i.xField,s=(e={},e[l]={type:"timeCat",tickCount:6},e[Nn]={values:[fo,ho]},e),c=A(s,a,(n={},n[l]=K(o,yt),n[Be]=K(u,yt),n));return r.scale(c),t}function Fh(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?e.axis(Be,!1):e.axis(Be,i),t}function bh(t){var e=t.chart,n=t.options,r=n.tooltip;return r!==!1?e.tooltip(r):e.tooltip(!1),t}function Ah(t){var e=t.chart,n=t.options,r=n.legend;return r?e.legend(Nn,r):r===!1&&e.legend(!1),t}function go(t){_(j,xh,mh,Fh,bh,Ah,et,Q,it(),He)(t)}var wh=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return yh},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return go},e.prototype.changeData=function(n){this.updateOption({data:n});var r=this.options.yField;this.chart.changeData(vo(n,r))},e}(G),Kn,Zt="$$percentage$$",Kt="$$mappingValue$$",qt="$$conversion$$",xr="$$totalPercentage$$",Ge="$$x$$",qe="$$y$$",Sh={appendPadding:[0,80],minSize:0,maxSize:1,meta:(Kn={},Kn[Kt]={min:0,max:1,nice:!1},Kn),label:{style:{fill:"#fff",fontSize:12}},tooltip:{showTitle:!1,showMarkers:!1,shared:!1},conversionTag:{offsetX:10,offsetY:0,style:{fontSize:12,fill:"rgba(0,0,0,0.45)"}}},po="CONVERSION_TAG_NAME";function Wr(t,e,n){var r=[],i=n.yField,a=n.maxSize,o=n.minSize,u=E(ra(e,i),[i]),l=lt(a)?a:1,s=lt(o)?o:0;return r=Mt(t,function(c,f){var d=(c[i]||0)/u;return c[Zt]=d,c[Kt]=(l-s)*d+s,c[qt]=[E(t,[f-1,i]),c[i]],c}),r}function Br(t){return function(e){var n=e.chart,r=e.options,i=r.conversionTag,a=r.filteredData,o=a||n.getOptions().data;if(i){var u=i.formatter;o.forEach(function(l,s){if(!(s<=0||Number.isNaN(l[Kt]))){var c=t(l,s,o,{top:!0,name:po,text:{content:ot(u)?u(l,o):u,offsetX:i.offsetX,offsetY:i.offsetY,position:"end",autoRotate:!1,style:x({textAlign:"start",textBaseline:"middle"},i.style)}});n.annotation().line(c)}})}return e}}function Dh(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=n.maxSize,u=n.minSize,l=Wr(i,i,{yField:a,maxSize:o,minSize:u});return e.data(l),t}function Eh(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,l=n.shape,s=l===void 0?"funnel":l,c=n.funnelStyle,f=n.state,d=kt(o,[r,i]),h=d.fields,v=d.formatter;Ft({chart:e,options:{type:"interval",xField:r,yField:Kt,colorField:r,tooltipFields:J(h)&&h.concat([Zt,qt]),mapping:{shape:s,tooltip:v,color:a,style:c},label:u,state:f}});var g=ht(t.chart,"interval");return g.adjust("symmetric"),t}function Oh(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[]:[["transpose"],["scale",1,-1]]}),t}function yo(t){var e=t.options,n=t.chart,r=e.maxSize,i=E(n,["geometries","0","dataArray"],[]),a=E(n,["options","data","length"]),o=Mt(i,function(l){return E(l,["0","nextPoints","0","x"])*a-.5}),u=function(l,s,c,f){var d=r-(r-l[Kt])/2;return x(x({},f),{start:[o[s-1]||s-.5,d],end:[o[s-1]||s-.5,d+.05]})};return Br(u)(t),t}function xo(t){return _(Dh,Eh,Oh,yo)(t)}function Ih(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function Mh(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,u=n.compareField,l=n.isTransposed,s=n.tooltip,c=n.maxSize,f=n.minSize,d=n.label,h=n.funnelStyle,v=n.state,g=n.showFacetTitle;return e.facet("mirror",{fields:[u],transpose:!l,padding:l?0:[32,0,0,0],showTitle:g,eachView:function(y,p){var m=l?p.rowIndex:p.columnIndex;l||y.coordinate({type:"rect",actions:[["transpose"],["scale",m===0?-1:1,-1]]});var b=Wr(p.data,r,{yField:a,maxSize:c,minSize:f});y.data(b);var F=kt(s,[i,a,u]),w=F.fields,D=F.formatter,M=l?{offset:m===0?10:-23,position:m===0?"bottom":"top"}:{offset:10,position:"left",style:{textAlign:m===0?"end":"start"}};Ft({chart:y,options:{type:"interval",xField:i,yField:Kt,colorField:i,tooltipFields:J(w)&&w.concat([Zt,qt]),mapping:{shape:"funnel",tooltip:D,color:o,style:h},label:d===!1?!1:A({},M,d),state:v}})}}),t}function mo(t){var e=t.chart,n=t.index,r=t.options,i=r.conversionTag,a=r.isTransposed;(lt(n)?[e]:e.views).forEach(function(o,u){var l=E(o,["geometries","0","dataArray"],[]),s=E(o,["options","data","length"]),c=Mt(l,function(d){return E(d,["0","nextPoints","0","x"])*s-.5}),f=function(d,h,v,g){var y=(n||u)===0?-1:1;return A({},g,{start:[c[h-1]||h-.5,d[Kt]],end:[c[h-1]||h-.5,d[Kt]+.05],text:a?{style:{textAlign:"start"}}:{offsetX:i!==!1?y*i.offsetX:0,style:{textAlign:(n||u)===0?"end":"start"}}})};Br(f)(A({},{chart:o,options:r}))})}function kh(t){var e=t.chart;return e.once("beforepaint",function(){return mo(t)}),t}function Th(t){return _(Ih,Mh,kh)(t)}function Ph(t){var e,n=t.chart,r=t.options,i=r.data,a=i===void 0?[]:i,o=r.yField;return n.data(a),n.scale((e={},e[o]={sync:!0},e)),t}function $h(t){var e=t.chart,n=t.options,r=n.seriesField,i=n.isTransposed,a=n.showFacetTitle;return e.facet("rect",{fields:[r],padding:[i?0:32,10,0,10],showTitle:a,eachView:function(o,u){xo(A({},t,{chart:o,options:{data:u.data}}))}}),t}function Lh(t){return _(Ph,$h)(t)}function Ch(t){var e=t.chart,n=t.options,r=n.data,i=r===void 0?[]:r,a=n.yField,o=xt(i,function(s,c){return s+(c[a]||0)},0),u=ra(i,a)[a],l=Mt(i,function(s,c){var f=[],d=[];if(s[xr]=(s[a]||0)/o,c){var h=i[c-1][Ge],v=i[c-1][qe];f[0]=h[3],d[0]=v[3],f[1]=h[2],d[1]=v[2]}else f[0]=-.5,d[0]=1,f[1]=.5,d[1]=1;return d[2]=d[1]-s[xr],f[2]=(d[2]+1)/4,d[3]=d[2],f[3]=-f[2],s[Ge]=f,s[qe]=d,s[Zt]=(s[a]||0)/u,s[qt]=[E(i,[c-1,a]),s[a]],s});return e.data(l),t}function Rh(t){var e=t.chart,n=t.options,r=n.xField,i=n.yField,a=n.color,o=n.tooltip,u=n.label,l=n.funnelStyle,s=n.state,c=kt(o,[r,i]),f=c.fields,d=c.formatter;return Ft({chart:e,options:{type:"polygon",xField:Ge,yField:qe,colorField:r,tooltipFields:J(f)&&f.concat([Zt,qt]),label:u,state:s,mapping:{tooltip:d,color:a,style:l}}}),t}function zh(t){var e=t.chart,n=t.options,r=n.isTransposed;return e.coordinate({type:"rect",actions:r?[["transpose"],["reflect","x"]]:[]}),t}function Nh(t){var e=function(n,r,i,a){return x(x({},a),{start:[n[Ge][1],n[qe][1]],end:[n[Ge][1]+.05,n[qe][1]]})};return Br(e)(t),t}function _h(t){return _(Ch,Rh,zh,Nh)(t)}var Vh=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.rendering=!1,n}return e.prototype.change=function(n){var r=this;if(!this.rendering){var i=n.seriesField,a=n.compareField,o=a?mo:yo,u=this.context.view,l=i||a?u.views:[u];Mt(l,function(s,c){var f=s.getController("annotation"),d=be(E(f,["option"],[]),function(v){var g=v.name;return g!==po});f.clear(!0),$(d,function(v){typeof v=="object"&&s.annotation()[v.type](v)});var h=E(s,["filteredData"],s.getOptions().data);o({chart:s,index:c,options:x(x({},n),{filteredData:Wr(h,h,n)})}),s.filterData(h),r.rendering=!0,s.render(!0)})}this.rendering=!1},e}(Xt),Fo="funnel-conversion-tag",mr="funnel-afterrender",bo={trigger:"afterrender",action:Fo+":change"};bt(Fo,Vh);nt(mr,{start:[bo]});function Wh(t){var e=t.options,n=e.compareField,r=e.xField,i=e.yField,a=e.locale,o=e.funnelStyle,u=e.data,l=In(a),s={label:n?{fields:[r,i,n,Zt,qt],formatter:function(f){return""+f[i]}}:{fields:[r,i,Zt,qt],offset:0,position:"middle",formatter:function(f){return f[r]+" "+f[i]}},tooltip:{title:r,formatter:function(f){return{name:f[r],value:f[i]}}},conversionTag:{formatter:function(f){return l.get(["conversionTag","label"])+": "+wa.apply(void 0,f[qt])}}},c;return(n||o)&&(c=function(f){return A({},n&&{lineWidth:1,stroke:"#fff"},ot(o)?o(f):o)}),A({options:s},t,{options:{funnelStyle:c,data:ea(u)}})}function Bh(t){var e=t.options,n=e.compareField,r=e.dynamicHeight,i=e.seriesField;return i?Lh(t):n?Th(t):r?_h(t):xo(t)}function Gh(t){var e,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return _(at((e={},e[a]=r,e[o]=i,e)))(t)}function qh(t){var e=t.chart;return e.axis(!1),t}function Uh(t){var e=t.chart,n=t.options,r=n.legend;return r===!1?e.legend(!1):e.legend(r),t}function Xh(t){var e=t.chart,n=t.options,r=n.interactions,i=n.dynamicHeight;return $(r,function(a){a.enable===!1?e.removeInteraction(a.type):e.interaction(a.type,a.cfg||{})}),i?e.removeInteraction(mr):e.interaction(mr,{start:[x(x({},bo),{arg:n})]}),t}function Ao(t){return _(Wh,Bh,Gh,qh,ft,Xh,Uh,Q,j,it())(t)}var Yh=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="funnel",n}return e.getDefaultOptions=function(){return Sh},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ao},e.prototype.setState=function(n,r,i){i===void 0&&(i=!0);var a=_e(this.chart);$(a,function(o){r(o.getData())&&o.setState(n,i)})},e.prototype.getStates=function(){var n=_e(this.chart),r=[];return $(n,function(i){var a=i.getData(),o=i.getStates();$(o,function(u){r.push({data:a,state:u,geometry:i.geometry,element:i})})}),r},e.CONVERSATION_FIELD=qt,e.PERCENT_FIELD=Zt,e.TOTAL_PERCENT_FIELD=xr,e}(G),Hh="liquid";function wo(t){return[{percent:t,type:Hh}]}function jh(t){var e=t.chart,n=t.options,r=n.percent,i=n.liquidStyle,a=n.radius,o=n.outline,u=n.wave,l=n.shape,s=n.animation;e.scale({percent:{min:0,max:1}}),e.data(wo(r));var c=n.color||e.getTheme().defaultColor,f=A({},t,{options:{xField:"type",yField:"percent",widthRatio:a,interval:{color:c,style:i,shape:"liquid-fill-gauge"}}}),d=vt(f).ext,h=d.geometry,v=e.getTheme().background,g={radius:a,outline:o,wave:u,shape:l,background:v,animation:s};return h.customInfo(g),e.legend(!1),e.axis(!1),e.tooltip(!1),t}function So(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent,o=r.meta;n.getController("annotation").clear(!0);var u=E(o,["percent","formatter"])||function(s){return(s*100).toFixed(2)+"%"},l=i.content;return l&&(l=A({},l,{content:It(l.content)?u(a):l.content})),En(n,{statistic:x(x({},i),{content:l}),plotType:"liquid"},{percent:a}),e&&n.render(!0),t}function Zh(t){return _(j,At("liquidStyle"),jh,So,at({}),Q,et)(t)}var Kh={radius:.9,statistic:{title:!1,content:{style:{opacity:.75,fontSize:"30px",lineHeight:"30px",textAlign:"center"}}},outline:{border:2,distance:0},wave:{count:3,length:192},shape:"circle"},Ei=5e3;function Oi(t,e,n){return t+(e-t)*n}function Qh(t){var e=x({opacity:1},t.style);return t.color&&!e.fill&&(e.fill=t.color),e}function Jh(t){var e={fill:"#fff",fillOpacity:0,lineWidth:4},n=Ct({},e,t.style);return t.color&&!n.stroke&&(n.stroke=t.color),lt(t.opacity)&&(n.opacity=n.strokeOpacity=t.opacity),n}function tv(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function ev(t,e,n,r,i,a,o){for(var u=Math.ceil(2*t/n*4)*4,l=[],s=r;s<-Math.PI*2;)s+=Math.PI*2;for(;s>0;)s-=Math.PI*2;s=s/Math.PI/2*n;var c=a-t+s-t*2;l.push(["M",c,e]);for(var f=0,d=0;d<u;++d){var h=d%4,v=tv(d*n/4,h,n,i);l.push(["C",v[0][0]+c,-v[0][1]+e,v[1][0]+c,-v[1][1]+e,v[2][0]+c,-v[2][1]+e]),d===u-1&&(f=v[2][0])}return l.push(["L",f+c,o+t]),l.push(["L",c,o+t]),l.push(["Z"]),l}function nv(t,e,n,r,i,a,o,u,l,s){for(var c=i.fill,f=i.opacity,d=o.getBBox(),h=d.maxX-d.minX,v=d.maxY-d.minY,g=0;g<r;g++){var y=r<=1?0:g/(r-1),p=a.addShape("path",{name:"waterwave-path",attrs:{path:ev(u,d.minY+v*n,l,0,h/32,t,e),fill:c,opacity:Oi(.2,.9,y)*f}});try{if(s===!1)return;var m=sr([["t",l,0]]);p.stopAnimate(),p.animate({matrix:m},{duration:Oi(.5*Ei,Ei,y),repeat:!0})}catch{console.warn("off-screen group animate error!")}}}function rv(t,e,n,r){var i=n*2/3,a=Math.max(i,r),o=i/2,u=t,l=o+e-a/2,s=Math.asin(o/((a-o)*.85)),c=Math.sin(s)*o,f=Math.cos(s)*o,d=u-f,h=l+c,v=t,g=l+o/Math.sin(s);return`
      M `+d+" "+h+`
      A `+o+" "+o+" 0 1 1 "+(d+f*2)+" "+h+`
      Q `+v+" "+g+" "+t+" "+(e+a/2)+`
      Q `+v+" "+g+" "+d+" "+h+`
      Z 
    `}function iv(t,e,n,r){var i=n/2,a=r/2;return`
      M `+t+" "+(e-a)+` 
      a `+i+" "+a+" 0 1 0 0 "+a*2+`
      a `+i+" "+a+" 0 1 0 0 "+-a*2+`
      Z
    `}function av(t,e,n,r){var i=r/2,a=n/2;return`
      M `+t+" "+(e-i)+`
      L `+(t+a)+" "+e+`
      L `+t+" "+(e+i)+`
      L `+(t-a)+" "+e+`
      Z
    `}function ov(t,e,n,r){var i=r/2,a=n/2;return`
      M `+t+" "+(e-i)+`
      L `+(t+a)+" "+(e+i)+`
      L `+(t-a)+" "+(e+i)+`
      Z
    `}function lv(t,e,n,r){var i=.618,a=r/2,o=n/2*i;return`
      M `+(t-o)+" "+(e-a)+`
      L `+(t+o)+" "+(e-a)+`
      L `+(t+o)+" "+(e+a)+`
      L `+(t-o)+" "+(e+a)+`
      Z
    `}var Ii={pin:rv,circle:iv,diamond:av,triangle:ov,rect:lv};Qt("interval","liquid-fill-gauge",{draw:function(t,e){var n=.5,r=.5,i=t.customInfo,a=i,o=a.radius,u=a.shape,l=a.background,s=a.animation,c=i.outline,f=i.wave,d=c.border,h=c.distance,v=f.count,g=f.length,y=xt(t.points,function(L,W){return Math.min(L,W.x)},1/0),p=this.parsePoint({x:n,y:r}),m=this.parsePoint({x:y,y:r}),b=p.x-m.x,F=Math.min(b,m.y*o),w=Qh(t),D=Jh(Ct({},t,c)),M=F-d/2,k=typeof u=="function"?u:Ii[u]||Ii.circle,C=k(p.x,p.y,M*2,M*2),T=e.addGroup({name:"waves"}),O=T.setClip({type:"path",attrs:{path:C}});return nv(p.x,p.y,1-t.points[1].y,v,w,T,O,F*2,g,s),e.addShape("path",{name:"distance",attrs:{path:C,fill:"transparent",lineWidth:d+h*2,stroke:l==="transparent"?"#fff":l}}),e.addShape("path",{name:"wrap",attrs:Ct(D,{path:C,fill:"transparent",lineWidth:d})}),e}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="liquid",n}return e.getDefaultOptions=function(){return Kh},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.changeData=function(n){this.chart.emit(st.BEFORE_CHANGE_DATA,Lt.fromData(this.chart,st.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n}),this.chart.data(wo(n)),So({chart:this.chart,options:this.options},!0),this.chart.emit(st.AFTER_CHANGE_DATA,Lt.fromData(this.chart,st.AFTER_CHANGE_DATA,null))},e.prototype.getSchemaAdaptor=function(){return Zh},e})(G);function Mi(t,e,n){return t.length>1?e+"_"+n:""+e}function Do(t){var e=t.data,n=t.xField,r=t.measureField,i=t.rangeField,a=t.targetField,o=t.layout,u=[],l=[];e.forEach(function(f,d){var h=[f[i]].flat();h.sort(function(y,p){return y-p}),h.forEach(function(y,p){var m,b=p===0?y:h[p]-h[p-1];u.push((m={rKey:i+"_"+p},m[n]=n?f[n]:String(d),m[i]=b,m))});var v=[f[r]].flat();v.forEach(function(y,p){var m;u.push((m={mKey:Mi(v,r,p)},m[n]=n?f[n]:String(d),m[r]=y,m))});var g=[f[a]].flat();g.forEach(function(y,p){var m;u.push((m={tKey:Mi(g,a,p)},m[n]=n?f[n]:String(d),m[a]=y,m))}),l.push(f[i],f[r],f[a])});var s=Math.min.apply(Math,l.flat(1/0)),c=Math.max.apply(Math,l.flat(1/0));return s=s>0?0:s,o==="vertical"&&u.reverse(),{min:s,max:c,ds:u}}function sv(t){var e=t.chart,n=t.options,r=n.bulletStyle,i=n.targetField,a=n.rangeField,o=n.measureField,u=n.xField,l=n.color,s=n.layout,c=n.size,f=n.label,d=Do(n),h=d.min,v=d.max,g=d.ds;e.data(g);var y=A({},t,{options:{xField:u,yField:a,seriesField:"rKey",isStack:!0,label:E(f,"range"),interval:{color:E(l,"range"),style:E(r,"range"),size:E(c,"range")}}});vt(y),e.geometries[0].tooltip(!1);var p=A({},t,{options:{xField:u,yField:o,seriesField:"mKey",isStack:!0,label:E(f,"measure"),interval:{color:E(l,"measure"),style:E(r,"measure"),size:E(c,"measure")}}});vt(p);var m=A({},t,{options:{xField:u,yField:i,seriesField:"tKey",label:E(f,"target"),point:{color:E(l,"target"),style:E(r,"target"),size:ot(E(c,"target"))?function(b){return E(c,"target")(b)/2}:E(c,"target")/2,shape:s==="horizontal"?"line":"hyphen"}}});return wt(m),s==="horizontal"&&e.coordinate().transpose(),x(x({},t),{ext:{data:{min:h,max:v}}})}function Eo(t){var e,n,r=t.options,i=t.ext,a=r.xAxis,o=r.yAxis,u=r.targetField,l=r.rangeField,s=r.measureField,c=r.xField,f=i.data;return _(at((e={},e[c]=a,e[s]=o,e),(n={},n[s]={min:f==null?void 0:f.min,max:f==null?void 0:f.max,sync:!0},n[u]={sync:""+s},n[l]={sync:""+s},n)))(t)}function uv(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.measureField,u=n.rangeField,l=n.targetField;return e.axis(""+u,!1),e.axis(""+l,!1),r===!1?e.axis(""+a,!1):e.axis(""+a,r),i===!1?e.axis(""+o,!1):e.axis(""+o,i),t}function cv(t){var e=t.chart,n=t.options,r=n.legend;return e.removeInteraction("legend-filter"),e.legend(r),e.legend("rKey",!1),e.legend("mKey",!1),e.legend("tKey",!1),t}function fv(t){var e=t.chart,n=t.options,r=n.label,i=n.measureField,a=n.targetField,o=n.rangeField,u=e.geometries,l=u[0],s=u[1],c=u[2];return E(r,"range")?l.label(""+o,x({layout:[{type:"limit-in-plot"}]},dt(r.range))):l.label(!1),E(r,"measure")?s.label(""+i,x({layout:[{type:"limit-in-plot"}]},dt(r.measure))):s.label(!1),E(r,"target")?c.label(""+a,x({layout:[{type:"limit-in-plot"}]},dt(r.target))):c.label(!1),t}function dv(t){_(sv,Eo,uv,cv,j,fv,ft,et,Q)(t)}var hv=A({},G.getDefaultOptions(),{layout:"horizontal",size:{range:30,measure:20,target:20},xAxis:{tickLine:!1,line:null},bulletStyle:{range:{fillOpacity:.5}},label:{measure:{position:"right"}},tooltip:{showMarkers:!1}});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return hv},e.prototype.changeData=function(n){this.updateOption({data:n});var r=Do(this.options),i=r.min,a=r.max,o=r.ds;Eo({options:this.options,ext:{data:{min:i,max:a}},chart:this.chart}),this.chart.changeData(o)},e.prototype.getSchemaAdaptor=function(){return dv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(G);var Oo="nodeIndex",Io="childNodeCount",Gr="nodeAncestor",Qn="Invalid field: it must be a string!";function qr(t,e){var n=t.field,r=t.fields;if(gt(n))return n;if(J(n))return console.warn(Qn),n[0];if(console.warn(Qn+" will try to get fields instead."),gt(r))return r;if(J(r)&&r.length)return r[0];if(e)return e;throw new TypeError(Qn)}function Ur(t){var e=[];if(t&&t.each){var n,r;t.each(function(i){var a,o;i.parent!==n?(n=i.parent,r=0):r+=1;var u=be((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(function(l){return e.find(function(s){return s.name===l.name})||l}),function(l){var s=l.depth;return s>0&&s<i.depth});i[Gr]=u,i[Io]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[Oo]=r,e.push(i)})}else t&&t.eachNode&&t.eachNode(function(i){e.push(i)});return e}var Xr="ancestor-node",Mo="value",Ue="path",vv=[Ue,Oo,Gr,Io,"name","depth","height"],gv=A({},G.getDefaultOptions(),{innerRadius:0,radius:.85,hierarchyConfig:{field:"value"},tooltip:{shared:!0,showMarkers:!1,offset:20,showTitle:!1},legend:!1,sunburstStyle:{lineWidth:.5,stroke:"#FFF"},drilldown:{enabled:!0}}),ki=4,pv=0,Ti=5,Pi="drilldown-bread-crumb",yv={position:"top-left",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}},Xe="hierarchy-data-transform-params",xv=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.name="drill-down",n.historyCache=[],n.breadCrumbGroup=null,n.breadCrumbCfg=yv,n}return e.prototype.click=function(){var n=E(this.context,["event","data","data"]);if(!n)return!1;this.drill(n),this.drawBreadCrumb()},e.prototype.resetPosition=function(){if(this.breadCrumbGroup){var n=this.context.view.getCoordinate(),r=this.breadCrumbGroup,i=r.getBBox(),a=this.getButtonCfg().position,o={x:n.start.x,y:n.end.y-(i.height+Ti*2)};n.isPolar&&(o={x:0,y:0}),a==="bottom-left"&&(o={x:n.start.x,y:n.start.y});var u=mt.transform(null,[["t",o.x+pv,o.y+i.height+Ti]]);r.setMatrix(u)}},e.prototype.back=function(){Ne(this.historyCache)&&this.backTo(this.historyCache.slice(0,-1))},e.prototype.reset=function(){this.historyCache[0]&&this.backTo(this.historyCache.slice(0,1)),this.historyCache=[],this.hideCrumbGroup()},e.prototype.drill=function(n){var r=this.context.view,i=E(r,["interactions","drill-down","cfg","transformData"],function(s){return s}),a=i(x({data:n.data},n[Xe]));r.changeData(a);for(var o=[],u=n;u;){var l=u.data;o.unshift({id:l.name+"_"+u.height+"_"+u.depth,name:l.name,children:i(x({data:l},n[Xe]))}),u=u.parent}this.historyCache=(this.historyCache||[]).slice(0,-1).concat(o)},e.prototype.backTo=function(n){if(!(!n||n.length<=0)){var r=this.context.view,i=Xn(n).children;r.changeData(i),n.length>1?(this.historyCache=n,this.drawBreadCrumb()):(this.historyCache=[],this.hideCrumbGroup())}},e.prototype.getButtonCfg=function(){var n=this.context.view,r=E(n,["interactions","drill-down","cfg","drillDownConfig"]);return A(this.breadCrumbCfg,r==null?void 0:r.breadCrumb,this.cfg)},e.prototype.drawBreadCrumb=function(){this.drawBreadCrumbGroup(),this.resetPosition(),this.breadCrumbGroup.show()},e.prototype.drawBreadCrumbGroup=function(){var n=this,r=this.getButtonCfg(),i=this.historyCache;this.breadCrumbGroup?this.breadCrumbGroup.clear():this.breadCrumbGroup=this.context.view.foregroundGroup.addGroup({name:Pi});var a=0;i.forEach(function(o,u){var l=n.breadCrumbGroup.addShape({type:"text",id:o.id,name:Pi+"_"+o.name+"_text",attrs:x(x({text:u===0&&!It(r.rootText)?r.rootText:o.name},r.textStyle),{x:a,y:0})}),s=l.getBBox();if(a+=s.width+ki,l.on("click",function(d){var h,v=d.target.get("id");if(v!==((h=Xn(i))===null||h===void 0?void 0:h.id)){var g=i.slice(0,i.findIndex(function(y){return y.id===v})+1);n.backTo(g)}}),l.on("mouseenter",function(d){var h,v=d.target.get("id");v!==((h=Xn(i))===null||h===void 0?void 0:h.id)?l.attr(r.activeTextStyle):l.attr({cursor:"default"})}),l.on("mouseleave",function(){l.attr(r.textStyle)}),u<i.length-1){var c=n.breadCrumbGroup.addShape({type:"text",name:r.name+"_"+o.name+"_divider",attrs:x(x({text:r.dividerText},r.textStyle),{x:a,y:0})}),f=c.getBBox();a+=f.width+ki}})},e.prototype.hideCrumbGroup=function(){this.breadCrumbGroup&&this.breadCrumbGroup.hide()},e.prototype.destroy=function(){this.breadCrumbGroup&&this.breadCrumbGroup.remove(),t.prototype.destroy.call(this)},e}(Xt);function mv(t,e){return t.parent===e.parent?1:2}function Fv(t){return t.reduce(bv,0)/t.length}function bv(t,e){return t+e.x}function Av(t){return 1+t.reduce(wv,0)}function wv(t,e){return Math.max(t,e.y)}function Sv(t){for(var e;e=t.children;)t=e[0];return t}function Dv(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Ev(){var t=mv,e=1,n=1,r=!1;function i(a){var o,u=0;a.eachAfter(function(d){var h=d.children;h?(d.x=Fv(h),d.y=Av(h)):(d.x=o?u+=t(d,o):0,d.y=0,o=d)});var l=Sv(a),s=Dv(a),c=l.x-t(l,s)/2,f=s.x+t(s,l)/2;return a.eachAfter(r?function(d){d.x=(d.x-a.x)*e,d.y=(a.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*e,d.y=(1-(a.y?d.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}function Ov(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Iv(){return this.eachAfter(Ov)}function Mv(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function kv(t,e){for(var n=this,r=[n],i,a,o=-1;n=r.pop();)if(t.call(e,n,++o,this),i=n.children)for(a=i.length-1;a>=0;--a)r.push(i[a]);return this}function Tv(t,e){for(var n=this,r=[n],i=[],a,o,u,l=-1;n=r.pop();)if(i.push(n),a=n.children)for(o=0,u=a.length;o<u;++o)r.push(a[o]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Pv(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function $v(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Lv(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Cv(t){for(var e=this,n=Rv(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Rv(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function zv(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Nv(){return Array.from(this)}function _v(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Vv(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*Wv(){var t=this,e,n=[t],r,i,a;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,a=r.length;i<a;++i)n.push(r[i]);while(n.length)}function Ee(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=qv)):e===void 0&&(e=Gv);for(var n=new Fe(t),r,i=[n],a,o,u,l;r=i.pop();)if((o=e(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,u=l-1;u>=0;--u)i.push(a=o[u]=new Fe(o[u])),a.parent=r,a.depth=r.depth+1;return n.eachBefore(ko)}function Bv(){return Ee(this).eachBefore(Uv)}function Gv(t){return t.children}function qv(t){return Array.isArray(t)?t[1]:null}function Uv(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function ko(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fe(t){this.data=t,this.depth=this.height=0,this.parent=null}Fe.prototype=Ee.prototype={constructor:Fe,count:Iv,each:Mv,eachAfter:Tv,eachBefore:kv,find:Pv,sum:$v,sort:Lv,path:Cv,ancestors:zv,descendants:Nv,leaves:_v,links:Vv,copy:Bv,[Symbol.iterator]:Wv};function Xv(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Yv(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t}function To(t){for(var e=0,n=(t=Yv(Array.from(t))).length,r=[],i,a;e<n;)i=t[e],a&&Po(a,i)?++e:(a=jv(r=Hv(r,i)),e=0);return a}function Hv(t,e){var n,r;if(Jn(e,t))return[e];for(n=0;n<t.length;++n)if(rn(e,t[n])&&Jn(Le(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(rn(Le(t[n],t[r]),e)&&rn(Le(t[n],e),t[r])&&rn(Le(t[r],e),t[n])&&Jn($o(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function rn(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Po(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Jn(t,e){for(var n=0;n<e.length;++n)if(!Po(t,e[n]))return!1;return!0}function jv(t){switch(t.length){case 1:return Zv(t[0]);case 2:return Le(t[0],t[1]);case 3:return $o(t[0],t[1],t[2])}}function Zv(t){return{x:t.x,y:t.y,r:t.r}}function Le(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,l=a-n,s=o-r,c=u-i,f=Math.sqrt(l*l+s*s);return{x:(n+a+l/f*c)/2,y:(r+o+s/f*c)/2,r:(f+i+u)/2}}function $o(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,l=e.r,s=n.x,c=n.y,f=n.r,d=r-o,h=r-s,v=i-u,g=i-c,y=l-a,p=f-a,m=r*r+i*i-a*a,b=m-o*o-u*u+l*l,F=m-s*s-c*c+f*f,w=h*v-d*g,D=(v*F-g*b)/(w*2)-r,M=(g*y-v*p)/w,k=(h*b-d*F)/(w*2)-i,C=(d*p-h*y)/w,T=M*M+C*C-1,O=2*(a+D*M+k*C),L=D*D+k*k-a*a,W=-(T?(O+Math.sqrt(O*O-4*T*L))/(2*T):L/O);return{x:r+D+M*W,y:i+k+C*W,r:W}}function $i(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,u,l,s=r*r+o*o;s?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(s+l-a)/(2*s),u=Math.sqrt(Math.max(0,l/s-i*i)),n.x=t.x-i*r-u*o,n.y=t.y-i*o+u*r):(i=(s+a-l)/(2*s),u=Math.sqrt(Math.max(0,a/s-i*i)),n.x=e.x+i*r-u*o,n.y=e.y+i*o+u*r)):(n.x=e.x+n.r,n.y=e.y)}function Li(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ci(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function an(t){this._=t,this.next=null,this.previous=null}function Lo(t){if(!(i=(t=Xv(t)).length))return 0;var e,n,r,i,a,o,u,l,s,c,f;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;$i(n,e,r=t[2]),e=new an(e),n=new an(n),r=new an(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){$i(e._,n._,r=t[u]),r=new an(r),l=n.next,s=e.previous,c=n._.r,f=e._.r;do if(c<=f){if(Li(l._,r._)){n=l,e.next=n,n.previous=e,--u;continue t}c+=l._.r,l=l.next}else{if(Li(s._,r._)){e=s,e.next=n,n.previous=e,--u;continue t}f+=s._.r,s=s.previous}while(l!==s.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=Ci(e);(r=r.next)!==n;)(o=Ci(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=To(e),u=0;u<i;++u)e=t[u],e.x-=r.x,e.y-=r.y;return r.r}function Kv(t){return Lo(t),t}function Qv(t){return t==null?null:Fn(t)}function Fn(t){if(typeof t!="function")throw new Error;return t}function te(){return 0}function he(t){return function(){return t}}function Jv(t){return Math.sqrt(t.value)}function Co(){var t=null,e=1,n=1,r=te;function i(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(Ri(t)).eachAfter(tr(r,.5)).eachBefore(zi(1)):a.eachBefore(Ri(Jv)).eachAfter(tr(te,1)).eachAfter(tr(r,a.r/Math.min(e,n))).eachBefore(zi(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=Qv(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:he(+a),i):r},i}function Ri(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function tr(t,e){return function(n){if(r=n.children){var r,i,a=r.length,o=t(n)*e||0,u;if(o)for(i=0;i<a;++i)r[i].r+=o;if(u=Lo(r),o)for(i=0;i<a;++i)r[i].r-=o;n.r=u+o}}}function zi(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Ro(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Qe(t,e,n,r,i){for(var a=t.children,o,u=-1,l=a.length,s=t.value&&(r-e)/t.value;++u<l;)o=a[u],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*s}function zo(){var t=1,e=1,n=0,r=!1;function i(o){var u=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/u,o.eachBefore(a(e,u)),r&&o.eachBefore(Ro),o}function a(o,u){return function(l){l.children&&Qe(l,l.x0,o*(l.depth+1)/u,l.x1,o*(l.depth+2)/u);var s=l.x0,c=l.y0,f=l.x1-n,d=l.y1-n;f<s&&(s=f=(s+f)/2),d<c&&(c=d=(c+d)/2),l.x0=s,l.y0=c,l.x1=f,l.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var tg={depth:-1},Ni={};function eg(t){return t.id}function ng(t){return t.parentId}function rg(){var t=eg,e=ng;function n(r){var i=Array.from(r),a=i.length,o,u,l,s,c,f,d,h=new Map;for(u=0;u<a;++u)o=i[u],c=i[u]=new Fe(o),(f=t(o,u,r))!=null&&(f+="")&&(d=c.id=f,h.set(d,h.has(d)?Ni:c)),(f=e(o,u,r))!=null&&(f+="")&&(c.parent=f);for(u=0;u<a;++u)if(c=i[u],f=c.parent){if(s=h.get(f),!s)throw new Error("missing: "+f);if(s===Ni)throw new Error("ambiguous: "+f);s.children?s.children.push(c):s.children=[c],c.parent=s}else{if(l)throw new Error("multiple roots");l=c}if(!l)throw new Error("no root");if(l.parent=tg,l.eachBefore(function(v){v.depth=v.parent.depth+1,--a}).eachBefore(ko),l.parent=null,a>0)throw new Error("cycle");return l}return n.id=function(r){return arguments.length?(t=Fn(r),n):t},n.parentId=function(r){return arguments.length?(e=Fn(r),n):e},n}function ig(t,e){return t.parent===e.parent?1:2}function er(t){var e=t.children;return e?e[0]:t.t}function nr(t){var e=t.children;return e?e[e.length-1]:t.t}function ag(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function og(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function lg(t,e,n){return t.a.parent===e.parent?t.a:n}function vn(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}vn.prototype=Object.create(Fe.prototype);function sg(t){for(var e=new vn(t,0),n,r=[e],i,a,o,u;n=r.pop();)if(a=n._.children)for(n.children=new Array(u=a.length),o=u-1;o>=0;--o)r.push(i=n.children[o]=new vn(a[o],o)),i.parent=n;return(e.parent=new vn(null,0)).children=[e],e}function ug(){var t=ig,e=1,n=1,r=null;function i(s){var c=sg(s);if(c.eachAfter(a),c.parent.m=-c.z,c.eachBefore(o),r)s.eachBefore(l);else{var f=s,d=s,h=s;s.eachBefore(function(m){m.x<f.x&&(f=m),m.x>d.x&&(d=m),m.depth>h.depth&&(h=m)});var v=f===d?1:t(f,d)/2,g=v-f.x,y=e/(d.x+v+g),p=n/(h.depth||1);s.eachBefore(function(m){m.x=(m.x+g)*y,m.y=m.depth*p})}return s}function a(s){var c=s.children,f=s.parent.children,d=s.i?f[s.i-1]:null;if(c){og(s);var h=(c[0].z+c[c.length-1].z)/2;d?(s.z=d.z+t(s._,d._),s.m=s.z-h):s.z=h}else d&&(s.z=d.z+t(s._,d._));s.parent.A=u(s,d,s.parent.A||f[0])}function o(s){s._.x=s.z+s.parent.m,s.m+=s.parent.m}function u(s,c,f){if(c){for(var d=s,h=s,v=c,g=d.parent.children[0],y=d.m,p=h.m,m=v.m,b=g.m,F;v=nr(v),d=er(d),v&&d;)g=er(g),h=nr(h),h.a=s,F=v.z+m-d.z-y+t(v._,d._),F>0&&(ag(lg(v,s,f),s,F),y+=F,p+=F),m+=v.m,y+=d.m,b+=g.m,p+=h.m;v&&!nr(h)&&(h.t=v,h.m+=m-p),d&&!er(g)&&(g.t=d,g.m+=y-b,f=s)}return f}function l(s){s.x*=e,s.y=s.depth*n}return i.separation=function(s){return arguments.length?(t=s,i):t},i.size=function(s){return arguments.length?(r=!1,e=+s[0],n=+s[1],i):r?null:[e,n]},i.nodeSize=function(s){return arguments.length?(r=!0,e=+s[0],n=+s[1],i):r?[e,n]:null},i}function _n(t,e,n,r,i){for(var a=t.children,o,u=-1,l=a.length,s=t.value&&(i-n)/t.value;++u<l;)o=a[u],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*s}var No=(1+Math.sqrt(5))/2;function _o(t,e,n,r,i,a){for(var o=[],u=e.children,l,s,c=0,f=0,d=u.length,h,v,g=e.value,y,p,m,b,F,w,D;c<d;){h=i-n,v=a-r;do y=u[f++].value;while(!y&&f<d);for(p=m=y,w=Math.max(v/h,h/v)/(g*t),D=y*y*w,F=Math.max(m/D,D/p);f<d;++f){if(y+=s=u[f].value,s<p&&(p=s),s>m&&(m=s),D=y*y*w,b=Math.max(m/D,D/p),b>F){y-=s;break}F=b}o.push(l={value:y,dice:h<v,children:u.slice(c,f)}),l.dice?Qe(l,n,r,i,g?r+=v*y/g:a):_n(l,n,r,g?n+=h*y/g:i,a),g-=y,c=f}return o}const Vo=function t(e){function n(r,i,a,o,u){_o(e,r,i,a,o,u)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(No);function Wo(){var t=Vo,e=!1,n=1,r=1,i=[0],a=te,o=te,u=te,l=te,s=te;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(Ro),d}function f(d){var h=i[d.depth],v=d.x0+h,g=d.y0+h,y=d.x1-h,p=d.y1-h;y<v&&(v=y=(v+y)/2),p<g&&(g=p=(g+p)/2),d.x0=v,d.y0=g,d.x1=y,d.y1=p,d.children&&(h=i[d.depth+1]=a(d)/2,v+=s(d)-h,g+=o(d)-h,y-=u(d)-h,p-=l(d)-h,y<v&&(v=y=(v+y)/2),p<g&&(g=p=(g+p)/2),t(d,v,g,y,p))}return c.round=function(d){return arguments.length?(e=!!d,c):e},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(t=Fn(d),c):t},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(a=typeof d=="function"?d:he(+d),c):a},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:he(+d),c):o},c.paddingRight=function(d){return arguments.length?(u=typeof d=="function"?d:he(+d),c):u},c.paddingBottom=function(d){return arguments.length?(l=typeof d=="function"?d:he(+d),c):l},c.paddingLeft=function(d){return arguments.length?(s=typeof d=="function"?d:he(+d),c):s},c}function cg(t,e,n,r,i){var a=t.children,o,u=a.length,l,s=new Array(u+1);for(s[0]=l=o=0;o<u;++o)s[o+1]=l+=a[o].value;c(0,u,t.value,e,n,r,i);function c(f,d,h,v,g,y,p){if(f>=d-1){var m=a[f];m.x0=v,m.y0=g,m.x1=y,m.y1=p;return}for(var b=s[f],F=h/2+b,w=f+1,D=d-1;w<D;){var M=w+D>>>1;s[M]<F?w=M+1:D=M}F-s[w-1]<s[w]-F&&f+1<w&&--w;var k=s[w]-b,C=h-k;if(y-v>p-g){var T=h?(v*C+y*k)/h:y;c(f,w,k,v,g,T,p),c(w,d,C,T,g,y,p)}else{var O=h?(g*C+p*k)/h:p;c(f,w,k,v,g,y,O),c(w,d,C,v,O,y,p)}}}function fg(t,e,n,r,i){(t.depth&1?_n:Qe)(t,e,n,r,i)}const dg=function t(e){function n(r,i,a,o,u){if((l=r._squarify)&&l.ratio===e)for(var l,s,c,f,d=-1,h,v=l.length,g=r.value;++d<v;){for(s=l[d],c=s.children,f=s.value=0,h=c.length;f<h;++f)s.value+=c[f].value;s.dice?Qe(s,i,a,o,g?a+=(u-a)*s.value/g:u):_n(s,i,a,g?i+=(o-i)*s.value/g:o,u),g-=s.value}else r._squarify=l=_o(e,r,i,a,o,u),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(No),_i=Object.freeze(Object.defineProperty({__proto__:null,cluster:Ev,hierarchy:Ee,pack:Co,packEnclose:To,packSiblings:Kv,partition:zo,stratify:rg,tree:ug,treemap:Wo,treemapBinary:cg,treemapDice:Qe,treemapResquarify:dg,treemapSlice:_n,treemapSliceDice:fg,treemapSquarify:Vo},Symbol.toStringTag,{value:"Module"}));var hg={field:"value",size:[1,1],round:!1,padding:0,sort:function(t,e){return e.value-t.value},as:["x","y"],ignoreParentValue:!0};function vg(t,e){e=Ct({},hg,e);var n=e.as;if(!J(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=qr(e)}catch(l){console.warn(l)}var i=function(l){return zo().size(e.size).round(e.round).padding(e.padding)(Ee(l).sum(function(s){return Ne(s.children)?e.ignoreParentValue?0:s[r]-xt(s.children,function(c,f){return c+f[r]},0):s[r]}).sort(e.sort))},a=i(t),o=n[0],u=n[1];return a.each(function(l){var s,c;l[o]=[l.x0,l.x1,l.x1,l.x0],l[u]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((s=l.data)===null||s===void 0?void 0:s.name)||((c=l.data)===null||c===void 0?void 0:c.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(function(f){n.indexOf(f)===-1&&delete l[f]})}),Ur(a)}var gg={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"],sort:function(t,e){return e.value-t.value},ratio:.5*(1+Math.sqrt(5))};function pg(t,e){return t==="treemapSquarify"?_i[t].ratio(e):_i[t]}function Bo(t,e){e=Ct({},gg,e);var n=e.as;if(!J(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var r;try{r=qr(e)}catch(s){console.warn(s)}var i=pg(e.tile,e.ratio),a=function(s){return Wo().tile(i).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(Ee(s).sum(function(c){return e.ignoreParentValue&&c.children?0:c[r]}).sort(e.sort))},o=a(t),u=n[0],l=n[1];return o.each(function(s){s[u]=[s.x0,s.x1,s.x1,s.x0],s[l]=[s.y1,s.y1,s.y0,s.y0],["x0","x1","y0","y1"].forEach(function(c){n.indexOf(c)===-1&&delete s[c]})}),Ur(o)}function Go(t){var e=t.data,n=t.colorField,r=t.rawFields,i=t.hierarchyConfig,a=i===void 0?{}:i,o=a.activeDepth,u={partition:vg,treemap:Bo},l=t.seriesField,s=t.type||"partition",c=u[s](e,x(x({field:l||"value"},Dn(a,["activeDepth"])),{type:"hierarchy."+s,as:["x","y"]})),f=[];return c.forEach(function(d){var h,v,g,y,p,m;if(d.depth===0||o>0&&d.depth>o)return null;for(var b=d.data.name,F=x({},d);F.depth>1;)b=((v=F.parent.data)===null||v===void 0?void 0:v.name)+" / "+b,F=F.parent;var w=x(x(x({},K(d.data,rt(r||[],[a.field]))),(h={},h[Ue]=b,h[Xr]=F.data.name,h)),d);l&&(w[l]=d.data[l]||((y=(g=d.parent)===null||g===void 0?void 0:g.data)===null||y===void 0?void 0:y[l])),n&&(w[n]=d.data[n]||((m=(p=d.parent)===null||p===void 0?void 0:p.data)===null||m===void 0?void 0:m[n])),w.ext=a,w[Xe]={hierarchyConfig:a,colorField:n,rawFields:r},f.push(w)}),f}function yg(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=i===void 0?Xr:i,o=n.sunburstStyle,u=n.rawFields,l=u===void 0?[]:u,s=Go(n);e.data(s);var c;return o&&(c=function(f){return A({},{fillOpacity:Math.pow(.85,f.depth)},ot(o)?o(f):o)}),Ln(A({},t,{options:{xField:"x",yField:"y",seriesField:a,rawFields:ze(rt(vv,l)),polygon:{color:r,style:c}}})),t}function xg(t){var e=t.chart;return e.axis(!1),t}function mg(t){var e=t.chart,n=t.options,r=n.label,i=ht(e,"polygon");if(!r)i.label(!1);else{var a=r.fields,o=a===void 0?["name"]:a,u=r.callback,l=pt(r,["fields","callback"]);i.label({fields:o,callback:u,cfg:dt(l)})}return t}function Fg(t){var e=t.chart,n=t.options,r=n.innerRadius,i=n.radius,a=n.reflect,o=e.coordinate({type:"polar",cfg:{innerRadius:r,radius:i}});return a&&o.reflect(a),t}function bg(t){var e,n=t.options,r=n.hierarchyConfig,i=n.meta;return _(at({},(e={},e[Mo]=E(i,E(r,["field"],"value")),e)))(t)}function Ag(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;E(r,"fields")||(i=A({},{customItems:function(a){return a.map(function(o){var u=E(e.getOptions(),"scales"),l=E(u,[Ue,"formatter"],function(c){return c}),s=E(u,[Mo,"formatter"],function(c){return c});return x(x({},o),{name:l(o.data[Ue]),value:s(o.data.value)})})}},i)),e.tooltip(i)}return t}function wg(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e!=null&&e.enabled?A({},t,{interactions:rt(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:Go}}])}):t}function Sg(t){var e=t.chart,n=t.options,r=n.drilldown;return et({chart:e,options:wg(n)}),r!=null&&r.enabled&&(e.appendPadding=On(e.appendPadding,E(r,["breadCrumb","position"]))),t}function Dg(t){return _(j,At("sunburstStyle"),yg,xg,bg,Ae,Fg,Ag,mg,Sg,Q,it())(t)}function Vi(t){var e=E(t,["event","data","data"],{});return J(e.children)&&e.children.length>0}function Wi(t){var e=t.view.getCoordinate(),n=e.innerRadius;if(n){var r=t.event,i=r.x,a=r.y,o=e.center,u=o.x,l=o.y,s=e.getRadius()*n,c=Math.sqrt(Math.pow(u-i,2)+Math.pow(l-a,2));return c<s}return!1}bt("drill-down-action",xv);nt("drill-down",{showEnable:[{trigger:"element:mouseenter",action:"cursor:pointer",isEnable:Vi},{trigger:"element:mouseleave",action:"cursor:default"},{trigger:"element:mouseleave",action:"cursor:pointer",isEnable:Wi}],start:[{trigger:"element:click",isEnable:Vi,action:["drill-down-action:click"]},{trigger:"afterchangesize",action:["drill-down-action:resetPosition"]},{trigger:"click",isEnable:Wi,action:["drill-down-action:back"]}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sunburst",n}return e.getDefaultOptions=function(){return gv},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Dg},e.SUNBURST_ANCESTOR_FIELD=Xr,e.SUNBURST_PATH_FIELD=Ue,e.NODE_ANCESTORS_FIELD=Gr,e})(G);var on,Yr="range",qo="type",Vt="percent",Eg="#f0f0f0",Uo="indicator-view",Xo="range-view",Og={percent:0,range:{ticks:[]},innerRadius:.9,radius:.95,startAngle:-7/6*Math.PI,endAngle:1/6*Math.PI,syncViewPadding:!0,axis:{line:null,label:{offset:-24,style:{textAlign:"center",textBaseline:"middle"}},subTickLine:{length:-8},tickLine:{length:-12},grid:null},indicator:{pointer:{style:{lineWidth:5,lineCap:"round"}},pin:{style:{r:9.75,lineWidth:4.5,fill:"#fff"}}},statistic:{title:!1},meta:(on={},on[Yr]={sync:"v"},on[Vt]={sync:"v",tickCount:5,tickInterval:.2},on),animation:!1};function Ig(t,e){return t.map(function(n,r){var i;return i={},i[Yr]=n-(t[r-1]||0),i[qo]=""+r,i[Vt]=e,i})}function Yo(t){var e;return[(e={},e[Vt]=wn(t,0,1),e)]}function Ho(t,e){var n=E(e,["ticks"],[]),r=Ne(n)?ze(n):[0,wn(t,0,1),1];return r[0]||r.shift(),Ig(r,t)}function Mg(t){var e=t.chart,n=t.options,r=n.percent,i=n.range,a=n.radius,o=n.innerRadius,u=n.startAngle,l=n.endAngle,s=n.axis,c=n.indicator,f=n.gaugeStyle,d=n.type,h=n.meter,v=i.color,g=i.width;if(c){var y=Yo(r),p=e.createView({id:Uo});p.data(y),p.point().position(Vt+"*1").shape(c.shape||"gauge-indicator").customInfo({defaultColor:e.getTheme().defaultColor,indicator:c}),p.coordinate("polar",{startAngle:u,endAngle:l,radius:o*a}),p.axis(Vt,s),p.scale(Vt,K(s,yt))}var m=Ho(r,n.range),b=e.createView({id:Xo});b.data(m);var F=gt(v)?[v,Eg]:v,w=vt({chart:b,options:{xField:"1",yField:Yr,seriesField:qo,rawFields:[Vt],isStack:!0,interval:{color:F,style:f,shape:d==="meter"?"meter-gauge":null},args:{zIndexReversed:!0,sortZIndex:!0},minColumnWidth:g,maxColumnWidth:g}}).ext,D=w.geometry;return D.customInfo({meter:h}),b.coordinate("polar",{innerRadius:o,radius:a,startAngle:u,endAngle:l}).transpose(),t}function kg(t){var e;return _(at((e={range:{min:0,max:1,maxLimit:1,minLimit:0}},e[Vt]={},e)))(t)}function jo(t,e){var n=t.chart,r=t.options,i=r.statistic,a=r.percent;if(n.getController("annotation").clear(!0),i){var o=i.content,u=void 0;o&&(u=A({},{content:(a*100).toFixed(2)+"%",style:{opacity:.75,fontSize:"30px",lineHeight:1,textAlign:"center",color:"rgba(44,53,66,0.85)"}},o)),Ql(n,{statistic:x(x({},i),{content:u})},{percent:a})}return e&&n.render(!0),t}function Tg(t){var e=t.chart,n=t.options,r=n.tooltip;return r?e.tooltip(A({showTitle:!1,showMarkers:!1,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-list"></div></div>',domStyles:{"g2-tooltip":{padding:"4px 8px",fontSize:"10px"}},customContent:function(i,a){var o=E(a,[0,"data",Vt],0);return(o*100).toFixed(2)+"%"}},r)):e.tooltip(!1),t}function Pg(t){var e=t.chart;return e.legend(!1),t}function Zo(t){return _(j,Q,Mg,kg,Tg,jo,et,it(),Pg)(t)}Qt("point","gauge-indicator",{draw:function(t,e){var n=t.customInfo,r=n.indicator,i=n.defaultColor,a=r,o=a.pointer,u=a.pin,l=e.addGroup(),s=this.parsePoint({x:0,y:0});return o&&l.addShape("line",{name:"pointer",attrs:x({x1:s.x,y1:s.y,x2:t.x,y2:t.y,stroke:i},o.style)}),u&&l.addShape("circle",{name:"pin",attrs:x({x:s.x,y:s.y,stroke:i},u.style)}),l}});Qt("interval","meter-gauge",{draw:function(t,e){var n=t.customInfo.meter,r=n===void 0?{}:n,i=r.steps,a=i===void 0?50:i,o=r.stepRatio,u=o===void 0?.5:o;a=a<1?1:a,u=wn(u,0,1);var l=this.coordinate,s=l.startAngle,c=l.endAngle,f=0;if(u>0&&u<1){var d=c-s;f=d/a/(u/(1-u)+1-1/a)}for(var h=f/(1-u)*u,v=e.addGroup(),g=this.coordinate.getCenter(),y=this.coordinate.getRadius(),p=mt.getAngle(t,this.coordinate),m=p.startAngle,b=p.endAngle,F=m;F<b;){var w=void 0,D=(F-s)%(h+f);D<h?w=F+(h-D):(F+=h+f-D,w=F+h);var M=mt.getSectorPath(g.x,g.y,y,F,Math.min(w,b),y*this.coordinate.innerRadius);v.addShape("path",{name:"meter-gauge",attrs:{path:M,fill:t.color,stroke:t.color,lineWidth:.5}}),F=w+f}return v}});var $g=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="gauge",n}return e.getDefaultOptions=function(){return Og},e.prototype.changeData=function(n){this.chart.emit(st.BEFORE_CHANGE_DATA,Lt.fromData(this.chart,st.BEFORE_CHANGE_DATA,null)),this.updateOption({percent:n});var r=this.chart.views.find(function(a){return a.id===Uo});r&&r.data(Yo(n));var i=this.chart.views.find(function(a){return a.id===Xo});i&&i.data(Ho(n,this.options.range)),jo({chart:this.chart,options:this.options},!0),this.chart.emit(st.AFTER_CHANGE_DATA,Lt.fromData(this.chart,st.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zo},e}(G),Ot="$$yField$$",Vn="$$diffField$$",Hr="$$absoluteField$$",Fr="$$isTotal$$",Lg={label:{},leaderLine:{style:{lineWidth:1,stroke:"#8c8c8c",lineDash:[4,2]}},total:{style:{fill:"rgba(0, 0, 0, 0.25)"}},interactions:[{type:"element-active"}],risingFill:"#f4664a",fallingFill:"#30bf78",waterfallStyle:{fill:"rgba(0, 0, 0, 0.25)"},yAxis:{grid:{line:{style:{lineDash:[4,2]}}}}};function Cg(t,e,n,r,i){var a,o=[];if(xt(t,function(l,s){var c;Ut(Pt.WARN,lt(s[n]),s[n]+" is not a valid number");var f=zl(s[n])?null:s[n];return o.push(x(x({},s),(c={},c[r]=[l,l+f],c))),l+f},0),o.length&&i){var u=E(o,[[t.length-1],r,[1]]);o.push((a={},a[e]=i.label,a[n]=u,a[r]=[0,u],a))}return o}function Ko(t,e,n,r){var i=Cg(t,e,n,Ot,r);return i.map(function(a,o){var u;return se(a)?x(x({},a),(u={},u[Hr]=a[Ot][1],u[Vn]=a[Ot][1]-a[Ot][0],u[Fr]=o===t.length,u)):a})}function Rg(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(r){var i=n===0?"M":"L";e.push([i,r.x,r.y])}}var a=t[0];return e.push(["L",a.x,a.y]),e.push(["z"]),e}function zg(t){return A({},t.defaultStyle,t.style,{fill:t.color})}Qt("interval","waterfall",{draw:function(t,e){var n=t.customInfo,r=t.points,i=t.nextPoints,a=e.addGroup(),o=this.parsePath(Rg(r)),u=zg(t);a.addShape("path",{attrs:x(x({},u),{path:o})});var l=E(n,"leaderLine");if(l&&i){var s=[["M",r[2].x,r[2].y],["L",i[0].x,i[0].y]];r[2].y===i[1].y&&(s[1]=["L",i[1].x,i[1].y]),s=this.parsePath(s),a.addShape("path",{attrs:x({path:s},l.style||{})})}return a}});function Ng(t){var e=t.options,n=e.locale,r=e.total,i=In(n).get(["waterfall","total"]);return r&&typeof r.label!="string"&&i&&(t.options.total.label=i),t}function _g(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.total,u=n.leaderLine,l=n.columnWidthRatio,s=n.waterfallStyle,c=n.risingFill,f=n.fallingFill,d=n.color;e.data(Ko(r,i,a,o));var h=d||function(p){return E(p,[Fr])?E(o,["style","fill"],""):E(p,[Ot,1])-E(p,[Ot,0])>0?c:f},v=A({},t,{options:{xField:i,yField:Ot,seriesField:i,rawFields:[a,Vn,Fr,Ot],widthRatio:l,interval:{style:s,shape:"waterfall",color:h}}}),g=vt(v).ext,y=g.geometry;return y.customInfo({leaderLine:u}),t}function Vg(t){var e,n,r=t.options,i=r.xAxis,a=r.yAxis,o=r.xField,u=r.yField,l=r.meta,s=A({},{alias:u},E(l,u));return _(at((e={},e[o]=i,e[u]=a,e[Ot]=a,e),A({},l,(n={},n[Ot]=s,n[Vn]=s,n[Hr]=s,n))))(t)}function Wg(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField;return r===!1?e.axis(a,!1):e.axis(a,r),i===!1?(e.axis(o,!1),e.axis(Ot,!1)):(e.axis(o,i),e.axis(Ot,i)),t}function Bg(t){var e=t.chart,n=t.options,r=n.legend,i=n.total,a=n.risingFill,o=n.fallingFill,u=n.locale,l=In(u);if(r===!1)e.legend(!1);else{var s=[{name:l.get(["general","increase"]),value:"increase",marker:{symbol:"square",style:{r:5,fill:a}}},{name:l.get(["general","decrease"]),value:"decrease",marker:{symbol:"square",style:{r:5,fill:o}}}];i&&s.push({name:i.label||"",value:"total",marker:{symbol:"square",style:A({},{r:5},E(i,"style"))}}),e.legend(A({},{custom:!0,position:"top",items:s},r)),e.removeInteraction("legend-filter")}return t}function Gg(t){var e=t.chart,n=t.options,r=n.label,i=n.labelMode,a=n.xField,o=ht(e,"interval");if(!r)o.label(!1);else{var u=r.callback,l=pt(r,["callback"]);o.label({fields:i==="absolute"?[Hr,a]:[Vn,a],callback:u,cfg:dt(l)})}return t}function qg(t){var e=t.chart,n=t.options,r=n.tooltip,i=n.xField,a=n.yField;if(r!==!1){e.tooltip(x({showCrosshairs:!1,showMarkers:!1,shared:!0,fields:[a]},r));var o=e.geometries[0];r!=null&&r.formatter?o.tooltip(i+"*"+a,r.formatter):o.tooltip(a)}else e.tooltip(!1);return t}function Ug(t){return _(Ng,j,_g,Vg,Wg,Bg,qg,Gg,Jt,et,Q,it())(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return Lg},e.prototype.changeData=function(n){var r=this.options,i=r.xField,a=r.yField,o=r.total;this.updateOption({data:n}),this.chart.changeData(Ko(n,i,a,o))},e.prototype.getSchemaAdaptor=function(){return Ug},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(G);function Xg(t,e,n){var r=n.map(function(o){return o[e]}).filter(function(o){return o!==void 0}),i=r.length>0?Math.max.apply(Math,r):0,a=Math.abs(t)%360;return a?i*360/a:i}function Yg(t,e,n){var r=[];return t.forEach(function(i){var a=r.find(function(o){return o[e]===i[e]});a?a[n]+=i[n]||null:r.push(x({},i))}),r}function Hg(t){var e=t.chart,n=t.options,r=n.barStyle,i=n.color,a=n.tooltip,o=n.colorField,u=n.type,l=n.xField,s=n.yField,c=n.data,f=pe(c,s);e.data(f);var d=A({},t,{options:{tooltip:a,seriesField:o,interval:{style:r,color:i,shape:u==="line"?"line":"intervel"},minColumnWidth:n.minBarWidth,maxColumnWidth:n.maxBarWidth,columnBackground:n.barBackground}});return vt(d),u==="line"&&wt({chart:e,options:{xField:l,yField:s,seriesField:o,point:{shape:"circle",color:i}}}),t}function Qo(t){var e,n=t.options,r=n.yField,i=n.xField,a=n.data,o=n.isStack,u=n.isGroup,l=n.colorField,s=n.maxAngle,c=o&&!u&&l?Yg(a,i,r):a,f=pe(c,r);return _(at((e={},e[r]={min:0,max:Xg(s,r,f)},e)))(t)}function jg(t){var e=t.chart,n=t.options,r=n.radius,i=n.innerRadius,a=n.startAngle,o=n.endAngle;return e.coordinate({type:"polar",cfg:{radius:r,innerRadius:i,startAngle:a,endAngle:o}}).transpose(),t}function Zg(t){var e=t.chart,n=t.options,r=n.xField,i=n.xAxis;return e.axis(r,i),t}function Kg(t){var e=t.chart,n=t.options,r=n.label,i=n.yField,a=ht(e,"interval");if(!r)a.label(!1);else{var o=r.callback,u=pt(r,["callback"]);a.label({fields:[i],callback:o,cfg:x(x({},dt(u)),{type:"polar"})})}return t}function Qg(t){return _(At("barStyle"),Hg,Qo,Zg,jg,et,Q,j,ft,Ae,it(),Kg)(t)}var Jg=A({},G.getDefaultOptions(),{interactions:[{type:"element-active"}],legend:!1,tooltip:{showMarkers:!1},xAxis:{grid:null,tickLine:null,line:null},maxAngle:240});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial-bar",n}return e.getDefaultOptions=function(){return Jg},e.prototype.changeData=function(n){this.updateOption({data:n}),Qo({chart:this.chart,options:this.options}),this.chart.changeData(n)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Qg},e})(G);var Rt="first-axes-view",zt="second-axes-view",ne="series-field-key";function Jo(t,e,n,r,i){var a=[];e.forEach(function(f){r.forEach(function(d){var h,v=(h={},h[t]=d[t],h[n]=f,h[f]=d[f],h);a.push(v)})});var o=Object.values(Ce(a,n)),u=o[0],l=u===void 0?[]:u,s=o[1],c=s===void 0?[]:s;return i?[l.reverse(),c.reverse()]:[l,c]}function Wt(t){return t!=="vertical"}function tp(t,e,n){var r=e[0],i=e[1],a=r.autoPadding,o=i.autoPadding,u=t.__axisPosition,l=u.layout,s=u.position;if(Wt(l)&&s==="top"&&(r.autoPadding=n.instance(a.top,0,a.bottom,a.left),i.autoPadding=n.instance(o.top,a.left,o.bottom,0)),Wt(l)&&s==="bottom"&&(r.autoPadding=n.instance(a.top,a.right/2+5,a.bottom,a.left),i.autoPadding=n.instance(o.top,o.right,o.bottom,a.right/2+5)),!Wt(l)&&s==="bottom"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,a.bottom/2+5,c),i.autoPadding=n.instance(a.bottom/2+5,o.right,o.bottom,c)}if(!Wt(l)&&s==="top"){var c=a.left>=o.left?a.left:o.left;r.autoPadding=n.instance(a.top,a.right,0,c),i.autoPadding=n.instance(0,o.right,a.top,c)}}function ep(t){var e=t.chart,n=t.options,r=n.data,i=n.xField,a=n.yField,o=n.color,u=n.barStyle,l=n.widthRatio,s=n.legend,c=n.layout,f=Jo(i,a,ne,r,Wt(c));s?e.legend(ne,s):s===!1&&e.legend(!1);var d,h,v=f[0],g=f[1];Wt(c)?(d=e.createView({region:{start:{x:0,y:0},end:{x:.5,y:1}},id:Rt}),d.coordinate().transpose().reflect("x"),h=e.createView({region:{start:{x:.5,y:0},end:{x:1,y:1}},id:zt}),h.coordinate().transpose(),d.data(v),h.data(g)):(d=e.createView({region:{start:{x:0,y:0},end:{x:1,y:.5}},id:Rt}),h=e.createView({region:{start:{x:0,y:.5},end:{x:1,y:1}},id:zt}),h.coordinate().reflect("y"),d.data(v),h.data(g));var y=A({},t,{chart:d,options:{widthRatio:l,xField:i,yField:a[0],seriesField:ne,interval:{color:o,style:u}}});vt(y);var p=A({},t,{chart:h,options:{xField:i,yField:a[1],seriesField:ne,widthRatio:l,interval:{color:o,style:u}}});return vt(p),t}function np(t){var e,n,r,i=t.options,a=t.chart,o=i.xAxis,u=i.yAxis,l=i.xField,s=i.yField,c=q(a,Rt),f=q(a,zt),d={};return Nl((i==null?void 0:i.meta)||{}).map(function(h){E(i==null?void 0:i.meta,[h,"alias"])&&(d[h]=i.meta[h].alias)}),a.scale((e={},e[ne]={sync:!0,formatter:function(h){return E(d,h,h)}},e)),at((n={},n[l]=o,n[s[0]]=u[s[0]],n))(A({},t,{chart:c})),at((r={},r[l]=o,r[s[1]]=u[s[1]],r))(A({},t,{chart:f})),t}function rp(t){var e=t.chart,n=t.options,r=n.xAxis,i=n.yAxis,a=n.xField,o=n.yField,u=n.layout,l=q(e,Rt),s=q(e,zt);return(r==null?void 0:r.position)==="bottom"?s.axis(a,x(x({},r),{label:{formatter:function(){return""}}})):s.axis(a,!1),r===!1?l.axis(a,!1):l.axis(a,x({position:Wt(u)?"top":"bottom"},r)),i===!1?(l.axis(o[0],!1),s.axis(o[1],!1)):(l.axis(o[0],i[o[0]]),s.axis(o[1],i[o[1]])),e.__axisPosition={position:l.getOptions().axes[a].position,layout:u},t}function ip(t){var e=t.chart;return et(A({},t,{chart:q(e,Rt)})),et(A({},t,{chart:q(e,zt)})),t}function ap(t){var e=t.chart,n=t.options,r=n.yField,i=n.yAxis;return oe(A({},t,{chart:q(e,Rt),options:{yAxis:i[r[0]]}})),oe(A({},t,{chart:q(e,zt),options:{yAxis:i[r[1]]}})),t}function op(t){var e=t.chart;return j(A({},t,{chart:q(e,Rt)})),j(A({},t,{chart:q(e,zt)})),j(t),t}function lp(t){var e=t.chart;return Q(A({},t,{chart:q(e,Rt)})),Q(A({},t,{chart:q(e,zt)})),t}function sp(t){var e=this,n,r,i=t.chart,a=t.options,o=a.label,u=a.yField,l=a.layout,s=q(i,Rt),c=q(i,zt),f=ht(s,"interval"),d=ht(c,"interval");if(!o)f.label(!1),d.label(!1);else{var h=o.callback,v=pt(o,["callback"]);v.position||(v.position="middle"),v.offset===void 0&&(v.offset=2);var g=x({},v);if(Wt(l)){var y=((n=g.style)===null||n===void 0?void 0:n.textAlign)||(v.position==="middle"?"center":"left");v.style=A({},v.style,{textAlign:y});var p={left:"right",right:"left",center:"center"};g.style=A({},g.style,{textAlign:p[y]})}else{var m={top:"bottom",bottom:"top",middle:"middle"};typeof v.position=="string"?v.position=m[v.position]:typeof v.position=="function"&&(v.position=function(){for(var w=[],D=0;D<arguments.length;D++)w[D]=arguments[D];return m[v.position.apply(e,w)]});var b=((r=g.style)===null||r===void 0?void 0:r.textBaseline)||"bottom";g.style=A({},g.style,{textBaseline:b});var F={top:"bottom",bottom:"top",middle:"middle"};v.style=A({},v.style,{textBaseline:F[b]})}f.label({fields:[u[0]],callback:h,cfg:dt(g)}),d.label({fields:[u[1]],callback:h,cfg:dt(v)})}return t}function up(t){return _(ep,np,rp,ap,op,sp,ft,ip,lp)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bidirectional-bar",n}return e.getDefaultOptions=function(){return A({},t.getDefaultOptions.call(this),{syncViewPadding:tp})},e.prototype.changeData=function(n){n===void 0&&(n=[]),this.chart.emit(st.BEFORE_CHANGE_DATA,Lt.fromData(this.chart,st.BEFORE_CHANGE_DATA,null)),this.updateOption({data:n});var r=this.options,i=r.xField,a=r.yField,o=r.layout,u=Jo(i,a,ne,n,Wt(o)),l=u[0],s=u[1],c=q(this.chart,Rt),f=q(this.chart,zt);c.data(l),f.data(s),this.chart.render(!0),this.chart.emit(st.AFTER_CHANGE_DATA,Lt.fromData(this.chart,st.AFTER_CHANGE_DATA,null))},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return up},e.SERIES_FIELD_KEY=ne,e})(G);function tl(t,e){if(J(t))return t.find(function(n){return n.type===e})}function el(t,e){var n=tl(t,e);return n&&n.enable!==!1}function jr(t){var e=t.interactions,n=t.drilldown;return E(n,"enabled")||el(e,"treemap-drill-down")}function cp(t){var e=t.interactions["drill-down"];if(e){var n=e.context.actions.find(function(r){return r.name==="drill-down-action"});n.reset()}}function Zr(t){var e=t.data,n=t.colorField,r=t.enableDrillDown,i=t.hierarchyConfig,a=Bo(e,x(x({},i),{type:"hierarchy.treemap",field:"value",as:["x","y"]})),o=[];return a.forEach(function(u){if(u.depth===0||r&&u.depth!==1||!r&&u.children)return null;var l=u.ancestors().map(function(d){return{data:d.data,height:d.height,value:d.value}}),s=r&&J(e.path)?l.concat(e.path.slice(1)):l,c=Object.assign({},u.data,x({x:u.x,y:u.y,depth:u.depth,value:u.value,path:s},u));if(!u.data[n]&&u.parent){var f=u.ancestors().find(function(d){return d.data[n]});c[n]=f==null?void 0:f.data[n]}else c[n]=u.data[n];c[Xe]={hierarchyConfig:i,colorField:n,enableDrillDown:r},o.push(c)}),o}function fp(t){var e=t.options,n=e.colorField;return A({options:{rawFields:["value"],tooltip:{fields:["name","value",n,"path"],formatter:function(r){return{name:r.name,value:r.value}}}}},t)}function dp(t){var e=t.chart,n=t.options,r=n.color,i=n.colorField,a=n.rectStyle,o=n.hierarchyConfig,u=n.rawFields,l=Zr({data:n.data,colorField:n.colorField,enableDrillDown:jr(n),hierarchyConfig:o});return e.data(l),Ln(A({},t,{options:{xField:"x",yField:"y",seriesField:i,rawFields:u,polygon:{color:r,style:a}}})),e.coordinate().reflect("y"),t}function hp(t){var e=t.chart;return e.axis(!1),t}function vp(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n,i=jr(t);return i?A({},t,{interactions:rt(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:Zr}}])}):t}function gp(t){var e=t.chart,n=t.options,r=n.interactions,i=n.drilldown;et({chart:e,options:vp(n)});var a=tl(r,"view-zoom");a&&(a.enable!==!1?e.getCanvas().on("mousewheel",function(u){u.preventDefault()}):e.getCanvas().off("mousewheel"));var o=jr(n);return o&&(e.appendPadding=On(e.appendPadding,E(i,["breadCrumb","position"]))),t}function pp(t){return _(fp,j,At("rectStyle"),dp,hp,Ae,ft,gp,Q,it())(t)}var yp={colorField:"name",rectStyle:{lineWidth:1,stroke:"#fff"},hierarchyConfig:{tile:"treemapSquarify"},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1,breadCrumb:{position:"bottom-left",rootText:"初始",dividerText:"/",textStyle:{fontSize:12,fill:"rgba(0, 0, 0, 0.65)",cursor:"pointer"},activeTextStyle:{fill:"#87B5FF"}}}};(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return yp},e.prototype.changeData=function(n){var r=this.options,i=r.colorField,a=r.interactions,o=r.hierarchyConfig;this.updateOption({data:n});var u=Zr({data:n,colorField:i,enableDrillDown:el(a,"treemap-drill-down"),hierarchyConfig:o});this.chart.changeData(u),cp(this.chart)},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return pp},e})(G);function xp(t){return t.target.depth}function mp(t){return t.depth}function Fp(t,e){return e-1-t.height}function Kr(t,e){return t.sourceLinks.length?t.depth:e-1}function bp(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Vl(t.sourceLinks,xp)-1:0}function ln(t){return function(){return t}}function rr(t,e){for(var n=0,r=0;r<t.length;r++)n+=e(t[r]);return n}function ir(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e(t[r]),n);return n}function Ap(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e(t[r]),n);return n}function Bi(t,e){return bn(t.source,e.source)||t.index-e.index}function Gi(t,e){return bn(t.target,e.target)||t.index-e.index}function bn(t,e){return t.y0-e.y0}function ar(t){return t.value}function wp(t){return t.index}function Sp(t){return t.nodes}function Dp(t){return t.links}function qi(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function Ui(t){for(var e=t.nodes,n=0,r=e;n<r.length;n++){for(var i=r[n],a=i.y0,o=a,u=0,l=i.sourceLinks;u<l.length;u++){var s=l[u];s.y0=a+s.width/2,a+=s.width}for(var c=0,f=i.targetLinks;c<f.length;c++){var s=f[c];s.y1=o+s.width/2,o+=s.width}}}function Ep(){var t=0,e=0,n=1,r=1,i=24,a=8,o,u=wp,l=Kr,s,c,f,d=Sp,h=Dp,v=6;function g(S){var I={nodes:d(S),links:h(S)};return y(I),p(I),m(I),b(I),D(I),Ui(I),I}g.update=function(S){return Ui(S),S},g.nodeId=function(S){return arguments.length?(u=typeof S=="function"?S:ln(S),g):u},g.nodeAlign=function(S){return arguments.length?(l=typeof S=="function"?S:ln(S),g):l},g.nodeDepth=function(S){return arguments.length?(s=S,g):s},g.nodeSort=function(S){return arguments.length?(c=S,g):c},g.nodeWidth=function(S){return arguments.length?(i=+S,g):i},g.nodePadding=function(S){return arguments.length?(a=o=+S,g):a},g.nodes=function(S){return arguments.length?(d=typeof S=="function"?S:ln(S),g):d},g.links=function(S){return arguments.length?(h=typeof S=="function"?S:ln(S),g):h},g.linkSort=function(S){return arguments.length?(f=S,g):f},g.size=function(S){return arguments.length?(t=e=0,n=+S[0],r=+S[1],g):[n-t,r-e]},g.extent=function(S){return arguments.length?(t=+S[0][0],n=+S[1][0],e=+S[0][1],r=+S[1][1],g):[[t,e],[n,r]]},g.iterations=function(S){return arguments.length?(v=+S,g):v};function y(S){var I=S.nodes,N=S.links;I.forEach(function(U,tt){U.index=tt,U.sourceLinks=[],U.targetLinks=[]});var R=new Map(I.map(function(U){return[u(U),U]}));if(N.forEach(function(U,tt){U.index=tt;var ut=U.source,ct=U.target;typeof ut!="object"&&(ut=U.source=qi(R,ut)),typeof ct!="object"&&(ct=U.target=qi(R,ct)),ut.sourceLinks.push(U),ct.targetLinks.push(U)}),f!=null)for(var P=0,z=I;P<z.length;P++){var X=z[P],Y=X.sourceLinks,V=X.targetLinks;Y.sort(f),V.sort(f)}}function p(S){for(var I=S.nodes,N=0,R=I;N<R.length;N++){var P=R[N];P.value=P.fixedValue===void 0?Math.max(rr(P.sourceLinks,ar),rr(P.targetLinks,ar)):P.fixedValue}}function m(S){for(var I=S.nodes,N=I.length,R=new Set(I),P=new Set,z=0;R.size;){if(R.forEach(function(U){U.depth=z;for(var tt=0,ut=U.sourceLinks;tt<ut.length;tt++){var ct=ut[tt].target;P.add(ct)}}),++z>N)throw new Error("circular link");R=P,P=new Set}if(s)for(var X=Math.max(ir(I,function(U){return U.depth})+1,0),Y=void 0,V=0;V<I.length;V++)Y=I[V],Y.depth=s.call(null,Y,X)}function b(S){for(var I=S.nodes,N=I.length,R=new Set(I),P=new Set,z=0;R.size;){if(R.forEach(function(X){X.height=z;for(var Y=0,V=X.targetLinks;Y<V.length;Y++){var U=V[Y].source;P.add(U)}}),++z>N)throw new Error("circular link");R=P,P=new Set}}function F(S){for(var I=S.nodes,N=Math.max(ir(I,function(ct){return ct.depth})+1,0),R=(n-t-i)/(N-1),P=new Array(N).fill(0).map(function(){return[]}),z=0,X=I;z<X.length;z++){var Y=X[z],V=Math.max(0,Math.min(N-1,Math.floor(l.call(null,Y,N))));Y.layer=V,Y.x0=t+V*R,Y.x1=Y.x0+i,P[V]?P[V].push(Y):P[V]=[Y]}if(c)for(var U=0,tt=P;U<tt.length;U++){var ut=tt[U];ut.sort(c)}return P}function w(S){for(var I=Ap(S,function(Yt){return(r-e-(Yt.length-1)*o)/rr(Yt,ar)}),N=0,R=S;N<R.length;N++){for(var P=R[N],z=e,X=0,Y=P;X<Y.length;X++){var V=Y[X];V.y0=z,V.y1=z+V.value*I,z=V.y1+o;for(var U=0,tt=V.sourceLinks;U<tt.length;U++){var ut=tt[U];ut.width=ut.value*I}}z=(r-z+o)/(P.length+1);for(var ct=0;ct<P.length;++ct){var V=P[ct];V.y0+=z*(ct+1),V.y1+=z*(ct+1)}W(P)}}function D(S){var I=F(S);o=Math.min(a,(r-e)/(ir(I,function(z){return z.length})-1)),w(I);for(var N=0;N<v;++N){var R=Math.pow(.99,N),P=Math.max(1-R,(N+1)/v);k(I,R,P),M(I,R,P)}}function M(S,I,N){for(var R=1,P=S.length;R<P;++R){for(var z=S[R],X=0,Y=z;X<Y.length;X++){for(var V=Y[X],U=0,tt=0,ut=0,ct=V.targetLinks;ut<ct.length;ut++){var Yt=ct[ut],Oe=Yt.source,Gn=Yt.value,Ie=Gn*(V.layer-Oe.layer);U+=H(Oe,V)*Ie,tt+=Ie}if(tt>0){var Me=(U/tt-V.y0)*I;V.y0+=Me,V.y1+=Me,L(V)}}c===void 0&&z.sort(bn),z.length&&C(z,N)}}function k(S,I,N){for(var R=S.length,P=R-2;P>=0;--P){for(var z=S[P],X=0,Y=z;X<Y.length;X++){for(var V=Y[X],U=0,tt=0,ut=0,ct=V.sourceLinks;ut<ct.length;ut++){var Yt=ct[ut],Oe=Yt.target,Gn=Yt.value,Ie=Gn*(Oe.layer-V.layer);U+=Z(V,Oe)*Ie,tt+=Ie}if(tt>0){var Me=(U/tt-V.y0)*I;V.y0+=Me,V.y1+=Me,L(V)}}c===void 0&&z.sort(bn),z.length&&C(z,N)}}function C(S,I){var N=S.length>>1,R=S[N];O(S,R.y0-o,N-1,I),T(S,R.y1+o,N+1,I),O(S,r,S.length-1,I),T(S,e,0,I)}function T(S,I,N,R){for(;N<S.length;++N){var P=S[N],z=(I-P.y0)*R;z>1e-6&&(P.y0+=z,P.y1+=z),I=P.y1+o}}function O(S,I,N,R){for(;N>=0;--N){var P=S[N],z=(P.y1-I)*R;z>1e-6&&(P.y0-=z,P.y1-=z),I=P.y0-o}}function L(S){var I=S.sourceLinks,N=S.targetLinks;if(f===void 0){for(var R=0,P=N;R<P.length;R++){var z=P[R].source.sourceLinks;z.sort(Gi)}for(var X=0,Y=I;X<Y.length;X++){var V=Y[X].target.targetLinks;V.sort(Bi)}}}function W(S){if(f===void 0)for(var I=0,N=S;I<N.length;I++){var R=N[I],P=R.sourceLinks,z=R.targetLinks;P.sort(Gi),z.sort(Bi)}}function H(S,I){for(var N=S.y0-(S.sourceLinks.length-1)*o/2,R=0,P=S.sourceLinks;R<P.length;R++){var z=P[R],X=z.target,Y=z.width;if(X===I)break;N+=Y+o}for(var V=0,U=I.targetLinks;V<U.length;V++){var tt=U[V],X=tt.source,Y=tt.width;if(X===S)break;N-=Y}return N}function Z(S,I){for(var N=I.y0-(I.targetLinks.length-1)*o/2,R=0,P=I.targetLinks;R<P.length;R++){var z=P[R],X=z.source,Y=z.width;if(X===S)break;N+=Y+o}for(var V=0,U=S.sourceLinks;V<U.length;V++){var tt=U[V],X=tt.target,Y=tt.width;if(X===I)break;N-=Y}return N}return g}var Op={left:mp,right:Fp,center:bp,justify:Kr},Ip={nodeId:function(t){return t.index},nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodeSort:void 0};function Mp(t){var e=gt(t)?Op[t]:ot(t)?t:null;return e||Kr}function kp(t){return Ct({},Ip,t)}function Tp(t,e){var n=kp(t),r=n.nodeId,i=n.nodeSort,a=n.nodeAlign,o=n.nodeWidth,u=n.nodePadding,l=n.nodeDepth,s=Ep().nodeSort(i).nodeWidth(o).nodePadding(u).nodeDepth(l).nodeAlign(Mp(a)).extent([[0,0],[1,1]]).nodeId(r),c=s(e),f=c.nodes.map(function(h){var v=h.x0,g=h.x1,y=h.y0,p=h.y1;return h.x=[v,g,g,v],h.y=[y,y,p,p],h}).filter(function(h){return h.name!==null}),d=c.links.map(function(h){var v=h.source,g=h.target,y=v.x1,p=g.x0;h.x=[y,y,p,p];var m=h.width/2;return h.y=[h.y0+m,h.y0-m,h.y1+m,h.y1-m],h}).filter(function(h){var v=h.source,g=h.target;return v.name!==null&&g.name!==null});return{nodes:f,links:d}}function Pp(t,e,n){var r=[];return t.forEach(function(i){var a=i[e],o=i[n];r.includes(a)||r.push(a),r.includes(o)||r.push(o)}),r}function $p(t,e,n,r){var i={};return e.forEach(function(a){i[a]={},e.forEach(function(o){i[a][o]=0})}),t.forEach(function(a){i[a[n]][a[r]]=1}),i}function Lp(t,e,n){if(!J(t))return[];var r=[],i=Pp(t,e,n),a=$p(t,i,e,n),o={};i.forEach(function(l){o[l]=0});function u(l){o[l]=1,i.forEach(function(s){if(a[l][s]!=0)if(o[s]==1)r.push(l+"_"+s);else{if(o[s]==-1)return;u(s)}}),o[l]=-1}return i.forEach(function(l){o[l]!=-1&&u(l)}),r.length!==0&&console.warn("sankey data contains circle, "+r.length+" records removed.",r),t.filter(function(l){return r.findIndex(function(s){return s===l[e]+"_"+l[n]})<0})}function Cp(t){return t==="node-link"}function Rp(t,e,n){return ae(t)?t/n:e}function zp(t,e,n){return ae(t)?t/n:e}function nl(t,e,n){var r=t.dataType,i=t.data,a=t.sourceField,o=t.targetField,u=t.weightField,l=t.nodeAlign,s=t.nodeSort,c=t.nodePadding,f=t.nodePaddingRatio,d=t.nodeWidth,h=t.nodeWidthRatio,v=t.nodeDepth,g=t.rawFields,y=g===void 0?[]:g,p;Cp(r)?p=i:p=ua(Lp(i,a,o),a,o,u,y);var m=Tp({nodeAlign:l,nodePadding:zp(c,f,n),nodeWidth:Rp(d,h,e),nodeSort:s,nodeDepth:v},p),b=m.nodes,F=m.links;return{nodes:b.map(function(w){return x(x({},K(w,rt(["x","y","name"],y))),{isNode:!0})}),edges:F.map(function(w){return x(x({source:w.source.name,target:w.target.name,name:w.source.name||w.target.name},K(w,rt(["x","y","value"],y))),{isNode:!1})})}}var Xi="x",Yi="y",Hi="name",Wn="nodes",Bn="edges";function Np(t){var e=t.options,n=e.rawFields,r=n===void 0?[]:n;return A({},{options:{tooltip:{fields:ze(rt(["name","source","target","value","isNode"],r))},label:{fields:ze(rt(["x","name"],r))}}},t)}function _p(t){var e=t.chart,n=t.options,r=n.color,i=n.nodeStyle,a=n.edgeStyle,o=n.label,u=n.tooltip,l=n.nodeState,s=n.edgeState;e.legend(!1),e.tooltip(u),e.axis(!1),e.coordinate().reflect("y");var c=nl(n,e.width,e.height),f=c.nodes,d=c.edges,h=e.createView({id:Bn});h.data(d),ya({chart:h,options:{xField:Xi,yField:Yi,seriesField:Hi,edge:{color:r,style:a,shape:"arc"},tooltip:u,state:s}});var v=e.createView({id:Wn});return v.data(f),Ln({chart:v,options:{xField:Xi,yField:Yi,seriesField:Hi,polygon:{color:r,style:i},label:o,tooltip:u,state:l}}),e.interaction("element-active"),e.scale({x:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},y:{sync:!0,nice:!0,min:0,max:1,minLimit:0,maxLimit:1},name:{sync:"color",type:"cat"}}),t}function Vp(t){var e=t.chart,n=t.options,r=n.animation,i=rt(e.views[0].geometries,e.views[1].geometries);return Ye(e,r,i),t}function Wp(t){var e=t.chart,n=t.options,r=n.nodeDraggable,i="sankey-node-draggable";return r?e.interaction(i):e.removeInteraction(i),t}function Bp(t){var e=t.chart,n=t.options,r=n.interactions,i=r===void 0?[]:r,a=[].concat(i,n.nodeInteractions||[]),o=[].concat(i,n.edgeInteractions||[]),u=q(e,Wn),l=q(e,Bn);return a.forEach(function(s){(s==null?void 0:s.enable)===!1?u.removeInteraction(s.type):u.interaction(s.type,s.cfg||{})}),o.forEach(function(s){(s==null?void 0:s.enable)===!1?l.removeInteraction(s.type):l.interaction(s.type,s.cfg||{})}),t}function Gp(t){return _(Np,_p,Bp,Wp,Vp,j)(t)}var qp=function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.isDragging=!1,n}return e.prototype.isNodeElement=function(){var n=E(this.context,"event.target");if(n){var r=n.get("element");return r&&r.getModel().data.isNode}return!1},e.prototype.getNodeView=function(){return q(this.context.view,Wn)},e.prototype.getEdgeView=function(){return q(this.context.view,Bn)},e.prototype.getCurrentDatumIdx=function(n){return this.getNodeView().geometries[0].elements.indexOf(n)},e.prototype.start=function(){if(this.isNodeElement()){this.prevPoint={x:E(this.context,"event.x"),y:E(this.context,"event.y")};var n=this.context.event.target.get("element"),r=this.getCurrentDatumIdx(n);if(r===-1)return;this.currentElementIdx=r,this.context.isDragging=!0,this.isDragging=!0,this.prevNodeAnimateCfg=this.getNodeView().getOptions().animate,this.prevEdgeAnimateCfg=this.getEdgeView().getOptions().animate,this.getNodeView().animate(!1),this.getEdgeView().animate(!1)}},e.prototype.translate=function(){if(this.isDragging){var n=this.context.view,r={x:E(this.context,"event.x"),y:E(this.context,"event.y")},i=r.x-this.prevPoint.x,a=r.y-this.prevPoint.y,o=this.getNodeView(),u=o.geometries[0].elements[this.currentElementIdx];if(u&&u.getModel()){var l=u.getModel().data,s=o.getOptions().data,c=o.getCoordinate(),f={x:i/c.getWidth(),y:a/c.getHeight()},d=x(x({},l),{x:l.x.map(function(p){return p+=f.x}),y:l.y.map(function(p){return p+=f.y})}),h=rt(s);h[this.currentElementIdx]=d,o.data(h);var v=l.name,g=this.getEdgeView(),y=g.getOptions().data;y.forEach(function(p){p.source===v&&(p.x[0]+=f.x,p.x[1]+=f.x,p.y[0]+=f.y,p.y[1]+=f.y),p.target===v&&(p.x[2]+=f.x,p.x[3]+=f.x,p.y[2]+=f.y,p.y[3]+=f.y)}),g.data(y),this.prevPoint=r,n.render(!0)}}},e.prototype.end=function(){this.isDragging=!1,this.context.isDragging=!1,this.prevPoint=null,this.currentElementIdx=null,this.getNodeView().animate(this.prevNodeAnimateCfg),this.getEdgeView().animate(this.prevEdgeAnimateCfg)},e}(Xt);bt("sankey-node-drag",qp);nt("sankey-node-draggable",{showEnable:[{trigger:"polygon:mouseenter",action:"cursor:pointer"},{trigger:"polygon:mouseleave",action:"cursor:default"}],start:[{trigger:"polygon:mousedown",action:"sankey-node-drag:start"}],processing:[{trigger:"plot:mousemove",action:"sankey-node-drag:translate"},{isEnable:function(t){return t.isDragging},trigger:"plot:mousemove",action:"cursor:move"}],end:[{trigger:"plot:mouseup",action:"sankey-node-drag:end"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{appendPadding:8,syncViewPadding:!0,nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.3,lineWidth:0},edgeState:{active:{style:{opacity:.8,lineWidth:0}}},label:{formatter:function(n){var r=n.name;return r},callback:function(n){var r=n[1]===1;return{style:{fill:"#545454",textAlign:r?"end":"start"},offsetX:r?-8:8}},layout:[{type:"hide-overlap"}]},tooltip:{showTitle:!1,showMarkers:!1,shared:!1,showContent:function(n){return!E(n,[0,"data","isNode"])},formatter:function(n){var r=n.source,i=n.target,a=n.value;return{name:r+" -> "+i,value:a}}},nodeWidthRatio:.008,nodePaddingRatio:.01,animation:{appear:{animation:"wave-in"},enter:{animation:"wave-in"}}}},e.prototype.changeData=function(n){this.updateOption({data:n});var r=nl(this.options,this.chart.width,this.chart.height),i=r.nodes,a=r.edges,o=q(this.chart,Wn),u=q(this.chart,Bn);o.changeData(i),u.changeData(a)},e.prototype.getSchemaAdaptor=function(){return Gp},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e})(G);var Up={y:0,nodeWidthRatio:.05,weight:!1,nodePaddingRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};function Xp(t,e,n){$(t,function(r,i){r.inEdges=e.filter(function(a){return""+n.target(a)==""+i}),r.outEdges=e.filter(function(a){return""+n.source(a)==""+i}),r.edges=r.outEdges.concat(r.inEdges),r.frequency=r.edges.length,r.value=0,r.inEdges.forEach(function(a){r.value+=n.targetWeight(a)}),r.outEdges.forEach(function(a){r.value+=n.sourceWeight(a)})})}function Yp(t,e){var n={weight:function(i,a){return a.value-i.value},frequency:function(i,a){return a.frequency-i.frequency},id:function(i,a){return(""+e.id(i)).localeCompare(""+e.id(a))}},r=n[e.sortBy];!r&&ot(e.sortBy)&&(r=e.sortBy),r&&t.sort(r)}function Hp(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.nodePaddingRatio;if(r<0||r>=1)throw new TypeError("Invalid nodePaddingRatio: it must be in range [0, 1)!");var i=r/(2*n),a=e.nodeWidthRatio;if(a<=0||a>=1)throw new TypeError("Invalid nodeWidthRatio: it must be in range (0, 1)!");var o=0;t.forEach(function(l){o+=l.value}),t.forEach(function(l){l.weight=l.value/o,l.width=l.weight*(1-r),l.height=a}),t.forEach(function(l,s){for(var c=0,f=s-1;f>=0;f--)c+=t[f].width+2*i;var d=l.minX=i+c,h=l.maxX=l.minX+l.width,v=l.minY=e.y-a/2,g=l.maxY=v+a;l.x=[d,h,h,d],l.y=[v,v,g,g]})}else{var u=1/n;t.forEach(function(l,s){l.x=(s+.5)*u,l.y=e.y})}return t}function jp(t,e,n){if(n.weight){var r={};$(t,function(i,a){r[a]=i.value}),e.forEach(function(i){var a=n.source(i),o=n.target(i),u=t[a],l=t[o];if(u&&l){var s=r[a],c=n.sourceWeight(i),f=u.minX+(u.value-s)/u.value*u.width,d=f+c/u.value*u.width;r[a]-=c;var h=r[o],v=n.targetWeight(i),g=l.minX+(l.value-h)/l.value*l.width,y=g+v/l.value*l.width;r[o]-=v;var p=n.y;i.x=[f,d,g,y],i.y=[p,p,p,p],i.source=u,i.target=l}})}else e.forEach(function(i){var a=t[n.source(i)],o=t[n.target(i)];a&&o&&(i.x=[a.x,o.x],i.y=[a.y,o.y],i.source=a,i.target=o)});return e}function Zp(t){return Ct({},Up,t)}function Kp(t,e){var n=Zp(t),r={},i=e.nodes,a=e.links;i.forEach(function(l){var s=n.id(l);r[s]=l}),Xp(r,a,n),Yp(i,n);var o=Hp(i,n),u=jp(r,a,n);return{nodes:o,links:u}}var rl="x",il="y",al="name",ol="source",Qp={nodeStyle:{opacity:1,fillOpacity:1,lineWidth:1},edgeStyle:{opacity:.5,lineWidth:2},label:{fields:["x","name"],callback:function(t,e){var n=(t[0]+t[1])/2,r=n>.5?-4:4;return{offsetX:r,content:e}},labelEmit:!0,style:{fill:"#8c8c8c"}},tooltip:{showTitle:!1,showMarkers:!1,fields:["source","target","value","isNode"],showContent:function(t){return!E(t,[0,"data","isNode"])},formatter:function(t){var e=t.source,n=t.target,r=t.value;return{name:e+" -> "+n,value:r}}},interactions:[{type:"element-active"}],weight:!0,nodePaddingRatio:.1,nodeWidthRatio:.05};function Jp(t){var e=t.options,n=e.data,r=e.sourceField,i=e.targetField,a=e.weightField,o=e.nodePaddingRatio,u=e.nodeWidthRatio,l=e.rawFields,s=l===void 0?[]:l,c=ua(n,r,i,a),f=Kp({weight:!0,nodePaddingRatio:o,nodeWidthRatio:u},c),d=f.nodes,h=f.links,v=d.map(function(y){return x(x({},K(y,rt(["id","x","y","name"],s))),{isNode:!0})}),g=h.map(function(y){return x(x({source:y.source.name,target:y.target.name,name:y.source.name||y.target.name},K(y,rt(["x","y","value"],s))),{isNode:!1})});return x(x({},t),{ext:x(x({},t.ext),{chordData:{nodesData:v,edgesData:g}})})}function ty(t){var e,n=t.chart;return n.scale((e={x:{sync:!0,nice:!0},y:{sync:!0,nice:!0,max:1}},e[al]={sync:"color"},e[ol]={sync:"color"},e)),t}function ey(t){var e=t.chart;return e.axis(!1),t}function ny(t){var e=t.chart;return e.legend(!1),t}function ry(t){var e=t.chart,n=t.options,r=n.tooltip;return e.tooltip(r),t}function iy(t){var e=t.chart;return e.coordinate("polar").reflect("y"),t}function ay(t){var e=t.chart,n=t.options,r=t.ext.chordData.nodesData,i=n.nodeStyle,a=n.label,o=n.tooltip,u=e.createView();return u.data(r),Ln({chart:u,options:{xField:rl,yField:il,seriesField:al,polygon:{style:i},label:a,tooltip:o}}),t}function oy(t){var e=t.chart,n=t.options,r=t.ext.chordData.edgesData,i=n.edgeStyle,a=n.tooltip,o=e.createView();o.data(r);var u={xField:rl,yField:il,seriesField:ol,edge:{style:i,shape:"arc"},tooltip:a};return ya({chart:o,options:u}),t}function ly(t){var e=t.chart,n=t.options,r=n.animation;return Ye(e,r,Gl(e)),t}function sy(t){return _(j,Jp,iy,ty,ey,ny,ry,oy,ay,et,Jt,ly)(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="chord",n}return e.getDefaultOptions=function(){return Qp},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return sy},e})(G);var uy={field:"value",as:["x","y","r"],sort:function(t,e){return e.value-t.value}};function cy(t,e){e=Ct({},uy,e);var n=e.as;if(!J(n)||n.length!==3)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var r;try{r=qr(e)}catch(s){console.warn(s)}var i=function(s){return Co().size(e.size).padding(e.padding)(Ee(s).sum(function(c){return c[r]}).sort(e.sort))},a=i(t),o=n[0],u=n[1],l=n[2];return a.each(function(s){s[o]=s.x,s[u]=s.y,s[l]=s.r}),Ur(a)}function ll(t){var e=t.data,n=t.hierarchyConfig,r=t.rawFields,i=r===void 0?[]:r,a=t.enableDrillDown,o=cy(e,x(x({},n),{field:"value",as:["x","y","r"]})),u=[];return o.forEach(function(l){for(var s,c=l.data.name,f=x({},l);f.depth>1;)c=((s=f.parent.data)===null||s===void 0?void 0:s.name)+" / "+c,f=f.parent;if(a&&l.depth>2)return null;var d=A({},l.data,x(x(x({},K(l.data,i)),{path:c}),l));d.ext=n,d[Xe]={hierarchyConfig:n,rawFields:i,enableDrillDown:a},u.push(d)}),u}function sl(t,e,n){var r=Dr([t,e]),i=r[0],a=r[1],o=r[2],u=r[3],l=n.width,s=n.height,c=l-(u+a),f=s-(i+o),d=Math.min(c,f),h=(c-d)/2,v=(f-d)/2,g=i+v,y=a+h,p=o+v,m=u+h,b=[g,y,p,m],F=d<0?0:d;return{finalPadding:b,finalSize:F}}var fy=["x","y","r","name","value","path","depth"],dy={colorField:"name",autoFit:!0,pointStyle:{lineWidth:0,stroke:"#fff"},legend:!1,hierarchyConfig:{size:[1,1],padding:0},label:{fields:["name"],layout:{type:"limit-in-shape"}},tooltip:{showMarkers:!1,showTitle:!1},drilldown:{enabled:!1}};function hy(t){var e=t.chart,n=Math.min(e.viewBBox.width,e.viewBBox.height);return A({options:{size:function(r){var i=r.r;return i*n}}},t)}function vy(t){var e=t.options,n=t.chart,r=n.viewBBox,i=e.padding,a=e.appendPadding,o=e.drilldown,u=a;if(o!=null&&o.enabled){var l=On(n.appendPadding,E(o,["breadCrumb","position"]));u=Dr([l,a])}var s=sl(i,u,r).finalPadding;return n.padding=s,n.appendPadding=0,t}function gy(t){var e=t.chart,n=t.options,r=e.padding,i=e.appendPadding,a=n.color,o=n.colorField,u=n.pointStyle,l=n.hierarchyConfig,s=n.sizeField,c=n.rawFields,f=c===void 0?[]:c,d=n.drilldown,h=ll({data:n.data,hierarchyConfig:l,enableDrillDown:d==null?void 0:d.enabled,rawFields:f});e.data(h);var v=e.viewBBox,g=sl(r,i,v).finalSize,y=function(p){var m=p.r;return m*g};return s&&(y=function(p){return p[s]*g}),wt(A({},t,{options:{xField:"x",yField:"y",seriesField:o,sizeField:s,rawFields:rt(fy,f),point:{color:a,style:u,shape:"circle",size:y}}})),t}function py(t){return _(at({},{x:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0},y:{min:0,max:1,minLimit:0,maxLimit:1,nice:!0}}))(t)}function yy(t){var e=t.chart,n=t.options,r=n.tooltip;if(r===!1)e.tooltip(!1);else{var i=r;E(r,"fields")||(i=A({},{customItems:function(a){return a.map(function(o){var u=E(e.getOptions(),"scales"),l=E(u,["name","formatter"],function(c){return c}),s=E(u,["value","formatter"],function(c){return c});return x(x({},o),{name:l(o.data.name),value:s(o.data.value)})})}},i)),e.tooltip(i)}return t}function xy(t){var e=t.chart;return e.axis(!1),t}function my(t){var e=t.drilldown,n=t.interactions,r=n===void 0?[]:n;return e!=null&&e.enabled?A({},t,{interactions:rt(r,[{type:"drill-down",cfg:{drillDownConfig:e,transformData:ll,enableDrillDown:!0}}])}):t}function Fy(t){var e=t.chart,n=t.options;return et({chart:e,options:my(n)}),t}function by(t){return _(At("pointStyle"),hy,vy,j,py,gy,xy,Ae,yy,Fy,Q,it())(t)}(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="circle-packing",n}return e.getDefaultOptions=function(){return dy},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return by},e.prototype.triggerResize=function(){this.chart.destroyed||(this.chart.forceFit(),this.chart.clear(),this.execAdaptor(),this.chart.render(!0))},e})(G);(function(t){B(e,t);function e(n,r,i,a){var o=t.call(this,n,A({},a,r))||this;return o.type="g2-plot",o.defaultOptions=a,o.adaptor=i,o}return e.prototype.getDefaultOptions=function(){return this.defaultOptions},e.prototype.getSchemaAdaptor=function(){return this.adaptor},e})(G);var Ay={line:Fa,pie:ka,column:Rn,bar:Da,area:Aa,gauge:Zo,"tiny-line":Va,"tiny-column":Wa,"tiny-area":_a,"ring-progress":Ha,progress:Xa,scatter:Ra,histogram:Ga,funnel:Ao,stock:go},wy={line:Bs,pie:Pu,column:du,bar:mu,area:Hs,gauge:$g,"tiny-line":wf,"tiny-column":Of,"tiny-area":Mf,"ring-progress":Bf,progress:_f,scatter:Xc,histogram:Rf,funnel:Yh,stock:wh},Sy={pie:{label:!1},column:{tooltip:{showMarkers:!1}},bar:{tooltip:{showMarkers:!1}}};function br(t,e,n){var r=wy[t];if(!r){console.error("could not find "+t+" plot");return}var i=Ay[t];i({chart:e,options:A({},r.getDefaultOptions(),E(Sy,t,{}),n)})}function Dy(t){var e=t.chart,n=t.options,r=n.views,i=n.legend;return $(r,function(a){var o=a.region,u=a.data,l=a.meta,s=a.axes,c=a.coordinate,f=a.interactions,d=a.annotations,h=a.tooltip,v=a.geometries,g=e.createView({region:o});g.data(u);var y={};s&&$(s,function(p,m){y[m]=K(p,yt)}),y=A({},l,y),g.scale(y),s?$(s,function(p,m){g.axis(m,p)}):g.axis(!1),g.coordinate(c),$(v,function(p){var m=Ft({chart:g,options:p}).ext,b=p.adjust;b&&m.geometry.adjust(b)}),$(f,function(p){p.enable===!1?g.removeInteraction(p.type):g.interaction(p.type,p.cfg)}),$(d,function(p){g.annotation()[p.type](x({},p))}),typeof a.animation=="boolean"?g.animate(!1):(g.animate(!0),$(g.geometries,function(p){p.animate(a.animation)})),h&&(g.interaction("tooltip"),g.tooltip(h))}),i?$(i,function(a,o){e.legend(o,a)}):e.legend(!1),e.tooltip(n.tooltip),t}function Ey(t){var e=t.chart,n=t.options,r=n.plots,i=n.data,a=i===void 0?[]:i;return $(r,function(o){var u=o.type,l=o.region,s=o.options,c=s===void 0?{}:s,f=o.top,d=c.tooltip;if(f){br(u,e,x(x({},c),{data:a}));return}var h=e.createView(x({region:l},K(c,ha)));d&&h.interaction("tooltip"),br(u,h,x({data:a},c))}),t}function Oy(t){var e=t.chart,n=t.options;return e.option("slider",n.slider),t}function Iy(t){return _(Q,Dy,Ey,et,Q,j,ft,Oy,it())(t)}function My(t,e){var n=t.getModel(),r=n.data,i;return J(r)?i=r[0][e]:i=r[e],i}function ky(t){var e=gn(t);$(e,function(n){n.hasState("active")&&n.setState("active",!1),n.hasState("selected")&&n.setState("selected",!1),n.hasState("inactive")&&n.setState("inactive",!1)})}var Ty=function(t){B(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getAssociationItems=function(n,r){var i,a=this.context.event,o=r||{},u=o.linkField,l=o.dim,s=[];if(!((i=a.data)===null||i===void 0)&&i.data){var c=a.data.data;$(n,function(f){var d,h,v=u;if(l==="x"?v=f.getXScale().field:l==="y"?v=(d=f.getYScales().find(function(y){return y.field===v}))===null||d===void 0?void 0:d.field:v||(v=(h=f.getGroupScales()[0])===null||h===void 0?void 0:h.field),!!v){var g=Mt(gn(f),function(y){var p=!1,m=!1,b=J(c)?E(c[0],v):E(c,v);return My(y,v)===b?p=!0:m=!0,{element:y,view:f,active:p,inactive:m}});s.push.apply(s,g)}})}return s},e.prototype.showTooltip=function(n){var r=ii(this.context.view),i=this.getAssociationItems(r,n);$(i,function(a){if(a.active){var o=a.element.shape.getCanvasBBox();a.view.showTooltip({x:o.minX+o.width/2,y:o.minY+o.height/2})}})},e.prototype.hideTooltip=function(){var n=ii(this.context.view);$(n,function(r){r.hideTooltip()})},e.prototype.active=function(n){var r=Pe(this.context.view),i=this.getAssociationItems(r,n);$(i,function(a){var o=a.active,u=a.element;o&&u.setState("active",!0)})},e.prototype.selected=function(n){var r=Pe(this.context.view),i=this.getAssociationItems(r,n);$(i,function(a){var o=a.active,u=a.element;o&&u.setState("selected",!0)})},e.prototype.highlight=function(n){var r=Pe(this.context.view),i=this.getAssociationItems(r,n);$(i,function(a){var o=a.inactive,u=a.element;o&&u.setState("inactive",!0)})},e.prototype.reset=function(){var n=Pe(this.context.view);$(n,function(r){ky(r)})},e}(Xt);bt("association",Ty);nt("association-active",{start:[{trigger:"element:mouseenter",action:"association:active"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});nt("association-selected",{start:[{trigger:"element:mouseenter",action:"association:selected"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});nt("association-highlight",{start:[{trigger:"element:mouseenter",action:"association:highlight"}],end:[{trigger:"element:mouseleave",action:"association:reset"}]});nt("association-tooltip",{start:[{trigger:"element:mousemove",action:"association:showTooltip"}],end:[{trigger:"element:mouseleave",action:"association:hideTooltip"}]});(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="mix",n}return e.prototype.getSchemaAdaptor=function(){return Iy},e})(G);function Py(t,e){var n=e.data,r=e.coordinate,i=e.interactions,a=e.annotations,o=e.animation,u=e.tooltip,l=e.axes,s=e.meta,c=e.geometries;n&&t.data(n);var f={};l&&$(l,function(d,h){f[h]=K(d,yt)}),f=A({},s,f),t.scale(f),r&&t.coordinate(r),l===!1?t.axis(!1):$(l,function(d,h){t.axis(h,d)}),$(c,function(d){var h=Ft({chart:t,options:d}).ext,v=d.adjust;v&&h.geometry.adjust(v)}),$(i,function(d){d.enable===!1?t.removeInteraction(d.type):t.interaction(d.type,d.cfg)}),$(a,function(d){t.annotation()[d.type](x({},d))}),Ye(t,o),u?(t.interaction("tooltip"),t.tooltip(u)):u===!1&&t.removeInteraction("tooltip")}function $y(t){var e=t.chart,n=t.options,r=n.type,i=n.data,a=n.fields,o=n.eachView,u=Dn(n,["type","data","fields","eachView","axes","meta","tooltip","coordinate","theme","legend","interactions","annotations"]);return e.data(i),e.facet(r,x(x({},u),{fields:a,eachView:function(l,s){var c=o(l,s);if(c.geometries)Py(l,c);else{var f=c,d=f.options;d.tooltip&&l.interaction("tooltip"),br(f.type,l,d)}}})),t}function Ly(t){var e=t.chart,n=t.options,r=n.axes,i=n.meta,a=n.tooltip,o=n.coordinate,u=n.theme,l=n.legend,s=n.interactions,c=n.annotations,f={};return r&&$(r,function(d,h){f[h]=K(d,yt)}),f=A({},i,f),e.scale(f),e.coordinate(o),r?$(r,function(d,h){e.axis(h,d)}):e.axis(!1),a?(e.interaction("tooltip"),e.tooltip(a)):a===!1&&e.removeInteraction("tooltip"),e.legend(l),u&&e.theme(u),$(s,function(d){d.enable===!1?e.removeInteraction(d.type):e.interaction(d.type,d.cfg)}),$(c,function(d){e.annotation()[d.type](x({},d))}),t}function Cy(t){return _(j,$y,Ly)(t)}var Ry={title:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},rowTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}},columnTitle:{style:{fontSize:12,fill:"rgba(0,0,0,0.65)"}}};(function(t){B(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return Ry},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Cy},e})(G);var ji;(function(t){t.DEV="DEV",t.BETA="BETA",t.STABLE="STABLE"})(ji||(ji={}));ca("en-US",ns);ca("zh-CN",rs);export{mu as B,du as C,Bs as L,Pu as P};
