import{d as F,n as w,b as v,q as G,u as M,a8 as _,f as u,o as S,c as x,I as Q,J as H,a as t,w as l,g as K,E as m,l as W,B as k,j as h,a9 as X,aa as R,ab as Y,M as Z,G as ee,S as z}from"./index-5ce8de01.js";import{_ as ae}from"./AppIcon.vue_vue_type_script_setup_true_lang-7672b527.js";import{_ as oe}from"./ColumnSetting.vue_vue_type_script_setup_true_lang-7211a558.js";const te={class:"p-16"},ue=F({__name:"TableCurd",props:{config:{},isPagination:{type:Boolean,default:!0},expandedRowKeys:{},rowKey:{default:"id"},isDefaultTable:{type:Boolean,default:!0},columnSetting:{type:Boolean,default:!0}},emits:["change","paginationChange","showSizeChange","update:expandedRowKeys","update:config"],setup(T,{expose:E,emit:N}){const d=T,g=N,n=w({get:()=>d.config,set:a=>g("update:config",a)}),$=v(["10","15","20","100","1000"]),i=v("middle"),s=v([]),b=w({get:()=>d.expandedRowKeys,set:a=>g("update:expandedRowKeys",a)}),f=v([i.value]);G(d.config,a=>{a.columns.forEach(e=>{e.show=e.show==null?!0:e.show})}),E({getSelectedRowKeys(){return s.value},setSelectedRowKeys(a){s.value=[],s.value.push(...a)},setSelectedRowKey(a){s.value.findIndex(r=>r==a)>-1||s.value.push(a)},clearSelectedRowKeys(){s.value=[]}});const B=(a,e,r,c)=>{g("change",{pagination:a,filters:e,sorter:r,extra:c})},I=({page:a,pageSize:e})=>{g("paginationChange",{page:a,pageSize:e})},D=({current:a,size:e})=>{g("showSizeChange",{current:a,size:e})},L=w(()=>({selectedRowKeys:M(s),onChange:a=>{s.value=a},hideDefaultSelections:!0,selections:[_.SELECTION_ALL,_.SELECTION_INVERT,_.SELECTION_NONE,{key:"odd",text:"选择奇数行",onSelect:a=>{let e=[];e=a.filter((r,c)=>c%2===0),s.value=e}},{key:"even",text:"选择偶数行",onSelect:a=>{let e=[];e=a.filter((r,c)=>c%2!==0),s.value=e}}]}));return(a,e)=>{const r=u("a-card"),c=u("a-space"),C=u("a-col"),O=u("a-button"),y=u("a-menu-item"),P=u("a-menu"),V=u("a-dropdown"),U=u("a-row"),J=u("a-table-column"),j=u("a-table");return S(),x("div",null,[Q(t(r,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:l(()=>[K("div",te,[m(a.$slots,"search")])]),_:3},512),[[H,n.value.search.state]]),t(r,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:l(()=>[t(U,{class:"p-16"},{default:l(()=>[t(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:l(()=>[t(c,{size:8},{default:l(()=>[m(a.$slots,"toolbar-left")]),_:3})]),_:3}),t(C,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:l(()=>[t(c,{size:8},{default:l(()=>[m(a.$slots,"toolbar-right"),d.columnSetting&&n.value.columns&&n.value.columns.length>0?(S(),W(oe,{key:0,columns:n.value.columns,"onUpdate:columns":e[0]||(e[0]=o=>n.value.columns=o)},null,8,["columns"])):k("",!0),t(V,null,{overlay:l(()=>[t(P,{selectedKeys:f.value,"onUpdate:selectedKeys":e[4]||(e[4]=o=>f.value=o)},{default:l(()=>[t(y,{key:"large",onClick:e[1]||(e[1]=()=>{i.value="large",f.value=[i.value]})},{default:l(()=>[h(" 默认 ")]),_:1}),t(y,{key:"middle",onClick:e[2]||(e[2]=()=>{i.value="middle",f.value=[i.value]})},{default:l(()=>[h(" 中等 ")]),_:1}),t(y,{key:"small",onClick:e[3]||(e[3]=()=>{i.value="small",f.value=[i.value]})},{default:l(()=>[h(" 紧凑 ")]),_:1})]),_:1},8,["selectedKeys"])]),default:l(()=>[t(O,{type:"text"},{icon:l(()=>[t(ae,{name:"column-height-outlined"})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})]),_:3}),K("div",null,[m(a.$slots,"table",{},()=>[t(j,{columns:d.isDefaultTable?void 0:n.value.columns,size:i.value,"row-selection":L.value,"data-source":n.value.data,pagination:d.isPagination?{size:"default",pageSize:n.value.size,total:n.value.total,current:n.value.page,pageSizeOptions:$.value,showSizeChanger:!0,onChange:(o,p)=>I({page:o,pageSize:p}),onShowSizeChange:(o,p)=>D({current:o,size:p}),showTotal:o=>`共${o}条`,showQuickJumper:!0}:!1,loading:n.value.loading,scroll:{x:"calc(100wh - 300px)"},"row-key":d.rowKey,expandedRowKeys:b.value,"onUpdate:expandedRowKeys":e[5]||(e[5]=o=>b.value=o),onChange:e[6]||(e[6]=(o,p,q,A)=>B(o,p,q,A))},X({default:l(()=>[d.isDefaultTable?m(a.$slots,"table-col",{key:0},()=>[(S(!0),x(Z,null,ee(n.value.columns.filter(o=>o.show),(o,p)=>m(a.$slots,o.dataIndex,R(z({key:o.dataIndex},o)),()=>[t(J,z(o,{index:p}),null,16,["index"])])),128))]):k("",!0)]),_:2},[d.isDefaultTable?void 0:{name:"bodyCell",fn:l(o=>[m(a.$slots,"bodyCell",R(Y(o)))]),key:"0"}]),1032,["columns","size","row-selection","data-source","pagination","loading","scroll","row-key","expandedRowKeys"])])])])}}});export{ue as _};
