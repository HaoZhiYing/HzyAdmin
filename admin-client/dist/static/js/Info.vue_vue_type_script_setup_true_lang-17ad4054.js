var C=Object.defineProperty;var U=(i,a,l)=>a in i?C(i,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[a]=l;var x=(i,a,l)=>(U(i,typeof a!="symbol"?a+"":a,l),l);import{H as f,d as S,r as T,b as q,f as s,o as z,l as B,w as r,a as o,j as _,T as E}from"./index-2f681d41.js";class c{static findList(a,l,e={},m=[]){return f.post(`${this.urlPrefix}/findList`,{page:a,size:l,search:e,searchSort:m})}static deleteList(a){return f.post(`${this.urlPrefix}/deleteList`,a)}static findForm(a){return f.get(`${this.urlPrefix}/findForm${a?"/"+a:""}`)}static saveForm(a,l){return f.post(`${this.urlPrefix}/${a?"update":"create"}`,l)}static exportExcel(a={},l=[]){return f.download(`${this.urlPrefix}/exportExcel`,{page:-1,size:-1,search:a,searchSort:l})}}x(c,"urlPrefix","/api/v1/admin/SysRole");const V=S({__name:"Info",props:{onSuccess:{type:Function}},setup(i,{expose:a}){const l=i,e=T({vm:{id:"",form:{}},visible:!1,loading:!1}),m=q();a({open:(u="")=>{var t;e.visible=!0,e.visible&&(e.vm.id=u),(t=m.value)==null||t.resetFields(),e.loading=!0,c.findForm(u).then(d=>{e.loading=!1,d.code==1&&(e.vm=d.data,e.vm.form.password="")})}});function $(){var u;(u=m.value)==null||u.validate().then(async()=>{try{e.loading=!0;const t=await c.saveForm(e.vm.id,e.vm.form);if(e.loading=!1,t.code!=1)return;E.message.success("操作成功!"),l.onSuccess(),e.visible=!1}catch{e.loading=!1}})}return(u,t)=>{const d=s("a-button"),g=s("a-input"),v=s("a-form-item"),p=s("a-col"),b=s("a-radio"),k=s("a-radio-group"),w=s("a-textarea"),F=s("a-row"),y=s("a-form"),L=s("a-spin"),P=s("a-modal");return z(),B(P,{visible:e.visible,"onUpdate:visible":t[6]||(t[6]=n=>e.visible=n),title:e.vm.id?"编辑":"新建",centered:"",onOk:t[7]||(t[7]=n=>e.visible=!1),width:400},{footer:r(()=>[o(d,{type:"primary",loading:e.loading,onClick:t[0]||(t[0]=n=>$())},{default:r(()=>[_(" 提交")]),_:1},8,["loading"]),o(d,{onClick:t[1]||(t[1]=n=>e.visible=!1)},{default:r(()=>[_("关闭")]),_:1})]),default:r(()=>[o(L,{spinning:e.loading},{default:r(()=>[o(y,{ref_key:"refForm",ref:m,layout:"vertical",model:e.vm.form},{default:r(()=>[o(F,{gutter:[16,0]},{default:r(()=>[o(p,{xs:24},{default:r(()=>[o(v,{label:"编号",name:"number",rules:[{required:!0,message:"请输入编号",trigger:"blur"}]},{default:r(()=>[o(g,{value:e.vm.form.number,"onUpdate:value":t[2]||(t[2]=n=>e.vm.form.number=n),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(p,{xs:24},{default:r(()=>[o(v,{label:"角色名称",name:"name",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},{default:r(()=>[o(g,{value:e.vm.form.name,"onUpdate:value":t[3]||(t[3]=n=>e.vm.form.name=n),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(p,{xs:24},{default:r(()=>[o(v,{label:"删除锁定"},{default:r(()=>[o(k,{value:e.vm.form.deleteLock,"onUpdate:value":t[4]||(t[4]=n=>e.vm.form.deleteLock=n)},{default:r(()=>[o(b,{value:!0},{default:r(()=>[_("锁定")]),_:1}),o(b,{value:!1},{default:r(()=>[_("不锁定")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),o(p,{xs:24},{default:r(()=>[o(v,{label:"备注"},{default:r(()=>[o(w,{value:e.vm.form.remark,"onUpdate:value":t[5]||(t[5]=n=>e.vm.form.remark=n),placeholder:"请输入",rows:4},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{c as S,V as _};
