import{_ as U}from"./PageContainer.vue_vue_type_script_setup_true_lang-4a22be12.js";import{T as y}from"./TimedTaskService-9d966457.js";import{d as V,b as p,e as $,aa as D,f as l,o as d,l as g,w as a,a as n,i as f,c as w,D as G,g as e,t as r,z as C,G as P,T as z,p as F,k as O}from"./index-1d3290fc.js";import{_ as A}from"./Info.vue_vue_type_script_setup_true_lang-3c4319ac.js";import{_ as H}from"./LogInfo.vue_vue_type_script_setup_true_lang-b9292cf2.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import"./AppIcon.vue_vue_type_script_setup_true_lang-5c9d9d70.js";import"./GenerateCron.vue_vue_type_script_setup_true_lang-9c129f8b.js";import"./Index-da9f1cfc.js";const _=h=>(F("data-v-ce6545b1"),h=h(),O(),h),K={class:"task"},Q={class:"task-item"},R={class:"title",style:{color:"initial"}},W={class:"value"},X={class:"task-item"},Y=_(()=>e("div",{class:"title"},"请求方式",-1)),Z={class:"value"},ee={key:0},te={class:"task-item"},se=_(()=>e("div",{class:"title"},"间隔表达式",-1)),oe={class:"value"},ae={class:"task-item"},ne=_(()=>e("div",{class:"title"},"执行时间",-1)),ce={class:"value"},le={class:"task-item"},ie=_(()=>e("div",{class:"title"},"运行状态",-1)),de={class:"value"},_e={class:"task-item"},re=_(()=>e("div",{class:"title"},"备注",-1)),ue={class:"value"},ve={class:"task-item"},pe=_(()=>e("div",{class:"title"},null,-1)),fe={class:"value"},he=["onClick"],me=["onClick"],ke=_(()=>e("a",{href:"javascript:;",class:"text-danger"},"删除",-1)),ye=V({name:"system_user"}),ge=V({...ye,setup(h){const x=p(""),c=p(!1),m=p([]);let L;const I=p(),S=p();$(()=>{k(),L=setInterval(()=>{k()},30*1e3)}),D(()=>{clearInterval(L)});async function k(){c.value=!0;const i=await y.findList(x.value);c.value=!1,i.code==1&&(m.value=i.data)}async function B(i){c.value=!0;const s=await y.deleteList([i]);c.value=!1,s.code==1&&z.message.success("删除成功!")}async function E(i,s){if(i==1){c.value=!0;const u=await y.run([s]);if(c.value=!1,u.code!=1){m.value.find(v=>v.id==s).state=0;return}}else{c.value=!0;const u=await y.close([s]);if(c.value=!1,u.code!=1){m.value.find(v=>v.id==s).state=0;return}}}return(i,s)=>{const u=l("a-input-search"),v=l("a-button"),T=l("a-tag"),M=l("a-switch"),b=l("a-divider"),N=l("a-popconfirm"),j=l("a-spin"),q=l("a-card");return d(),g(U,null,{default:a(()=>[n(q,{bordered:!1},{title:a(()=>[n(u,{value:x.value,"onUpdate:value":s[0]||(s[0]=t=>x.value=t),placeholder:"请输入",style:{width:"200px"},onSearch:s[1]||(s[1]=()=>k())},null,8,["value"])]),extra:a(()=>[n(v,{type:"primary",onClick:s[2]||(s[2]=()=>{var t;return(t=I.value)==null?void 0:t.open()})},{default:a(()=>[f("新建任务")]),_:1})]),default:a(()=>[n(j,{spinning:c.value},{default:a(()=>[(d(!0),w(P,null,G(m.value,t=>(d(),w("div",K,[e("div",Q,[e("div",R,[e("span",null,r(t.groupName),1),f(" "+r(t.name),1)]),e("div",W,r(t.jobPoint),1)]),e("div",X,[Y,e("div",Z,[t.requsetMode?C("",!0):(d(),w("div",ee,"-")),t.requsetMode==0?(d(),g(T,{key:1,color:"#87d068"},{default:a(()=>[f("POST")]),_:1})):C("",!0),t.requsetMode==1?(d(),g(T,{key:2,color:"#87d068"},{default:a(()=>[f("GET")]),_:1})):C("",!0),t.requsetMode==2?(d(),g(T,{key:3,color:"#87d068"},{default:a(()=>[f("DELETE")]),_:1})):C("",!0)])]),e("div",te,[se,e("div",oe,r(t.cron),1)]),e("div",ae,[ne,e("div",ce,r(t.executeTime),1)]),e("div",le,[ie,e("div",de,[n(M,{checked:t.state,"onUpdate:checked":o=>t.state=o,"checked-children":"运行","un-checked-children":"停止",checkedValue:1,unCheckedValue:0,onChange:o=>E(o,t.id)},null,8,["checked","onUpdate:checked","onChange"])])]),e("div",_e,[re,e("div",ue,r(t.remark),1)]),e("div",ve,[pe,e("div",fe,[e("a",{href:"javascript:;",onClick:()=>{var o;return(o=I.value)==null?void 0:o.open(t.id)}},"编辑",8,he),n(b,{type:"vertical"}),e("a",{href:"javascript:;",onClick:()=>{var o;return(o=S.value)==null?void 0:o.open(t.id)}},"日志",8,me),n(b,{type:"vertical"}),n(N,{title:"您确定要删除?",onConfirm:o=>B(t.id),okText:"确定",cancelText:"取消"},{default:a(()=>[ke]),_:2},1032,["onConfirm"])])])]))),256))]),_:1},8,["spinning"])]),_:1}),n(A,{ref_key:"refInfo",ref:I,onSuccess:()=>k()},null,8,["onSuccess"]),n(H,{ref_key:"refLogInfo",ref:S},null,512)]),_:1})}}});const Be=J(ge,[["__scopeId","data-v-ce6545b1"]]);export{Be as default};
