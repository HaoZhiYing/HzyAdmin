import{d as P,m as y,b as S,u as l,ab as h,f as d,o as D,c as A,E as F,F as J,a,w as t,g as b,a3 as p,i as v,a4 as Q}from"./index-1d3290fc.js";import{_ as U}from"./AppIcon.vue_vue_type_script_setup_true_lang-5c9d9d70.js";const j={class:"p-16"},H=P({__name:"TableCurd",props:{config:null,isPagination:{type:Boolean,default:!0},expandedRowKeys:null},emits:["change","paginationChange","showSizeChange","update:expandedRowKeys"],setup(x,{expose:R,emit:_}){const f=x,r=y(()=>f.config),K=S(["10","15","20","100","1000"]),g=S("middle"),n=S([]),m=y({get:()=>f.expandedRowKeys,set:e=>_("update:expandedRowKeys",e)});R({getSelectedRowKeys(){return n.value},setSelectedRowKeys(e){n.value=[],n.value.push(...e)},setSelectedRowKey(e){n.value.findIndex(i=>i==e)>-1||n.value.push(e)},clearSelectedRowKeys(){n.value=[]}});const z=(e,o,i,u)=>{_("change",{pagination:e,filters:o,sorter:i,extra:u})},k=({page:e,pageSize:o})=>{_("paginationChange",{page:e,pageSize:o})},E=({current:e,size:o})=>{_("showSizeChange",{current:e,size:o})},N=y(()=>({selectedRowKeys:l(n),onChange:e=>{n.value=e},hideDefaultSelections:!0,selections:[h.SELECTION_ALL,h.SELECTION_INVERT,h.SELECTION_NONE,{key:"odd",text:"选择奇数行",onSelect:e=>{let o=[];o=e.filter((i,u)=>u%2===0),n.value=o}},{key:"even",text:"选择偶数行",onSelect:e=>{let o=[];o=e.filter((i,u)=>u%2!==0),n.value=o}}]}));return(e,o)=>{const i=d("a-card"),u=d("a-space"),C=d("a-col"),T=d("a-button"),w=d("a-menu-item"),$=d("a-menu"),O=d("a-dropdown"),I=d("a-row"),L=d("a-table");return D(),A("div",null,[F(a(i,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:t(()=>[b("div",j,[p(e.$slots,"search")])]),_:3},512),[[J,l(r).search.state]]),a(i,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:t(()=>[a(I,{class:"p-16"},{default:t(()=>[a(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:t(()=>[a(u,{size:8},{default:t(()=>[p(e.$slots,"toolbar-left")]),_:3})]),_:3}),a(C,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:t(()=>[a(u,{size:8},{default:t(()=>[p(e.$slots,"toolbar-right"),a(O,null,{overlay:t(()=>[a($,null,{default:t(()=>[a(w,{onClick:o[0]||(o[0]=()=>g.value=void 0)},{default:t(()=>[v(" 默认 ")]),_:1}),a(w,{onClick:o[1]||(o[1]=()=>g.value="middle")},{default:t(()=>[v(" 中等 ")]),_:1}),a(w,{onClick:o[2]||(o[2]=()=>g.value="small")},{default:t(()=>[v(" 紧凑 ")]),_:1})]),_:1})]),default:t(()=>[a(T,{type:"text"},{icon:t(()=>[a(U,{name:"column-height-outlined"})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})]),_:3}),b("div",null,[p(e.$slots,"table",{},()=>[a(L,{size:g.value,"row-selection":l(N),"data-source":l(r).data,pagination:f.isPagination?{size:"default",pageSize:l(r).size,total:l(r).total,current:l(r).page,pageSizeOptions:K.value,showSizeChanger:!0,onChange:(s,c)=>k({page:s,pageSize:c}),onShowSizeChange:(s,c)=>E({current:s,size:c}),showTotal:s=>`共${s}条`,showQuickJumper:!0}:!1,loading:l(r).loading,scroll:{x:"calc(100wh - 300px)"},"row-key":"id",expandedRowKeys:l(m),"onUpdate:expandedRowKeys":o[3]||(o[3]=s=>Q(m)?m.value=s:null),onChange:o[4]||(o[4]=(s,c,B,V)=>z(s,c,B,V))},{default:t(()=>[p(e.$slots,"table-col")]),_:3},8,["size","row-selection","data-source","pagination","loading","scroll","expandedRowKeys"])])])])}}});export{H as _};
