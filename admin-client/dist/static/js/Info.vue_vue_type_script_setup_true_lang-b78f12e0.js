import{d as q,r as P,b as R,a6 as w,f as n,o as f,l as g,w as a,a as l,i as m,c as k,B as y,t as U,F as I,T as z}from"./index-ceef6588.js";import{S as V}from"./SysOrganizationService-6f709c8d.js";const H=q({__name:"Info",props:{onSuccess:{type:Function}},setup(F,{expose:S}){const L=F,e=P({vm:{id:"",form:{},postIds:[],allPostList:[],roleIds:[],allRoleList:[]},visible:!1,loading:!1,organizationTree:[]}),v=R();S({open:(u="")=>{var o;e.visible=!0,e.visible&&(e.vm.id=u),(o=v.value)==null||o.resetFields(),e.loading=!0,w.findForm(u).then(d=>{e.loading=!1,d.code==1&&(e.vm=d.data,e.vm.form.password="")}),e.loading=!0,V.sysOrganizationTree().then(d=>{e.loading=!1,e.organizationTree=d.data.rows})}});function T(){var u;(u=v.value)==null||u.validate().then(async()=>{if(!e.vm.form.organizationId)return z.message.warning("请选择组织!");try{e.loading=!0;const o=await w.saveForm(e.vm.id,e.vm);if(e.loading=!1,o.code!=1)return;z.message.success("操作成功!"),L.onSuccess(),e.visible=!1}catch{e.loading=!1}})}return(u,o)=>{const d=n("a-button"),i=n("a-input"),s=n("a-form-item"),r=n("a-col"),C=n("a-tree-select"),c=n("a-radio"),N=n("a-radio-group"),b=n("a-checkbox"),p=n("a-row"),x=n("a-checkbox-group"),B=n("a-form"),O=n("a-spin"),$=n("a-modal");return f(),g($,{visible:e.visible,"onUpdate:visible":o[11]||(o[11]=t=>e.visible=t),title:e.vm.id?"编辑":"新建",centered:"",onOk:o[12]||(o[12]=t=>e.visible=!1),width:800},{footer:a(()=>[l(d,{type:"primary",loading:e.loading,onClick:o[0]||(o[0]=t=>T())},{default:a(()=>[m(" 提交")]),_:1},8,["loading"]),l(d,{onClick:o[1]||(o[1]=t=>e.visible=!1)},{default:a(()=>[m("关闭")]),_:1})]),default:a(()=>[l(O,{spinning:e.loading},{default:a(()=>[l(B,{ref_key:"refForm",ref:v,layout:"vertical",model:e.vm.form},{default:a(()=>[l(p,{gutter:[16,0]},{default:a(()=>[l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"真实姓名",name:"name",rules:[{required:!0,message:"请输入真实姓名",trigger:"blur"}]},{default:a(()=>[l(i,{value:e.vm.form.name,"onUpdate:value":o[2]||(o[2]=t=>e.vm.form.name=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"账户名称",name:"loginName",rules:[{required:!0,message:"请输入账户名称",trigger:"blur"}]},{default:a(()=>[l(i,{value:e.vm.form.loginName,"onUpdate:value":o[3]||(o[3]=t=>e.vm.form.loginName=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"账户密码"},{default:a(()=>[l(i,{value:e.vm.form.password,"onUpdate:value":o[4]||(o[4]=t=>e.vm.form.password=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"联系电话"},{default:a(()=>[l(i,{value:e.vm.form.phone,"onUpdate:value":o[5]||(o[5]=t=>e.vm.form.phone=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"邮箱地址"},{default:a(()=>[l(i,{value:e.vm.form.email,"onUpdate:value":o[6]||(o[6]=t=>e.vm.form.email=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"所属组织"},{default:a(()=>[l(C,{value:e.vm.form.organizationId,"onUpdate:value":o[7]||(o[7]=t=>e.vm.form.organizationId=t),"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"所属组织","allow-clear":"","tree-default-expand-all":"","tree-data":e.organizationTree,"field-names":{children:"children",label:"title",value:"key"}},null,8,["value","tree-data"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(s,{label:"删除锁定"},{default:a(()=>[l(N,{value:e.vm.form.deleteLock,"onUpdate:value":o[8]||(o[8]=t=>e.vm.form.deleteLock=t)},{default:a(()=>[l(c,{value:!0},{default:a(()=>[m("锁定")]),_:1}),l(c,{value:!1},{default:a(()=>[m("不锁定")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[l(s,{label:"所属岗位"},{default:a(()=>[l(x,{value:e.vm.postIds,"onUpdate:value":o[9]||(o[9]=t=>e.vm.postIds=t),class:"w100"},{default:a(()=>[l(p,{gutter:[16,8]},{default:a(()=>[(f(!0),k(I,null,y(e.vm.allPostList,(t,_)=>(f(),g(r,{span:6,key:_},{default:a(()=>[l(b,{value:t.id},{default:a(()=>[m(U(t.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(r,{xs:24},{default:a(()=>[l(s,{label:"所属角色"},{default:a(()=>[l(x,{value:e.vm.roleIds,"onUpdate:value":o[10]||(o[10]=t=>e.vm.roleIds=t),class:"w100"},{default:a(()=>[l(p,{gutter:[16,8]},{default:a(()=>[(f(!0),k(I,null,y(e.vm.allRoleList,(t,_)=>(f(),g(r,{span:6,key:_},{default:a(()=>[l(b,{value:t.id},{default:a(()=>[m(U(t.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{H as _};
