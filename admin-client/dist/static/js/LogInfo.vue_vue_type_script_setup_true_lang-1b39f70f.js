import{T as x}from"./TimedTaskService-7437af4d.js";import{d as k,r as w,f as l,o as m,l as f,w as r,a as p,c as C,D as L,j as c,t as g,G as T}from"./index-2f681d41.js";const E=k({__name:"LogInfo",setup(h,{expose:u}){const e=w({vm:{id:"",form:{}},visible:!1,loading:!1,page:1});u({open:(n="")=>{e.visible=!0,e.visible&&(e.vm.id=n),d(n,!0)}});function d(n,t){e.loading=!0,x.getJobLoggers(n,e.page).then(a=>{if(e.loading=!1,a.code!=1)return;if(e.vm.form.data=a.data,!a.data||a.data.length==0){e.page=e.page-1;return}const o=[];t||e.vm.form.data.forEach(i=>{o.push(i)}),a.data.forEach(i=>{o.push(i)}),e.vm.form.data=o})}function _(){e.page=e.page+1,d(e.vm.id,!1)}return(n,t)=>{const a=l("a-timeline-item"),o=l("a-timeline"),i=l("a-button"),v=l("a-spin"),b=l("a-drawer");return m(),f(b,{visible:e.visible,"onUpdate:visible":t[1]||(t[1]=s=>e.visible=s),title:"任务日志",centered:"",onOk:t[2]||(t[2]=s=>e.visible=!1),width:1200},{default:r(()=>[p(v,{spinning:e.loading},{default:r(()=>[p(o,null,{default:r(()=>[(m(!0),C(T,null,L(e.vm.form.data,s=>(m(),f(a,null,{default:r(()=>[c(g(s.text),1)]),_:2},1024))),256))]),_:1}),p(i,{type:"primary",class:"mt-18",block:"",onClick:t[0]||(t[0]=s=>_())},{default:r(()=>[c("Next Page "+g(e.page),1)]),_:1})]),_:1},8,["spinning"])]),_:1},8,["visible"])}}});export{E as _};
