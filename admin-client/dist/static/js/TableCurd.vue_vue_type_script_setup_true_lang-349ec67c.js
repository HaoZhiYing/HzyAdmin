import{d as P,m as y,b as S,u as s,a5 as h,f as d,o as V,c as D,v as A,x as J,a as t,w as a,N as p,i as v,_ as Q}from"./index-235b159a.js";import{_ as U}from"./AppIcon.vue_vue_type_script_setup_true_lang-5572fb54.js";const F=P({__name:"TableCurd",props:{config:null,isPagination:{type:Boolean,default:!0},expandedRowKeys:null},emits:["change","paginationChange","showSizeChange","update:expandedRowKeys"],setup(x,{expose:b,emit:_}){const g=x,u=y(()=>g.config),R=S(["10","15","20","100","1000"]),f=S("middle"),n=S([]),w=y({get:()=>g.expandedRowKeys,set:e=>_("update:expandedRowKeys",e)});b({getSelectedRowKeys(){return n.value},setSelectedRowKeys(e){n.value=[],n.value.push(...e)},setSelectedRowKey(e){n.value.findIndex(i=>i==e)>-1||n.value.push(e)},clearSelectedRowKeys(){n.value=[]}});const K=(e,o,i,r)=>{_("change",{pagination:e,filters:o,sorter:i,extra:r})},z=({page:e,pageSize:o})=>{_("paginationChange",{page:e,pageSize:o})},k=({current:e,size:o})=>{_("showSizeChange",{current:e,size:o})},T=y(()=>({selectedRowKeys:s(n),onChange:e=>{n.value=e},hideDefaultSelections:!0,selections:[h.SELECTION_ALL,h.SELECTION_INVERT,h.SELECTION_NONE,{key:"odd",text:"选择奇数行",onSelect:e=>{let o=[];o=e.filter((i,r)=>r%2===0),n.value=o}},{key:"even",text:"选择偶数行",onSelect:e=>{let o=[];o=e.filter((i,r)=>r%2!==0),n.value=o}}]}));return(e,o)=>{const i=d("a-card"),r=d("a-space"),C=d("a-col"),E=d("a-button"),m=d("a-menu-item"),N=d("a-menu"),$=d("a-dropdown"),O=d("a-row"),I=d("a-table");return V(),D("div",null,[A(t(i,{class:"mb-16",bordered:!1},{default:a(()=>[p(e.$slots,"search")]),_:3},512),[[J,s(u).search.state]]),t(i,{bodyStyle:{paddingTop:0},bordered:!1},{default:a(()=>[t(O,{class:"pt-16 pb-16"},{default:a(()=>[t(C,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[t(r,{size:8},{default:a(()=>[p(e.$slots,"toolbar-left")]),_:3})]),_:3}),t(C,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:a(()=>[t(r,{size:8},{default:a(()=>[p(e.$slots,"toolbar-right"),t($,null,{overlay:a(()=>[t(N,null,{default:a(()=>[t(m,{onClick:o[0]||(o[0]=()=>f.value=void 0)},{default:a(()=>[v(" 默认 ")]),_:1}),t(m,{onClick:o[1]||(o[1]=()=>f.value="middle")},{default:a(()=>[v(" 中等 ")]),_:1}),t(m,{onClick:o[2]||(o[2]=()=>f.value="small")},{default:a(()=>[v(" 紧凑 ")]),_:1})]),_:1})]),default:a(()=>[t(E,{type:"text"},{icon:a(()=>[t(U,{name:"column-height-outlined"})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3}),p(e.$slots,"table",{},()=>[t(I,{size:f.value,"row-selection":s(T),"data-source":s(u).data,pagination:g.isPagination?{pageSize:s(u).size,total:s(u).total,current:s(u).page,pageSizeOptions:R.value,showSizeChanger:!0,onChange:(l,c)=>z({page:l,pageSize:c}),onShowSizeChange:(l,c)=>k({current:l,size:c}),showTotal:l=>`共${l}条`,showQuickJumper:!0}:!1,loading:s(u).loading,scroll:{x:"calc(100wh - 300px)"},"row-key":"id",expandedRowKeys:s(w),"onUpdate:expandedRowKeys":o[3]||(o[3]=l=>Q(w)?w.value=l:null),onChange:o[4]||(o[4]=(l,c,L,B)=>K(l,c,L,B))},{default:a(()=>[p(e.$slots,"table-col")]),_:3},8,["size","row-selection","data-source","pagination","loading","scroll","expandedRowKeys"])])]),_:3})])}}});export{F as _};
