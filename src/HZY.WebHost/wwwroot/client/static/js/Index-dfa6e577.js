var O=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var w=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))J.call(e,n)&&w(t,n,e[n]);if(y)for(var n of y(e))R.call(e,n)&&w(t,n,e[n]);return t},C=(t,e)=>T(t,V(e));import{d as U,h as j,r as z,v as E,t as M,i as l,o as m,p as _,A as q,B as H,l as a,j as o,c as S,e as I,k as D,q as u}from"./vendor-c8880a38.js";import{_ as G,A as K,u as Q,r as W}from"./index-a85a7896.js";import{I as X,s as N}from"./Info-b77ddce4.js";import"./MdEditorShowCode-7aebdcef.js";const Y=U({name:"code_generation_index",components:{AppIcons:K,Info:X},setup(){const t=Q(),e=j({table:{search:{state:!1,vm:{tableName:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}}),n=z(null),b=z(null),v=t.getPowerByMenuId(W.currentRoute.value.meta.menuId),c={onChange(r){const{currentPage:s,pageSize:p}=r;e.table.page=s==0?1:s,e.table.rows=p,c.findList()},onResetSearch(){e.table.page=1;let r=e.table.search.vm;for(let s in r)r[s]=null;c.findList()},findList(){e.table.loading=!0,N.findList(e.table.rows,e.table.page,e.table.search.vm).then(r=>{let s=r.data;e.table.loading=!1,e.table.page=s.page,e.table.rows=s.size,e.table.total=s.total,e.table.data=s.dataSource})},openForm(r){n.value.openForm({visible:!0,key:r})},createDataDictionary(){N.createDataDictionary()}};return E(()=>{c.findList()}),C(g(g({},M(e)),c),{power:v,refForm:n,refTable:b})}}),Z={class:"p-24"},ee=u("\u67E5\u8BE2"),te=u("\u91CD\u7F6E"),ae={key:0},oe=u("\xA0\xA0\u6536\u8D77"),ne={key:1},se=u("\xA0\xA0\u5C55\u5F00"),le=u(" \u4E0B\u8F7D\u6570\u636E\u5E93\u8BBE\u8BA1(Excel) "),re=["onClick"],ie=D("a",{class:"text-danger"},"\u5220\u9664",-1);function pe(t,e,n,b,v,c){const r=l("a-input"),s=l("a-col"),p=l("a-button"),h=l("a-row"),k=l("a-card"),f=l("AppIcons"),d=l("vxe-column"),L=l("a-divider"),P=l("a-popconfirm"),$=l("vxe-table"),x=l("vxe-pager"),A=l("a-spin"),B=l("Info");return m(),_("div",Z,[q(a(k,{class:"mb-24"},{default:o(()=>[a(h,{gutter:[24,24]},{default:o(()=>[a(s,{xs:24,sm:12,md:8,lg:6,xl:4},{default:o(()=>[a(r,{value:t.table.search.vm.tableName,"onUpdate:value":e[0]||(e[0]=i=>t.table.search.vm.tableName=i),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),a(s,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:o(()=>[a(p,{type:"primary",class:"mr-24",onClick:t.findList},{default:o(()=>[ee]),_:1},8,["onClick"]),a(p,{class:"mr-24",onClick:t.onResetSearch},{default:o(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[H,t.table.search.state]]),a(k,null,{default:o(()=>[a(h,{gutter:[24,24]},{default:o(()=>[a(s,{xs:24,sm:24,md:12,lg:12,xl:12},{default:o(()=>[t.power.search?(m(),S(p,{key:0,class:"mr-24",onClick:e[1]||(e[1]=i=>t.table.search.state=!t.table.search.state)},{default:o(()=>[t.table.search.state?(m(),_("div",ae,[a(f,{name:"UpOutlined"}),oe])):(m(),_("div",ne,[a(f,{name:"DownOutlined"}),se]))]),_:1})):I("",!0),a(p,{type:"primary",class:"mr-24",onClick:e[2]||(e[2]=i=>t.createDataDictionary())},{icon:o(()=>[a(f,{name:"DownloadOutlined"})]),default:o(()=>[le]),_:1})]),_:1}),a(s,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"})]),_:1}),a(A,{spinning:t.table.loading},{default:o(()=>[a($,{class:"mt-24",ref:"refTable",resizable:"",data:t.table.data,"row-config":{isHover:!0}},{default:o(()=>[a(d,{type:"checkbox",width:"60"}),a(d,{field:"schema",title:"\u6570\u636E\u5E93\u7A7A\u95F4"}),a(d,{field:"name",title:"\u8868\u540D\u79F0"}),a(d,{field:"comment",title:"\u8868\u5907\u6CE8"}),a(d,{field:"type",title:"\u8868\u7C7B\u578B"}),a(d,{field:"id",title:"\u64CD\u4F5C"},{default:o(({row:i})=>[D("a",{href:"javascript:void(0)",onClick:F=>t.openForm(i.name)},"\u67E5\u770B\u4EE3\u7801",8,re),a(L,{type:"vertical"}),t.power.delete?(m(),S(P,{key:0,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:F=>t.deleteList(i.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[ie]),_:2},1032,["onConfirm"])):I("",!0)]),_:1})]),_:1},8,["data"]),a(x,{class:"mt-24",background:"","current-page":t.table.page,"onUpdate:current-page":e[3]||(e[3]=i=>t.table.page=i),"page-size":t.table.rows,"onUpdate:page-size":e[4]||(e[4]=i=>t.table.rows=i),total:t.table.total,"page-sizes":t.table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:t.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1}),a(B,{ref:"refForm",onOnSuccess:e[5]||(e[5]=()=>t.findList())},null,512)])}var ge=G(Y,[["render",pe]]);export{ge as default};
