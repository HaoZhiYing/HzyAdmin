import{_ as E,r as N,a as U,o as q,v as M,c as d,j as _,d as h,f as n,w as t,l as c,F as V,x as z,q as p,e as f,k as m,n as a,C as u,A as D,g as A,h as J,t as L}from"./index-0c8a61e2.js";import G from"./Info-701ab212.js";import{s as b}from"./timedTaskService-81fdc112.js";import P from"./JobLogger-5a615946.js";import"./GenerateCron-73dbeef2.js";import"./Index-8ee8b333.js";const j=v=>(A("data-v-703bacd9"),v=v(),J(),v),H=a("\u6DFB\u52A0"),K={key:0},Q=j(()=>f("span",{class:"normal bg-danger"},null,-1)),R={key:1},W=j(()=>f("span",{class:"normal bg-cyan"},null,-1)),X=a("\u4EFB\u52A1\u89C4\u5219"),Y=a("POST"),Z=a("GET"),ee=a("DELETE"),te=a(" \u542F\u52A8 "),oe=a(" \u505C\u6B62 "),ne=a("\u4FEE\u6539"),se=a("\u5220\u9664"),ae=a("\u6267\u884C\u8BB0\u5F55"),le={name:"TimedTaskCom"},re=Object.assign(le,{setup(v){const l=N({list:[],filter:"",jobForm:{visible:!1,key:Object},timer:null}),F=U(null),s={findList(){b.findList(l.filter).then(r=>{l.list=r.data})},deleteList(r){let o=[];r?o.push(r):o=[],b.deleteList(o).then(i=>{i.code==1&&(L.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),s.findList())})},openForm(r){F.value.openForm({visible:!0,key:r})},run(r){let o=[];o.push(r),b.run(o).then(i=>{i.code==1&&(L.message("\u8FD0\u884C\u6210\u529F!","\u6210\u529F"),s.findList())})},close(r){let o=[];o.push(r),b.close(o).then(i=>{i.code==1&&(L.message("\u5173\u95ED\u6210\u529F!","\u6210\u529F"),s.findList())})},openJobLogger(r){l.jobForm.visible=!0,l.jobForm.key=r},onSearch(){s.findList()}};return q(()=>{s.findList(),l.timer=setInterval(()=>{s.findList()},10*1e3)}),M(()=>{clearInterval(l.timer)}),(r,o)=>{const i=d("a-button"),y=d("a-col"),w=d("a-input-search"),I=d("a-row"),x=d("a-divider"),g=d("a-tag"),C=d("a-menu-item"),S=d("a-menu"),$=d("a-dropdown"),T=d("a-card"),O=d("a-tooltip"),B=d("a-drawer");return _(),h("div",null,[n(I,{gutter:[15,15],class:"mb-15"},{default:t(()=>[n(y,{span:8},{default:t(()=>[n(i,{type:"primary",onClick:o[0]||(o[0]=e=>s.openForm(null))},{default:t(()=>[H]),_:1})]),_:1}),n(y,{span:8,offset:8},{default:t(()=>[n(w,{value:c(l).filter,"onUpdate:value":o[1]||(o[1]=e=>c(l).filter=e),placeholder:"\u8BF7\u8F93\u5165\u5173\u952E\u5B57\u68C0\u7D22","enter-button":"",onSearch:s.onSearch},null,8,["value","onSearch"])]),_:1})]),_:1}),n(I,{gutter:[15,15]},{default:t(()=>[(_(!0),h(V,null,z(c(l).list,e=>(_(),p(y,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[n(O,{placement:"top"},{title:t(()=>[f("span",null,m(e.apiUrl),1)]),default:t(()=>[n(T,{hoverable:""},{default:t(()=>[e.state==0?(_(),h("h3",K,[Q,a(" "+m(e.name),1)])):u("",!0),e.state==1?(_(),h("h3",R,[W,a(" "+m(e.name),1)])):u("",!0),f("h4",null,m(e.groupName),1),f("p",null,[X,n(x,{type:"vertical"}),a(m(e.cron),1)]),e.requsetMode==0?(_(),p(g,{key:2,color:"blue"},{default:t(()=>[Y]),_:1})):u("",!0),e.requsetMode==1?(_(),p(g,{key:3,color:"green"},{default:t(()=>[Z]),_:1})):u("",!0),e.requsetMode==2?(_(),p(g,{key:4,color:"orange"},{default:t(()=>[ee]),_:1})):u("",!0),a(" "+m(e.executeTime)+" ",1),n(x),e.state==0?(_(),p(i,{key:5,type:"primary",size:"small",onClick:k=>s.run(e.id)},{default:t(()=>[te]),_:2},1032,["onClick"])):u("",!0),e.state==1?(_(),p(i,{key:6,type:"primary",size:"small",danger:"",onClick:k=>s.close(e.id)},{default:t(()=>[oe]),_:2},1032,["onClick"])):u("",!0),n($,{class:"ml-15"},{overlay:t(()=>[n(S,null,{default:t(()=>[n(C,{key:"1",onClick:k=>s.openForm(e.id)},{default:t(()=>[ne]),_:2},1032,["onClick"]),n(C,{key:"2",onClick:k=>s.deleteList(e.id)},{default:t(()=>[se]),_:2},1032,["onClick"]),n(C,{key:"3",onClick:k=>s.openJobLogger(e.id)},{default:t(()=>[ae]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[n(i,{size:"small"},{default:t(()=>[n(D,{name:"DashOutlined"})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),n(G,{ref_key:"refForm",ref:F,onOnSuccess:o[2]||(o[2]=e=>s.findList())},null,512),n(B,{title:"\u6267\u884C\u8BB0\u5F55",placement:"right",closable:!1,visible:c(l).jobForm.visible,"onUpdate:visible":o[4]||(o[4]=e=>c(l).jobForm.visible=e),width:1e3,destroyOnClose:""},{default:t(()=>[n(P,{formId:c(l).jobForm.key,"onUpdate:formId":o[3]||(o[3]=e=>c(l).jobForm.key=e)},null,8,["formId"])]),_:1},8,["visible"])])}}});var me=E(re,[["__scopeId","data-v-703bacd9"]]);export{me as default};
