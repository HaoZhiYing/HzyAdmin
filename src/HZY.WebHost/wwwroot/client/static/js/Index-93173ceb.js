var O=Object.defineProperty,T=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var C=(t,e,n)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,g=(t,e)=>{for(var n in e||(e={}))J.call(e,n)&&C(t,n,e[n]);if(y)for(var n of y(e))R.call(e,n)&&C(t,n,e[n]);return t},w=(t,e)=>T(t,V(e));import{d as U,s as E,e as z,t as j,u as M,f as l,q as m,v as _,E as q,G,y as a,m as o,j as S,A as I,x as D,B as u}from"./vendor-4ca571b9.js";import{_ as H,A as K,a as Q,r as W}from"./index-50f2dd5e.js";import{I as X,s as N}from"./Info-5d5afeea.js";import"./MdEditorShowCode-36564798.js";const Y=U({name:"code_generation_index",components:{AppIcon:K,Info:X},setup(){const t=Q(),e=E({table:{search:{state:!1,vm:{tableName:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}}),n=z(null),b=z(null),v=t.getPowerByMenuId(W.currentRoute.value.meta.menuId),c={onChange(r){const{currentPage:s,pageSize:d}=r;e.table.page=s==0?1:s,e.table.rows=d,c.findList()},onResetSearch(){e.table.page=1;let r=e.table.search.vm;for(let s in r)r[s]=null;c.findList()},findList(){e.table.loading=!0,N.findList(e.table.rows,e.table.page,e.table.search.vm).then(r=>{let s=r.data;e.table.loading=!1,e.table.page=s.page,e.table.rows=s.size,e.table.total=s.total,e.table.data=s.dataSource})},openForm(r){n.value.openForm({visible:!0,key:r})},createDataDictionary(){N.createDataDictionary()}};return j(()=>{c.findList()}),w(g(g({},M(e)),c),{power:v,refForm:n,refTable:b})}}),Z=u("\u67E5\u8BE2"),ee=u("\u91CD\u7F6E"),te={key:0},ae=u("\xA0\xA0\u6536\u8D77"),oe={key:1},ne=u("\xA0\xA0\u5C55\u5F00"),se=u(" \u4E0B\u8F7D\u6570\u636E\u5E93\u8BBE\u8BA1(Excel) "),le=["onClick"],re=D("a",{class:"text-danger"},"\u5220\u9664",-1);function ie(t,e,n,b,v,c){const r=l("a-input"),s=l("a-col"),d=l("a-button"),h=l("a-row"),k=l("a-card"),f=l("AppIcon"),p=l("vxe-column"),x=l("a-divider"),L=l("a-popconfirm"),P=l("vxe-table"),$=l("vxe-pager"),A=l("a-spin"),B=l("Info");return m(),_("div",null,[q(a(k,{class:"mb-15"},{default:o(()=>[a(h,{gutter:[15,15]},{default:o(()=>[a(s,{xs:24,sm:12,md:8,lg:6,xl:4},{default:o(()=>[a(r,{value:t.table.search.vm.tableName,"onUpdate:value":e[0]||(e[0]=i=>t.table.search.vm.tableName=i),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),a(s,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:o(()=>[a(d,{type:"primary",class:"mr-15",onClick:t.findList},{default:o(()=>[Z]),_:1},8,["onClick"]),a(d,{class:"mr-15",onClick:t.onResetSearch},{default:o(()=>[ee]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[G,t.table.search.state]]),a(k,null,{default:o(()=>[a(h,{gutter:[15,15]},{default:o(()=>[a(s,{xs:24,sm:24,md:12,lg:12,xl:12},{default:o(()=>[t.power.search?(m(),S(d,{key:0,class:"mr-15",onClick:e[1]||(e[1]=i=>t.table.search.state=!t.table.search.state)},{default:o(()=>[t.table.search.state?(m(),_("div",te,[a(f,{name:"UpOutlined"}),ae])):(m(),_("div",oe,[a(f,{name:"DownOutlined"}),ne]))]),_:1})):I("",!0),a(d,{type:"primary",class:"mr-15",onClick:e[2]||(e[2]=i=>t.createDataDictionary())},{icon:o(()=>[a(f,{name:"DownloadOutlined"})]),default:o(()=>[se]),_:1})]),_:1}),a(s,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"})]),_:1}),a(A,{spinning:t.table.loading},{default:o(()=>[a(P,{class:"mt-15",ref:"refTable",size:"medium",border:"",stripe:"",data:t.table.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0}},{default:o(()=>[a(p,{type:"checkbox",width:"60"}),a(p,{field:"schema",title:"\u6570\u636E\u5E93\u7A7A\u95F4"}),a(p,{field:"name",title:"\u8868\u540D\u79F0"}),a(p,{field:"comment",title:"\u8868\u5907\u6CE8"}),a(p,{field:"type",title:"\u8868\u7C7B\u578B"}),a(p,{field:"id",title:"\u64CD\u4F5C"},{default:o(({row:i})=>[D("a",{href:"javascript:void(0)",onClick:F=>t.openForm(i.name)},"\u67E5\u770B\u4EE3\u7801",8,le),a(x,{type:"vertical"}),t.power.delete?(m(),S(L,{key:0,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:F=>t.deleteList(i.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[re]),_:2},1032,["onConfirm"])):I("",!0)]),_:1})]),_:1},8,["data"]),a($,{class:"mt-15",background:"","current-page":t.table.page,"onUpdate:current-page":e[3]||(e[3]=i=>t.table.page=i),"page-size":t.table.rows,"onUpdate:page-size":e[4]||(e[4]=i=>t.table.rows=i),total:t.table.total,"page-sizes":t.table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:t.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1}),a(B,{ref:"refForm",onOnSuccess:e[5]||(e[5]=()=>t.findList())},null,512)])}var fe=H(Y,[["render",ie]]);export{fe as default};
