var j=Object.defineProperty,J=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var $=(t,e,r)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,F=(t,e)=>{for(var r in e||(e={}))M.call(e,r)&&$(t,r,e[r]);if(S)for(var r of S(e))q.call(e,r)&&$(t,r,e[r]);return t},I=(t,e)=>J(t,U(e));import{d as H,h as G,r as g,v as K,t as Q,i as l,o as p,p as h,A as X,B as Y,l as o,j as n,c as f,e as v,k as A,q as c}from"./vendor-c8880a38.js";import{_ as Z,A as ee,u as te,r as oe,t as ne}from"./index-a85a7896.js";import{I as ae,s as L}from"./Info-7e26459d.js";import le from"./RoleFunction-2cb9e2dc.js";import se from"./RoleDataAuthority-c17e1518.js";import"./organizationService-45cde57e.js";const ie=H({name:"system_role",components:{AppIcons:ee,Info:ae,RoleFunction:le,RoleDataAuthority:se},setup(){const t=te(),e=G({table:{search:{state:!1,fieldCount:2,vm:{name:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}}),r=g(null),b=g(null),k=g(null),y=g(null),w=t.getPowerByMenuId(oe.currentRoute.value.meta.menuId),d={onChange(a){const{currentPage:s,pageSize:u}=a;e.table.page=s==0?1:s,e.table.rows=u,d.findList()},onResetSearch(){e.table.page=1;let a=e.table.search.vm;for(let s in a)a[s]=null;d.findList()},findList(){e.table.loading=!0,L.findList(e.table.rows,e.table.page,e.table.search.vm).then(a=>{let s=a.data;e.table.loading=!1,e.table.page=s.page,e.table.rows=s.size,e.table.total=s.total,e.table.data=s.dataSource})},deleteList(a){let s=[];a?s.push(a):s=k.value.getCheckboxRecords().map(u=>u.id),L.deleteList(s).then(u=>{u.code==1&&(ne.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),d.findList())})},openForm(a){r.value.openForm({visible:!0,key:a})},exportExcel(){L.exportExcel(e.table.search.vm)},openRoleFunctionWindow(a){b.value.openWindow({visible:!0,key:a})},openRoleDataAuthorityWindow(a){y.value.openWindow({visible:!0,key:a})}};return K(()=>{d.findList()}),I(F(F({},Q(e)),d),{power:w,refTable:k,refForm:r,refRoleFunction:b,refRoleDataAuthority:y})}}),re={class:"p-24"},de=c("\u67E5\u8BE2"),pe=c("\u91CD\u7F6E"),ce={key:0},ue=c("\xA0\xA0\u6536\u8D77"),me={key:1},fe=c("\xA0\xA0\u5C55\u5F00"),_e=c(" \u65B0\u5EFA "),ve=c(" \u6279\u91CF\u5220\u9664 "),ge=c("\u5BFC\u51FA Excel"),he=c(" \u66F4\u591A\u64CD\u4F5C "),be=c("\u9501\u5B9A"),ke=c("\u4E0D\u9501\u5B9A"),ye=["onClick"],we=A("a",{class:"text-danger"},"\u5220\u9664",-1),Ce=["onClick"],Re=["onClick"];function Fe(t,e,r,b,k,y){const w=l("a-input"),d=l("a-col"),a=l("a-button"),s=l("a-row"),u=l("a-card"),_=l("AppIcons"),z=l("a-popconfirm"),T=l("a-menu-item"),P=l("a-menu"),O=l("a-dropdown"),m=l("vxe-column"),D=l("a-tag"),C=l("a-divider"),x=l("vxe-table"),N=l("vxe-pager"),B=l("a-spin"),W=l("Info"),E=l("RoleFunction"),V=l("RoleDataAuthority");return p(),h("div",re,[X(o(u,{class:"mb-24"},{default:n(()=>[o(s,{gutter:[24,24]},{default:n(()=>[o(d,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[o(w,{value:t.table.search.vm.name,"onUpdate:value":e[0]||(e[0]=i=>t.table.search.vm.name=i),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),o(d,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:n(()=>[o(a,{type:"primary",class:"mr-24",onClick:t.findList},{default:n(()=>[de]),_:1},8,["onClick"]),o(a,{class:"mr-24",onClick:t.onResetSearch},{default:n(()=>[pe]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[Y,t.table.search.state]]),o(u,null,{default:n(()=>[o(s,{gutter:[24,24]},{default:n(()=>[o(d,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[t.power.search?(p(),f(a,{key:0,class:"mr-24",onClick:e[1]||(e[1]=i=>t.table.search.state=!t.table.search.state)},{default:n(()=>[t.table.search.state?(p(),h("div",ce,[o(_,{name:"UpOutlined"}),ue])):(p(),h("div",me,[o(_,{name:"DownOutlined"}),fe]))]),_:1})):v("",!0),t.power.insert?(p(),f(a,{key:1,type:"primary",class:"mr-24",onClick:e[2]||(e[2]=i=>t.openForm())},{icon:n(()=>[o(_,{name:"PlusOutlined"})]),default:n(()=>[_e]),_:1})):v("",!0),t.power.delete?(p(),f(z,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:e[3]||(e[3]=i=>t.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[o(a,{type:"danger",class:"mr-24"},{icon:n(()=>[o(_,{name:"DeleteOutlined"})]),default:n(()=>[ve]),_:1})]),_:1})):v("",!0)]),_:1}),o(d,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:n(()=>[o(O,null,{overlay:n(()=>[o(P,null,{default:n(()=>[o(T,{key:"1",onClick:t.exportExcel},{default:n(()=>[ge]),_:1},8,["onClick"])]),_:1})]),default:n(()=>[o(a,null,{default:n(()=>[he,o(_,{name:"DownOutlined"})]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{spinning:t.table.loading},{default:n(()=>[o(x,{class:"mt-24",ref:"refTable",size:"medium",border:"",stripe:"",resizable:"",data:t.table.data,"row-config":{isHover:!0}},{default:n(()=>[o(m,{type:"checkbox",width:"60"}),o(m,{field:"number",title:"\u7F16\u53F7",width:"100"}),o(m,{field:"name",title:"\u89D2\u8272\u540D\u79F0"}),o(m,{field:"deleteLock",title:"\u5220\u9664\u9501\u5B9A"},{default:n(({row:i})=>[i.deleteLock?(p(),f(D,{key:0,color:"success"},{default:n(()=>[be]),_:1})):(p(),f(D,{key:1,color:"warning"},{default:n(()=>[ke]),_:1}))]),_:1}),o(m,{field:"remark",title:"\u5907\u6CE8"}),o(m,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"}),o(m,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"}),o(m,{field:"id",title:"\u64CD\u4F5C",width:"300"},{default:n(({row:i})=>[t.power.update?(p(),h("a",{key:0,href:"javascript:void(0)",onClick:R=>t.openForm(i.id)},"\u7F16\u8F91",8,ye)):v("",!0),o(C,{type:"vertical"}),t.power.delete?(p(),f(z,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:R=>t.deleteList(i.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[we]),_:2},1032,["onConfirm"])):v("",!0),o(C,{type:"vertical"}),A("a",{href:"javascript:void(0)",onClick:R=>t.openRoleFunctionWindow(i.id)},"\u529F\u80FD\u6743\u9650",8,Ce),o(C,{type:"vertical"}),A("a",{href:"javascript:void(0)",onClick:R=>t.openRoleDataAuthorityWindow(i.id)},"\u6570\u636E\u6743\u9650",8,Re)]),_:1})]),_:1},8,["data"]),o(N,{class:"mt-24",background:"","current-page":t.table.page,"onUpdate:current-page":e[4]||(e[4]=i=>t.table.page=i),"page-size":t.table.rows,"onUpdate:page-size":e[5]||(e[5]=i=>t.table.rows=i),total:t.table.total,"page-sizes":t.table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:t.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1}),o(W,{ref:"refForm",onOnSuccess:e[6]||(e[6]=()=>t.findList())},null,512),o(E,{ref:"refRoleFunction"},null,512),o(V,{ref:"refRoleDataAuthority"},null,512)])}var Te=Z(ie,[["render",Fe]]);export{Te as default};
