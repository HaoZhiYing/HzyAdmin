var V=Object.defineProperty,A=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var L=(e,a,r)=>a in e?V(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,h=(e,a)=>{for(var r in a||(a={}))D.call(a,r)&&L(e,r,a[r]);if(z)for(var r of z(a))F.call(a,r)&&L(e,r,a[r]);return e},$=(e,a)=>A(e,B(a));import{p as v,_ as J,y as M,A as q,b as j,i as x,r as E,a as I,z as H,c as u,j as S,d as G,L as K,M as Q,f as t,w as n,q as W,C as X,n as m,k as N,t as w,e as Y}from"./index-29f07e0f.js";const C="admin/low_code_table_info";var y={findList(e,a,r={}){return v(`${C}/findList/${e}/${a}`,r,!1)},deleteList(e){return e&&e.length===0?tools.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):v(`${C}/deleteList`,e,!1)},synchronization(e){return v(`${C}/synchronization/${e}`,null,!1)},change(e){return v(`${C}/change`,e,!1)}};const Z=M({name:"LowCode-ColumnIndex",components:{AppIcon:q},setup(e,a){const r=j(),{params:k}=x.currentRoute.value,{id:T,title:P}=k,l=E({table:{search:{state:!1,vm:{name:null,low_Code_TableId:T}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]},title:""}),f=I(null),c=I(null),b=r.getPowerByMenuId(x.currentRoute.value.meta.menuId),p={onChange(s){const{currentPage:i,pageSize:g}=s;l.table.page=i==0?1:i,l.table.rows=g,p.findList()},onResetSearch(){l.table.page=1;let s=l.table.search.vm;for(let i in s)i!="low_Code_TableId"&&(s[i]=null);p.findList()},findList(){l.table.loading=!0,y.findList(l.table.rows,l.table.page,l.table.search.vm).then(s=>{let i=s.data;l.table.loading=!1,l.table.page=i.page,l.table.rows=i.size,l.table.total=i.total,l.table.data=i.dataSource})},deleteList(s){let i=[];s?i.push(s):i=c.value.getCheckboxRecords().map(g=>g.id),y.deleteList(i).then(g=>{g.code==1&&(w.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),p.findList())})},openForm(s){f.value.openForm({visible:!0,key:s})},synchronization(){y.synchronization(l.table.search.vm.low_Code_TableId).then(s=>{w.message("\u540C\u6B65\u6210\u529F!","\u6210\u529F"),p.findList()})},change(){y.change(l.table.data).then(s=>{w.message("\u6570\u636E\u53D8\u66F4\u6210\u529F!","\u6210\u529F"),p.findList()})},loadData(s){l.table.search.vm.low_Code_TableId=s.id,p.findList()}};return a.expose(h({},p)),$(h(h({},H(l)),p),{power:b,refForm:f,refTable:c})}}),ee=m("\u67E5\u8BE2"),te=m("\u91CD\u7F6E"),ae=m(" \u68C0\u7D22 "),ne=m(" \u540C\u6B65\u5B57\u6BB5 "),le=m(" \u63D0\u4EA4\u66F4\u6539 "),oe=m(" \u6279\u91CF\u5220\u9664 "),se=Y("a",{class:"text-danger"},"\u5220\u9664",-1);function ie(e,a,r,k,T,P){const l=u("a-input"),f=u("a-col"),c=u("a-button"),b=u("a-row"),p=u("a-card"),s=u("AppIcon"),i=u("a-popconfirm"),g=u("a-space"),d=u("vxe-column"),U=u("vxe-table"),O=u("vxe-pager"),R=u("a-spin");return S(),G("div",null,[K(t(p,{class:"mb-15"},{default:n(()=>[t(b,{gutter:[15,15]},{default:n(()=>[t(f,{xs:24,sm:12,md:8,lg:6,xl:4},{default:n(()=>[t(l,{value:e.table.search.vm.name,"onUpdate:value":a[0]||(a[0]=o=>e.table.search.vm.name=o),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),t(f,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:n(()=>[t(c,{type:"primary",class:"mr-15",onClick:e.findList},{default:n(()=>[ee]),_:1},8,["onClick"]),t(c,{class:"mr-15",onClick:e.onResetSearch},{default:n(()=>[te]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[Q,e.table.search.state]]),t(p,null,{default:n(()=>[t(b,{gutter:[15,15]},{default:n(()=>[t(f,{xs:24,sm:24,md:12,lg:12,xl:12},{default:n(()=>[t(g,{size:15},{default:n(()=>[e.power.search?(S(),W(c,{key:0,onClick:a[1]||(a[1]=o=>e.table.search.state=!e.table.search.state)},{icon:n(()=>[t(s,{name:e.table.search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:n(()=>[ae]),_:1})):X("",!0),t(i,{title:"\u60A8\u786E\u5B9A\u8981\u66F4\u65B0\u8868\u5417?\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931",onConfirm:a[2]||(a[2]=o=>e.synchronization()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[t(c,{type:"primary"},{icon:n(()=>[t(s,{name:"ReloadOutlined"})]),default:n(()=>[ne]),_:1})]),_:1}),t(i,{title:"\u60A8\u786E\u5B9A\u8981\u63D0\u4EA4\u66F4\u6539?",onConfirm:a[3]||(a[3]=o=>e.change()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[t(c,{type:"primary"},{icon:n(()=>[t(s,{name:"PlusOutlined"})]),default:n(()=>[le]),_:1})]),_:1}),t(i,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:a[4]||(a[4]=o=>e.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[t(c,{type:"danger"},{icon:n(()=>[t(s,{name:"DeleteOutlined"})]),default:n(()=>[oe]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"})]),_:1}),t(R,{spinning:e.table.loading},{default:n(()=>[t(U,{class:"mt-15",ref:"refTable",size:"medium",border:"",stripe:"",data:e.table.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0},"edit-config":{trigger:"click",mode:"cell"}},{default:n(()=>[t(d,{type:"seq",width:"60"}),t(d,{type:"checkbox",width:"60"}),t(d,{field:"columnName",title:"\u5217\u540D\u79F0"}),t(d,{field:"describe",title:"\u5217\u663E\u793A\u540D\u79F0","edit-render":{}},{default:n(({row:o})=>[m(N(o.describe),1)]),edit:n(({row:o})=>[t(l,{value:o.describe,"onUpdate:value":_=>o.describe=_,placeholder:"\u5217\u663E\u793A\u540D\u79F0"},null,8,["value","onUpdate:value"])]),_:1}),t(d,{field:"databaseColumnType",title:"\u6570\u636E\u5E93\u5B57\u6BB5\u7C7B\u578B"}),t(d,{field:"csType",title:"C#\u6570\u636E\u7C7B\u578B"}),t(d,{field:"csField",title:"C#\u5B57\u6BB5\u540D\u79F0"}),t(d,{field:"isPrimary",title:"\u662F\u5426\u4E3B\u952E"}),t(d,{field:"isIdentity",title:"\u662F\u5426\u81EA\u589E"}),t(d,{field:"isNullable",title:"\u80FD\u5426\u4E3Anull"}),t(d,{field:"position",title:"\u4F4D\u7F6E","edit-render":{}},{default:n(({row:o})=>[m(N(o.position),1)]),edit:n(({row:o})=>[t(l,{value:o.position,"onUpdate:value":_=>o.position=_,placeholder:"\u4F4D\u7F6E"},null,8,["value","onUpdate:value"])]),_:1}),t(d,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"}),t(d,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"}),t(d,{field:"id",title:"\u64CD\u4F5C"},{default:n(({row:o})=>[t(i,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:_=>e.deleteList(o.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:n(()=>[se]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),t(O,{background:"","current-page":e.table.page,"onUpdate:current-page":a[5]||(a[5]=o=>e.table.page=o),"page-size":e.table.rows,"onUpdate:page-size":a[6]||(a[6]=o=>e.table.rows=o),total:e.table.total,"page-sizes":e.table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:e.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1})])}var ue=J(Z,[["render",ie]]);export{ue as default};
