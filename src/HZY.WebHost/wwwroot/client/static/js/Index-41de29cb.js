import{p as v,b as M,r as j,a as w,i as A,o as q,c as r,j as b,d as E,L as H,M as G,l as o,f as e,w as a,q as L,A as h,C as z,n as u,k as N,e as O,t as T,T as K}from"./index-b52f3bf0.js";import Q from"./ColumnIndex-4d7cf809.js";const x="admin/Low_Code_Table";var y={findList(p,k,t={}){return v(`${x}/findList/${p}/${k}`,t,!1)},deleteList(p){return p&&p.length===0?tools.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):v(`${x}/deleteList`,p,!1)},synchronization(){return v(`${x}/synchronization`,null,!1)},change(p){return v(`${x}/change`,p,!1)}};const W=u("\u67E5\u8BE2"),X=u("\u91CD\u7F6E"),Y=u(" \u68C0\u7D22 "),Z=u(" \u540C\u6B65\u8868 "),ee=u(" \u63D0\u4EA4\u66F4\u6539 "),te=u(" \u6279\u91CF\u5220\u9664 "),ae=["onClick"],ne=O("a",{class:"text-danger"},"\u5220\u9664",-1),le={name:"LowCode"},ie=Object.assign(le,{setup(p){const k=M(),t=j({table:{search:{state:!1,vm:{name:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]},visible:!1}),I=w(null),$=w(null),S=w(null),C=k.getPowerByMenuId(A.currentRoute.value.meta.menuId),i={onChange(s){const{currentPage:n,pageSize:d}=s;t.table.page=n==0?1:n,t.table.rows=d,i.findList()},onResetSearch(){t.table.page=1;let s=t.table.search.vm;for(let n in s)s[n]=null;i.findList()},findList(){t.table.loading=!0,y.findList(t.table.rows,t.table.page,t.table.search.vm).then(s=>{let n=s.data;t.table.loading=!1,t.table.page=n.page,t.table.rows=n.size,t.table.total=n.total,t.table.data=n.dataSource})},deleteList(s){let n=[];s?n.push(s):n=$.value.getCheckboxRecords().map(d=>d.id),y.deleteList(n).then(d=>{d.code==1&&(T.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),i.findList())})},openForm(s){I.value.openForm({visible:!0,key:s})},synchronization(){y.synchronization().then(s=>{T.message("\u540C\u6B65\u6210\u529F!","\u6210\u529F"),i.findList()})},change(){console.log(t.table.data),y.change(t.table.data).then(s=>{T.message("\u6570\u636E\u53D8\u66F4\u6210\u529F!","\u6210\u529F"),i.findList()})},loadColumnIndex(s){t.visible=!0,K(()=>{S.value.loadData(s)})}};return q(()=>{i.findList()}),(s,n)=>{const d=r("a-input"),_=r("a-col"),f=r("a-button"),U=r("a-row"),P=r("a-card"),g=r("a-popconfirm"),B=r("a-space"),c=r("vxe-column"),D=r("a-divider"),R=r("vxe-table"),V=r("vxe-pager"),F=r("a-spin"),J=r("a-drawer");return b(),E("div",null,[H(e(P,{class:"mb-15"},{default:a(()=>[e(U,{gutter:[15,15]},{default:a(()=>[e(_,{xs:24,sm:12,md:8,lg:6,xl:4},{default:a(()=>[e(d,{value:o(t).table.search.vm.name,"onUpdate:value":n[0]||(n[0]=l=>o(t).table.search.vm.name=l),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),e(_,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:a(()=>[e(f,{type:"primary",class:"mr-15",onClick:i.findList},{default:a(()=>[W]),_:1},8,["onClick"]),e(f,{class:"mr-15",onClick:i.onResetSearch},{default:a(()=>[X]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[G,o(t).table.search.state]]),e(P,null,{default:a(()=>[e(U,{gutter:[15,15]},{default:a(()=>[e(_,{xs:24,sm:24,md:12,lg:12,xl:12},{default:a(()=>[e(B,{size:15},{default:a(()=>[o(C).search?(b(),L(f,{key:0,onClick:n[1]||(n[1]=l=>o(t).table.search.state=!o(t).table.search.state)},{icon:a(()=>[e(h,{name:o(t).table.search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:a(()=>[Y]),_:1})):z("",!0),e(g,{title:"\u60A8\u786E\u5B9A\u8981\u66F4\u65B0\u8868\u5417?\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931",onConfirm:n[2]||(n[2]=l=>i.synchronization()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(f,{type:"primary"},{icon:a(()=>[e(h,{name:"ReloadOutlined"})]),default:a(()=>[Z]),_:1})]),_:1}),e(g,{title:"\u60A8\u786E\u5B9A\u8981\u63D0\u4EA4\u66F4\u6539?",onConfirm:n[3]||(n[3]=l=>i.change()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(f,{type:"primary"},{icon:a(()=>[e(h,{name:"PlusOutlined"})]),default:a(()=>[ee]),_:1})]),_:1}),o(C).delete?(b(),L(g,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:n[4]||(n[4]=l=>i.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[e(f,{type:"danger"},{icon:a(()=>[e(h,{name:"DeleteOutlined"})]),default:a(()=>[te]),_:1})]),_:1})):z("",!0)]),_:1})]),_:1}),e(_,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"})]),_:1}),e(F,{spinning:o(t).table.loading},{default:a(()=>[e(R,{class:"mt-15",ref_key:"refTable",ref:$,size:"medium",border:"",stripe:"",data:o(t).table.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0},"edit-config":{trigger:"click",mode:"cell"}},{default:a(()=>[e(c,{type:"seq",width:"60"}),e(c,{type:"checkbox",width:"60"}),e(c,{field:"tableName",title:"\u8868\u540D\u79F0"}),e(c,{field:"displayName",title:"\u663E\u793A\u540D\u79F0","edit-render":{}},{default:a(({row:l})=>[u(N(l.displayName),1)]),edit:a(({row:l})=>[e(d,{value:l.displayName,"onUpdate:value":m=>l.displayName=m,placeholder:"\u663E\u793A\u540D\u79F0"},null,8,["value","onUpdate:value"])]),_:1}),e(c,{field:"entityName",title:"\u5B9E\u4F53\u540D\u79F0","edit-render":{}},{default:a(({row:l})=>[u(N(l.entityName),1)]),edit:a(({row:l})=>[e(d,{value:l.entityName,"onUpdate:value":m=>l.entityName=m,placeholder:"\u5B9E\u4F53\u540D\u79F0"},null,8,["value","onUpdate:value"])]),_:1}),e(c,{field:"remark",title:"\u5907\u6CE8","edit-render":{}},{default:a(({row:l})=>[u(N(l.remark),1)]),edit:a(({row:l})=>[e(d,{value:l.remark,"onUpdate:value":m=>l.remark=m,placeholder:"\u5907\u6CE8"},null,8,["value","onUpdate:value"])]),_:1}),e(c,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4",width:"120px"}),e(c,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4",width:"120px"}),e(c,{field:"id",title:"\u64CD\u4F5C",width:"120px"},{default:a(({row:l})=>[O("a",{href:"javascript:void(0)",onClick:m=>i.loadColumnIndex(l)}," \u7F16\u8F91\u5217 ",8,ae),e(D,{type:"vertical"}),o(C).delete?(b(),L(g,{key:0,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:m=>i.deleteList(l.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:a(()=>[ne]),_:2},1032,["onConfirm"])):z("",!0)]),_:1})]),_:1},8,["data"]),e(V,{background:"","current-page":o(t).table.page,"onUpdate:current-page":n[5]||(n[5]=l=>o(t).table.page=l),"page-size":o(t).table.rows,"onUpdate:page-size":n[6]||(n[6]=l=>o(t).table.rows=l),total:o(t).table.total,"page-sizes":o(t).table.pageSizeOptions,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:i.onChange},null,8,["current-page","page-size","total","page-sizes","onPageChange"])]),_:1},8,["spinning"])]),_:1}),e(J,{width:"90%",title:"\u5217\u914D\u7F6E",placement:"right",visible:o(t).visible,onClose:n[7]||(n[7]=l=>o(t).visible=!o(t).visible)},{extra:a(()=>[]),default:a(()=>[e(Q,{ref_key:"refColumnIndex",ref:S},null,512)]),_:1},8,["visible"])])}}});export{ie as default};
