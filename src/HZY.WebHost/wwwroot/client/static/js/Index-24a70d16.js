import{b as h,r as b,a as m,i as y,o as k,c,j as C,d as D,f as o,w as n,A as L,l as d,e as w,n as p}from"./index-4fa9c7f3.js";import S from"./List-e8043418.js";import{I as x,s as f}from"./Info-616438ef.js";import"./MdEditorShowCode-7e7fa553.js";const N=p(" \u4E0B\u8F7D\u6570\u636E\u5E93\u8BBE\u8BA1(Excel) "),O=p("\u91CD\u7F6E"),F=["onClick"],I={name:"code_generation_index"},$=Object.assign(I,{setup(B){const _=h(),e=b({search:{state:!1,vm:{tableName:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}),u=m(null),v=m(null);_.getPowerByMenuId(y.currentRoute.value.meta.menuId);const s={onChange(a){const{currentPage:t,pageSize:l}=a;e.page=t==0?1:t,e.rows=l,s.findList()},onResetSearch(){e.page=1;let a=e.search.vm;for(let t in a)a[t]=null;s.findList()},findList(){e.loading=!0,f.findList(e.rows,e.page,e.search.vm).then(a=>{let t=a.data;e.loading=!1,e.page=t.page,e.rows=t.size,e.total=t.total,e.data=t.dataSource})},openForm(a){u.value.openForm({visible:!0,key:a})},createDataDictionary(){f.createDataDictionary()}};return k(()=>{s.findList()}),(a,t)=>{const l=c("a-button"),g=c("a-input"),r=c("vxe-column");return C(),D("div",null,[o(S,{ref_key:"refList",ref:v,tableData:d(e),onOnChange:s.onChange},{search:n(()=>[]),"toolbar-left":n(()=>[o(l,{type:"primary",class:"mr-15",onClick:t[0]||(t[0]=i=>a.createDataDictionary())},{icon:n(()=>[o(L,{name:"DownloadOutlined"})]),default:n(()=>[N]),_:1})]),"toolbar-right":n(()=>[o(g,{value:d(e).search.vm.tableName,"onUpdate:value":t[1]||(t[1]=i=>d(e).search.vm.tableName=i),placeholder:"\u540D\u79F0",onKeyup:s.findList},null,8,["value","onKeyup"]),o(l,{onClick:s.onResetSearch},{default:n(()=>[O]),_:1},8,["onClick"])]),"table-col-default":n(()=>[o(r,{field:"schema",title:"\u6570\u636E\u5E93\u7A7A\u95F4"}),o(r,{field:"name",title:"\u8868\u540D\u79F0"}),o(r,{field:"comment",title:"\u8868\u5907\u6CE8"}),o(r,{field:"type",title:"\u8868\u7C7B\u578B"}),o(r,{field:"id",title:"\u64CD\u4F5C"},{default:n(({row:i})=>[w("a",{href:"javascript:void(0)",onClick:V=>s.openForm(i.name)},"\u67E5\u770B\u4EE3\u7801",8,F)]),_:1})]),_:1},8,["tableData","onOnChange"]),o(x,{ref_key:"refForm",ref:u,onOnSuccess:t[2]||(t[2]=()=>a.findList())},null,512)])}}});export{$ as default};
