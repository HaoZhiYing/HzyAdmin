import{aT as w,p as h,t as F,r as Q,a as z,I as q,j as s,T as E,k as p,q as g,w as t,g as n,L as P,C as x,A as C,n as u,e as Y,d as I}from"./index-3c68c560.js";import G from"./AppIconList-ddf4e0f1.js";const b="admin/SysMenu";var M={getMenus(){return w(`${b}/getMenus`)},findList(m,U,$={}){return h(`${b}/findList/${m}/${U}`,$,!1)},deleteList(m){return console.log(m),m&&m.length===0?F.message("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u6570\u636E!","\u8B66\u544A"):h(`${b}/deleteList`,m,!1)},findForm(m){return w(`${b}/findForm${m?"/"+m:""}`)},saveForm(m){return m.id?h(`${b}/update`,m):h(`${b}/create`,m)},getMenusFunctionTree(){return w(`${b}/getMenusFunctionTree`)},getAll(m={}){return h(`${b}/getAll`,m,!1)}};const H=u("\u63D0\u4EA4"),J=u("\u5173\u95ED"),W=u("\u76EE\u5F55"),X=u("\u83DC\u5355"),Z=u(" \u83DC\u5355\u8DEF\u7531 \xA0\xA0 "),ee=u("\u8DF3\u8F6C\u5916\u90E8\u5730\u5740\u4F7F\u7528\u6B64\u8868\u8FBE\u5F0F\uFF1A/external/jump/:path(.*) \u3002\u5E76\u4E14\u8981\u5728\u8DF3\u8F6C\u5730\u5740\u586B\u4E0A\u5916\u90E8\u7F51\u5740"),te=u(" \u8DF3\u8F6C\u5730\u5740 \xA0\xA0 "),ne=u("\u8DF3\u8F6C\u5730\u5740\uFF08\u4E0D\u586B\u9ED8\u8BA4\u4F7F\u7528 \u83DC\u5355\u8DEF\u7531\u5730\u5740\uFF09\u652F\u6301 http\u3001https"),le=I("a",{href:"https://next.antdv.com/components/icon-cn",target:"black"}," \u56FE\u6807\uFF08\u8BF7\u4F7F\u7528AntdV 3.0 \u5B98\u65B9icon\uFF09 ",-1),oe=u(" \u663E\u793A\u72B6\u6001\xA0"),ae=I("span",{class:"text-danger"},"\u9690\u85CF\u540E\u6B64\u83DC\u5355\u5C31\u53D8\u6210\u4E86\u8DEF\u7531",-1),ue=u("\xA0 "),se=u(" \u9690\u85CF\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u4F46\u662F\u8DEF\u7531\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D "),ie=u("\u663E\u793A"),me=u("\u9690\u85CF"),de=u(" \u83DC\u5355\u72B6\u6001 \xA0\xA0 "),re=u("\u505C\u7528\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u5E76\u4E14\u8DEF\u7531\u4E5F\u4E0D\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D"),fe=u("\u6B63\u5E38"),ve=u("\u505C\u7528"),_e=u("\u662F"),ce=u("\u5426"),pe=u("\u662F"),ge=u("\u5426"),be=u("\u79FB\u9664"),ye={class:"text-center p-15"},xe=u("\u6DFB\u52A0\u4E00\u884C"),Fe=u("\u4F7F\u7528\u9ED8\u8BA4\u529F\u80FD\u96C6"),ke=u("\u4F7F\u7528\u663E\u793A\u529F\u80FD"),he={__name:"Info",emits:["onSuccess"],setup(m,{expose:U,emit:$}){const e=Q({vm:{id:"",form:{},allFunctions:[],menuFunctionList:[]},visible:!1,saveLoading:!1,parentId:null,checkAll:!1,indeterminate:!1,activeKey:z("1"),iconFormcVisible:!1}),v={findForm(){e.saveLoading=!0,M.findForm(e.vm.id).then(a=>{e.saveLoading=!1,a.code==1&&(e.vm=a.data)})},saveForm(){if(e.vm.form.type==2&&e.vm.menuFunctionList.length==0)return F.message("\u8BF7\u8BBE\u7F6E\u529F\u80FD\u6A21\u5757!","\u8B66\u544A");if(e.vm.form.type==2&&e.vm.menuFunctionList.length>0){var a=e.vm.menuFunctionList;for(let l=0;l<a.length;l++){const i=a[l];if(!i.number)return F.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${l+1}\u884C \u8BF7\u586B\u5199\u5E8F\u53F7!`,"\u8B66\u544A");if(!i.functionCode)return F.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${l+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u7F16\u7801!`,"\u8B66\u544A");if(!i.functionName)return F.message(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${l+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u540D\u79F0!`,"\u8B66\u544A")}}e.saveLoading=!0,e.vm.form.parentId=e.parentId?e.parentId:null,M.saveForm(e.vm).then(l=>{e.saveLoading=!1,l.code==1&&(F.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),$("onSuccess",l.data),e.visible=!1)})},openForm({visible:a,key:l,parentId:i}){e.visible=a,a&&(e.vm.id=l,e.parentId=i,v.findForm())},onCheckAllChange(a){a.target.checked?e.vm.functionIds=e.vm.allFunctions.map(l=>l.id):e.vm.functionIds=[]},functionToMenuFunction(a){return{number:a.number,menuId:e.vm.id?e.vm.id:0,functionCode:a.byName,functionName:a.name,remark:a.remark}},defaultRows(){e.vm.menuFunctionList=[],e.vm.allFunctions.forEach(a=>{v.addRow(v.functionToMenuFunction(a))})},defaultDisplayRows(){e.vm.menuFunctionList=[];var a=e.vm.allFunctions.filter(l=>l.byName=="Display");a.length>0&&e.vm.menuFunctionList.push(v.functionToMenuFunction(a[0]))},removeRow(a){var l=e.vm.menuFunctionList;e.vm.menuFunctionList=[];for(let i=0;i<l.length;i++){const f=l[i];i!=a&&e.vm.menuFunctionList.push(f)}},addRow(a){a?e.vm.menuFunctionList.push(a):(e.vm.menuFunctionList.push({number:0,menuId:e.vm.id?e.vm.id:0,functionCode:"",functionName:"",remark:""}),console.log(e.vm.menuFunctionList))}};return q(()=>e.vm.functionIds,a=>{e.indeterminate=!!a.length&&a.length<e.vm.allFunctions.length,e.checkAll=a.length===e.vm.allFunctions.length}),U({...v}),(a,l)=>{const i=s("a-button"),f=s("a-radio"),k=s("a-radio-group"),r=s("a-form-item"),d=s("a-col"),_=s("a-input"),L=s("a-tooltip"),S=s("a-input-search"),N=s("a-modal"),V=s("a-row"),T=s("a-form"),A=s("a-tab-pane"),y=s("a-table-column"),O=s("a-input-number"),j=s("a-popconfirm"),D=s("a-table"),K=s("a-tabs"),R=s("a-spin"),B=E("drag");return p(),g(N,{visible:e.visible,"onUpdate:visible":l[21]||(l[21]=o=>e.visible=o),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:l[22]||(l[22]=o=>e.visible=!1),width:"1000px",bodyStyle:{overflowY:"auto",height:"calc(100vh - 150px)"}},{footer:t(()=>[n(i,{type:"primary",onClick:l[0]||(l[0]=o=>v.saveForm()),loading:e.saveLoading},{default:t(()=>[H]),_:1},8,["loading"]),n(i,{type:"danger",ghost:"",onClick:l[1]||(l[1]=o=>e.visible=!1),class:"ml-15"},{default:t(()=>[J]),_:1})]),default:t(()=>[P((p(),g(R,{spinning:e.saveLoading},{default:t(()=>[n(K,{activeKey:e.activeKey,"onUpdate:activeKey":l[20]||(l[20]=o=>e.activeKey=o)},{default:t(()=>[n(A,{key:"1",tab:"\u57FA\u7840\u6570\u636E\u8BBE\u7F6E"},{default:t(()=>[n(T,{layout:"vertical",model:e.vm.form},{default:t(()=>[n(V,{gutter:[15,15]},{default:t(()=>[n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u9009\u9879\u7C7B\u578B"},{default:t(()=>[n(k,{value:e.vm.form.type,"onUpdate:value":l[2]||(l[2]=o=>e.vm.form.type=o)},{default:t(()=>[n(f,{value:1},{default:t(()=>[W]),_:1}),n(f,{value:2},{default:t(()=>[X]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u83DC\u5355Id"},{default:t(()=>[n(_,{value:e.vm.form.id,"onUpdate:value":l[3]||(l[3]=o=>e.vm.form.id=o),placeholder:"\u8BF7\u8F93\u5165",readonly:""},null,8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u7F16\u53F7"},{default:t(()=>[n(_,{value:e.vm.form.number,"onUpdate:value":l[4]||(l[4]=o=>e.vm.form.number=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u83DC\u5355\u540D\u79F0"},{default:t(()=>[n(_,{value:e.vm.form.name,"onUpdate:value":l[5]||(l[5]=o=>e.vm.form.name=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),e.vm.form.type==2?(p(),g(d,{key:0,xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u7EC4\u4EF6\u540D\u79F0"},{default:t(()=>[n(_,{value:e.vm.form.componentName,"onUpdate:value":l[6]||(l[6]=o=>e.vm.form.componentName=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):x("",!0),e.vm.form.type==2?(p(),g(d,{key:1,xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u83DC\u5355\u9875\u9762\u7269\u7406\u5730\u5740"},{default:t(()=>[n(_,{value:e.vm.form.url,"onUpdate:value":l[7]||(l[7]=o=>e.vm.form.url=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):x("",!0),e.vm.form.type==2?(p(),g(d,{key:2,xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,null,{label:t(()=>[Z,n(L,null,{title:t(()=>[ee]),default:t(()=>[n(C,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:t(()=>[n(_,{value:e.vm.form.router,"onUpdate:value":l[8]||(l[8]=o=>e.vm.form.router=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):x("",!0),e.vm.form.type==2?(p(),g(d,{key:3,xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,null,{label:t(()=>[te,n(L,null,{title:t(()=>[ne]),default:t(()=>[n(C,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:t(()=>[n(_,{value:e.vm.form.jumpUrl,"onUpdate:value":l[9]||(l[9]=o=>e.vm.form.jumpUrl=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):x("",!0),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,null,{label:t(()=>[le]),default:t(()=>[n(S,{value:e.vm.form.icon,"onUpdate:value":l[10]||(l[10]=o=>e.vm.form.icon=o),placeholder:"\u8BF7\u8F93\u5165",onSearch:l[11]||(l[11]=o=>e.iconFormcVisible=!e.iconFormcVisible)},{enterButton:t(()=>[n(C,{name:e.vm.form.icon},null,8,["name"])]),_:1},8,["value"]),n(N,{visible:e.iconFormcVisible,"onUpdate:visible":l[14]||(l[14]=o=>e.iconFormcVisible=o),title:"\u56FE\u6807\u5E93",width:"100%","wrap-class-name":"full-modal",footer:!1},{default:t(()=>[n(G,{name:e.vm.form.icon,"onUpdate:name":l[12]||(l[12]=o=>e.vm.form.icon=o),onOnChangeName:l[13]||(l[13]=()=>e.iconFormcVisible=!e.iconFormcVisible)},null,8,["name"])]),_:1},8,["visible"])]),_:1})]),_:1}),e.vm.form.type==2?(p(),g(d,{key:4,xs:24},{default:t(()=>[n(V,{style:{width:"100%"}},{default:t(()=>[n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,null,{label:t(()=>[oe,ae,ue,n(L,null,{title:t(()=>[se]),default:t(()=>[n(C,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:t(()=>[n(k,{value:e.vm.form.show,"onUpdate:value":l[15]||(l[15]=o=>e.vm.form.show=o)},{default:t(()=>[n(f,{value:!0},{default:t(()=>[ie]),_:1}),n(f,{value:!1},{default:t(()=>[me]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,null,{label:t(()=>[de,n(L,null,{title:t(()=>[re]),default:t(()=>[n(C,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:t(()=>[n(k,{value:e.vm.form.state,"onUpdate:value":l[16]||(l[16]=o=>e.vm.form.state=o)},{default:t(()=>[n(f,{value:!0},{default:t(()=>[fe]),_:1}),n(f,{value:!1},{default:t(()=>[ve]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u662F\u5426\u7F13\u5B58\u7EC4\u4EF6"},{default:t(()=>[n(k,{value:e.vm.form.keepAlive,"onUpdate:value":l[17]||(l[17]=o=>e.vm.form.keepAlive=o)},{default:t(()=>[n(f,{value:!0},{default:t(()=>[_e]),_:1}),n(f,{value:!1},{default:t(()=>[ce]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),n(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[n(r,{label:"\u9009\u9879\u5361\u80FD\u5426\u5173\u95ED"},{default:t(()=>[n(k,{value:e.vm.form.close,"onUpdate:value":l[18]||(l[18]=o=>e.vm.form.close=o)},{default:t(()=>[n(f,{value:!0},{default:t(()=>[pe]),_:1}),n(f,{value:!1},{default:t(()=>[ge]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1},8,["model"])]),_:1}),e.vm.form.type==2?(p(),g(A,{key:"2",tab:"\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E","force-render":""},{default:t(()=>[n(D,{"data-source":e.vm.menuFunctionList,size:"small",pagination:!1},{default:t(()=>[n(y,{key:"index",title:"\u7D22\u5F15"},{default:t(({index:o})=>[u(Y(o+1),1)]),_:1}),n(y,{key:"number",title:"\u5E8F\u53F7","data-index":"number"},{default:t(({record:o})=>[n(O,{value:o.number,"onUpdate:value":c=>o.number=c,min:1,max:500},null,8,["value","onUpdate:value"])]),_:1}),n(y,{key:"functionCode",title:"\u529F\u80FD\u7F16\u7801","data-index":"functionCode"},{default:t(({record:o})=>[n(_,{value:o.functionCode,"onUpdate:value":c=>o.functionCode=c,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),n(y,{key:"functionName",title:"\u529F\u80FD\u540D\u79F0","data-index":"functionName"},{default:t(({record:o})=>[n(_,{value:o.functionName,"onUpdate:value":c=>o.functionName=c,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),n(y,{key:"remark",title:"\u5907\u6CE8","data-index":"remark"},{default:t(({record:o})=>[n(_,{value:o.remark,"onUpdate:value":c=>o.remark=c,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),n(y,{key:"action",title:"\u64CD\u4F5C"},{default:t(({index:o})=>[n(j,{title:"\u786E\u5B9A\u8981\u79FB\u9664\u5417\uFF1F","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:c=>v.removeRow(o)},{default:t(()=>[n(i,{type:"link",danger:""},{default:t(()=>[be]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data-source"]),I("div",ye,[n(i,{type:"primary",onClick:l[19]||(l[19]=o=>v.addRow())},{default:t(()=>[xe]),_:1}),n(i,{class:"ml-15",onClick:v.defaultRows},{default:t(()=>[Fe]),_:1},8,["onClick"]),n(i,{class:"ml-15",onClick:v.defaultDisplayRows},{default:t(()=>[ke]),_:1},8,["onClick"])])]),_:1})):x("",!0)]),_:1},8,["activeKey"])]),_:1},8,["spinning"])),[[B]])]),_:1},8,["visible","title","bodyStyle"])}}};var Ue=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{Ue as I,he as _,M as s};
