import{_}from"./AppIcon.vue_vue_type_script_setup_true_lang-66731724.js";import{_ as U}from"./Info.vue_vue_type_script_setup_true_lang-98b9f983.js";import{d as b,y as L,C as y,q as O,r as s,o as B,e as V,w as u,a as e,i as d,c as N,u as I,f as C,m as v}from"./index-07368c36.js";import{_ as M}from"./PageContainer.vue_vue_type_script_setup_true_lang-660ebdad.js";import{_ as j}from"./TableCurd.vue_vue_type_script_setup_true_lang-e38ba039.js";import{L as E}from"./CodeLoadToProject.vue_vue_type_script_setup_true_lang-2c883e15.js";import{C as q}from"./CodeGenerationService-ecc2a711.js";import"./Columns.vue_vue_type_script_setup_true_lang-0571499a.js";import"./CodeGeneration.vue_vue_type_script_setup_true_lang-5ab411cc.js";const G=C("span",{class:"text-danger"},"\u8BF7\u5728\u6570\u636E\u5E93\u4E2D\u5EFA\u8868\u3002\u5728\u6B64\u754C\u9762\u70B9\u51FB\u626B\u63CF\u65B0\u8868\uFF0C\u7136\u540E\u5728\u6B64\u754C\u9762\u914D\u7F6E\u8868\u4FE1\u606F\u540E\u70B9\u51FB\u63D0\u4EA4\u53D8\u66F4\u4FDD\u5B58\u6570\u636E\u5373\u53EF!",-1),K={key:0},R={key:1},H=["onClick"],J=C("a",{class:"text-danger"},"\u5220\u9664",-1),P=b({name:"LowCode"}),oe=b({...P,setup(Q){const a=L({search:{state:!1,vm:{tableName:void 0,entityName:void 0,displayName:void 0},sort:[]},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),D=y(),x=y(),g=y();O(()=>{i()});async function i(){a.loading=!0;const l=await E.findList(a.page,a.size,a.search.vm,a.search.sort);a.loading=!1,l.code==1&&(a.page=l.data.page,a.size=l.data.size,a.total=l.data.total,a.columns=l.data.columns,a.data=l.data.dataSource)}async function A(l){var p,m;let n=[];if(l?n.push(l):n=(m=(p=D.value)==null?void 0:p.getSelectedRowKeys())!=null?m:[],n.length==0)return v.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const r=await E.deleteList(n);a.loading=!1,r.code==1&&(v.message.success("\u5220\u9664\u6210\u529F!"),i())}function h(){E.synchronization().then(l=>{v.message.success("\u540C\u6B65\u6210\u529F!"),i()})}function w(){E.change(a.data).then(l=>{v.message.success("\u6570\u636E\u53D8\u66F4\u6210\u529F!"),i()})}return(l,n)=>{const r=s("a-input"),p=s("a-form-item"),m=s("a-col"),c=s("a-button"),z=s("a-space"),S=s("a-row"),T=s("a-form"),F=s("a-popconfirm"),f=s("a-table-column"),$=s("a-divider");return B(),V(M,null,{describe:u(()=>[G]),default:u(()=>[e(j,{ref_key:"refTableCurd",ref:D,config:a,onChange:n[10]||(n[10]=t=>{var o,k;a.page=(o=t.pagination.current)!=null?o:1,a.size=(k=t.pagination.pageSize)!=null?k:a.size,a.search.sort=t.sorter instanceof Array?[...t.sorter]:[t.sorter],i()}),onShowSizeChange:n[11]||(n[11]=({current:t,size:o})=>{a.page=t==0?1:t,a.size=o,i()})},{search:u(()=>[e(T,{ref_key:"refSearchForm",ref:g,model:a.search.vm},{default:u(()=>[e(S,{gutter:[16,0]},{default:u(()=>[e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"tableName",label:"\u8868\u540D\u79F0"},{default:u(()=>[e(r,{value:a.search.vm.tableName,"onUpdate:value":n[0]||(n[0]=t=>a.search.vm.tableName=t),placeholder:"\u8868\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"entityName",label:"\u5B9E\u4F53\u540D\u79F0"},{default:u(()=>[e(r,{value:a.search.vm.entityName,"onUpdate:value":n[1]||(n[1]=t=>a.search.vm.entityName=t),placeholder:"\u5B9E\u4F53\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"displayName",label:"\u663E\u793A\u540D\u79F0"},{default:u(()=>[e(r,{value:a.search.vm.displayName,"onUpdate:value":n[2]||(n[2]=t=>a.search.vm.displayName=t),placeholder:"\u663E\u793A\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:u(()=>[e(z,{size:8},{default:u(()=>[e(c,{onClick:n[3]||(n[3]=t=>{var o;a.page=1,(o=g.value)==null||o.resetFields(),i()})},{default:u(()=>[d(" \u91CD\u7F6E ")]),_:1}),e(c,{type:"primary",onClick:n[4]||(n[4]=t=>{a.page=1,i()})},{default:u(()=>[d(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),"toolbar-left":u(()=>[e(c,{onClick:n[5]||(n[5]=t=>a.search.state=!a.search.state)},{default:u(()=>[a.search.state?(B(),N("div",K,[e(_,{name:"UpOutlined"}),d("\xA0\xA0\u6536\u8D77")])):(B(),N("div",R,[e(_,{name:"DownOutlined"}),d("\xA0\xA0\u5C55\u5F00")]))]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u66F4\u65B0\u8868\u5417?\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931",onConfirm:n[6]||(n[6]=t=>h()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary"},{icon:u(()=>[e(_,{name:"scan-outlined"})]),default:u(()=>[d(" \u626B\u63CF\u65B0\u8868 ")]),_:1})]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u63D0\u4EA4\u66F4\u6539?",onConfirm:n[7]||(n[7]=t=>w()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary"},{icon:u(()=>[e(_,{name:"check-outlined"})]),default:u(()=>[d(" \u63D0\u4EA4\u53D8\u66F4 ")]),_:1})]),_:1}),e(c,{type:"primary",onClick:n[8]||(n[8]=()=>I(q).createDataDictionary())},{icon:u(()=>[e(_,{name:"cloud-download-outlined"})]),default:u(()=>[d(" \u4E0B\u8F7D\u6570\u636E\u5E93\u8868\u8BBE\u8BA1 ")]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:n[9]||(n[9]=t=>A()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary",danger:""},{icon:u(()=>[e(_,{name:"DeleteOutlined"})]),default:u(()=>[d(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})]),"toolbar-right":u(()=>[]),"table-col":u(()=>[e(f,{title:"\u8868\u540D\u79F0","data-index":"tableName"}),e(f,{title:"\u663E\u793A\u540D\u79F0","data-index":"displayName"},{default:u(({record:t})=>[e(r,{value:t.displayName,"onUpdate:value":o=>t.displayName=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u5B9E\u4F53\u540D\u79F0","data-index":"entityName"},{default:u(({record:t})=>[e(r,{value:t.entityName,"onUpdate:value":o=>t.entityName=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u5907\u6CE8","data-index":"remark"},{default:u(({record:t})=>[e(r,{value:t.remark,"onUpdate:value":o=>t.remark=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime",width:"120px"}),e(f,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime",width:"120px"}),e(f,{title:"\u64CD\u4F5C","data-index":"id"},{default:u(({record:t})=>[C("a",{href:"javascript:;",onClick:()=>{var o;return(o=x.value)==null?void 0:o.open(t)}},"\u914D\u7F6E",8,H),e($,{type:"vertical"}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:o=>A(t.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[J]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["config"]),e(U,{ref_key:"refInfo",ref:x,onSuccess:()=>i()},null,8,["onSuccess"])]),_:1})}}});export{oe as default};
