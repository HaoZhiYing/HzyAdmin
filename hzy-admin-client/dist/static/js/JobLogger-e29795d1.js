import{r as b,K as k,o as x,j as n,k as t,c as r,g as i,w as s,F as p,x as M,q as l,C,n as u,t as L}from"./index-3c68c560.js";import{s as S}from"./timedTaskService-f5c2971d.js";const v=u(" \u9996\u9875 "),y={key:0,style:{textAlign:"center",marginTop:"12px",height:"32px",lineHeight:"32px"}},w=u(" \u66F4\u591A... "),z={__name:"JobLogger",props:{formId:String},setup(_){const f=_,e=b({vm:k(()=>f.formId),loading:!0,loadingMore:!1,showLoadingMore:!0,table:{page:1,size:20},dataSource:[],input:"1",timer:void 0}),o={getloginfo(){e.loading=!0,S.getJobLoggers(e.vm,e.table.page,e.table.size).then(a=>{a.data.length>0?e.table.page==1?e.dataSource=a.data.concat(e.dataSource):e.dataSource=e.dataSource.concat(a.data):(L.message("\u672A\u67E5\u8BE2\u5230\u6570\u636E"),e.showLoadingMore=!1)}).finally(()=>{e.loading=!1,e.loadingMore=!1})},onLoadMore(){e.loadingMore=!0,e.table.page+=1,o.getloginfo(e.table.page)},firstPage(){e.table.page=1,e.dataSource=[],o.getloginfo()}};return x(()=>{o.getloginfo()}),(a,B)=>{const c=n("a-button"),m=n("a-step"),d=n("a-spin"),h=n("a-steps");return t(),r(p,null,[i(c,{class:"mb-15",onClick:o.firstPage},{default:s(()=>[v]),_:1},8,["onClick"]),i(d,{spinning:e.loading},{default:s(()=>[i(h,{"progress-dot":"",direction:"vertical"},{default:s(()=>[(t(!0),r(p,null,M(e.dataSource,g=>(t(),l(m,{key:g.id,status:"process",title:g.text},null,8,["title"]))),128)),e.showLoadingMore?(t(),r("div",y,[e.loadingMore?(t(),l(d,{key:0})):(t(),l(c,{key:1,onClick:o.onLoadMore},{default:s(()=>[w]),_:1},8,["onClick"]))])):C("",!0)]),_:1})]),_:1},8,["spinning"])],64)}}};export{z as default};
