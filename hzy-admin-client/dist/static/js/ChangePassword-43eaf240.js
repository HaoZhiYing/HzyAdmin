import{a as g,r as P,j as o,k as b,q as x,w as s,g as e,n as p,t as i}from"./index-3c68c560.js";import{s as q}from"./personal_center_service-c1915079.js";const y=p("\u63D0\u4EA4"),k=p("\u91CD\u7F6E"),h={name:"system_change_password"},j=Object.assign(h,{setup(C){const m=g(null),a=P({vm:{oldPassword:"",newPassword:"",qrPassword:""}}),w={oldPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801",trigger:"blur"},{min:3,max:20,message:"\u957F\u5EA6\u5728 3 \u81F3 20 \u4E4B\u95F4",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:"blur"},{min:3,max:20,message:"\u957F\u5EA6\u5728 3 \u81F3 20 \u4E4B\u95F4",trigger:"blur"}],qrPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u65B0\u5BC6\u7801",trigger:"blur"},{min:3,max:20,message:"\u957F\u5EA6\u5728 3 \u81F3 20 \u4E4B\u95F4",trigger:"blur"}]},_={saveForm(){m.value.validate().then(()=>{if(a.vm.newPassword!=a.vm.qrPassword)return i.message("\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4!","\u8B66\u544A");q.changePassword(a.vm).then(l=>{l.code==1&&i.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F")})}).catch(l=>{console.log("error",l)})},resetForm(){m.value.resetFields()}};return(l,r)=>{const u=o("a-input"),n=o("a-form-item"),d=o("a-col"),c=o("a-button"),f=o("a-row"),v=o("a-form");return b(),x(v,{layout:"vertical",ref_key:"formRef",ref:m,model:a.vm,rules:w},{default:s(()=>[e(f,{gutter:[15,15]},{default:s(()=>[e(d,{xs:24},{default:s(()=>[e(n,{label:"\u65E7\u5BC6\u7801",name:"oldPassword"},{default:s(()=>[e(u,{value:a.vm.oldPassword,"onUpdate:value":r[0]||(r[0]=t=>a.vm.oldPassword=t),type:"password",placeholder:"\u65E7\u5BC6\u7801"},null,8,["value"])]),_:1})]),_:1}),e(d,{xs:24},{default:s(()=>[e(n,{label:"\u65B0\u5BC6\u7801",name:"newPassword"},{default:s(()=>[e(u,{value:a.vm.newPassword,"onUpdate:value":r[1]||(r[1]=t=>a.vm.newPassword=t),type:"password",placeholder:"\u65B0\u5BC6\u7801"},null,8,["value"])]),_:1})]),_:1}),e(d,{xs:24},{default:s(()=>[e(n,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801",name:"qrPassword"},{default:s(()=>[e(u,{value:a.vm.qrPassword,"onUpdate:value":r[2]||(r[2]=t=>a.vm.qrPassword=t),type:"password",placeholder:"\u786E\u8BA4\u65B0\u5BC6\u7801"},null,8,["value"])]),_:1})]),_:1}),e(d,{xs:24},{default:s(()=>[e(n,{"wrapper-col":{span:14}},{default:s(()=>[e(c,{type:"primary",onClick:_.saveForm},{default:s(()=>[y]),_:1},8,["onClick"]),e(c,{style:{"margin-left":"10px"},onClick:_.resetForm},{default:s(()=>[k]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});export{j as default};
