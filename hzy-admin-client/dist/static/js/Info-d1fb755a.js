import{_ as B,r as D,a as V,j as n,T as $,k as i,q as _,w as l,g as a,L as P,c as y,x as w,F as L,n as u,aV as I,t as z,aS as j,e as F}from"./index-3c68c560.js";import{o as E}from"./organizationService-73a6c5a7.js";const H=u("\u63D0\u4EA4"),A=u("\u5173\u95ED"),G=u("\u9501\u5B9A"),J=u("\u4E0D\u9501\u5B9A"),K={__name:"Info",emits:["onSuccess"],setup(M,{expose:U,emit:T}){const e=D({vm:{id:"",form:{},roleIds:[],allRoleList:[],allPostList:[]},visible:!1,saveLoading:!1,organizationTree:[]}),p=V(null),N={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D",trigger:"blur"}],loginName:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",trigger:"blur"}]},v={findForm(){return e.saveLoading=!0,I.findForm(e.vm.id).then(s=>{e.saveLoading=!1,s.code==1&&(e.vm=s.data,e.vm.form.password="")})},saveForm(){if(!e.vm.form.organizationId)return z.message("\u8BF7\u9009\u62E9\u7EC4\u7EC7","\u8B66\u544A");p.value.validate().then(()=>{e.saveLoading=!0,I.saveForm(e.vm).then(s=>{s.code==1&&(z.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),T("onSuccess",s.data),e.visible=!1)}).finally(()=>{e.saveLoading=!1})})},openForm({visible:s,key:o,organizationId:f}){e.visible=s,s&&(e.vm.id=o,j(()=>{p.value.resetFields(),v.sysOrganizationTree()}),v.findForm().then(m=>{o||(e.vm.form.organizationId=f)}))},sysOrganizationTree(){E.sysOrganizationTree().then(s=>{e.organizationTree=s.data.rows})}};return U({...v}),(s,o)=>{const f=n("a-button"),m=n("a-input"),d=n("a-form-item"),r=n("a-col"),S=n("a-tree-select"),x=n("a-radio"),h=n("a-radio-group"),b=n("a-checkbox"),g=n("a-row"),k=n("a-checkbox-group"),C=n("a-form"),O=n("a-spin"),R=n("a-modal"),q=$("drag");return i(),_(R,{visible:e.visible,"onUpdate:visible":o[11]||(o[11]=t=>e.visible=t),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:o[12]||(o[12]=t=>e.visible=!1),width:800},{footer:l(()=>[a(f,{type:"primary",onClick:o[0]||(o[0]=t=>v.saveForm()),loading:e.saveLoading},{default:l(()=>[H]),_:1},8,["loading"]),a(f,{type:"danger",ghost:"",onClick:o[1]||(o[1]=t=>e.visible=!1),class:"ml-15"},{default:l(()=>[A]),_:1})]),default:l(()=>[P((i(),_(O,{spinning:e.saveLoading},{default:l(()=>[a(C,{ref_key:"formRef",ref:p,layout:"vertical",model:e.vm.form,rules:N},{default:l(()=>[a(g,{gutter:[15,15]},{default:l(()=>[a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u771F\u5B9E\u59D3\u540D",ref:"name",name:"name"},{default:l(()=>[a(m,{value:e.vm.form.name,"onUpdate:value":o[2]||(o[2]=t=>e.vm.form.name=t),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u8D26\u6237\u540D\u79F0",ref:"loginName",name:"loginName"},{default:l(()=>[a(m,{value:e.vm.form.loginName,"onUpdate:value":o[3]||(o[3]=t=>e.vm.form.loginName=t),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u8D26\u6237\u5BC6\u7801"},{default:l(()=>[a(m,{value:e.vm.form.password,"onUpdate:value":o[4]||(o[4]=t=>e.vm.form.password=t),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:l(()=>[a(m,{value:e.vm.form.phone,"onUpdate:value":o[5]||(o[5]=t=>e.vm.form.phone=t),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u90AE\u7BB1\u5730\u5740"},{default:l(()=>[a(m,{value:e.vm.form.email,"onUpdate:value":o[6]||(o[6]=t=>e.vm.form.email=t),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u6240\u5C5E\u7EC4\u7EC7"},{default:l(()=>[a(S,{value:e.vm.form.organizationId,"onUpdate:value":o[7]||(o[7]=t=>e.vm.form.organizationId=t),"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"\u6240\u5C5E\u7EC4\u7EC7","allow-clear":"","tree-default-expand-all":"","tree-data":e.organizationTree,"field-names":{children:"children",label:"title",key:"key",value:"key"}},null,8,["value","tree-data"])]),_:1})]),_:1}),a(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(d,{label:"\u5220\u9664\u9501\u5B9A"},{default:l(()=>[a(h,{value:e.vm.form.deleteLock,"onUpdate:value":o[8]||(o[8]=t=>e.vm.form.deleteLock=t)},{default:l(()=>[a(x,{value:!0},{default:l(()=>[G]),_:1}),a(x,{value:!1},{default:l(()=>[J]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[a(d,{label:"\u6240\u5C5E\u5C97\u4F4D"},{default:l(()=>[a(k,{value:e.vm.postIds,"onUpdate:value":o[9]||(o[9]=t=>e.vm.postIds=t),class:"w100"},{default:l(()=>[a(g,{gutter:[16,16]},{default:l(()=>[(i(!0),y(L,null,w(e.vm.allPostList,(t,c)=>(i(),_(r,{span:6,key:c},{default:l(()=>[a(b,{value:t.id},{default:l(()=>[u(F(t.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(r,{xs:24},{default:l(()=>[a(d,{label:"\u6240\u5C5E\u89D2\u8272"},{default:l(()=>[a(k,{value:e.vm.roleIds,"onUpdate:value":o[10]||(o[10]=t=>e.vm.roleIds=t),class:"w100"},{default:l(()=>[a(g,{gutter:[16,16]},{default:l(()=>[(i(!0),y(L,null,w(e.vm.allRoleList,(t,c)=>(i(),_(r,{span:6,key:c},{default:l(()=>[a(b,{value:t.id},{default:l(()=>[u(F(t.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])),[[q]])]),_:1},8,["visible","title"])}}};var X=B(K,[["__scopeId","data-v-3c051b42"]]);export{X as default};
