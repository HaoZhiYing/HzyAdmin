import{b as E,r as I,a as h,l as V,o as j,c as d,m as r,d as D,h as e,w as t,g as c,q as u,A as k,z as _,e as L,n as i,t as N}from"./index-1d940afe.js";import z from"./List-69c5a1a0.js";import{I as M,s as x}from"./Info-988083dc.js";import P from"./RoleFunction-746723d6.js";import U from"./RoleDataAuthority-3baa794c.js";import"./organizationService-51ec941a.js";const K=i("\u67E5\u8BE2"),q=i("\u91CD\u7F6E"),G=i(" \u9AD8\u7EA7\u68C0\u7D22 "),H=i(" \u65B0\u5EFA "),J=i(" \u6279\u91CF\u5220\u9664 "),Q=i("\u5BFC\u51FA Excel"),X=i(" \u66F4\u591A\u64CD\u4F5C "),Y=i("\u81EA\u5B9A\u4E49\u6743\u9650"),Z=i("\u67E5\u770B\u6240\u6709\u6570\u636E"),ee=i("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7"),te=i("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7\u548C\u4E0B\u5C5E\u7EC4\u7EC7"),oe=i("\u4EC5\u67E5\u770B\u672C\u4EBA"),ne=i("\u9501\u5B9A"),se=i("\u4E0D\u9501\u5B9A"),ae=["onClick"],le=L("a",{class:"text-danger"},"\u5220\u9664",-1),ie=["onClick"],re=["onClick"],ce={name:"system_role"},ye=Object.assign(ce,{setup(de){const $=E(),n=I({search:{state:!1,fieldCount:2,vm:{name:null}},loading:!1,rows:10,page:1,total:0,data:[],columns:[]}),w=h(null),b=h(null),T=h(null),R=h(null),y=$.getPowerByMenuId(V.currentRoute.value.meta.menuId),a={onChange(l){const{currentPage:o,pageSize:m}=l;n.page=o==0?1:o,n.rows=m,a.findList()},onResetSearch(){n.page=1;let l=n.search.vm;for(let o in l)l[o]=null;a.findList()},findList(){n.loading=!0,x.findList(n.rows,n.page,n.search.vm).then(l=>{let o=l.data;n.loading=!1,n.page=o.page,n.rows=o.size,n.total=o.total,n.data=o.dataSource})},deleteList(l){let o=[];l?o.push(l):o=b.value.table.getCheckboxRecords().map(m=>m.id),x.deleteList(o).then(m=>{m.code==1&&(N.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),a.findList())})},openForm(l){w.value.openForm({visible:!0,key:l})},exportExcel(){x.exportExcel(n.search.vm)},openRoleFunctionWindow(l){T.value.openWindow({visible:!0,key:l})},openRoleDataAuthorityWindow(l){R.value.openWindow({visible:!0,key:l})}};return j(()=>{a.findList()}),(l,o)=>{const m=d("a-input"),F=d("a-col"),v=d("a-button"),S=d("a-row"),O=d("a-popconfirm"),A=d("a-menu-item"),W=d("a-menu"),B=d("a-dropdown"),p=d("vxe-column"),f=d("a-tag"),g=d("a-divider");return r(),D("div",null,[e(z,{ref_key:"refList",ref:b,tableData:c(n),onOnChange:a.onChange},{search:t(()=>[e(S,{gutter:[15,15]},{default:t(()=>[e(F,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[e(m,{value:c(n).search.vm.name,"onUpdate:value":o[0]||(o[0]=s=>c(n).search.vm.name=s),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),e(F,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:t(()=>[e(v,{type:"primary",class:"mr-15",onClick:a.findList},{default:t(()=>[K]),_:1},8,["onClick"]),e(v,{class:"mr-15",onClick:a.onResetSearch},{default:t(()=>[q]),_:1},8,["onClick"])]),_:1})]),_:1})]),toolbar:t(()=>[e(m,{value:c(n).search.vm.name,"onUpdate:value":o[1]||(o[1]=s=>c(n).search.vm.name=s),placeholder:"\u540D\u79F0",onKeyup:a.findList},null,8,["value","onKeyup"]),c(y).search?(r(),u(v,{key:0,onClick:o[2]||(o[2]=s=>c(n).search.state=!c(n).search.state)},{icon:t(()=>[e(k,{name:c(n).search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:t(()=>[G]),_:1})):_("",!0),c(y).insert?(r(),u(v,{key:1,type:"primary",onClick:o[3]||(o[3]=s=>a.openForm())},{icon:t(()=>[e(k,{name:"PlusOutlined"})]),default:t(()=>[H]),_:1})):_("",!0),c(y).delete?(r(),u(O,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:o[4]||(o[4]=s=>a.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[e(v,{type:"danger"},{icon:t(()=>[e(k,{name:"DeleteOutlined"})]),default:t(()=>[J]),_:1})]),_:1})):_("",!0),e(B,null,{overlay:t(()=>[e(W,null,{default:t(()=>[e(A,{key:"1",onClick:a.exportExcel},{default:t(()=>[Q]),_:1},8,["onClick"])]),_:1})]),default:t(()=>[e(v,null,{default:t(()=>[X,e(k,{name:"DownOutlined"})]),_:1})]),_:1})]),"table-col-default":t(()=>[e(p,{field:"number",title:"\u7F16\u53F7",width:"100"}),e(p,{field:"name",title:"\u89D2\u8272\u540D\u79F0"}),e(p,{field:"permissionType",title:"\u6570\u636E\u6743\u9650"},{default:t(({row:s})=>[s.permissionType==1?(r(),u(f,{key:0,color:"success"},{default:t(()=>[Y]),_:1})):_("",!0),s.permissionType==2?(r(),u(f,{key:1,color:"success"},{default:t(()=>[Z]),_:1})):_("",!0),s.permissionType==3?(r(),u(f,{key:2,color:"success"},{default:t(()=>[ee]),_:1})):_("",!0),s.permissionType==4?(r(),u(f,{key:3,color:"success"},{default:t(()=>[te]),_:1})):_("",!0),s.permissionType==5?(r(),u(f,{key:4,color:"success"},{default:t(()=>[oe]),_:1})):_("",!0)]),_:1}),e(p,{field:"deleteLock",title:"\u5220\u9664\u9501\u5B9A"},{default:t(({row:s})=>[s.deleteLock?(r(),u(f,{key:0,color:"success"},{default:t(()=>[ne]),_:1})):(r(),u(f,{key:1,color:"warning"},{default:t(()=>[se]),_:1}))]),_:1}),e(p,{field:"remark",title:"\u5907\u6CE8"}),e(p,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"}),e(p,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"}),e(p,{field:"id",title:"\u64CD\u4F5C",width:"300"},{default:t(({row:s})=>[c(y).update?(r(),D("a",{key:0,href:"javascript:void(0)",onClick:C=>a.openForm(s.id)},"\u7F16\u8F91",8,ae)):_("",!0),e(g,{type:"vertical"}),c(y).delete?(r(),u(O,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:C=>a.deleteList(s.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[le]),_:2},1032,["onConfirm"])):_("",!0),e(g,{type:"vertical"}),L("a",{href:"javascript:void(0)",onClick:C=>a.openRoleFunctionWindow(s.id)},"\u529F\u80FD\u6743\u9650",8,ie),e(g,{type:"vertical"}),L("a",{href:"javascript:void(0)",onClick:C=>a.openRoleDataAuthorityWindow(s.id)},"\u6570\u636E\u6743\u9650",8,re)]),_:1})]),_:1},8,["tableData","onOnChange"]),e(M,{ref_key:"refForm",ref:w,onOnSuccess:o[5]||(o[5]=()=>a.findList())},null,512),e(P,{ref_key:"refRoleFunction",ref:T},null,512),e(U,{ref_key:"refRoleDataAuthority",ref:R,onOnSuccess:o[6]||(o[6]=()=>a.findList())},null,512)])}}});export{ye as default};
