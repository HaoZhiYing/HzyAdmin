var G=Object.defineProperty;var J=(x,o,v)=>o in x?G(x,o,{enumerable:!0,configurable:!0,writable:!0,value:v}):x[o]=v;var V=(x,o,v)=>(J(x,typeof o!="symbol"?o+"":o,v),v);import{S as b,d as K,z as W,E as X,r as s,o as _,e as c,w as e,a as t,j as a,t as I,m as g,f as P,p as B}from"./index-4c73da82.js";import Y from"./AppIconList-7da95ab6.js";import{_ as A}from"./AppIcon.vue_vue_type_script_setup_true_lang-0270c94b.js";class U{static findList(o,v,u={}){return b.post(`${this.urlPrefix}/findList/${v}/${o}`,u)}static deleteList(o){return b.post(`${this.urlPrefix}/deleteList`,o)}static findForm(o){return b.get(`${this.urlPrefix}/findForm${o?"/"+o:""}`)}static saveForm(o,v){return b.post(`${this.urlPrefix}/${o?"update":"create"}`,v)}static exportExcel(o={}){return b.download(`${this.urlPrefix}/exportExcel`,o)}static getAll(o={}){return b.post(`${this.urlPrefix}/getAll`,o)}}V(U,"urlPrefix","/api/admin/SysMenu");const Z=P("a",{href:"https://next.antdv.com/components/icon-cn",target:"black"}," AntdV 3.0 \u5B98\u65B9icon ",-1),uu={class:"text-center p-15"},au=K({__name:"Info",props:{onSuccess:{type:Function}},setup(x,{expose:o}){const v=x,u=W({vm:{id:"",form:{},allFunctions:[],menuFunctionList:[]},visible:!1,saveLoading:!1,parentId:null,checkAll:!1,indeterminate:!1,iconFormVisible:!1}),k=X();o({open:(i="",l="")=>{var d;u.visible=!0,u.visible&&(u.vm.id=i),(d=k.value)==null||d.resetFields(),u.parentId=l,u.saveLoading=!0,U.findForm(i).then(p=>{u.saveLoading=!1,p.code==1&&(u.vm=p.data,u.vm.menuFunctionList.length==0&&u.vm.allFunctions.length>0&&$())})}});function S(){var i;(i=k.value)==null||i.validate().then(async()=>{var p;if(u.vm.form.type==2&&u.vm.menuFunctionList.length==0)return B.message.warning("\u8BF7\u8BBE\u7F6E\u529F\u80FD\u6A21\u5757!");if(u.vm.form.type==2&&u.vm.menuFunctionList.length>0){var l=u.vm.menuFunctionList;for(let m=0;m<l.length;m++){const r=l[m];if(!r.number)return B.message.warning(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${m+1}\u884C \u8BF7\u586B\u5199\u5E8F\u53F7!`);if(!r.functionCode)return B.message.warning(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${m+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u7F16\u7801!`);if(!r.functionName)return B.message.warning(`\u529F\u80FD\u6A21\u5757\u8BBE\u7F6E\u7B2C${m+1}\u884C \u8BF7\u586B\u5199\u529F\u80FD\u540D\u79F0!`)}}u.saveLoading=!0,u.vm.form.parentId=(p=u.parentId)!=null?p:u.vm.form.parentId,(await U.saveForm(u.vm.id,u.vm)).code==1&&(B.message.success("\u64CD\u4F5C\u6210\u529F!"),v.onSuccess(),u.visible=!1)})}function L(i){return{number:i.number,menuId:u.vm.id?u.vm.id:0,functionCode:i.byName,functionName:i.name,remark:i.remark}}function $(){u.vm.menuFunctionList=[],u.vm.allFunctions.forEach(i=>{w(L(i))})}function O(){u.vm.menuFunctionList=[];var i=u.vm.allFunctions.filter(l=>l.byName=="Display");i.length>0&&u.vm.menuFunctionList.push(L(i[0]))}function j(i){var l=u.vm.menuFunctionList;u.vm.menuFunctionList=[];for(let d=0;d<l.length;d++){const p=l[d];d!=i&&u.vm.menuFunctionList.push(p)}}function w(i){i?u.vm.menuFunctionList.push(i):(u.vm.menuFunctionList.push({number:0,menuId:u.vm.id?u.vm.id:0,functionCode:"",functionName:"",remark:""}),console.log(u.vm.menuFunctionList))}return(i,l)=>{const d=s("a-button"),p=s("a-space"),m=s("a-form-item"),r=s("a-col"),f=s("a-radio"),C=s("a-radio-group"),F=s("a-input"),Q=s("a-input-search"),z=s("a-modal"),y=s("a-tooltip"),N=s("a-row"),D=s("a-table-column"),T=s("a-input-number"),M=s("a-popconfirm"),h=s("a-table"),H=s("a-form"),R=s("a-spin"),q=s("a-drawer");return _(),c(q,{visible:u.visible,"onUpdate:visible":l[23]||(l[23]=n=>u.visible=n),title:u.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:l[24]||(l[24]=n=>u.visible=!1),width:1200},{footer:e(()=>[t(p,{size:8},{default:e(()=>[t(d,{type:"primary",loading:u.saveLoading,onClick:l[0]||(l[0]=n=>S())},{default:e(()=>[a(" \u63D0\u4EA4")]),_:1},8,["loading"]),t(d,{onClick:l[1]||(l[1]=n=>u.visible=!1)},{default:e(()=>[a("\u5173\u95ED")]),_:1})]),_:1})]),default:e(()=>[t(R,{spinning:u.saveLoading},{default:e(()=>[t(H,{ref_key:"refForm",ref:k,layout:"vertical",model:u.vm.form},{default:e(()=>[t(N,{gutter:[16,0]},{default:e(()=>[t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u83DC\u5355Id"},{default:e(()=>[a(I(u.vm.form.id),1)]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u9009\u9879\u7C7B\u578B"},{default:e(()=>[t(C,{value:u.vm.form.type,"onUpdate:value":l[2]||(l[2]=n=>u.vm.form.type=n)},{default:e(()=>[t(f,{value:1},{default:e(()=>[a("\u76EE\u5F55")]),_:1}),t(f,{value:2},{default:e(()=>[a("\u83DC\u5355")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u6A21\u5F0F"},{default:e(()=>[t(C,{value:u.vm.form.mode,"onUpdate:value":l[3]||(l[3]=n=>u.vm.form.mode=n)},{default:e(()=>[t(f,{value:1},{default:e(()=>[a("\u666E\u901A")]),_:1}),t(f,{value:2},{default:e(()=>[a("\u5FAE\u524D\u7AEF")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u7F16\u53F7"},{default:e(()=>[t(F,{value:u.vm.form.number,"onUpdate:value":l[4]||(l[4]=n=>u.vm.form.number=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u83DC\u5355\u540D\u79F0"},{default:e(()=>[t(F,{value:u.vm.form.name,"onUpdate:value":l[5]||(l[5]=n=>u.vm.form.name=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,null,{label:e(()=>[a(" \u56FE\u6807\xA0\xA0"),Z]),default:e(()=>[t(Q,{value:u.vm.form.icon,"onUpdate:value":l[6]||(l[6]=n=>u.vm.form.icon=n),placeholder:"\u8BF7\u8F93\u5165",onSearch:l[7]||(l[7]=n=>u.iconFormVisible=!u.iconFormVisible)},{enterButton:e(()=>[u.vm.form.icon?(_(),c(A,{key:0,name:u.vm.form.icon},null,8,["name"])):(_(),c(A,{key:1,name:"search-outlined"}))]),_:1},8,["value"]),t(z,{visible:u.iconFormVisible,"onUpdate:visible":l[10]||(l[10]=n=>u.iconFormVisible=n),title:"\u56FE\u6807\u5E93",width:"100%","wrap-class-name":"full-modal",footer:!1},{default:e(()=>[t(Y,{name:u.vm.form.icon,"onUpdate:name":l[8]||(l[8]=n=>u.vm.form.icon=n),onOnChangeName:l[9]||(l[9]=()=>u.iconFormVisible=!u.iconFormVisible)},null,8,["name"])]),_:1},8,["visible"])]),_:1})]),_:1}),u.vm.form.type==2&&u.vm.form.mode==2?(_(),c(r,{key:0,xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u6A21\u5757\u5730\u5740"},{default:e(()=>[t(F,{value:u.vm.form.moduleUrl,"onUpdate:value":l[11]||(l[11]=n=>u.vm.form.moduleUrl=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):g("",!0),u.vm.form.type==2&&u.vm.form.mode==1?(_(),c(r,{key:1,xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u7EC4\u4EF6\u540D\u79F0"},{default:e(()=>[t(F,{value:u.vm.form.componentName,"onUpdate:value":l[12]||(l[12]=n=>u.vm.form.componentName=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):g("",!0),u.vm.form.type==2&&u.vm.form.mode==1?(_(),c(r,{key:2,xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u83DC\u5355\u9875\u9762\u7269\u7406\u5730\u5740"},{default:e(()=>[t(F,{value:u.vm.form.url,"onUpdate:value":l[13]||(l[13]=n=>u.vm.form.url=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):g("",!0),u.vm.form.type==2&&u.vm.form.mode==1?(_(),c(r,{key:3,xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,null,{label:e(()=>[a(" \u83DC\u5355\u8DEF\u7531 \xA0\xA0 "),t(y,null,{title:e(()=>[a("\u8DF3\u8F6C\u5916\u90E8\u5730\u5740\u4F7F\u7528\u6B64\u8868\u8FBE\u5F0F\uFF1A/external/jump/:path(.*) \u3002\u5E76\u4E14\u8981\u5728\u8DF3\u8F6C\u5730\u5740\u586B\u4E0A\u5916\u90E8\u7F51\u5740")]),default:e(()=>[t(A,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:e(()=>[t(F,{value:u.vm.form.router,"onUpdate:value":l[14]||(l[14]=n=>u.vm.form.router=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):g("",!0),u.vm.form.type==2&&u.vm.form.mode==1?(_(),c(r,{key:4,xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,null,{label:e(()=>[a(" \u8DF3\u8F6C\u5730\u5740 \xA0\xA0 "),t(y,null,{title:e(()=>[a("\u8DF3\u8F6C\u5730\u5740\uFF08\u4E0D\u586B\u9ED8\u8BA4\u4F7F\u7528 \u83DC\u5355\u8DEF\u7531\u5730\u5740\uFF09\u652F\u6301 http\u3001https")]),default:e(()=>[t(A,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:e(()=>[t(F,{value:u.vm.form.jumpUrl,"onUpdate:value":l[15]||(l[15]=n=>u.vm.form.jumpUrl=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1})):g("",!0),u.vm.form.type==2?(_(),c(r,{key:5,xs:24},{default:e(()=>[t(N,{style:{width:"100%"}},{default:e(()=>[t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,null,{label:e(()=>[a(" \u663E\u793A\u72B6\u6001\xA0\xA0 "),t(y,null,{title:e(()=>[a(" \u9690\u85CF\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u4F46\u662F\u8DEF\u7531\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D ")]),default:e(()=>[t(A,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:e(()=>[t(C,{value:u.vm.form.show,"onUpdate:value":l[16]||(l[16]=n=>u.vm.form.show=n)},{default:e(()=>[t(f,{value:!0},{default:e(()=>[a("\u663E\u793A")]),_:1}),t(f,{value:!1},{default:e(()=>[a("\u9690\u85CF")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,null,{label:e(()=>[a(" \u83DC\u5355\u72B6\u6001 \xA0\xA0 "),t(y,null,{title:e(()=>[a("\u505C\u7528\u540E\u83DC\u5355\u4E0D\u4F1A\u663E\u793A\u5728\u5DE6\u4FA7\u663E\u793A\uFF0C\u5E76\u4E14\u8DEF\u7531\u4E5F\u4E0D\u4F1A\u81EA\u52A8\u6DFB\u52A0\u5230\u7A0B\u5E8F\u4E2D")]),default:e(()=>[t(A,{name:"QuestionCircleOutlined",class:"text-danger"})]),_:1})]),default:e(()=>[t(C,{value:u.vm.form.state,"onUpdate:value":l[17]||(l[17]=n=>u.vm.form.state=n)},{default:e(()=>[t(f,{value:!0},{default:e(()=>[a("\u6B63\u5E38")]),_:1}),t(f,{value:!1},{default:e(()=>[a("\u505C\u7528")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u662F\u5426\u7F13\u5B58\u7EC4\u4EF6"},{default:e(()=>[t(C,{value:u.vm.form.keepAlive,"onUpdate:value":l[18]||(l[18]=n=>u.vm.form.keepAlive=n)},{default:e(()=>[t(f,{value:!0},{default:e(()=>[a("\u662F")]),_:1}),t(f,{value:!1},{default:e(()=>[a("\u5426")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),t(r,{xs:24,sm:12,md:12,lg:12,xl:6},{default:e(()=>[t(m,{label:"\u9009\u9879\u5361\u80FD\u5426\u5173\u95ED"},{default:e(()=>[t(C,{value:u.vm.form.close,"onUpdate:value":l[19]||(l[19]=n=>u.vm.form.close=n)},{default:e(()=>[t(f,{value:!0},{default:e(()=>[a("\u662F")]),_:1}),t(f,{value:!1},{default:e(()=>[a("\u5426")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})):g("",!0),t(r,{xs:24},{default:e(()=>[t(h,{"data-source":u.vm.menuFunctionList,size:"small",pagination:!1},{default:e(()=>[t(D,{key:"index",title:"\u7D22\u5F15"},{default:e(({index:n})=>[a(I(n+1),1)]),_:1}),t(D,{key:"number",title:"\u5E8F\u53F7","data-index":"number"},{default:e(({record:n})=>[t(T,{value:n.number,"onUpdate:value":E=>n.number=E,min:1,max:500},null,8,["value","onUpdate:value"])]),_:1}),t(D,{key:"functionCode",title:"\u529F\u80FD\u7F16\u7801","data-index":"functionCode"},{default:e(({record:n})=>[t(F,{value:n.functionCode,"onUpdate:value":E=>n.functionCode=E,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(D,{key:"functionName",title:"\u529F\u80FD\u540D\u79F0","data-index":"functionName"},{default:e(({record:n})=>[t(F,{value:n.functionName,"onUpdate:value":E=>n.functionName=E,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(D,{key:"remark",title:"\u5907\u6CE8","data-index":"remark"},{default:e(({record:n})=>[t(F,{value:n.remark,"onUpdate:value":E=>n.remark=E,placeholder:"\u529F\u80FD\u7F16\u7801"},null,8,["value","onUpdate:value"])]),_:1}),t(D,{key:"action",title:"\u64CD\u4F5C"},{default:e(({index:n})=>[t(M,{title:"\u786E\u5B9A\u8981\u79FB\u9664\u5417\uFF1F","ok-text":"\u662F","cancel-text":"\u5426",onConfirm:E=>j(n)},{default:e(()=>[t(d,{type:"link",danger:""},{default:e(()=>[a("\u79FB\u9664")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data-source"]),P("div",uu,[t(d,{type:"primary",onClick:l[20]||(l[20]=n=>w())},{default:e(()=>[a("\u6DFB\u52A0\u4E00\u884C")]),_:1}),t(d,{class:"ml-15",onClick:l[21]||(l[21]=n=>$())},{default:e(()=>[a("\u4F7F\u7528\u9ED8\u8BA4\u529F\u80FD\u96C6")]),_:1}),t(d,{class:"ml-15",onClick:l[22]||(l[22]=n=>O())},{default:e(()=>[a("\u4F7F\u7528\u663E\u793A\u529F\u80FD")]),_:1})])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{U as S,au as _};
