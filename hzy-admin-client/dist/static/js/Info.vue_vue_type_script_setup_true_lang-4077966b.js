import{d as N,y as O,C as $,a6 as x,r as t,o as v,e as g,w as a,a as l,i as m,c as B,j as C,t as E,F as D,m as w}from"./index-1d0f4517.js";import{S as q}from"./SysOrganizationService-6cfe0f11.js";const V=N({__name:"Info",props:{onSuccess:{type:Function}},setup(k,{expose:y}){const U=k,e=O({vm:{id:"",form:{},postIds:[],allPostList:[],roleIds:[],allRoleList:[]},visible:!1,loading:!1,organizationTree:[]}),f=$();y({open:(d="")=>{var u;e.visible=!0,e.visible&&(e.vm.id=d),(u=f.value)==null||u.resetFields(),e.loading=!0,x.findForm(d).then(s=>{e.loading=!1,s.code==1&&(e.vm=s.data,e.vm.form.password="")}),e.loading=!0,q.sysOrganizationTree().then(s=>{e.loading=!1,e.organizationTree=s.data.rows})}});function I(){var d;(d=f.value)==null||d.validate().then(async()=>{if(!e.vm.form.organizationId)return w.message.warning("\u8BF7\u9009\u62E9\u7EC4\u7EC7!");try{e.loading=!0;const u=await x.saveForm(e.vm.id,e.vm);if(e.loading=!1,u.code!=1)return;w.message.success("\u64CD\u4F5C\u6210\u529F!"),U.onSuccess(),e.visible=!1}catch{e.loading=!1}})}return(d,u)=>{const s=t("a-button"),i=t("a-input"),r=t("a-form-item"),n=t("a-col"),z=t("a-tree-select"),c=t("a-radio"),S=t("a-radio-group"),F=t("a-checkbox"),p=t("a-row"),b=t("a-checkbox-group"),L=t("a-form"),A=t("a-spin"),T=t("a-modal");return v(),g(T,{visible:e.visible,"onUpdate:visible":u[11]||(u[11]=o=>e.visible=o),title:e.vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:u[12]||(u[12]=o=>e.visible=!1),width:800},{footer:a(()=>[l(s,{type:"primary",loading:e.loading,onClick:u[0]||(u[0]=o=>I())},{default:a(()=>[m(" \u63D0\u4EA4")]),_:1},8,["loading"]),l(s,{onClick:u[1]||(u[1]=o=>e.visible=!1)},{default:a(()=>[m("\u5173\u95ED")]),_:1})]),default:a(()=>[l(A,{spinning:e.loading},{default:a(()=>[l(L,{ref_key:"refForm",ref:f,layout:"vertical",model:e.vm.form},{default:a(()=>[l(p,{gutter:[16,0]},{default:a(()=>[l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u771F\u5B9E\u59D3\u540D",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D",trigger:"blur"}]},{default:a(()=>[l(i,{value:e.vm.form.name,"onUpdate:value":u[2]||(u[2]=o=>e.vm.form.name=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u8D26\u6237\u540D\u79F0",name:"loginName",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",trigger:"blur"}]},{default:a(()=>[l(i,{value:e.vm.form.loginName,"onUpdate:value":u[3]||(u[3]=o=>e.vm.form.loginName=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u8D26\u6237\u5BC6\u7801"},{default:a(()=>[l(i,{value:e.vm.form.password,"onUpdate:value":u[4]||(u[4]=o=>e.vm.form.password=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:a(()=>[l(i,{value:e.vm.form.phone,"onUpdate:value":u[5]||(u[5]=o=>e.vm.form.phone=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u90AE\u7BB1\u5730\u5740"},{default:a(()=>[l(i,{value:e.vm.form.email,"onUpdate:value":u[6]||(u[6]=o=>e.vm.form.email=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u6240\u5C5E\u7EC4\u7EC7"},{default:a(()=>[l(z,{value:e.vm.form.organizationId,"onUpdate:value":u[7]||(u[7]=o=>e.vm.form.organizationId=o),"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"\u6240\u5C5E\u7EC4\u7EC7","allow-clear":"","tree-default-expand-all":"","tree-data":e.organizationTree,"field-names":{children:"children",label:"title",value:"key"}},null,8,["value","tree-data"])]),_:1})]),_:1}),l(n,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"\u5220\u9664\u9501\u5B9A"},{default:a(()=>[l(S,{value:e.vm.form.deleteLock,"onUpdate:value":u[8]||(u[8]=o=>e.vm.form.deleteLock=o)},{default:a(()=>[l(c,{value:!0},{default:a(()=>[m("\u9501\u5B9A")]),_:1}),l(c,{value:!1},{default:a(()=>[m("\u4E0D\u9501\u5B9A")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(n,{xs:24,sm:24,md:24,lg:24,xl:24},{default:a(()=>[l(r,{label:"\u6240\u5C5E\u5C97\u4F4D"},{default:a(()=>[l(b,{value:e.vm.postIds,"onUpdate:value":u[9]||(u[9]=o=>e.vm.postIds=o),class:"w100"},{default:a(()=>[l(p,{gutter:[16,8]},{default:a(()=>[(v(!0),B(D,null,C(e.vm.allPostList,(o,_)=>(v(),g(n,{span:6,key:_},{default:a(()=>[l(F,{value:o.id},{default:a(()=>[m(E(o.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),l(n,{xs:24},{default:a(()=>[l(r,{label:"\u6240\u5C5E\u89D2\u8272"},{default:a(()=>[l(b,{value:e.vm.roleIds,"onUpdate:value":u[10]||(u[10]=o=>e.vm.roleIds=o),class:"w100"},{default:a(()=>[l(p,{gutter:[16,8]},{default:a(()=>[(v(!0),B(D,null,C(e.vm.allRoleList,(o,_)=>(v(),g(n,{span:6,key:_},{default:a(()=>[l(F,{value:o.id},{default:a(()=>[m(E(o.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{V as _};
