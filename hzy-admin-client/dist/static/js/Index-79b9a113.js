import{d as T,z as P,a5 as K,E as h,s as R,r as u,o as s,e as d,w as e,a as t,u as m,j as r,m as k,c as x,k as q,t as G,F as H,f as J,p as S}from"./index-87b89bfd.js";import{_ as g}from"./AppIcon.vue_vue_type_script_setup_true_lang-224083f4.js";import{S as B,_ as Q}from"./Info.vue_vue_type_script_setup_true_lang-74e340d1.js";import{_ as W}from"./PageContainer.vue_vue_type_script_setup_true_lang-7c0f1843.js";import{_ as X}from"./TableCurd.vue_vue_type_script_setup_true_lang-3b5e3df4.js";const Y={key:0},Z={key:1},ee=["onClick"],te=J("a",{class:"text-danger"},"\u5220\u9664",-1),ae=T({name:"system_post"}),ie=T({...ae,setup(oe){const a=P({search:{state:!1,vm:{name:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),c=K(),E=h(),F=h(),b=h();R(()=>{_()});async function _(){a.loading=!0;const i=await B.findList(a.page,a.size,a.search.vm);a.loading=!1,i.code==1&&(a.page=i.data.page,a.size=i.data.size,a.total=i.data.total,a.columns=i.data.columns,a.data=i.data.dataSource)}async function w(i){var y,v;let n=[];if(i?n.push(i):n=(v=(y=E.value)==null?void 0:y.getSelectedRowKeys())!=null?v:[],n.length==0)return S.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const C=await B.deleteList(n);a.loading=!1,C.code==1&&(S.message.success("\u5220\u9664\u6210\u529F!"),_())}function $(){B.exportExcel(a.search.vm)}return(i,n)=>{const C=u("a-input"),y=u("a-form-item"),v=u("a-col"),f=u("a-button"),z=u("a-space"),L=u("a-row"),N=u("a-form"),A=u("a-popconfirm"),O=u("a-menu-item"),U=u("a-menu"),V=u("a-dropdown"),j=u("a-checkbox"),I=u("a-popover"),p=u("a-table-column"),D=u("a-tag"),M=u("a-divider");return s(),d(W,null,{default:e(()=>[t(X,{ref_key:"refTableCurd",ref:E,config:a,onChange:n[7]||(n[7]=({page:o,pageSize:l})=>{a.page=o==0?1:o,a.size=l,_()}),onShowSizeChange:n[8]||(n[8]=({current:o,size:l})=>{a.page=o==0?1:o,a.size=l,_()})},{search:e(()=>[m(c).search?(s(),d(N,{key:0,ref_key:"refSearchForm",ref:b,model:a.search.vm},{default:e(()=>[t(L,{gutter:[16,0]},{default:e(()=>[t(v,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(y,{class:"mb-0",name:"name",label:"\u540D\u79F0"},{default:e(()=>[t(C,{value:a.search.vm.name,"onUpdate:value":n[0]||(n[0]=o=>a.search.vm.name=o),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(v,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:e(()=>[t(z,{size:8},{default:e(()=>[t(f,{onClick:n[1]||(n[1]=o=>{var l;a.page=1,(l=b.value)==null||l.resetFields(),_()})},{default:e(()=>[r(" \u91CD\u7F6E ")]),_:1}),t(f,{type:"primary",onClick:n[2]||(n[2]=o=>{a.page=1,_()})},{default:e(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):k("",!0)]),"toolbar-left":e(()=>[m(c).search?(s(),d(f,{key:0,onClick:n[3]||(n[3]=o=>a.search.state=!a.search.state)},{default:e(()=>[a.search.state?(s(),x("div",Y,[t(g,{name:"UpOutlined"}),r("\xA0\xA0\u6536\u8D77")])):(s(),x("div",Z,[t(g,{name:"DownOutlined"}),r("\xA0\xA0\u5C55\u5F00")]))]),_:1})):k("",!0),m(c).insert?(s(),d(f,{key:1,type:"primary",onClick:n[4]||(n[4]=()=>{var o;return(o=F.value)==null?void 0:o.open()})},{icon:e(()=>[t(g,{name:"PlusOutlined"})]),default:e(()=>[r(" \u65B0\u5EFA ")]),_:1})):k("",!0),m(c).delete?(s(),d(A,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:n[5]||(n[5]=o=>w()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[t(f,{type:"primary",danger:""},{icon:e(()=>[t(g,{name:"DeleteOutlined"})]),default:e(()=>[r(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):k("",!0)]),"toolbar-right":e(()=>[t(V,null,{overlay:e(()=>[t(U,null,{default:e(()=>[t(O,{key:"1",onClick:n[6]||(n[6]=o=>$())},{default:e(()=>[r("\u5BFC\u51FA Excel")]),_:1})]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[r(" \u66F4\u591A "),t(g,{name:"ellipsis-outlined"})]),_:1})]),_:1}),t(I,null,{content:e(()=>[(s(!0),x(H,null,q(a.columns.filter(o=>o.fieldName.substr(0,1)!="_"),o=>(s(),x("div",null,[t(j,{checked:o.show,"onUpdate:checked":l=>o.show=l},{default:e(()=>[r(G(o.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),256))]),default:e(()=>[t(f,{type:"text"},{icon:e(()=>[t(g,{name:"setting-outlined"})]),_:1})]),_:1})]),"table-col":e(()=>[t(p,{title:"\u7F16\u53F7","data-index":"number"}),t(p,{title:"\u5C97\u4F4D\u7F16\u7801","data-index":"code"}),t(p,{title:"\u540D\u79F0","data-index":"name"}),t(p,{title:"\u72B6\u6001","data-index":"state"},{default:e(({record:o})=>[o.state==1?(s(),d(D,{key:0,color:"success"},{default:e(()=>[r("\u6B63\u5E38")]),_:1})):(s(),d(D,{key:1,color:"warning"},{default:e(()=>[r("\u505C\u7528")]),_:1}))]),_:1}),t(p,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),t(p,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),m(c).update||m(c).delete?(s(),d(p,{key:0,title:"\u64CD\u4F5C","data-index":"id"},{default:e(({record:o})=>[m(c).update?(s(),x("a",{key:0,href:"javascript:;",onClick:()=>{var l;return(l=F.value)==null?void 0:l.open(o.id)}},"\u7F16\u8F91",8,ee)):k("",!0),t(M,{type:"vertical"}),m(c).delete?(s(),d(A,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:l=>w(o.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[te]),_:2},1032,["onConfirm"])):k("",!0)]),_:1})):k("",!0)]),_:1},8,["config"]),t(Q,{ref_key:"refInfo",ref:F,onSuccess:()=>_()},null,8,["onSuccess"])]),_:1})}}});export{ie as default};
