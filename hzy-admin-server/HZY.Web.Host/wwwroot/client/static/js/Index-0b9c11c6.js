import{d as $,z as N,a5 as L,E,s as O,p as w,r as l,o as s,e as p,w as o,a as t,u as r,j as _,m,c as k,f as V}from"./index-87b89bfd.js";import{_ as F}from"./AppIcon.vue_vue_type_script_setup_true_lang-224083f4.js";import{S,_ as j}from"./Info.vue_vue_type_script_setup_true_lang-ba0a6503.js";import{_ as I}from"./PageContainer.vue_vue_type_script_setup_true_lang-7c0f1843.js";import{_ as U}from"./TableCurd.vue_vue_type_script_setup_true_lang-3b5e3df4.js";const M={key:0},P={key:1},q=["onClick"],G=["onClick"],H=V("a",{class:"text-danger"},"\u5220\u9664",-1),J=$({name:"system_function"}),te=$({...J,setup(Q){const a=N({search:{state:!1,vm:{name:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[],expandedRowKeys:[]}),i=L(),A=E(),x=E(),B=E();O(()=>{c()});async function c(){a.loading=!0;const f=await S.findList(a.search.vm);a.loading=!1,f.code==1&&(a.data=w.genTreeData(f.data,null),a.expandedRowKeys=f.data.map(e=>e.id))}async function D(f){var C,y;let e=[];if(f?e.push(f):e=(y=(C=A.value)==null?void 0:C.getSelectedRowKeys())!=null?y:[],e.length==0)return w.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const g=await S.deleteList(e);a.loading=!1,g.code==1&&(w.message.success("\u5220\u9664\u6210\u529F!"),c())}return(f,e)=>{const g=l("a-input"),C=l("a-form-item"),y=l("a-col"),v=l("a-button"),K=l("a-space"),R=l("a-row"),z=l("a-form"),h=l("a-popconfirm"),d=l("a-table-column"),b=l("a-divider");return s(),p(I,null,{default:o(()=>[t(U,{ref_key:"refTableCurd",ref:A,config:a,onChange:e[6]||(e[6]=({page:n,pageSize:u})=>{a.page=n==0?1:n,a.size=u,c()}),onShowSizeChange:e[7]||(e[7]=({current:n,size:u})=>{a.page=n==0?1:n,a.size=u,c()}),expandedRowKeys:a.expandedRowKeys,"onUpdate:expandedRowKeys":e[8]||(e[8]=n=>a.expandedRowKeys=n)},{search:o(()=>[r(i).search?(s(),p(z,{key:0,ref_key:"refSearchForm",ref:B,model:a.search.vm},{default:o(()=>[t(R,{gutter:[16,0]},{default:o(()=>[t(y,{xs:24,sm:12,md:8,lg:6,xl:6},{default:o(()=>[t(C,{class:"mb-0",name:"name",label:"\u540D\u79F0"},{default:o(()=>[t(g,{value:a.search.vm.name,"onUpdate:value":e[0]||(e[0]=n=>a.search.vm.name=n),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(y,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:o(()=>[t(K,{size:8},{default:o(()=>[t(v,{onClick:e[1]||(e[1]=n=>{var u;a.page=1,(u=B.value)==null||u.resetFields(),c()})},{default:o(()=>[_(" \u91CD\u7F6E ")]),_:1}),t(v,{type:"primary",onClick:e[2]||(e[2]=n=>{a.page=1,c()})},{default:o(()=>[_(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):m("",!0)]),"toolbar-left":o(()=>[r(i).search?(s(),p(v,{key:0,onClick:e[3]||(e[3]=n=>a.search.state=!a.search.state)},{default:o(()=>[a.search.state?(s(),k("div",M,[t(F,{name:"UpOutlined"}),_("\xA0\xA0\u6536\u8D77")])):(s(),k("div",P,[t(F,{name:"DownOutlined"}),_("\xA0\xA0\u5C55\u5F00")]))]),_:1})):m("",!0),r(i).insert?(s(),p(v,{key:1,type:"primary",onClick:e[4]||(e[4]=()=>{var n;return(n=x.value)==null?void 0:n.open()})},{icon:o(()=>[t(F,{name:"PlusOutlined"})]),default:o(()=>[_(" \u65B0\u5EFA ")]),_:1})):m("",!0),r(i).delete?(s(),p(h,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:e[5]||(e[5]=n=>D()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[t(v,{type:"primary",danger:""},{icon:o(()=>[t(F,{name:"DeleteOutlined"})]),default:o(()=>[_(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):m("",!0)]),"toolbar-right":o(()=>[]),"table-col":o(()=>[t(d,{title:"\u5206\u7EC4\u540D\u79F0/\u952E","data-index":"name"}),t(d,{title:"\u503C","data-index":"value"}),t(d,{title:"\u6240\u5C5E\u5206\u7EC4","data-index":"parentName"}),t(d,{title:"\u5E8F\u53F7","data-index":"sort"}),t(d,{title:"\u552F\u4E00\u7F16\u7801","data-index":"code"}),t(d,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),t(d,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),r(i).update||r(i).delete||r(i).insert?(s(),p(d,{key:0,title:"\u64CD\u4F5C","data-index":"id"},{default:o(({record:n})=>[r(i).insert?(s(),k("a",{key:0,href:"javascript:void(0)",onClick:u=>{var T;return(T=x.value)==null?void 0:T.open(null,n.id)}},"\u65B0\u5EFA",8,q)):m("",!0),t(b,{type:"vertical"}),r(i).update?(s(),k("a",{key:1,href:"javascript:;",onClick:()=>{var u;return(u=x.value)==null?void 0:u.open(n.id,n.parentId)}},"\u7F16\u8F91",8,G)):m("",!0),t(b,{type:"vertical"}),r(i).delete?(s(),p(h,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:u=>D(n.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[H]),_:2},1032,["onConfirm"])):m("",!0)]),_:1})):m("",!0)]),_:1},8,["config","expandedRowKeys"]),t(j,{ref_key:"refInfo",ref:x,onSuccess:()=>c()},null,8,["onSuccess"])]),_:1})}}});export{te as default};
