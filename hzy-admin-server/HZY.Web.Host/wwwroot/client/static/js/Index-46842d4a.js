import{d as L,z as q,a5 as G,E as g,s as H,r as l,o as s,e as r,w as e,a as t,u as v,j as i,m as c,c as x,k as J,t as Q,F as W,f as D,p as N}from"./index-4c73da82.js";import{_ as C}from"./AppIcon.vue_vue_type_script_setup_true_lang-0270c94b.js";import{S as A,_ as X}from"./Info.vue_vue_type_script_setup_true_lang-954b86cc.js";import{_ as Y}from"./PageContainer.vue_vue_type_script_setup_true_lang-0b11d899.js";import{_ as Z}from"./TableCurd.vue_vue_type_script_setup_true_lang-604abf26.js";import{_ as ee}from"./DataAuthority.vue_vue_type_script_setup_true_lang-97aedd83.js";import{_ as te}from"./FunctionAuthority.vue_vue_type_script_setup_true_lang-2ddfb38f.js";import"./SysOrganizationService-d24f20a3.js";const ue={key:0},ae={key:1},oe=["onClick"],ne=D("a",{class:"text-danger"},"\u5220\u9664",-1),se=["onClick"],le=["onClick"],ie=L({name:"system_role"}),ve=L({...ie,setup(re){const a=q({search:{state:!1,vm:{name:void 0,loginName:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),y=G(),b=g(),h=g(),S=g(),T=g(),w=g();H(()=>{m()});async function m(){a.loading=!0;const d=await A.findList(a.page,a.size,a.search.vm);a.loading=!1,d.code==1&&(a.page=d.data.page,a.size=d.data.size,a.total=d.data.total,a.columns=d.data.columns,a.data=d.data.dataSource)}async function $(d){var E,k;let o=[];if(d?o.push(d):o=(k=(E=b.value)==null?void 0:E.getSelectedRowKeys())!=null?k:[],o.length==0)return N.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const F=await A.deleteList(o);a.loading=!1,F.code==1&&(N.message.success("\u5220\u9664\u6210\u529F!"),m())}function U(){A.exportExcel(a.search.vm)}return(d,o)=>{const F=l("a-input"),E=l("a-form-item"),k=l("a-col"),f=l("a-button"),j=l("a-space"),O=l("a-row"),V=l("a-form"),z=l("a-popconfirm"),I=l("a-menu-item"),M=l("a-menu"),R=l("a-dropdown"),K=l("a-checkbox"),P=l("a-popover"),_=l("a-table-column"),p=l("a-tag"),B=l("a-divider");return s(),r(Y,null,{default:e(()=>[t(Z,{ref_key:"refTableCurd",ref:b,config:a,onChange:o[8]||(o[8]=({page:u,pageSize:n})=>{a.page=u==0?1:u,a.size=n,m()}),onShowSizeChange:o[9]||(o[9]=({current:u,size:n})=>{a.page=u==0?1:u,a.size=n,m()})},{search:e(()=>[v(y).search?(s(),r(V,{key:0,ref_key:"refSearchForm",ref:S,model:a.search.vm},{default:e(()=>[t(O,{gutter:[16,0]},{default:e(()=>[t(k,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(E,{class:"mb-0",name:"name",label:"\u771F\u5B9E\u59D3\u540D"},{default:e(()=>[t(F,{value:a.search.vm.name,"onUpdate:value":o[0]||(o[0]=u=>a.search.vm.name=u),placeholder:"\u771F\u5B9E\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(k,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(E,{class:"mb-0",name:"loginName",label:"\u8D26\u6237\u540D\u79F0"},{default:e(()=>[t(F,{value:a.search.vm.loginName,"onUpdate:value":o[1]||(o[1]=u=>a.search.vm.loginName=u),placeholder:"\u8D26\u6237\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(k,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:e(()=>[t(j,{size:8},{default:e(()=>[t(f,{onClick:o[2]||(o[2]=u=>{var n;a.page=1,(n=S.value)==null||n.resetFields(),m()})},{default:e(()=>[i(" \u91CD\u7F6E ")]),_:1}),t(f,{type:"primary",onClick:o[3]||(o[3]=u=>{a.page=1,m()})},{default:e(()=>[i(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):c("",!0)]),"toolbar-left":e(()=>[v(y).search?(s(),r(f,{key:0,onClick:o[4]||(o[4]=u=>a.search.state=!a.search.state)},{default:e(()=>[a.search.state?(s(),x("div",ue,[t(C,{name:"UpOutlined"}),i("\xA0\xA0\u6536\u8D77")])):(s(),x("div",ae,[t(C,{name:"DownOutlined"}),i("\xA0\xA0\u5C55\u5F00")]))]),_:1})):c("",!0),v(y).insert?(s(),r(f,{key:1,type:"primary",onClick:o[5]||(o[5]=()=>{var u;return(u=h.value)==null?void 0:u.open()})},{icon:e(()=>[t(C,{name:"PlusOutlined"})]),default:e(()=>[i(" \u65B0\u5EFA ")]),_:1})):c("",!0),v(y).delete?(s(),r(z,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:o[6]||(o[6]=u=>$()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[t(f,{type:"primary",danger:""},{icon:e(()=>[t(C,{name:"DeleteOutlined"})]),default:e(()=>[i(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):c("",!0)]),"toolbar-right":e(()=>[t(R,null,{overlay:e(()=>[t(M,null,{default:e(()=>[t(I,{key:"1",onClick:o[7]||(o[7]=u=>U())},{default:e(()=>[i("\u5BFC\u51FA Excel")]),_:1})]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[i(" \u66F4\u591A "),t(C,{name:"ellipsis-outlined"})]),_:1})]),_:1}),t(P,null,{content:e(()=>[(s(!0),x(W,null,J(a.columns.filter(u=>u.fieldName.substr(0,1)!="_"),u=>(s(),x("div",null,[t(K,{checked:u.show,"onUpdate:checked":n=>u.show=n},{default:e(()=>[i(Q(u.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),256))]),default:e(()=>[t(f,{type:"text"},{icon:e(()=>[t(C,{name:"setting-outlined"})]),_:1})]),_:1})]),"table-col":e(()=>[t(_,{title:"\u7F16\u53F7","data-index":"number"}),t(_,{title:"\u89D2\u8272\u540D\u79F0","data-index":"name"}),t(_,{title:"\u6570\u636E\u6743\u9650","data-index":"permissionType"},{default:e(({record:u})=>[u.permissionType==1?(s(),r(p,{key:0,color:"success"},{default:e(()=>[i("\u81EA\u5B9A\u4E49\u6743\u9650")]),_:1})):c("",!0),u.permissionType==2?(s(),r(p,{key:1,color:"success"},{default:e(()=>[i("\u67E5\u770B\u6240\u6709\u6570\u636E")]),_:1})):c("",!0),u.permissionType==3?(s(),r(p,{key:2,color:"success"},{default:e(()=>[i("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7")]),_:1})):c("",!0),u.permissionType==4?(s(),r(p,{key:3,color:"success"},{default:e(()=>[i("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7\u548C\u4E0B\u5C5E\u7EC4\u7EC7")]),_:1})):c("",!0),u.permissionType==5?(s(),r(p,{key:4,color:"success"},{default:e(()=>[i("\u4EC5\u67E5\u770B\u672C\u4EBA")]),_:1})):c("",!0)]),_:1}),t(_,{title:"\u5220\u9664\u9501\u5B9A","data-index":"deleteLock"},{default:e(({record:u})=>[u.deleteLock?(s(),r(p,{key:0,color:"success"},{default:e(()=>[i("\u9501\u5B9A")]),_:1})):(s(),r(p,{key:1,color:"warning"},{default:e(()=>[i("\u4E0D\u9501\u5B9A")]),_:1}))]),_:1}),t(_,{title:"\u5907\u6CE8","data-index":"remark"}),t(_,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),t(_,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),t(_,{title:"\u64CD\u4F5C","data-index":"id"},{default:e(({record:u})=>[v(y).update?(s(),x("a",{key:0,href:"javascript:;",onClick:()=>{var n;return(n=h.value)==null?void 0:n.open(u.id)}},"\u7F16\u8F91",8,oe)):c("",!0),t(B,{type:"vertical"}),v(y).delete?(s(),r(z,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:n=>$(u.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[ne]),_:2},1032,["onConfirm"])):c("",!0),t(B,{type:"vertical"}),D("a",{href:"javascript:;",onClick:()=>{var n;return(n=w.value)==null?void 0:n.open(u.id)}},"\u529F\u80FD\u6743\u9650",8,se),t(B,{type:"vertical"}),D("a",{href:"javascript:;",onClick:()=>{var n;return(n=T.value)==null?void 0:n.open(u.id)}},"\u6570\u636E\u6743\u9650",8,le)]),_:1})]),_:1},8,["config"]),t(X,{ref_key:"refInfo",ref:h,onSuccess:()=>m()},null,8,["onSuccess"]),t(ee,{ref_key:"refDataAuthority",ref:T,onSuccess:()=>m()},null,8,["onSuccess"]),t(te,{ref_key:"refFunctionAuthority",ref:w,onSuccess:()=>m()},null,8,["onSuccess"])]),_:1})}}});export{ve as default};
