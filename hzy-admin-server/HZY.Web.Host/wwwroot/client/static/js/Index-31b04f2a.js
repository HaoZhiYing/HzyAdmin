import{d as K,z as O,a5 as L,E as w,s as V,p as E,r as l,o as u,e as d,w as t,a as n,u as r,j as c,m,c as C,f as j}from"./index-4c73da82.js";import{_ as k}from"./AppIcon.vue_vue_type_script_setup_true_lang-0270c94b.js";import{_ as I}from"./Info.vue_vue_type_script_setup_true_lang-2f6d2972.js";import{_ as U}from"./PageContainer.vue_vue_type_script_setup_true_lang-0b11d899.js";import{_ as M}from"./TableCurd.vue_vue_type_script_setup_true_lang-604abf26.js";import{S as $}from"./SysOrganizationService-d24f20a3.js";const P={key:0},q={key:1},G=["onClick"],H=["onClick"],J=j("a",{class:"text-danger"},"\u5220\u9664",-1),Q=K({name:"system_function"}),ne=K({...Q,setup(W){const o=O({search:{state:!1,vm:{name:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[],expandedRowKeys:[]}),i=L(),B=w(),x=w(),A=w();V(()=>{f()});async function f(){o.loading=!0;const _=await $.findList(o.search.vm);o.loading=!1,_.code==1&&(o.data=E.genTreeData(_.data,null),o.expandedRowKeys=_.data.map(e=>e.id))}async function h(_){var g,y;let e=[];if(_?e.push(_):e=(y=(g=B.value)==null?void 0:g.getSelectedRowKeys())!=null?y:[],e.length==0)return E.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");o.loading=!0;const F=await $.deleteList(e);o.loading=!1,F.code==1&&(E.message.success("\u5220\u9664\u6210\u529F!"),f())}return(_,e)=>{const F=l("a-input"),g=l("a-form-item"),y=l("a-col"),v=l("a-button"),R=l("a-space"),z=l("a-row"),N=l("a-form"),D=l("a-popconfirm"),p=l("a-table-column"),b=l("a-tag"),T=l("a-divider");return u(),d(U,null,{default:t(()=>[n(M,{ref_key:"refTableCurd",ref:B,config:o,onChange:e[6]||(e[6]=({page:a,pageSize:s})=>{o.page=a==0?1:a,o.size=s,f()}),onShowSizeChange:e[7]||(e[7]=({current:a,size:s})=>{o.page=a==0?1:a,o.size=s,f()}),expandedRowKeys:o.expandedRowKeys,"onUpdate:expandedRowKeys":e[8]||(e[8]=a=>o.expandedRowKeys=a)},{search:t(()=>[r(i).search?(u(),d(N,{key:0,ref_key:"refSearchForm",ref:A,model:o.search.vm},{default:t(()=>[n(z,{gutter:[16,0]},{default:t(()=>[n(y,{xs:24,sm:12,md:8,lg:6,xl:6},{default:t(()=>[n(g,{class:"mb-0",name:"name",label:"\u540D\u79F0"},{default:t(()=>[n(F,{value:o.search.vm.name,"onUpdate:value":e[0]||(e[0]=a=>o.search.vm.name=a),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),n(y,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:t(()=>[n(R,{size:8},{default:t(()=>[n(v,{onClick:e[1]||(e[1]=a=>{var s;o.page=1,(s=A.value)==null||s.resetFields(),f()})},{default:t(()=>[c(" \u91CD\u7F6E ")]),_:1}),n(v,{type:"primary",onClick:e[2]||(e[2]=a=>{o.page=1,f()})},{default:t(()=>[c(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):m("",!0)]),"toolbar-left":t(()=>[r(i).search?(u(),d(v,{key:0,onClick:e[3]||(e[3]=a=>o.search.state=!o.search.state)},{default:t(()=>[o.search.state?(u(),C("div",P,[n(k,{name:"UpOutlined"}),c("\xA0\xA0\u6536\u8D77")])):(u(),C("div",q,[n(k,{name:"DownOutlined"}),c("\xA0\xA0\u5C55\u5F00")]))]),_:1})):m("",!0),r(i).insert?(u(),d(v,{key:1,type:"primary",onClick:e[4]||(e[4]=()=>{var a;return(a=x.value)==null?void 0:a.open()})},{icon:t(()=>[n(k,{name:"PlusOutlined"})]),default:t(()=>[c(" \u65B0\u5EFA ")]),_:1})):m("",!0),r(i).delete?(u(),d(D,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:e[5]||(e[5]=a=>h()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[n(v,{type:"primary",danger:""},{icon:t(()=>[n(k,{name:"DeleteOutlined"})]),default:t(()=>[c(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):m("",!0)]),"toolbar-right":t(()=>[]),"table-col":t(()=>[n(p,{title:"\u7EC4\u7EC7\u540D\u79F0","data-index":"name"}),n(p,{title:"\u6392\u5E8F\u53F7","data-index":"orderNumber"}),n(p,{title:"\u7EA7\u522B\u7801","data-index":"levelCode"}),n(p,{title:"\u72B6\u6001","data-index":"state"},{default:t(({record:a})=>[a.state==1?(u(),d(b,{key:0,color:"success"},{default:t(()=>[c("\u6B63\u5E38")]),_:1})):(u(),d(b,{key:1,color:"warning"},{default:t(()=>[c("\u505C\u7528")]),_:1}))]),_:1}),n(p,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),n(p,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),r(i).update||r(i).delete||r(i).insert?(u(),d(p,{key:0,title:"\u64CD\u4F5C","data-index":"id"},{default:t(({record:a})=>[r(i).insert?(u(),C("a",{key:0,href:"javascript:void(0)",onClick:s=>{var S;return(S=x.value)==null?void 0:S.open(null,a.id)}},"\u65B0\u5EFA",8,G)):m("",!0),n(T,{type:"vertical"}),r(i).update?(u(),C("a",{key:1,href:"javascript:;",onClick:()=>{var s;return(s=x.value)==null?void 0:s.open(a.id,a.parentId)}},"\u7F16\u8F91",8,H)):m("",!0),n(T,{type:"vertical"}),r(i).delete?(u(),d(D,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:s=>h(a.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[J]),_:2},1032,["onConfirm"])):m("",!0)]),_:1})):m("",!0)]),_:1},8,["config","expandedRowKeys"]),n(I,{ref_key:"refInfo",ref:x,onSuccess:()=>f()},null,8,["onSuccess"])]),_:1})}}});export{ne as default};
