import{d as B,Q as R,A as E,T as L,b as U,z as V,q as d,x as A,r as v,o,e as l,w as _,u as t,c as p,k,F as f,m as K,f as T,t as x,p as D}from"./index-4c73da82.js";import{_ as I}from"./AppIcon.vue_vue_type_script_setup_true_lang-0270c94b.js";import{_ as M}from"./LayoutMenuSub.vue_vue_type_script_setup_true_lang-749542aa.js";import{M as F,E as N}from"./MenuStore-e4619ded.js";const Q=B({__name:"LayoutMenu",setup(O){var h,C;R(m=>{var n,s,a,e;return{"336c4d1b":(n=t(u).menuCustomThemes[t(u).state.menuCustomThemesIndex])==null?void 0:n.backgroundColor,fc719e08:(s=t(u).menuCustomThemes[t(u).state.menuCustomThemesIndex])==null?void 0:s.textColor,"1fbe8bfe":(a=t(u).menuCustomThemes[t(u).state.menuCustomThemesIndex])==null?void 0:a.activeBgColor,"7d6ca7d4":(e=t(u).menuCustomThemes[t(u).state.menuCustomThemesIndex])==null?void 0:e.activeTextColor}});const u=F(),y=E(),g=L(),S=U(()=>D.genTreeData(y.state.userInfo.menus,null)),c=V({defaultSelectedKeys:[(h=d.currentRoute.value.meta.menuId)!=null?h:""],selectedKeys:[(C=d.currentRoute.value.meta.menuId)!=null?C:""],openKeys:b()});A(()=>d.currentRoute.value,m=>{var n;c.selectedKeys=[(n=m.meta.menuId)!=null?n:""]});function b(){let n=d.currentRoute.value.meta.levelCode;if(!n)return[];var s=[];if(n.indexOf(".")>-1)for(var a=n.split("."),e=0;e<a.length-1;e++){var r=a[e];s.push(parseInt(r))}return s}function w(m){var s;const n=y.state.userInfo.menus.find(a=>a.id==m.key);n.mode===1&&d.push({path:(s=n.jumpUrl)!=null?s:n.router}),n.mode===2&&g.openModular(n)}return(m,n)=>{const s=v("a-menu-item"),a=v("a-menu");return o(),l(a,{theme:t(u).themeType(),mode:"inline",onSelect:w,selectedKeys:c.selectedKeys,"onUpdate:selectedKeys":n[0]||(n[0]=e=>c.selectedKeys=e),openKeys:c.openKeys,"onUpdate:openKeys":n[1]||(n[1]=e=>c.openKeys=e)},{default:_(()=>[t(u).state.menuMode!=t(N).default?(o(!0),p(f,{key:0},k(t(y).state.subMenus,e=>{var r;return o(),p(f,null,[!e.children||((r=e.children)==null?void 0:r.filter(i=>i.show).length)==0&&e.type==2?(o(),l(s,{key:e.id,title:e.name},{default:_(()=>[e.icon?(o(),l(I,{key:0,name:e.icon},null,8,["name"])):K("",!0),T("span",null,x(e.name),1)]),_:2},1032,["title"])):(o(),l(M,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256)):(o(!0),p(f,{key:1},k(t(S),e=>{var r;return o(),p(f,null,[!e.children||((r=e.children)==null?void 0:r.filter(i=>i.show).length)==0&&e.type==2?(o(),l(s,{key:e.id,title:e.name},{default:_(()=>[e.icon?(o(),l(I,{key:0,name:e.icon},null,8,["name"])):K("",!0),T("span",null,x(e.name),1)]),_:2},1032,["title"])):(o(),l(M,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256))]),_:1},8,["theme","selectedKeys","openKeys"])}}});export{Q as _};
