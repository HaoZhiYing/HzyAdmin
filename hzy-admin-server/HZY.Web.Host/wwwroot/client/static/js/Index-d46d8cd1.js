import{d as S,z as M,a5 as K,E as h,s as P,r as u,o as l,e as f,w as e,a as t,u as c,j as i,m as p,c as F,k as R,t as q,F as G,f as H,p as D}from"./index-87b89bfd.js";import{_ as k}from"./AppIcon.vue_vue_type_script_setup_true_lang-224083f4.js";import{S as b,_ as J}from"./Info.vue_vue_type_script_setup_true_lang-e574641b.js";import{_ as Q}from"./PageContainer.vue_vue_type_script_setup_true_lang-7c0f1843.js";import{_ as W}from"./TableCurd.vue_vue_type_script_setup_true_lang-3b5e3df4.js";const X={key:0},Y={key:1},Z=["onClick"],ee=H("a",{class:"text-danger"},"\u5220\u9664",-1),te=S({name:"system_function"}),re=S({...te,setup(ae){const a=M({search:{state:!1,vm:{name:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),d=K(),A=h(),y=h(),E=h();P(()=>{m()});async function m(){a.loading=!0;const r=await b.findList(a.page,a.size,a.search.vm);a.loading=!1,r.code==1&&(a.page=r.data.page,a.size=r.data.size,a.total=r.data.total,a.columns=r.data.columns,a.data=r.data.dataSource)}async function w(r){var g,x;let o=[];if(r?o.push(r):o=(x=(g=A.value)==null?void 0:g.getSelectedRowKeys())!=null?x:[],o.length==0)return D.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const C=await b.deleteList(o);a.loading=!1,C.code==1&&(D.message.success("\u5220\u9664\u6210\u529F!"),m())}function T(){b.exportExcel(a.search.vm)}return(r,o)=>{const C=u("a-input"),g=u("a-form-item"),x=u("a-col"),_=u("a-button"),$=u("a-space"),z=u("a-row"),N=u("a-form"),B=u("a-popconfirm"),L=u("a-menu-item"),O=u("a-menu"),U=u("a-dropdown"),V=u("a-checkbox"),j=u("a-popover"),v=u("a-table-column"),I=u("a-divider");return l(),f(Q,null,{default:e(()=>[t(W,{ref_key:"refTableCurd",ref:A,config:a,onChange:o[7]||(o[7]=({page:n,pageSize:s})=>{a.page=n==0?1:n,a.size=s,m()}),onShowSizeChange:o[8]||(o[8]=({current:n,size:s})=>{a.page=n==0?1:n,a.size=s,m()})},{search:e(()=>[c(d).search?(l(),f(N,{key:0,ref_key:"refSearchForm",ref:E,model:a.search.vm},{default:e(()=>[t(z,{gutter:[16,0]},{default:e(()=>[t(x,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(g,{class:"mb-0",name:"name",label:"\u540D\u79F0"},{default:e(()=>[t(C,{value:a.search.vm.name,"onUpdate:value":o[0]||(o[0]=n=>a.search.vm.name=n),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(x,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:e(()=>[t($,{size:8},{default:e(()=>[t(_,{onClick:o[1]||(o[1]=n=>{var s;a.page=1,(s=E.value)==null||s.resetFields(),m()})},{default:e(()=>[i(" \u91CD\u7F6E ")]),_:1}),t(_,{type:"primary",onClick:o[2]||(o[2]=n=>{a.page=1,m()})},{default:e(()=>[i(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):p("",!0)]),"toolbar-left":e(()=>[c(d).search?(l(),f(_,{key:0,onClick:o[3]||(o[3]=n=>a.search.state=!a.search.state)},{default:e(()=>[a.search.state?(l(),F("div",X,[t(k,{name:"UpOutlined"}),i("\xA0\xA0\u6536\u8D77")])):(l(),F("div",Y,[t(k,{name:"DownOutlined"}),i("\xA0\xA0\u5C55\u5F00")]))]),_:1})):p("",!0),c(d).insert?(l(),f(_,{key:1,type:"primary",onClick:o[4]||(o[4]=()=>{var n;return(n=y.value)==null?void 0:n.open()})},{icon:e(()=>[t(k,{name:"PlusOutlined"})]),default:e(()=>[i(" \u65B0\u5EFA ")]),_:1})):p("",!0),c(d).delete?(l(),f(B,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:o[5]||(o[5]=n=>w()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[t(_,{type:"primary",danger:""},{icon:e(()=>[t(k,{name:"DeleteOutlined"})]),default:e(()=>[i(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):p("",!0)]),"toolbar-right":e(()=>[t(U,null,{overlay:e(()=>[t(O,null,{default:e(()=>[t(L,{key:"1",onClick:o[6]||(o[6]=n=>T())},{default:e(()=>[i("\u5BFC\u51FA Excel")]),_:1})]),_:1})]),default:e(()=>[t(_,null,{default:e(()=>[i(" \u66F4\u591A "),t(k,{name:"ellipsis-outlined"})]),_:1})]),_:1}),t(j,null,{content:e(()=>[(l(!0),F(G,null,R(a.columns.filter(n=>n.fieldName.substr(0,1)!="_"),n=>(l(),F("div",null,[t(V,{checked:n.show,"onUpdate:checked":s=>n.show=s},{default:e(()=>[i(q(n.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),256))]),default:e(()=>[t(_,{type:"text"},{icon:e(()=>[t(k,{name:"setting-outlined"})]),_:1})]),_:1})]),"table-col":e(()=>[t(v,{title:"\u7F16\u53F7","data-index":"number"}),t(v,{title:"\u540D\u79F0","data-index":"name"}),t(v,{title:"\u82F1\u6587\u540D\u79F0","data-index":"byName"}),t(v,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),t(v,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),c(d).update||c(d).delete?(l(),f(v,{key:0,title:"\u64CD\u4F5C","data-index":"id"},{default:e(({record:n})=>[c(d).update?(l(),F("a",{key:0,href:"javascript:;",onClick:()=>{var s;return(s=y.value)==null?void 0:s.open(n.id)}},"\u7F16\u8F91",8,Z)):p("",!0),t(I,{type:"vertical"}),c(d).delete?(l(),f(B,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:s=>w(n.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[ee]),_:2},1032,["onConfirm"])):p("",!0)]),_:1})):p("",!0)]),_:1},8,["config"]),t(J,{ref_key:"refInfo",ref:y,onSuccess:()=>m()},null,8,["onSuccess"])]),_:1})}}});export{re as default};
