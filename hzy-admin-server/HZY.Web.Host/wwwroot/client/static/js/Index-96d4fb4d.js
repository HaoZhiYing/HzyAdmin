import{_}from"./AppIcon.vue_vue_type_script_setup_true_lang-0270c94b.js";import{_ as S}from"./Info.vue_vue_type_script_setup_true_lang-de05ec60.js";import{d as k,z as U,E as B,s as L,r as s,o as D,e as O,w as u,a as e,j as r,c as b,u as V,f as x,p as v}from"./index-4c73da82.js";import{_ as j}from"./PageContainer.vue_vue_type_script_setup_true_lang-0b11d899.js";import{_ as I}from"./TableCurd.vue_vue_type_script_setup_true_lang-604abf26.js";import{L as E}from"./CodeLoadToProject.vue_vue_type_script_setup_true_lang-9a6f0bf5.js";import{C as M}from"./CodeGenerationService-523c8189.js";import"./Columns.vue_vue_type_script_setup_true_lang-f354d3d1.js";import"./CodeGeneration.vue_vue_type_script_setup_true_lang-56e4147a.js";const G=x("span",{class:"text-danger"},"\u8BF7\u5728\u6570\u636E\u5E93\u4E2D\u5EFA\u8868\u3002\u5728\u6B64\u754C\u9762\u70B9\u51FB\u626B\u63CF\u65B0\u8868\uFF0C\u7136\u540E\u5728\u6B64\u754C\u9762\u914D\u7F6E\u8868\u4FE1\u606F\u540E\u70B9\u51FB\u63D0\u4EA4\u53D8\u66F4\u4FDD\u5B58\u6570\u636E\u5373\u53EF!",-1),K={key:0},R={key:1},q=["onClick"],H=x("a",{class:"text-danger"},"\u5220\u9664",-1),J=k({name:"LowCode"}),ne=k({...J,setup(P){const a=U({search:{state:!1,vm:{tableName:void 0,entityName:void 0,displayName:void 0}},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),y=B(),C=B(),g=B();L(()=>{i()});async function i(){a.loading=!0;const l=await E.findList(a.page,a.size,a.search.vm);a.loading=!1,l.code==1&&(a.page=l.data.page,a.size=l.data.size,a.total=l.data.total,a.columns=l.data.columns,a.data=l.data.dataSource)}async function A(l){var p,m;let t=[];if(l?t.push(l):t=(m=(p=y.value)==null?void 0:p.getSelectedRowKeys())!=null?m:[],t.length==0)return v.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");a.loading=!0;const d=await E.deleteList(t);a.loading=!1,d.code==1&&(v.message.success("\u5220\u9664\u6210\u529F!"),i())}function N(){E.synchronization().then(l=>{v.message.success("\u540C\u6B65\u6210\u529F!"),i()})}function h(){E.change(a.data).then(l=>{v.message.success("\u6570\u636E\u53D8\u66F4\u6210\u529F!"),i()})}return(l,t)=>{const d=s("a-input"),p=s("a-form-item"),m=s("a-col"),c=s("a-button"),T=s("a-space"),w=s("a-row"),z=s("a-form"),F=s("a-popconfirm"),f=s("a-table-column"),$=s("a-divider");return D(),O(j,null,{describe:u(()=>[G]),default:u(()=>[e(I,{ref_key:"refTableCurd",ref:y,config:a,onChange:t[10]||(t[10]=({page:n,pageSize:o})=>{a.page=n==0?1:n,a.size=o,i()}),onShowSizeChange:t[11]||(t[11]=({current:n,size:o})=>{a.page=n==0?1:n,a.size=o,i()})},{search:u(()=>[e(z,{ref_key:"refSearchForm",ref:g,model:a.search.vm},{default:u(()=>[e(w,{gutter:[16,0]},{default:u(()=>[e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"tableName",label:"\u8868\u540D\u79F0"},{default:u(()=>[e(d,{value:a.search.vm.tableName,"onUpdate:value":t[0]||(t[0]=n=>a.search.vm.tableName=n),placeholder:"\u8868\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"entityName",label:"\u5B9E\u4F53\u540D\u79F0"},{default:u(()=>[e(d,{value:a.search.vm.entityName,"onUpdate:value":t[1]||(t[1]=n=>a.search.vm.entityName=n),placeholder:"\u5B9E\u4F53\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6},{default:u(()=>[e(p,{class:"mb-0",name:"displayName",label:"\u663E\u793A\u540D\u79F0"},{default:u(()=>[e(d,{value:a.search.vm.displayName,"onUpdate:value":t[2]||(t[2]=n=>a.search.vm.displayName=n),placeholder:"\u663E\u793A\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),e(m,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:u(()=>[e(T,{size:8},{default:u(()=>[e(c,{onClick:t[3]||(t[3]=n=>{var o;a.page=1,(o=g.value)==null||o.resetFields(),i()})},{default:u(()=>[r(" \u91CD\u7F6E ")]),_:1}),e(c,{type:"primary",onClick:t[4]||(t[4]=n=>{a.page=1,i()})},{default:u(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),"toolbar-left":u(()=>[e(c,{onClick:t[5]||(t[5]=n=>a.search.state=!a.search.state)},{default:u(()=>[a.search.state?(D(),b("div",K,[e(_,{name:"UpOutlined"}),r("\xA0\xA0\u6536\u8D77")])):(D(),b("div",R,[e(_,{name:"DownOutlined"}),r("\xA0\xA0\u5C55\u5F00")]))]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u66F4\u65B0\u8868\u5417?\u53EF\u80FD\u4F1A\u5BFC\u81F4\u6570\u636E\u4E22\u5931",onConfirm:t[6]||(t[6]=n=>N()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary"},{icon:u(()=>[e(_,{name:"scan-outlined"})]),default:u(()=>[r(" \u626B\u63CF\u65B0\u8868 ")]),_:1})]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u63D0\u4EA4\u66F4\u6539?",onConfirm:t[7]||(t[7]=n=>h()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary"},{icon:u(()=>[e(_,{name:"check-outlined"})]),default:u(()=>[r(" \u63D0\u4EA4\u53D8\u66F4 ")]),_:1})]),_:1}),e(c,{type:"primary",onClick:t[8]||(t[8]=()=>V(M).createDataDictionary())},{icon:u(()=>[e(_,{name:"cloud-download-outlined"})]),default:u(()=>[r(" \u4E0B\u8F7D\u6570\u636E\u5E93\u8868\u8BBE\u8BA1 ")]),_:1}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:t[9]||(t[9]=n=>A()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[e(c,{type:"primary",danger:""},{icon:u(()=>[e(_,{name:"DeleteOutlined"})]),default:u(()=>[r(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})]),"toolbar-right":u(()=>[]),"table-col":u(()=>[e(f,{title:"\u8868\u540D\u79F0","data-index":"tableName"}),e(f,{title:"\u663E\u793A\u540D\u79F0","data-index":"displayName"},{default:u(({record:n})=>[e(d,{value:n.displayName,"onUpdate:value":o=>n.displayName=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u5B9E\u4F53\u540D\u79F0","data-index":"entityName"},{default:u(({record:n})=>[e(d,{value:n.entityName,"onUpdate:value":o=>n.entityName=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u5907\u6CE8","data-index":"remark"},{default:u(({record:n})=>[e(d,{value:n.remark,"onUpdate:value":o=>n.remark=o},null,8,["value","onUpdate:value"])]),_:1}),e(f,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime",width:"120px"}),e(f,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime",width:"120px"}),e(f,{title:"\u64CD\u4F5C","data-index":"id"},{default:u(({record:n})=>[x("a",{href:"javascript:;",onClick:()=>{var o;return(o=C.value)==null?void 0:o.open(n)}},"\u914D\u7F6E",8,q),e($,{type:"vertical"}),e(F,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:o=>A(n.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:u(()=>[H]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["config"]),e(S,{ref_key:"refInfo",ref:C,onSuccess:()=>i()},null,8,["onSuccess"])]),_:1})}}});export{ne as default};
