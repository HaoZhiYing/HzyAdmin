import{d as U,y as G,a4 as H,C as x,q as J,r as l,o as s,e as i,w as e,a as t,u as v,i as r,l as d,c as F,j as Q,t as W,F as X,f as D,m as L}from"./index-07368c36.js";import{_ as C}from"./AppIcon.vue_vue_type_script_setup_true_lang-66731724.js";import{S as B,_ as Y}from"./Info.vue_vue_type_script_setup_true_lang-51550d4e.js";import{_ as Z}from"./PageContainer.vue_vue_type_script_setup_true_lang-660ebdad.js";import{_ as ee}from"./TableCurd.vue_vue_type_script_setup_true_lang-e38ba039.js";import{_ as te}from"./DataAuthority.vue_vue_type_script_setup_true_lang-52787d85.js";import{_ as ue}from"./FunctionAuthority.vue_vue_type_script_setup_true_lang-8f87abe0.js";import"./SysOrganizationService-1752671b.js";const ae={key:0},oe={key:1},ne=["onClick"],se=D("a",{class:"text-danger"},"\u5220\u9664",-1),le=["onClick"],re=["onClick"],ie=U({name:"system_role"}),Ce=U({...ie,setup(ce){const a=G({search:{state:!1,vm:{name:void 0,loginName:void 0},sort:[]},loading:!1,page:1,size:10,total:100,columns:[],data:[]}),y=H(),S=x(),h=x(),w=x(),b=x(),T=x();J(()=>{m()});async function m(){try{a.loading=!0;const c=await B.findList(a.page,a.size,a.search.vm,a.search.sort);if(a.loading=!1,c.code!=1)return;a.page=c.data.page,a.size=c.data.size,a.total=c.data.total,a.columns=c.data.columns,a.data=c.data.dataSource}catch{a.loading=!1}}async function $(c){var g,E;let o=[];if(c?o.push(c):o=(E=(g=S.value)==null?void 0:g.getSelectedRowKeys())!=null?E:[],o.length==0)return L.message.error("\u8BF7\u9009\u62E9\u8981\u5220\u9664\u7684\u884C!");try{a.loading=!0;const k=await B.deleteList(o);if(a.loading=!1,k.code!=1)return;L.message.success("\u5220\u9664\u6210\u529F!"),m()}catch{a.loading=!1}}function j(){B.exportExcel(a.search.vm,a.search.sort)}return(c,o)=>{const g=l("a-input"),E=l("a-form-item"),k=l("a-col"),f=l("a-button"),O=l("a-space"),V=l("a-row"),I=l("a-form"),z=l("a-popconfirm"),M=l("a-menu-item"),R=l("a-menu"),q=l("a-dropdown"),K=l("a-checkbox"),P=l("a-popover"),_=l("a-table-column"),p=l("a-tag"),A=l("a-divider");return s(),i(Z,null,{default:e(()=>[t(ee,{ref_key:"refTableCurd",ref:S,config:a,onChange:o[8]||(o[8]=u=>{var n,N;a.page=(n=u.pagination.current)!=null?n:1,a.size=(N=u.pagination.pageSize)!=null?N:a.size,a.search.sort=u.sorter instanceof Array?[...u.sorter]:[u.sorter],m()}),onShowSizeChange:o[9]||(o[9]=({current:u,size:n})=>{a.page=u==0?1:u,a.size=n,m()})},{search:e(()=>[v(y).search?(s(),i(I,{key:0,ref_key:"refSearchForm",ref:w,model:a.search.vm},{default:e(()=>[t(V,{gutter:[16,0]},{default:e(()=>[t(k,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(E,{class:"mb-0",name:"name",label:"\u771F\u5B9E\u59D3\u540D"},{default:e(()=>[t(g,{value:a.search.vm.name,"onUpdate:value":o[0]||(o[0]=u=>a.search.vm.name=u),placeholder:"\u771F\u5B9E\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(k,{xs:24,sm:12,md:8,lg:6,xl:6},{default:e(()=>[t(E,{class:"mb-0",name:"loginName",label:"\u8D26\u6237\u540D\u79F0"},{default:e(()=>[t(g,{value:a.search.vm.loginName,"onUpdate:value":o[1]||(o[1]=u=>a.search.vm.loginName=u),placeholder:"\u8D26\u6237\u540D\u79F0"},null,8,["value"])]),_:1})]),_:1}),t(k,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:e(()=>[t(O,{size:8},{default:e(()=>[t(f,{onClick:o[2]||(o[2]=u=>{var n;a.page=1,(n=w.value)==null||n.resetFields(),m()})},{default:e(()=>[r(" \u91CD\u7F6E ")]),_:1}),t(f,{type:"primary",onClick:o[3]||(o[3]=u=>{a.page=1,m()})},{default:e(()=>[r(" \u67E5\u8BE2 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):d("",!0)]),"toolbar-left":e(()=>[v(y).search?(s(),i(f,{key:0,onClick:o[4]||(o[4]=u=>a.search.state=!a.search.state)},{default:e(()=>[a.search.state?(s(),F("div",ae,[t(C,{name:"UpOutlined"}),r("\xA0\xA0\u6536\u8D77")])):(s(),F("div",oe,[t(C,{name:"DownOutlined"}),r("\xA0\xA0\u5C55\u5F00")]))]),_:1})):d("",!0),v(y).insert?(s(),i(f,{key:1,type:"primary",onClick:o[5]||(o[5]=()=>{var u;return(u=h.value)==null?void 0:u.open()})},{icon:e(()=>[t(C,{name:"PlusOutlined"})]),default:e(()=>[r(" \u65B0\u5EFA ")]),_:1})):d("",!0),v(y).delete?(s(),i(z,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:o[6]||(o[6]=u=>$()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[t(f,{type:"primary",danger:""},{icon:e(()=>[t(C,{name:"DeleteOutlined"})]),default:e(()=>[r(" \u6279\u91CF\u5220\u9664 ")]),_:1})]),_:1})):d("",!0)]),"toolbar-right":e(()=>[t(q,null,{overlay:e(()=>[t(R,null,{default:e(()=>[t(M,{key:"1",onClick:o[7]||(o[7]=u=>j())},{default:e(()=>[r("\u5BFC\u51FA Excel")]),_:1})]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[r(" \u66F4\u591A "),t(C,{name:"ellipsis-outlined"})]),_:1})]),_:1}),t(P,null,{content:e(()=>[(s(!0),F(X,null,Q(a.columns.filter(u=>u.fieldName.substr(0,1)!="_"),u=>(s(),F("div",null,[t(K,{checked:u.show,"onUpdate:checked":n=>u.show=n},{default:e(()=>[r(W(u.title),1)]),_:2},1032,["checked","onUpdate:checked"])]))),256))]),default:e(()=>[t(f,{type:"text"},{icon:e(()=>[t(C,{name:"setting-outlined"})]),_:1})]),_:1})]),"table-col":e(()=>[t(_,{title:"\u7F16\u53F7","data-index":"number"}),t(_,{title:"\u89D2\u8272\u540D\u79F0","data-index":"name"}),t(_,{title:"\u6570\u636E\u6743\u9650","data-index":"permissionType"},{default:e(({record:u})=>[u.permissionType==1?(s(),i(p,{key:0,color:"success"},{default:e(()=>[r("\u81EA\u5B9A\u4E49\u6743\u9650")]),_:1})):d("",!0),u.permissionType==2?(s(),i(p,{key:1,color:"success"},{default:e(()=>[r("\u67E5\u770B\u6240\u6709\u6570\u636E")]),_:1})):d("",!0),u.permissionType==3?(s(),i(p,{key:2,color:"success"},{default:e(()=>[r("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7")]),_:1})):d("",!0),u.permissionType==4?(s(),i(p,{key:3,color:"success"},{default:e(()=>[r("\u4EC5\u67E5\u770B\u672C\u7EC4\u7EC7\u548C\u4E0B\u5C5E\u7EC4\u7EC7")]),_:1})):d("",!0),u.permissionType==5?(s(),i(p,{key:4,color:"success"},{default:e(()=>[r("\u4EC5\u67E5\u770B\u672C\u4EBA")]),_:1})):d("",!0)]),_:1}),t(_,{title:"\u5220\u9664\u9501\u5B9A","data-index":"deleteLock"},{default:e(({record:u})=>[u.deleteLock?(s(),i(p,{key:0,color:"success"},{default:e(()=>[r("\u9501\u5B9A")]),_:1})):(s(),i(p,{key:1,color:"warning"},{default:e(()=>[r("\u4E0D\u9501\u5B9A")]),_:1}))]),_:1}),t(_,{title:"\u5907\u6CE8","data-index":"remark"}),t(_,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"lastModificationTime"}),t(_,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"creationTime"}),t(_,{title:"\u64CD\u4F5C","data-index":"id"},{default:e(({record:u})=>[v(y).update?(s(),F("a",{key:0,href:"javascript:;",onClick:()=>{var n;return(n=h.value)==null?void 0:n.open(u.id)}},"\u7F16\u8F91",8,ne)):d("",!0),t(A,{type:"vertical"}),v(y).delete?(s(),i(z,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664?",onConfirm:n=>$(u.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:e(()=>[se]),_:2},1032,["onConfirm"])):d("",!0),t(A,{type:"vertical"}),D("a",{href:"javascript:;",onClick:()=>{var n;return(n=T.value)==null?void 0:n.open(u.id)}},"\u529F\u80FD\u6743\u9650",8,le),t(A,{type:"vertical"}),D("a",{href:"javascript:;",onClick:()=>{var n;return(n=b.value)==null?void 0:n.open(u.id)}},"\u6570\u636E\u6743\u9650",8,re)]),_:1})]),_:1},8,["config"]),t(Y,{ref_key:"refInfo",ref:h,onSuccess:()=>m()},null,8,["onSuccess"]),t(te,{ref_key:"refDataAuthority",ref:b,onSuccess:()=>m()},null,8,["onSuccess"]),t(ue,{ref_key:"refFunctionAuthority",ref:T,onSuccess:()=>m()},null,8,["onSuccess"])]),_:1})}}});export{Ce as default};
