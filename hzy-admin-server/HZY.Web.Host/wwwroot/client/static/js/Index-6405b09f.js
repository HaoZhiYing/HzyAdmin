import{b as D,r as I,a as w,i as V,o as N,j as r,k as u,c as b,g as t,w as o,f as a,q as f,A as g,E as v,n as d,d as R,t as j}from"./index-0d89598d.js";import z from"./List-d45bf14a.js";import{I as A,s as h}from"./Info-89f09a7f.js";const M=d("\u67E5\u8BE2"),P=d("\u91CD\u7F6E"),U=d("\u5173\u95ED"),K=d(" \u9AD8\u7EA7\u68C0\u7D22 "),q=d(" \u65B0\u5EFA "),G=d(" \u6279\u91CF\u5220\u9664 "),H=d("\u5BFC\u51FA Excel"),J=d(" \u66F4\u591A\u64CD\u4F5C "),Q=d("\u6B63\u5E38"),W=d("\u505C\u7528"),X=["onClick"],Y=R("a",{class:"text-danger"},"\u5220\u9664",-1),Z={name:"system_post"},ae=Object.assign(Z,{setup(ee){const O=D(),n=I({search:{state:!1,fieldCount:2,vm:{name:null}},loading:!1,pageSizeOptions:[10,20,50,100,500,1e3],rows:10,page:1,total:0,data:[]}),k=w(null),y=w(null),p=O.getPowerByMenuId(V.currentRoute.value.meta.menuId),s={onChange(l){const{currentPage:e,pageSize:c}=l;n.page=e==0?1:e,n.rows=c,s.findList()},onResetSearch(){n.page=1;let l=n.search.vm;for(let e in l)l[e]=null;s.findList()},findList(){n.loading=!0,h.findList(n.rows,n.page,n.search.vm).then(l=>{let e=l.data;n.loading=!1,n.page=e.page,n.rows=e.size,n.total=e.total,n.data=e.dataSource})},deleteList(l){let e=[];l?e.push(l):e=y.value.table.getCheckboxRecords().map(c=>c.id),h.deleteList(e).then(c=>{c.code==1&&(j.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),s.findList())})},openForm(l){k.value.openForm({visible:!0,key:l})},exportExcel(){h.exportExcel(n.search.vm)}};return N(()=>{s.findList()}),(l,e)=>{const c=r("a-input"),C=r("a-col"),m=r("a-button"),S=r("a-row"),x=r("a-popconfirm"),T=r("a-menu-item"),E=r("a-menu"),F=r("a-dropdown"),_=r("vxe-column"),L=r("a-tag"),$=r("a-divider");return u(),b("div",null,[t(z,{ref_key:"refList",ref:y,tableData:a(n),onOnChange:s.onChange},{search:o(()=>[t(S,{gutter:[15,15]},{default:o(()=>[t(C,{xs:24,sm:12,md:8,lg:6,xl:4},{default:o(()=>[t(c,{value:a(n).search.vm.name,"onUpdate:value":e[0]||(e[0]=i=>a(n).search.vm.name=i),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),t(C,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:o(()=>[t(m,{type:"primary",class:"mr-15",onClick:s.findList},{default:o(()=>[M]),_:1},8,["onClick"]),t(m,{class:"mr-15",onClick:s.onResetSearch},{default:o(()=>[P]),_:1},8,["onClick"]),t(m,{type:"danger",class:"mr-15",onClick:e[1]||(e[1]=i=>a(n).search.state=!1)},{default:o(()=>[U]),_:1})]),_:1})]),_:1})]),toolbar:o(()=>[t(c,{value:a(n).search.vm.name,"onUpdate:value":e[2]||(e[2]=i=>a(n).search.vm.name=i),placeholder:"\u540D\u79F0",onKeyup:s.findList},null,8,["value","onKeyup"]),a(p).search?(u(),f(m,{key:0,onClick:e[3]||(e[3]=i=>a(n).search.state=!a(n).search.state)},{icon:o(()=>[t(g,{name:a(n).search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:o(()=>[K]),_:1})):v("",!0),a(p).insert?(u(),f(m,{key:1,type:"primary",onClick:e[4]||(e[4]=i=>s.openForm())},{icon:o(()=>[t(g,{name:"PlusOutlined"})]),default:o(()=>[q]),_:1})):v("",!0),a(p).delete?(u(),f(x,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:e[5]||(e[5]=i=>s.deleteList()),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[t(m,{type:"danger"},{icon:o(()=>[t(g,{name:"DeleteOutlined"})]),default:o(()=>[G]),_:1})]),_:1})):v("",!0),t(F,null,{overlay:o(()=>[t(E,null,{default:o(()=>[t(T,{key:"1",onClick:l.exportExcel},{default:o(()=>[H]),_:1},8,["onClick"])]),_:1})]),default:o(()=>[t(m,null,{default:o(()=>[J,t(g,{name:"DownOutlined"})]),_:1})]),_:1})]),"table-col-default":o(()=>[t(_,{field:"number",title:"\u5C97\u4F4D\u7F16\u53F7"}),t(_,{field:"code",title:"\u5C97\u4F4D\u7F16\u7801"}),t(_,{field:"name",title:"\u89D2\u8272\u540D\u79F0"}),t(_,{field:"state",title:"\u72B6\u6001"},{default:o(({row:i})=>[i.state==1?(u(),f(L,{key:0,color:"success"},{default:o(()=>[Q]),_:1})):(u(),f(L,{key:1,color:"warning"},{default:o(()=>[W]),_:1}))]),_:1}),t(_,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"}),t(_,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"}),t(_,{field:"id",title:"\u64CD\u4F5C"},{default:o(({row:i})=>[a(p).update?(u(),b("a",{key:0,href:"javascript:void(0)",onClick:B=>s.openForm(i.id)},"\u7F16\u8F91",8,X)):v("",!0),t($,{type:"vertical"}),a(p).delete?(u(),f(x,{key:1,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:B=>s.deleteList(i.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:o(()=>[Y]),_:2},1032,["onConfirm"])):v("",!0)]),_:1})]),_:1},8,["tableData","onOnChange"]),t(A,{ref_key:"refForm",ref:k,onOnSuccess:e[6]||(e[6]=()=>s.findList())},null,512)])}}});export{ae as default};
