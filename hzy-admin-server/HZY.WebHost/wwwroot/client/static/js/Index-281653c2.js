import{b as O,r as R,a as S,i as V,o as $,j as r,k as d,c as g,L as z,M as E,g as e,w as t,f as _,q as m,A as D,C as f,n as i,e as F,d as Y,aS as U,t as P,aW as q}from"./index-3c68c560.js";import H from"./Info-ee8647e4.js";import{o as M}from"./organizationService-73a6c5a7.js";const W=i(" \u6B63\u5E38 "),G=i(" \u505C\u7528 "),J=i("\u67E5\u8BE2"),K=i("\u91CD\u7F6E"),Q=i(" \u68C0\u7D22 "),X=i(" \u65B0\u5EFA "),Z=i("\u6B63\u5E38"),ee=i("\u505C\u7528"),te=["onClick"],ae=["onClick"],oe=Y("a",{class:"text-danger"},"\u5220\u9664",-1),ne={name:"system_organization"},de=Object.assign(ne,{setup(se){const A=O(),n=R({search:{state:!1,vm:{name:null,state:1}},loading:!1,data:[]}),k=S(null),x=S(null),u=A.getPowerByMenuId(V.currentRoute.value.meta.menuId),s={onResetSearch(){let l=n.search.vm;for(let a in l)l[a]=null;l.state=1,s.findList()},findList(){n.loading=!0,M.findList(n.search.vm).then(l=>{let a=l.data;n.loading=!1,n.data=a,U(()=>{s.setAllTreeExpand()})})},deleteList(l){let a=[];l&&a.push(l),M.deleteList(a).then(h=>{h.code==1&&(P.message("\u5220\u9664\u6210\u529F!","\u6210\u529F"),s.findList())})},openForm(l,a){k.value.openForm({visible:!0,key:l,parentId:a})},formatDate(l){return q(l).format("YYYY-MM-DD")},setAllTreeExpand(){x.value.setAllTreeExpand(!0)}};return $(()=>{s.findList()}),(l,a)=>{const h=r("a-input"),p=r("a-col"),y=r("a-radio"),j=r("a-radio-group"),v=r("a-button"),C=r("a-row"),b=r("a-card"),B=r("a-space"),c=r("vxe-column"),T=r("a-tag"),L=r("a-divider"),I=r("a-popconfirm"),N=r("vxe-table");return d(),g("div",null,[z(e(b,{class:"mb-15"},{default:t(()=>[e(C,{gutter:[15,15]},{default:t(()=>[e(p,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[e(h,{value:n.search.vm.name,"onUpdate:value":a[0]||(a[0]=o=>n.search.vm.name=o),placeholder:"\u540D\u79F0"},null,8,["value"])]),_:1}),e(p,{xs:24,sm:12,md:8,lg:6,xl:4},{default:t(()=>[e(j,{value:n.search.vm.state,"onUpdate:value":a[1]||(a[1]=o=>n.search.vm.state=o)},{default:t(()=>[e(y,{value:1},{default:t(()=>[W]),_:1}),e(y,{value:2},{default:t(()=>[G]),_:1})]),_:1},8,["value"])]),_:1}),e(p,{xs:24,sm:12,md:8,lg:6,xl:4,style:{float:"right"}},{default:t(()=>[e(v,{type:"primary",class:"mr-15",onClick:s.findList},{default:t(()=>[J]),_:1},8,["onClick"]),e(v,{class:"mr-15",onClick:s.onResetSearch},{default:t(()=>[K]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[E,n.search.state]]),e(b,null,{default:t(()=>[e(C,{gutter:[15,15]},{default:t(()=>[e(p,{xs:24,sm:24,md:12,lg:12,xl:12},{default:t(()=>[e(B,{size:15},{default:t(()=>[_(u).search?(d(),m(v,{key:0,onClick:a[2]||(a[2]=o=>n.search.state=!n.search.state)},{icon:t(()=>[e(D,{name:n.search.state?"UpOutlined":"DownOutlined"},null,8,["name"])]),default:t(()=>[Q]),_:1})):f("",!0),_(u).insert?(d(),m(v,{key:1,type:"primary",onClick:a[3]||(a[3]=o=>s.openForm())},{icon:t(()=>[e(D,{name:"PlusOutlined"})]),default:t(()=>[X]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),e(N,{class:"mt-15",ref_key:"refTable",ref:x,border:"",stripe:"",data:n.data,"row-config":{isCurrent:!0,isHover:!0},"column-config":{isCurrent:!0,resizable:!0},"checkbox-config":{highlight:!0},"tree-config":{transform:!0,rowField:"id",parentField:"parentId"}},{default:t(()=>[e(c,{field:"name",title:"\u90E8\u95E8\u540D\u79F0","tree-node":""}),e(c,{field:"orderNumber",title:"\u6392\u5E8F\u53F7"}),e(c,{field:"levelCode",title:"\u7EA7\u522B\u7801"}),e(c,{field:"state",title:"\u72B6\u6001"},{default:t(({row:o})=>[o.state==1?(d(),m(T,{key:0,color:"success"},{default:t(()=>[Z]),_:1})):(d(),m(T,{key:1,color:"warning"},{default:t(()=>[ee]),_:1}))]),_:1}),e(c,{field:"lastModificationTime",title:"\u66F4\u65B0\u65F6\u95F4"},{default:t(({row:o})=>[i(F(s.formatDate(o.lastModificationTime)),1)]),_:1}),e(c,{field:"creationTime",title:"\u521B\u5EFA\u65F6\u95F4"},{default:t(({row:o})=>[i(F(s.formatDate(o.creationTime)),1)]),_:1}),e(c,{field:"id",title:"\u64CD\u4F5C"},{default:t(({row:o})=>[_(u).insert?(d(),g("a",{key:0,href:"javascript:void(0)",onClick:w=>s.openForm(null,o.id)},"\u65B0\u5EFA",8,te)):f("",!0),e(L,{type:"vertical"}),_(u).update?(d(),g("a",{key:1,href:"javascript:void(0)",onClick:w=>s.openForm(o.id)},"\u7F16\u8F91",8,ae)):f("",!0),e(L,{type:"vertical"}),_(u).delete?(d(),m(I,{key:2,title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onConfirm:w=>s.deleteList(o.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"},{default:t(()=>[oe]),_:2},1032,["onConfirm"])):f("",!0)]),_:1})]),_:1},8,["data"])]),_:1}),e(H,{ref_key:"formRef",ref:k,onOnSuccess:a[4]||(a[4]=()=>s.findList())},null,512)])}}});export{de as default};
