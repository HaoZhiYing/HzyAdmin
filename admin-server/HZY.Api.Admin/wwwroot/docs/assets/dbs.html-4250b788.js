import{_ as s,o as n,c as a,a as e}from"./app-4f4af2d5.js";const t="/docs/hzy-admin/database/dbs-1.jpg",o="/docs/hzy-admin/database/dbs-2.jpg",p={},i=e('<h1 id="多数据源" tabindex="-1"><a class="header-anchor" href="#多数据源" aria-hidden="true">#</a> 多数据源</h1><div class="custom-container tip"><p class="custom-container-title">多数据源说明</p><p>多数据源必须创建一套类似 HZY.Repository.EntityFramework.Admin 的类库，命名规则为 HZY.Repository.EntityFramework.数据库名称。 在使用时注入 IRepository&lt;你的实体名称&gt; 仓储对象作为数据库操作对象。</p></div><h2 id="_1、定义仓储类库" tabindex="-1"><a class="header-anchor" href="#_1、定义仓储类库" aria-hidden="true">#</a> 1、定义仓储类库</h2><p><img src="'+t+'" alt="多数据源"></p><h2 id="_2、配置数据库连接字符串" tabindex="-1"><a class="header-anchor" href="#_2、配置数据库连接字符串" aria-hidden="true">#</a> 2、配置数据库连接字符串</h2><p><img src="'+o+`" alt="数据库连接字符串"></p><h2 id="_3、切换数据库类型" tabindex="-1"><a class="header-anchor" href="#_3、切换数据库类型" aria-hidden="true">#</a> 3、切换数据库类型</h2><div class="custom-container warning"><p class="custom-container-title">见步骤2图中</p><p>修改 appsettings.Development.json ，appsettings.Production.json 文件中的 AdminRepositoryOptions.DefaultDatabaseType 数据库类型即可。</p></div><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// 连接字符串</span>
  <span class="token property">&quot;ConnectionStrings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// sqlserver</span>
    <span class="token property">&quot;SqlServer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Server=.;Database=hzy_admin_sqlserver_20230227;User ID=sa;Password=123456;MultipleActiveResultSets=true;Encrypt=True;TrustServerCertificate=True;&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// mysql</span>
    <span class="token property">&quot;MySql&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Server=localhost; port=3306; Database=hzy_admin_mysql_20230227; uid=root; pwd=123456; Convert Zero Datetime=False&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// postgresql</span>
    <span class="token property">&quot;PostgreSql&quot;</span><span class="token operator">:</span> <span class="token string">&quot;User ID=postgres;Password=123456;Host=localhost;Port=5432;Database=hzy_admin_pgsql_20230227;Pooling=true;TimeZone=Asia/Shanghai&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// oracle</span>
    <span class="token property">&quot;Oracle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user id=hzy_admin_oracle_20221213;password=123456; data source=//127.0.0.1:1521/orcl;Pooling=true;Min Pool Size=1&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// redis</span>
    <span class="token property">&quot;Redis&quot;</span><span class="token operator">:</span> <span class="token string">&quot;127.0.0.1:6379,password=123456,defaultDatabase=0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// admin 数据库管理</span>
  <span class="token property">&quot;AdminRepositoryOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//默认数据库类型 SqlServer 、MySql 、PostgreSql、Oracle</span>
    <span class="token property">&quot;DefaultDatabaseType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SqlServer&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//是否监控EFCore程序</span>
    <span class="token property">&quot;IsMonitorEFCore&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,9),r=[i];function l(c,d){return n(),a("div",null,r)}const m=s(p,[["render",l],["__file","dbs.html.vue"]]);export{m as default};
