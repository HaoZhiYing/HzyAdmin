import{d as A,r as D,b_ as R,b as x,e as K,f as s,o as r,l as u,w as t,a as n,u as c,j as l,B as _,c as h,ab as B,ac as q,U as G,g as H,T as P}from"./index-C9oHGpmd.js";import{_ as g}from"./AppIcon.vue_vue_type_script_setup_true_lang-o_ph5tPH.js";import{S as C,_ as J}from"./Info.vue_vue_type_script_setup_true_lang-CTUtRbuL.js";import{_ as Q}from"./PageContainer.vue_vue_type_script_setup_true_lang-w--qcJ6v.js";import{_ as W}from"./TableCurd.vue_vue_type_script_setup_true_lang-nb7-a0jh.js";import"./ColumnSetting.vue_vue_type_script_setup_true_lang-dsx0k3kj.js";const X={key:0},Y={key:1},Z=["onClick"],ee=H("a",{class:"text-danger"},"删除",-1),de=A({name:"system_post",__name:"Index",setup(te){const e=D({search:{state:!1,vm:{name:void 0},sort:[]},loading:!1,page:1,size:10,total:100,columns:[{fieldName:"number",title:"编号",show:!0,width:"",sorter:!0,dataIndex:"number"},{fieldName:"code",title:"岗位编码",show:!0,width:"",sorter:!0,dataIndex:"code"},{fieldName:"name",title:"岗位名称",show:!0,width:"",sorter:!0,dataIndex:"name"},{fieldName:"state",title:"状态",show:!0,width:"",sorter:!0,dataIndex:"state"},{fieldName:"lastModificationTime",title:"最后更新时间",show:!0,width:"",sorter:!0,dataIndex:"lastModificationTime"},{fieldName:"creationTime",title:"创建时间",show:!0,width:"",sorter:!0,dataIndex:"creationTime"},{fieldName:"id",title:"操作",show:!0,width:"",sorter:!0,dataIndex:"id"}],data:[]}),m=R(),S=x(),k=x(),b=x();K(()=>{f()});async function f(){try{e.loading=!0;const i=await C.findList(e.page,e.size,e.search.vm,e.search.sort);if(e.loading=!1,i.code!=200)return;e.page=i.data.page,e.size=i.data.size,e.total=i.data.total,e.data=i.data.dataSource}catch{e.loading=!1}}async function z(i){var y;let a=[];if(i?a.push(i):a=((y=S.value)==null?void 0:y.getSelectedRowKeys())??[],a.length==0)return P.message.error("请选择要删除的行!");try{e.loading=!0;const v=await C.deleteList(a);if(e.loading=!1,v.code!=200)return;P.message.success("删除成功!"),f()}catch{e.loading=!1}}function E(){C.exportExcel(e.search.vm,e.search.sort)}return(i,a)=>{const y=s("a-input"),v=s("a-form-item"),N=s("a-col"),p=s("a-button"),L=s("a-space"),O=s("a-row"),U=s("a-form"),I=s("a-popconfirm"),V=s("a-menu-item"),F=s("a-menu"),M=s("a-dropdown"),$=s("a-tag"),T=s("a-table-column"),j=s("a-divider");return r(),u(Q,null,{default:t(()=>[n(W,{ref_key:"refTableCurd",ref:S,config:e,"onUpdate:config":a[7]||(a[7]=o=>e=o),onChange:a[8]||(a[8]=o=>{e.page=o.pagination.current??1,e.size=o.pagination.pageSize??e.size,e.search.sort=o.sorter instanceof Array?[...o.sorter]:[o.sorter],f()}),onShowSizeChange:a[9]||(a[9]=({current:o,size:d})=>{e.page=o==0?1:o,e.size=d,f()})},{search:t(()=>[c(m).search?(r(),u(U,{key:0,ref_key:"refSearchForm",ref:b,model:e.search.vm},{default:t(()=>[n(O,{gutter:[16,0]},{default:t(()=>[n(N,{xs:24,sm:12,md:8,lg:6,xl:6},{default:t(()=>[n(v,{class:"mb-0",name:"name",label:"名称"},{default:t(()=>[n(y,{value:e.search.vm.name,"onUpdate:value":a[0]||(a[0]=o=>e.search.vm.name=o),placeholder:"名称"},null,8,["value"])]),_:1})]),_:1}),n(N,{xs:24,sm:12,md:8,lg:6,xl:6,class:"text-right"},{default:t(()=>[n(L,{size:8},{default:t(()=>[n(p,{onClick:a[1]||(a[1]=o=>{var d;e.page=1,(d=b.value)==null||d.resetFields(),f()})},{default:t(()=>[l(" 重置 ")]),_:1}),n(p,{type:"primary",onClick:a[2]||(a[2]=o=>{e.page=1,f()})},{default:t(()=>[l(" 查询 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])):_("",!0)]),"toolbar-left":t(()=>[c(m).search?(r(),u(p,{key:0,onClick:a[3]||(a[3]=o=>e.search.state=!e.search.state)},{default:t(()=>[e.search.state?(r(),h("div",X,[n(g,{name:"UpOutlined"}),l("  收起 ")])):(r(),h("div",Y,[n(g,{name:"DownOutlined"}),l("  展开 ")]))]),_:1})):_("",!0),c(m).insert?(r(),u(p,{key:1,type:"primary",onClick:a[4]||(a[4]=()=>{var o;return(o=k.value)==null?void 0:o.open()})},{icon:t(()=>[n(g,{name:"PlusOutlined"})]),default:t(()=>[l(" 新建 ")]),_:1})):_("",!0),c(m).delete?(r(),u(I,{key:2,title:"您确定要删除?",onConfirm:a[5]||(a[5]=o=>z()),okText:"确定",cancelText:"取消"},{default:t(()=>[n(p,{type:"primary",danger:""},{icon:t(()=>[n(g,{name:"DeleteOutlined"})]),default:t(()=>[l(" 批量删除 ")]),_:1})]),_:1})):_("",!0)]),"toolbar-right":t(()=>[n(M,null,{overlay:t(()=>[n(F,null,{default:t(()=>[n(V,{key:"1",onClick:a[6]||(a[6]=o=>E())},{default:t(()=>[l("导出 Excel")]),_:1})]),_:1})]),default:t(()=>[n(p,null,{default:t(()=>[l(" 更多 "),n(g,{name:"ellipsis-outlined"})]),_:1})]),_:1})]),state:t(o=>[n(T,B(q(o)),{default:t(({record:d})=>[d.state==1?(r(),u($,{key:0,color:"success"},{default:t(()=>[l("正常")]),_:1})):(r(),u($,{key:1,color:"warning"},{default:t(()=>[l("停用")]),_:1}))]),_:2},1040)]),id:t(o=>[c(m).update||c(m).delete?(r(),u(T,B(G({key:0},o)),{default:t(({record:d})=>[c(m).update?(r(),h("a",{key:0,href:"javascript:;",onClick:()=>{var w;return(w=k.value)==null?void 0:w.open(d.id)}},"编辑",8,Z)):_("",!0),n(j,{type:"vertical"}),c(m).delete?(r(),u(I,{key:1,title:"您确定要删除?",onConfirm:w=>z(d.id),okText:"确定",cancelText:"取消"},{default:t(()=>[ee]),_:2},1032,["onConfirm"])):_("",!0)]),_:2},1040)):_("",!0)]),_:1},8,["config"]),n(J,{ref_key:"refInfo",ref:k,onSuccess:()=>f()},null,8,["onSuccess"])]),_:1})}}});export{de as default};
