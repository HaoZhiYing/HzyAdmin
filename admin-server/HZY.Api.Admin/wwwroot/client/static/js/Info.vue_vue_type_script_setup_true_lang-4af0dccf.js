import{d as C,r as S,b as N,f as n,o as T,l as $,w as a,a as o,i as f,T as B}from"./index-1d3290fc.js";import{S as _}from"./SysOrganizationService-c4d109f1.js";const V=C({__name:"Info",props:{onSuccess:{type:Function}},setup(b,{expose:g}){const c=b,e=S({vm:{id:"",form:{}},visible:!1,loading:!1}),v=N();g({open:(m="",l="")=>{var i;e.visible=!0,e.visible&&(e.vm.id=m),(i=v.value)==null||i.resetFields(),e.loading=!0,_.findForm(m).then(d=>{e.loading=!1,d.code==1&&(e.vm=d.data,e.vm.form.parentId=l)})}});function x(){var m;(m=v.value)==null||m.validate().then(async()=>{try{e.loading=!0;const l=await _.saveForm(e.vm.id,e.vm.form);if(e.loading=!1,l.code!=1)return;B.message.success("操作成功!"),c.onSuccess(),e.visible=!1}catch{e.loading=!1}})}return(m,l)=>{const i=n("a-button"),d=n("a-input-number"),r=n("a-form-item"),s=n("a-col"),u=n("a-input"),p=n("a-radio"),w=n("a-radio-group"),y=n("a-row"),U=n("a-form"),F=n("a-spin"),k=n("a-modal");return T(),$(k,{visible:e.visible,"onUpdate:visible":l[8]||(l[8]=t=>e.visible=t),title:e.vm.id?"编辑":"新建",centered:"",onOk:l[9]||(l[9]=t=>e.visible=!1),width:800},{footer:a(()=>[o(i,{type:"primary",loading:e.loading,onClick:l[0]||(l[0]=t=>x())},{default:a(()=>[f(" 提交")]),_:1},8,["loading"]),o(i,{onClick:l[1]||(l[1]=t=>e.visible=!1)},{default:a(()=>[f("关闭")]),_:1})]),default:a(()=>[o(F,{spinning:e.loading},{default:a(()=>[o(U,{ref_key:"refForm",ref:v,layout:"vertical",model:e.vm.form},{default:a(()=>[o(y,{gutter:[16,0]},{default:a(()=>[o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"排序号"},{default:a(()=>[o(d,{value:e.vm.form.orderNumber,"onUpdate:value":l[2]||(l[2]=t=>e.vm.form.orderNumber=t),min:1,max:999,class:"w100"},null,8,["value"])]),_:1})]),_:1}),o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"部门名称"},{default:a(()=>[o(u,{value:e.vm.form.name,"onUpdate:value":l[3]||(l[3]=t=>e.vm.form.name=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"负责人"},{default:a(()=>[o(u,{value:e.vm.form.leader,"onUpdate:value":l[4]||(l[4]=t=>e.vm.form.leader=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"联系电话"},{default:a(()=>[o(u,{value:e.vm.form.phone,"onUpdate:value":l[5]||(l[5]=t=>e.vm.form.phone=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"邮箱"},{default:a(()=>[o(u,{value:e.vm.form.email,"onUpdate:value":l[6]||(l[6]=t=>e.vm.form.email=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),o(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[o(r,{label:"状态"},{default:a(()=>[o(w,{value:e.vm.form.state,"onUpdate:value":l[7]||(l[7]=t=>e.vm.form.state=t)},{default:a(()=>[o(p,{value:1},{default:a(()=>[f("正常")]),_:1}),o(p,{value:2},{default:a(()=>[f("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}});export{V as _};
