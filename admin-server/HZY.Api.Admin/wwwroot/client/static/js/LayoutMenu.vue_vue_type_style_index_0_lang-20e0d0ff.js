import{d as b,G as I,A as B,q as w,m as R,T as E,r as L,j as d,n as U,f as h,o as s,l,w as _,u as t,c as p,B as C,F as y,x as v,g as K,t as T}from"./index-ceef6588.js";import{_ as k}from"./AppIcon.vue_vue_type_script_setup_true_lang-081834dc.js";import{_ as x}from"./LayoutMenuSub.vue_vue_type_script_setup_true_lang-227d4097.js";import{M as V,E as j}from"./MenuStore-74778aad.js";const $=b({__name:"LayoutMenu",setup(A){I(m=>{var n,u,a,e;return{"00ea79d0":(n=t(o).menuCustomThemes[t(o).state.menuCustomThemesIndex])==null?void 0:n.backgroundColor,"0b8128b9":(u=t(o).menuCustomThemes[t(o).state.menuCustomThemesIndex])==null?void 0:u.textColor,"6fe7458a":(a=t(o).menuCustomThemes[t(o).state.menuCustomThemesIndex])==null?void 0:a.activeBgColor,e52fbbda:(e=t(o).menuCustomThemes[t(o).state.menuCustomThemesIndex])==null?void 0:e.activeTextColor}});const o=V(),f=B();w();const g=R(()=>E.genTreeData(f.state.userInfo.menus,null)),c=L({defaultSelectedKeys:[d.currentRoute.value.meta.menuId??""],selectedKeys:[d.currentRoute.value.meta.menuId??""],openKeys:M()});U(()=>d.currentRoute.value,m=>{c.selectedKeys=[m.meta.menuId??""]});function M(){let n=d.currentRoute.value.meta.levelCode;if(!n)return[];var u=[];if(n.indexOf(".")>-1)for(var a=n.split("."),e=0;e<a.length-1;e++){var r=a[e];u.push(parseInt(r))}return u}function S(m){const n=f.state.userInfo.menus.find(u=>u.id==m.key);d.push({path:(n==null?void 0:n.jumpUrl)??(n==null?void 0:n.router)??"/404"})}return(m,n)=>{const u=h("a-menu-item"),a=h("a-menu");return s(),l(a,{theme:t(o).themeType(),mode:"inline",onSelect:S,selectedKeys:c.selectedKeys,"onUpdate:selectedKeys":n[0]||(n[0]=e=>c.selectedKeys=e),openKeys:c.openKeys,"onUpdate:openKeys":n[1]||(n[1]=e=>c.openKeys=e)},{default:_(()=>[t(o).state.menuMode!=t(j).default?(s(!0),p(y,{key:0},C(t(f).state.subMenus,e=>{var r;return s(),p(y,null,[!e.children||((r=e.children)==null?void 0:r.filter(i=>i.show).length)==0&&e.type==2?(s(),l(u,{key:e.id,title:e.name},{default:_(()=>[e.icon?(s(),l(k,{key:0,name:e.icon},null,8,["name"])):v("",!0),K("span",null,T(e.name),1)]),_:2},1032,["title"])):(s(),l(x,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256)):(s(!0),p(y,{key:1},C(t(g),e=>{var r;return s(),p(y,null,[!e.children||((r=e.children)==null?void 0:r.filter(i=>i.show).length)==0&&e.type==2?(s(),l(u,{key:e.id,title:e.name},{default:_(()=>[e.icon?(s(),l(k,{key:0,name:e.icon},null,8,["name"])):v("",!0),K("span",null,T(e.name),1)]),_:2},1032,["title"])):(s(),l(x,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256))]),_:1},8,["theme","selectedKeys","openKeys"])}}});export{$ as _};
