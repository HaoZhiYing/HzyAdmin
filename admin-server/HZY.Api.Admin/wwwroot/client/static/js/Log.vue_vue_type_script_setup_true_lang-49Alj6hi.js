import{T as _}from"./TimedTaskService-2_JrkzO6.js";import{d as f,r as x,f as p,o as w,l as h,w as r,u as a,a as l}from"./index-C9oHGpmd.js";const k=f({__name:"Log",props:{onSuccess:{type:Function}},setup(S,{expose:g}){let d=[{title:"创建时间",dataIndex:"creationTime",align:"center",width:200},{title:"日志",dataIndex:"text",align:"center",ellipsis:!0}],e=x({open:!1,loading:!1,key:"",pageIndex:1,pageSize:10,pageTotal:0,pageList:[]});g({openWindow:(n="")=>{e.open=!0,e.key=n,o()}});function o(){e.loading=!0,_.getJobLoggers(e.key,e.pageIndex).then(n=>{e.loading=!1,n.code==200&&(e.pageList=n.data.list,e.pageTotal=n.data.total)})}return(n,s)=>{const c=p("a-table"),u=p("a-spin"),m=p("a-drawer");return w(),h(m,{open:a(e).open,"onUpdate:open":s[0]||(s[0]=t=>a(e).open=t),title:"日志",footer:!1,width:"80%"},{default:r(()=>[l(u,{spinning:a(e).loading},{default:r(()=>[l(c,{columns:a(d),"data-source":a(e).pageList,bordered:"",pagination:{current:a(e).pageIndex,pageSize:a(e).pageSize,total:a(e).pageTotal,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条`,onChange:(t,i)=>{a(e).pageIndex=t,a(e).pageSize=i,o()},onShowSizeChange:(t,i)=>{a(e).pageIndex=t,a(e).pageSize=i,o()}},size:"small"},null,8,["columns","data-source","pagination"])]),_:1},8,["spinning"])]),_:1},8,["open"])}}});export{k as _};
