import{_ as $m}from"./PageContainer.vue_vue_type_script_setup_true_lang-ee111854.js";import{d as mt,c1 as Na,c2 as Pm,c3 as Nm,c4 as Fm,c5 as Hm,b as Dr,o as K,c as ye,n as zi,R as be,B as Et,g as it,t as Ze,l as He,z as zm,bx as ef,a1 as hh,f as Le,S as km,c6 as Wm,w as bt,e as Up,a6 as Gm,q as Jr,c7 as Um,a as Lt,r as Yp,aZ as rs,bD as ns,j as Fa,M as Dt,G as rn,bo as is,E as Ym,c8 as Xm,bp as Vm,I as jm,u as qm}from"./index-5ce8de01.js";import"./AppIcon.vue_vue_type_script_setup_true_lang-7672b527.js";var tf=Object.freeze({__proto__:null,get Base(){return xr},get Circle(){return vx},get Ellipse(){return gx},get Image(){return pf},get Line(){return mx},get Marker(){return Sx},get Path(){return gf},get Polygon(){return Ix},get Polyline(){return Bx},get Rect(){return Nx},get Text(){return Hx}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ds=function(e,r){return Ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Ds(e,r)};function Zt(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ds(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var Ue=function(){return Ue=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},Ue.apply(this,arguments)};function Km(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t}var dh=function(e){return e!==null&&typeof e!="function"&&isFinite(e.length)},Zm={}.toString,cl=function(e,r){return Zm.call(e)==="[object "+r+"]"},Kn=function(e){return cl(e,"Function")},et=function(e){return e==null},or=function(e){return Array.isArray?Array.isArray(e):cl(e,"Array")},vo=function(e){var r=typeof e;return e!==null&&r==="object"||r==="function"};function Ce(e,r){if(e){var t;if(or(e))for(var n=0,i=e.length;n<i&&(t=r(e[n],n),t!==!1);n++);else if(vo(e)){for(var o in e)if(e.hasOwnProperty(o)&&(t=r(e[o],o),t===!1))break}}}var vh=function(e){return typeof e=="object"&&e!==null},Or=function(e){if(or(e))return e.reduce(function(r,t){return Math.max(r,t)},e[0])},Ir=function(e){if(or(e))return e.reduce(function(r,t){return Math.min(r,t)},e[0])},wr=function(e){return cl(e,"String")},$s=function(e){return cl(e,"Number")},Qm=1e-5;function Jm(e,r,t){return t===void 0&&(t=Qm),Math.abs(e-r)<t}var Xp=function(e,r){return(e%r+r)%r},ew=Math.PI/180,Vp=function(e){return ew*e},tw=Object.values?function(e){return Object.values(e)}:function(e){var r=[];return Ce(e,function(t,n){Kn(e)&&n==="prototype"||r.push(t)}),r},rw=function(e){return et(e)?"":e.toString()},jp=function(e){var r=rw(e);return r.charAt(0).toUpperCase()+r.substring(1)};function nw(e){var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};return r(e)}function iw(e){var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;r(e)}function os(e,r){for(var t in r)r.hasOwnProperty(t)&&t!=="constructor"&&r[t]!==void 0&&(e[t]=r[t])}function qp(e,r,t,n){return r&&os(e,r),t&&os(e,t),n&&os(e,n),e}var ow=function(e,r){if(!Kn(e))throw new TypeError("Expected a function");var t=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r?r.apply(this,n):n[0],a=t.cache;if(a.has(o))return a.get(o);var l=e.apply(this,n);return a.set(o,l),l};return t.cache=new Map,t},Ha=function(e,r){if(e===r)return!0;if(!e||!r||wr(e)||wr(r))return!1;if(dh(e)||dh(r)){if(e.length!==r.length)return!1;for(var t=!0,n=0;n<e.length&&(t=Ha(e[n],r[n]),!!t);n++);return t}if(vh(e)||vh(r)){var i=Object.keys(e),o=Object.keys(r);if(i.length!==o.length)return!1;for(var t=!0,n=0;n<i.length&&(t=Ha(e[i[n]],r[i[n]]),!!t);n++);return t}return!1},ca={},aw=function(e){return e=e||"g",ca[e]?ca[e]+=1:ca[e]=1,e+ca[e]},ha=function(){};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function lw(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var n=Array(e),i=0,r=0;r<t;r++)for(var o=arguments[r],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n}var da;ow(function(e,r){r===void 0&&(r={});var t=r.fontSize,n=r.fontFamily,i=r.fontWeight,o=r.fontStyle,a=r.fontVariant;return da||(da=document.createElement("canvas").getContext("2d")),da.font=[o,a,i,t+"px",n].join(" "),da.measureText(wr(e)?e:"").width},function(e,r){return r===void 0&&(r={}),lw([e],tw(r)).join("")});var po=`	
\v\f\r   ᠎             　\u2028\u2029`,sw=new RegExp("([a-z])["+po+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+po+"]*,?["+po+"]*)+)","ig"),uw=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+po+"]*,?["+po+"]*","ig"),pi=function(e){if(!e)return null;if(or(e))return e;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(e).replace(sw,function(n,i,o){var a=[],l=i.toLowerCase();if(o.replace(uw,function(s,u){u&&a.push(+u)}),l==="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),l="l",i=i==="m"?"l":"L"),l==="o"&&a.length===1&&t.push([i,a[0]]),l==="r")t.push([i].concat(a));else for(;a.length>=r[l]&&(t.push([i].concat(a.splice(0,r[l]))),!!r[l]););return e}),t},Ps=function(e,r){for(var t=[],n=0,i=e.length;i-2*!r>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];r?n?i-4===n?o[3]={x:+e[0],y:+e[1]}:i-2===n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),t.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return t},va=function(e,r,t,n,i){var o=[];if(i===null&&n===null&&(n=t),e=+e,r=+r,t=+t,n=+n,i!==null){var a=Math.PI/180,l=e+t*Math.cos(-n*a),s=e+t*Math.cos(-i*a),u=r+t*Math.sin(-n*a),f=r+t*Math.sin(-i*a);o=[["M",l,u],["A",t,t,0,+(i-n>180),0,s,f]]}else o=[["M",e,r],["m",0,-n],["a",t,n,0,1,1,0,2*n],["a",t,n,0,1,1,0,-2*n],["z"]];return o},Ns=function(e){if(e=pi(e),!e||!e.length)return[["M",0,0]];var r=[],t=0,n=0,i=0,o=0,a=0,l,s;e[0][0]==="M"&&(t=+e[0][1],n=+e[0][2],i=t,o=n,a++,r[0]=["M",t,n]);for(var u=e.length===3&&e[0][0]==="M"&&e[1][0].toUpperCase()==="R"&&e[2][0].toUpperCase()==="Z",f=void 0,c=void 0,h=a,d=e.length;h<d;h++){if(r.push(f=[]),c=e[h],l=c[0],l!==l.toUpperCase())switch(f[0]=l.toUpperCase(),f[0]){case"A":f[1]=c[1],f[2]=c[2],f[3]=c[3],f[4]=c[4],f[5]=c[5],f[6]=+c[6]+t,f[7]=+c[7]+n;break;case"V":f[1]=+c[1]+n;break;case"H":f[1]=+c[1]+t;break;case"R":s=[t,n].concat(c.slice(1));for(var v=2,p=s.length;v<p;v++)s[v]=+s[v]+t,s[++v]=+s[v]+n;r.pop(),r=r.concat(Ps(s,u));break;case"O":r.pop(),s=va(t,n,c[1],c[2]),s.push(s[0]),r=r.concat(s);break;case"U":r.pop(),r=r.concat(va(t,n,c[1],c[2],c[3])),f=["U"].concat(r[r.length-1].slice(-2));break;case"M":i=+c[1]+t,o=+c[2]+n;break;default:for(var v=1,p=c.length;v<p;v++)f[v]=+c[v]+(v%2?t:n)}else if(l==="R")s=[t,n].concat(c.slice(1)),r.pop(),r=r.concat(Ps(s,u)),f=["R"].concat(c.slice(-2));else if(l==="O")r.pop(),s=va(t,n,c[1],c[2]),s.push(s[0]),r=r.concat(s);else if(l==="U")r.pop(),r=r.concat(va(t,n,c[1],c[2],c[3])),f=["U"].concat(r[r.length-1].slice(-2));else for(var g=0,C=c.length;g<C;g++)f[g]=c[g];if(l=l.toUpperCase(),l!=="O")switch(f[0]){case"Z":t=+i,n=+o;break;case"H":t=f[1];break;case"V":n=f[1];break;case"M":i=f[f.length-2],o=f[f.length-1];break;default:t=f[f.length-2],n=f[f.length-1]}}return r},pa=function(e,r,t,n){return[e,r,t,n,t,n]},ph=function(e,r,t,n,i,o){var a=.3333333333333333,l=2/3;return[a*e+l*t,a*r+l*n,a*i+l*t,a*o+l*n,i,o]},Kp=function(e,r,t,n,i,o,a,l,s,u){t===n&&(t+=1);var f=Math.PI*120/180,c=Math.PI/180*(+i||0),h=[],d,v,p,g,C,y=function(fr,Qt,dt){var cr=fr*Math.cos(dt)-Qt*Math.sin(dt),ts=fr*Math.sin(dt)+Qt*Math.cos(dt);return{x:cr,y:ts}};if(u)v=u[0],p=u[1],g=u[2],C=u[3];else{d=y(e,r,-c),e=d.x,r=d.y,d=y(l,s,-c),l=d.x,s=d.y,e===l&&r===s&&(l+=1,s+=1);var m=(e-l)/2,w=(r-s)/2,S=m*m/(t*t)+w*w/(n*n);S>1&&(S=Math.sqrt(S),t=S*t,n=S*n);var b=t*t,A=n*n,O=(o===a?-1:1)*Math.sqrt(Math.abs((b*A-b*w*w-A*m*m)/(b*w*w+A*m*m)));g=O*t*w/n+(e+l)/2,C=O*-n*m/t+(r+s)/2,v=Math.asin(((r-C)/n).toFixed(9)),p=Math.asin(((s-C)/n).toFixed(9)),v=e<g?Math.PI-v:v,p=l<g?Math.PI-p:p,v<0&&(v=Math.PI*2+v),p<0&&(p=Math.PI*2+p),a&&v>p&&(v=v-Math.PI*2),!a&&p>v&&(p=p-Math.PI*2)}var B=p-v;if(Math.abs(B)>f){var P=p,D=l,z=s;p=v+f*(a&&p>v?1:-1),l=g+t*Math.cos(p),s=C+n*Math.sin(p),h=Kp(l,s,t,n,i,0,a,D,z,[p,P,g,C])}B=p-v;var W=Math.cos(v),U=Math.sin(v),V=Math.cos(p),k=Math.sin(p),pe=Math.tan(B/4),he=4/3*t*pe,Me=4/3*n*pe,ne=[e,r],Fe=[e+he*U,r-Me*W],we=[l+he*k,s-Me*V],Wt=[l,s];if(Fe[0]=2*ne[0]-Fe[0],Fe[1]=2*ne[1]-Fe[1],u)return[Fe,we,Wt].concat(h);h=[Fe,we,Wt].concat(h).join().split(",");for(var Qe=[],_e=0,$e=h.length;_e<$e;_e++)Qe[_e]=_e%2?y(h[_e-1],h[_e],c).y:y(h[_e],h[_e+1],c).x;return Qe},Fs=function(e,r){var t=Ns(e),n=r&&Ns(r),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a=[],l=[],s="",u="",f,c=function(m,w,S){var b,A;if(!m)return["C",w.x,w.y,w.x,w.y,w.x,w.y];switch(!(m[0]in{T:1,Q:1})&&(w.qx=w.qy=null),m[0]){case"M":w.X=m[1],w.Y=m[2];break;case"A":m=["C"].concat(Kp.apply(0,[w.x,w.y].concat(m.slice(1))));break;case"S":S==="C"||S==="S"?(b=w.x*2-w.bx,A=w.y*2-w.by):(b=w.x,A=w.y),m=["C",b,A].concat(m.slice(1));break;case"T":S==="Q"||S==="T"?(w.qx=w.x*2-w.qx,w.qy=w.y*2-w.qy):(w.qx=w.x,w.qy=w.y),m=["C"].concat(ph(w.x,w.y,w.qx,w.qy,m[1],m[2]));break;case"Q":w.qx=m[1],w.qy=m[2],m=["C"].concat(ph(w.x,w.y,m[1],m[2],m[3],m[4]));break;case"L":m=["C"].concat(pa(w.x,w.y,m[1],m[2]));break;case"H":m=["C"].concat(pa(w.x,w.y,m[1],w.y));break;case"V":m=["C"].concat(pa(w.x,w.y,w.x,m[1]));break;case"Z":m=["C"].concat(pa(w.x,w.y,w.X,w.Y));break}return m},h=function(m,w){if(m[w].length>7){m[w].shift();for(var S=m[w];S.length;)a[w]="A",n&&(l[w]="A"),m.splice(w++,0,["C"].concat(S.splice(0,6)));m.splice(w,1),f=Math.max(t.length,n&&n.length||0)}},d=function(m,w,S,b,A){m&&w&&m[A][0]==="M"&&w[A][0]!=="M"&&(w.splice(A,0,["M",b.x,b.y]),S.bx=0,S.by=0,S.x=m[A][1],S.y=m[A][2],f=Math.max(t.length,n&&n.length||0))};f=Math.max(t.length,n&&n.length||0);for(var v=0;v<f;v++){t[v]&&(s=t[v][0]),s!=="C"&&(a[v]=s,v&&(u=a[v-1])),t[v]=c(t[v],i,u),a[v]!=="A"&&s==="C"&&(a[v]="C"),h(t,v),n&&(n[v]&&(s=n[v][0]),s!=="C"&&(l[v]=s,v&&(u=l[v-1])),n[v]=c(n[v],o,u),l[v]!=="A"&&s==="C"&&(l[v]="C"),h(n,v)),d(t,n,i,o,v),d(n,t,o,i,v);var p=t[v],g=n&&n[v],C=p.length,y=n&&g.length;i.x=p[C-2],i.y=p[C-1],i.bx=parseFloat(p[C-4])||i.x,i.by=parseFloat(p[C-3])||i.y,o.bx=n&&(parseFloat(g[y-4])||o.x),o.by=n&&(parseFloat(g[y-3])||o.y),o.x=n&&g[y-2],o.y=n&&g[y-1]}return n?[t,n]:t},fw=/,?([a-z]),?/gi,Zp=function(e){return e.join(",").replace(fw,"$1")},gh=function(e,r,t,n,i){var o=-3*r+9*t-9*n+3*i,a=e*o+6*r-12*t+6*n;return e*a-3*r+3*t},Ch=function(e,r,t,n,i,o,a,l,s){s===null&&(s=1),s=s>1?1:s<0?0:s;for(var u=s/2,f=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,v=0;v<f;v++){var p=u*c[v]+u,g=gh(p,e,t,i,a),C=gh(p,r,n,o,l),y=g*g+C*C;d+=h[v]*Math.sqrt(y)}return u*d},cw=function(e,r,t,n,i,o,a,l){for(var s=[],u=[[],[]],f,c,h,d,v=0;v<2;++v){if(v===0?(c=6*e-12*t+6*i,f=-3*e+9*t-9*i+3*a,h=3*t-3*e):(c=6*r-12*n+6*o,f=-3*r+9*n-9*o+3*l,h=3*n-3*r),Math.abs(f)<1e-12){if(Math.abs(c)<1e-12)continue;d=-h/c,d>0&&d<1&&s.push(d);continue}var p=c*c-4*h*f,g=Math.sqrt(p);if(!(p<0)){var C=(-c+g)/(2*f);C>0&&C<1&&s.push(C);var y=(-c-g)/(2*f);y>0&&y<1&&s.push(y)}}for(var m=s.length,w=m,S;m--;)d=s[m],S=1-d,u[0][m]=S*S*S*e+3*S*S*d*t+3*S*d*d*i+d*d*d*a,u[1][m]=S*S*S*r+3*S*S*d*n+3*S*d*d*o+d*d*d*l;return u[0][w]=e,u[1][w]=r,u[0][w+1]=a,u[1][w+1]=l,u[0].length=u[1].length=w+2,{min:{x:Math.min.apply(0,u[0]),y:Math.min.apply(0,u[1])},max:{x:Math.max.apply(0,u[0]),y:Math.max.apply(0,u[1])}}},hw=function(e,r,t,n,i,o,a,l){if(!(Math.max(e,t)<Math.min(i,a)||Math.min(e,t)>Math.max(i,a)||Math.max(r,n)<Math.min(o,l)||Math.min(r,n)>Math.max(o,l))){var s=(e*n-r*t)*(i-a)-(e-t)*(i*l-o*a),u=(e*n-r*t)*(o-l)-(r-n)*(i*l-o*a),f=(e-t)*(o-l)-(r-n)*(i-a);if(f){var c=s/f,h=u/f,d=+c.toFixed(2),v=+h.toFixed(2);if(!(d<+Math.min(e,t).toFixed(2)||d>+Math.max(e,t).toFixed(2)||d<+Math.min(i,a).toFixed(2)||d>+Math.max(i,a).toFixed(2)||v<+Math.min(r,n).toFixed(2)||v>+Math.max(r,n).toFixed(2)||v<+Math.min(o,l).toFixed(2)||v>+Math.max(o,l).toFixed(2)))return{x:c,y:h}}}},yn=function(e,r,t){return r>=e.x&&r<=e.x+e.width&&t>=e.y&&t<=e.y+e.height},Qp=function(e,r,t,n,i){if(i)return[["M",+e+ +i,r],["l",t-i*2,0],["a",i,i,0,0,1,i,i],["l",0,n-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-t,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,r],["l",t,0],["l",0,n],["l",-t,0],["z"]];return o.parsePathArray=Zp,o},Hs=function(e,r,t,n){return e===null&&(e=r=t=n=0),r===null&&(r=e.y,t=e.width,n=e.height,e=e.x),{x:e,y:r,width:t,w:t,height:n,h:n,x2:e+t,y2:r+n,cx:e+t/2,cy:r+n/2,r1:Math.min(t,n)/2,r2:Math.max(t,n)/2,r0:Math.sqrt(t*t+n*n)/2,path:Qp(e,r,t,n),vb:[e,r,t,n].join(" ")}},dw=function(e,r){return e=Hs(e),r=Hs(r),yn(r,e.x,e.y)||yn(r,e.x2,e.y)||yn(r,e.x,e.y2)||yn(r,e.x2,e.y2)||yn(e,r.x,r.y)||yn(e,r.x2,r.y)||yn(e,r.x,r.y2)||yn(e,r.x2,r.y2)||(e.x<r.x2&&e.x>r.x||r.x<e.x2&&r.x>e.x)&&(e.y<r.y2&&e.y>r.y||r.y<e.y2&&r.y>e.y)},yh=function(e,r,t,n,i,o,a,l){or(e)||(e=[e,r,t,n,i,o,a,l]);var s=cw.apply(null,e);return Hs(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y)},mh=function(e,r,t,n,i,o,a,l,s){var u=1-s,f=Math.pow(u,3),c=Math.pow(u,2),h=s*s,d=h*s,v=f*e+c*3*s*t+u*3*s*s*i+d*a,p=f*r+c*3*s*n+u*3*s*s*o+d*l,g=e+2*s*(t-e)+h*(i-2*t+e),C=r+2*s*(n-r)+h*(o-2*n+r),y=t+2*s*(i-t)+h*(a-2*i+t),m=n+2*s*(o-n)+h*(l-2*o+n),w=u*e+s*t,S=u*r+s*n,b=u*i+s*a,A=u*o+s*l,O=90-Math.atan2(g-y,C-m)*180/Math.PI;return{x:v,y:p,m:{x:g,y:C},n:{x:y,y:m},start:{x:w,y:S},end:{x:b,y:A},alpha:O}},vw=function(e,r,t){var n=yh(e),i=yh(r);if(!dw(n,i))return t?0:[];for(var o=Ch.apply(0,e),a=Ch.apply(0,r),l=~~(o/8),s=~~(a/8),u=[],f=[],c={},h=t?0:[],d=0;d<l+1;d++){var v=mh.apply(0,e.concat(d/l));u.push({x:v.x,y:v.y,t:d/l})}for(var d=0;d<s+1;d++){var v=mh.apply(0,r.concat(d/s));f.push({x:v.x,y:v.y,t:d/s})}for(var d=0;d<l;d++)for(var p=0;p<s;p++){var g=u[d],C=u[d+1],y=f[p],m=f[p+1],w=Math.abs(C.x-g.x)<.001?"y":"x",S=Math.abs(m.x-y.x)<.001?"y":"x",b=hw(g.x,g.y,C.x,C.y,y.x,y.y,m.x,m.y);if(b){if(c[b.x.toFixed(4)]===b.y.toFixed(4))continue;c[b.x.toFixed(4)]=b.y.toFixed(4);var A=g.t+Math.abs((b[w]-g[w])/(C[w]-g[w]))*(C.t-g.t),O=y.t+Math.abs((b[S]-y[S])/(m[S]-y[S]))*(m.t-y.t);A>=0&&A<=1&&O>=0&&O<=1&&(t?h+=1:h.push({x:b.x,y:b.y,t1:A,t2:O}))}}return h},pw=function(e,r,t){e=Fs(e),r=Fs(r);for(var n,i,o,a,l,s,u,f,c,h,d=t?0:[],v=0,p=e.length;v<p;v++){var g=e[v];if(g[0]==="M")n=l=g[1],i=s=g[2];else{g[0]==="C"?(c=[n,i].concat(g.slice(1)),n=c[6],i=c[7]):(c=[n,i,n,i,l,s,l,s],n=l,i=s);for(var C=0,y=r.length;C<y;C++){var m=r[C];if(m[0]==="M")o=u=m[1],a=f=m[2];else{m[0]==="C"?(h=[o,a].concat(m.slice(1)),o=h[6],a=h[7]):(h=[o,a,o,a,u,f,u,f],o=u,a=f);var w=vw(c,h,t);if(t)d+=w;else{for(var S=0,b=w.length;S<b;S++)w[S].segment1=v,w[S].segment2=C,w[S].bez1=c,w[S].bez2=h;d=d.concat(w)}}}}}return d},gw=function(e,r){return pw(e,r)};function Cw(e,r){var t=[],n=[];function i(o,a){if(o.length===1)t.push(o[0]),n.push(o[0]);else{for(var l=[],s=0;s<o.length-1;s++)s===0&&t.push(o[0]),s===o.length-2&&n.push(o[s+1]),l[s]=[(1-a)*o[s][0]+a*o[s+1][0],(1-a)*o[s][1]+a*o[s+1][1]];i(l,a)}}return e.length&&i(e,r),{left:t,right:n.reverse()}}function yw(e,r,t){var n=[[e[1],e[2]]];t=t||2;var i=[];r[0]==="A"?(n.push(r[6]),n.push(r[7])):r[0]==="C"?(n.push([r[1],r[2]]),n.push([r[3],r[4]]),n.push([r[5],r[6]])):r[0]==="S"||r[0]==="Q"?(n.push([r[1],r[2]]),n.push([r[3],r[4]])):n.push([r[1],r[2]]);for(var o=n,a=1/t,l=0;l<t-1;l++){var s=a/(1-a*l),u=Cw(o,s);i.push(u.left),o=u.right}i.push(o);var f=i.map(function(c){var h=[];return c.length===4&&(h.push("C"),h=h.concat(c[2])),c.length>=3&&(c.length===3&&h.push("Q"),h=h.concat(c[1])),c.length===2&&h.push("L"),h=h.concat(c[c.length-1]),h});return f}var mw=function(e,r,t){if(t===1)return[[].concat(e)];var n=[];if(r[0]==="L"||r[0]==="C"||r[0]==="Q")n=n.concat(yw(e,r,t));else{var i=[].concat(e);i[0]==="M"&&(i[0]="L");for(var o=0;o<=t-1;o++)n.push(i)}return n},ww=function(e,r){if(e.length===1)return e;var t=e.length-1,n=r.length-1,i=t/n,o=[];if(e.length===1&&e[0][0]==="M"){for(var a=0;a<n-t;a++)e.push(e[0]);return e}for(var a=0;a<n;a++){var l=Math.floor(i*a);o[l]=(o[l]||0)+1}var s=o.reduce(function(u,f,c){return c===t?u.concat(e[t]):u.concat(mw(e[c],e[c+1],f))},[]);return s.unshift(e[0]),(r[n]==="Z"||r[n]==="z")&&s.push("Z"),s},_w=function(e,r){if(e.length!==r.length)return!1;var t=!0;return Ce(e,function(n,i){if(n!==r[i])return t=!1,!1}),t};function Sw(e,r,t){var n=null,i=t;return r<i&&(i=r,n="add"),e<i&&(i=e,n="del"),{type:n,min:i}}var xw=function(e,r){var t=e.length,n=r.length,i,o,a=0;if(t===0||n===0)return null;for(var l=[],s=0;s<=t;s++)l[s]=[],l[s][0]={min:s};for(var u=0;u<=n;u++)l[0][u]={min:u};for(var s=1;s<=t;s++){i=e[s-1];for(var u=1;u<=n;u++){o=r[u-1],_w(i,o)?a=0:a=1;var f=l[s-1][u].min+1,c=l[s][u-1].min+1,h=l[s-1][u-1].min+a;l[s][u]=Sw(f,c,h)}}return l},Jp=function(e,r){var t=xw(e,r),n=e.length,i=r.length,o=[],a=1,l=1;if(t[n][i].min!==n){for(var s=1;s<=n;s++){var u=t[s][s].min;l=s;for(var f=a;f<=i;f++)t[s][f].min<u&&(u=t[s][f].min,l=f);a=l,t[s][a].type&&o.push({index:s-1,type:t[s][a].type})}for(var s=o.length-1;s>=0;s--)a=o[s].index,o[s].type==="add"?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}n=e.length;var c=i-n;if(n<i)for(var s=0;s<c;s++)e[n-1][0]==="z"||e[n-1][0]==="Z"?e.splice(n-2,0,e[n-2]):e.push(e[n-1]),n+=1;return e};function as(e,r,t){for(var n=[].concat(e),i,o=1/(t+1),a=e0(r)[0],l=1;l<=t;l++)o*=l,i=Math.floor(e.length*o),i===0?n.unshift([a[0]*o+e[i][0]*(1-o),a[1]*o+e[i][1]*(1-o)]):n.splice(i,0,[a[0]*o+e[i][0]*(1-o),a[1]*o+e[i][1]*(1-o)]);return n}function e0(e){var r=[];switch(e[0]){case"M":r.push([e[1],e[2]]);break;case"L":r.push([e[1],e[2]]);break;case"A":r.push([e[6],e[7]]);break;case"Q":r.push([e[3],e[4]]),r.push([e[1],e[2]]);break;case"T":r.push([e[1],e[2]]);break;case"C":r.push([e[5],e[6]]),r.push([e[1],e[2]]),r.push([e[3],e[4]]);break;case"S":r.push([e[3],e[4]]),r.push([e[1],e[2]]);break;case"H":r.push([e[1],e[1]]);break;case"V":r.push([e[1],e[1]]);break}return r}var zs=function(e,r){if(e.length<=1)return e;for(var t,n=0;n<r.length;n++)if(e[n][0]!==r[n][0])switch(t=e0(e[n]),r[n][0]){case"M":e[n]=["M"].concat(t[0]);break;case"L":e[n]=["L"].concat(t[0]);break;case"A":e[n]=[].concat(r[n]),e[n][6]=t[0][0],e[n][7]=t[0][1];break;case"Q":if(t.length<2)if(n>0)t=as(t,e[n-1],1);else{e[n]=r[n];break}e[n]=["Q"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"T":e[n]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(n>0)t=as(t,e[n-1],2);else{e[n]=r[n];break}e[n]=["C"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;case"S":if(t.length<2)if(n>0)t=as(t,e[n-1],1);else{e[n]=r[n];break}e[n]=["S"].concat(t.reduce(function(i,o){return i.concat(o)},[]));break;default:e[n]=r[n]}return e},Tw=Object.freeze({__proto__:null,catmullRomToBezier:Ps,fillPath:ww,fillPathByDiff:Jp,formatPath:zs,intersection:gw,parsePathArray:Zp,parsePathString:pi,pathToAbsolute:Ns,pathToCurve:Fs,rectPath:Qp}),Ew=function(){function e(r,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=r,this.name=r,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){var r=this.type;return"[Event (type="+r+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ks=function(e,r){return ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},ks(e,r)};function ki(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");ks(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var bw="*",hl=function(){function e(){this._events={}}return e.prototype.on=function(r,t,n){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:t,once:!!n}),this},e.prototype.once=function(r,t){return this.on(r,t,!0)},e.prototype.emit=function(r){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this._events[r]||[],a=this._events[bw]||[],l=function(s){for(var u=s.length,f=0;f<u;f++)if(s[f]){var c=s[f],h=c.callback,d=c.once;d&&(s.splice(f,1),s.length===0&&delete t._events[r],u--,f--),h.apply(t,n)}};l(o),l(a)},e.prototype.off=function(r,t){if(!r)this._events={};else if(!t)delete this._events[r];else{for(var n=this._events[r]||[],i=n.length,o=0;o<i;o++)n[o].callback===t&&(n.splice(o,1),i--,o--);n.length===0&&delete this._events[r]}return this},e.prototype.getEvents=function(){return this._events},e}();function t0(e,r){var t=e.indexOf(r);t!==-1&&e.splice(t,1)}var wh=typeof window<"u"&&typeof window.document<"u";function r0(e,r){if(e.isCanvas())return!0;for(var t=r.getParent(),n=!1;t;){if(t===e){n=!0;break}t=t.getParent()}return n}function Ws(e){return e.cfg.visible&&e.cfg.capture}var Lw=function(e){ki(r,e);function r(t){var n=e.call(this)||this;n.destroyed=!1;var i=n.getDefaultCfg();return n.cfg=qp(i,t),n}return r.prototype.getDefaultCfg=function(){return{}},r.prototype.get=function(t){return this.cfg[t]},r.prototype.set=function(t,n){this.cfg[t]=n},r.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},r}(hl),_h=function(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))},Aw=function(){function e(r,t,n){this.name=r,this.version=t,this.os=n,this.type="browser"}return e}(),Rw=function(){function e(r){this.version=r,this.type="node",this.name="node",this.os=process.platform}return e}(),Ow=function(){function e(r,t,n,i){this.name=r,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return e}(),Iw=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Mw=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),Bw=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Dw=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Sh=3,$w=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Bw]],xh=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Pw(e){return e?Th(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Mw:typeof navigator<"u"?Th(navigator.userAgent):Hw()}function Nw(e){return e!==""&&$w.reduce(function(r,t){var n=t[0],i=t[1];if(r)return r;var o=i.exec(e);return!!o&&[n,o]},!1)}function Th(e){var r=Nw(e);if(!r)return null;var t=r[0],n=r[1];if(t==="searchbot")return new Iw;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Sh&&(i=_h(_h([],i,!0),zw(Sh-i.length),!0)):i=[];var o=i.join("."),a=Fw(e),l=Dw.exec(e);return l&&l[1]?new Ow(t,o,a,l[1]):new Aw(t,o,a)}function Fw(e){for(var r=0,t=xh.length;r<t;r++){var n=xh[r],i=n[0],o=n[1],a=o.exec(e);if(a)return i}return null}function Hw(){var e=typeof process<"u"&&process.version;return e?new Rw(process.version.slice(1)):null}function zw(e){for(var r=[],t=0;t<e;t++)r.push("0");return r}var za=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function dl(e,r,t){var n=r[0],i=r[1],o=r[2],a=r[3],l=r[4],s=r[5],u=r[6],f=r[7],c=r[8],h=t[0],d=t[1],v=t[2],p=t[3],g=t[4],C=t[5],y=t[6],m=t[7],w=t[8];return e[0]=h*n+d*a+v*u,e[1]=h*i+d*l+v*f,e[2]=h*o+d*s+v*c,e[3]=p*n+g*a+C*u,e[4]=p*i+g*l+C*f,e[5]=p*o+g*s+C*c,e[6]=y*n+m*a+w*u,e[7]=y*i+m*l+w*f,e[8]=y*o+m*s+w*c,e}function kw(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=r[0],e[7]=r[1],e[8]=1,e}function Ww(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=-t,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Gw(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=r[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Uw(){var e=new za(3);return za!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Yw(e,r,t){var n=r[0],i=r[1],o=r[2];return e[0]=n*t[0]+i*t[3]+o*t[6],e[1]=n*t[1]+i*t[4]+o*t[7],e[2]=n*t[2]+i*t[5]+o*t[8],e}(function(){var e=Uw();return function(r,t,n,i,o,a){var l,s;for(t||(t=3),n||(n=0),i?s=Math.min(i*t+n,r.length):s=r.length,l=n;l<s;l+=t)e[0]=r[l],e[1]=r[l+1],e[2]=r[l+2],o(e,e,a),r[l]=e[0],r[l+1]=e[1],r[l+2]=e[2];return r}})();function Xw(){var e=new za(2);return za!=Float32Array&&(e[0]=0,e[1]=0),e}function Vw(e,r){var t=r[0],n=r[1],i=t*t+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=r[0]*i,e[1]=r[1]*i,e}function jw(e,r){return e[0]*r[0]+e[1]*r[1]}function qw(e,r){return e[0]===r[0]&&e[1]===r[1]}(function(){var e=Xw();return function(r,t,n,i,o,a){var l,s;for(t||(t=2),n||(n=0),i?s=Math.min(i*t+n,r.length):s=r.length,l=n;l<s;l+=t)e[0]=r[l],e[1]=r[l+1],o(e,e,a),r[l]=e[0],r[l+1]=e[1];return r}})();function Kw(e,r,t){var n=[0,0,0,0,0,0,0,0,0];return kw(n,t),dl(e,n,r)}function Zw(e,r,t){var n=[0,0,0,0,0,0,0,0,0];return Ww(n,t),dl(e,n,r)}function Qw(e,r,t){var n=[0,0,0,0,0,0,0,0,0];return Gw(n,t),dl(e,n,r)}function Jw(e,r,t){return dl(e,t,r)}function n0(e,r){for(var t=e?[].concat(e):[1,0,0,0,1,0,0,0,1],n=0,i=r.length;n<i;n++){var o=r[n];switch(o[0]){case"t":Kw(t,t,[o[1],o[2]]);break;case"s":Qw(t,t,[o[1],o[2]]);break;case"r":Zw(t,t,o[1]);break;case"m":Jw(t,t,o[1]);break}}return t}function Eh(e,r){var t=[],n=e[0],i=e[1],o=e[2],a=e[3],l=e[4],s=e[5],u=e[6],f=e[7],c=e[8],h=r[0],d=r[1],v=r[2],p=r[3],g=r[4],C=r[5],y=r[6],m=r[7],w=r[8];return t[0]=h*n+d*a+v*u,t[1]=h*i+d*l+v*f,t[2]=h*o+d*s+v*c,t[3]=p*n+g*a+C*u,t[4]=p*i+g*l+C*f,t[5]=p*o+g*s+C*c,t[6]=y*n+m*a+w*u,t[7]=y*i+m*l+w*f,t[8]=y*o+m*s+w*c,t}function Gn(e,r){var t=[],n=r[0],i=r[1];return t[0]=e[0]*n+e[3]*i+e[6],t[1]=e[1]*n+e[4]*i+e[7],t}function i0(e){var r=[],t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],l=e[5],s=e[6],u=e[7],f=e[8],c=f*a-l*u,h=-f*o+l*s,d=u*o-a*s,v=t*c+n*h+i*d;return v?(v=1/v,r[0]=c*v,r[1]=(-f*n+i*u)*v,r[2]=(l*n-i*a)*v,r[3]=h*v,r[4]=(f*t-i*s)*v,r[5]=(-l*t+i*o)*v,r[6]=d*v,r[7]=(-u*t+n*s)*v,r[8]=(a*t-n*o)*v,r):null}var no=n0,ls="matrix",e_=["zIndex","capture","visible","type"],t_=["repeat"],r_=":",n_="*";function i_(e){for(var r=[],t=0;t<e.length;t++)or(e[t])?r.push([].concat(e[t])):r.push(e[t]);return r}function o_(e,r){var t={},n=r.attrs;for(var i in e)t[i]=n[i];return t}function a_(e,r){var t={},n=r.attr();return Ce(e,function(i,o){t_.indexOf(o)===-1&&!Ha(n[o],i)&&(t[o]=i)}),t}function l_(e,r){if(r.onFrame)return e;var t=r.startTime,n=r.delay,i=r.duration,o=Object.prototype.hasOwnProperty;return Ce(e,function(a){t+n<a.startTime+a.delay+a.duration&&i>a.delay&&Ce(r.toAttrs,function(l,s){o.call(a.toAttrs,s)&&(delete a.toAttrs[s],delete a.fromAttrs[s])})}),e}var o0=function(e){ki(r,e);function r(t){var n=e.call(this,t)||this;n.attrs={};var i=n.getDefaultAttrs();return qp(i,t.attrs),n.attrs=i,n.initAttrs(i),n.initAnimate(),n}return r.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},r.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},r.prototype.onCanvasChange=function(t){},r.prototype.initAttrs=function(t){},r.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},r.prototype.isGroup=function(){return!1},r.prototype.getParent=function(){return this.get("parent")},r.prototype.getCanvas=function(){return this.get("canvas")},r.prototype.attr=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n[0],a=n[1];if(!o)return this.attrs;if(vo(o)){for(var l in o)this.setAttr(l,o[l]);return this.afterAttrsChange(o),this}return n.length===2?(this.setAttr(o,a),this.afterAttrsChange((t={},t[o]=a,t)),this):this.attrs[o]},r.prototype.isClipped=function(t,n){var i=this.getClip();return i&&!i.isHit(t,n)},r.prototype.setAttr=function(t,n){var i=this.attrs[t];i!==n&&(this.attrs[t]=n,this.onAttrChange(t,n,i))},r.prototype.onAttrChange=function(t,n,i){t==="matrix"&&this.set("totalMatrix",null)},r.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var n=this.cfg.applyTo;n&&n.onCanvasChange("clip")}else this.onCanvasChange("attr")},r.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},r.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},r.prototype.setZIndex=function(t){this.set("zIndex",t);var n=this.getParent();return n&&n.sort(),this},r.prototype.toFront=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.push(this),this.onCanvasChange("zIndex")}},r.prototype.toBack=function(){var t=this.getParent();if(t){var n=t.getChildren();this.get("el");var i=n.indexOf(this);n.splice(i,1),n.unshift(this),this.onCanvasChange("zIndex")}},r.prototype.remove=function(t){t===void 0&&(t=!0);var n=this.getParent();n?(t0(n.getChildren(),this),n.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},r.prototype.resetMatrix=function(){this.attr(ls,this.getDefaultMatrix()),this.onCanvasChange("matrix")},r.prototype.getMatrix=function(){return this.attr(ls)},r.prototype.setMatrix=function(t){this.attr(ls,t),this.onCanvasChange("matrix")},r.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var n=this.attr("matrix"),i=this.cfg.parentMatrix;i&&n?t=Eh(i,n):t=n||i,this.set("totalMatrix",t)}return t},r.prototype.applyMatrix=function(t){var n=this.attr("matrix"),i=null;t&&n?i=Eh(t,n):i=n||t,this.set("totalMatrix",i),this.set("parentMatrix",t)},r.prototype.getDefaultMatrix=function(){return null},r.prototype.applyToMatrix=function(t){var n=this.attr("matrix");return n?Gn(n,t):t},r.prototype.invertFromMatrix=function(t){var n=this.attr("matrix");if(n){var i=i0(n);if(i)return Gn(i,t)}return t},r.prototype.setClip=function(t){var n=this.getCanvas(),i=null;if(t){var o=this.getShapeBase(),a=jp(t.type),l=o[a];l&&(i=new l({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:n}))}return this.set("clipShape",i),this.onCanvasChange("clip"),i},r.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},r.prototype.clone=function(){var t=this,n=this.attrs,i={};Ce(n,function(l,s){or(n[s])?i[s]=i_(n[s]):i[s]=n[s]});var o=this.constructor,a=new o({attrs:i});return Ce(e_,function(l){a.set(l,t.get(l))}),a},r.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},e.prototype.destroy.call(this))},r.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},r.prototype.animate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var i=this.get("timeline");i||(i=this.get("canvas").get("timeline"),this.set("timeline",i));var o=this.get("animations")||[];i.timer||i.initTimer();var a=t[0],l=t[1],s=t[2],u=s===void 0?"easeLinear":s,f=t[3],c=f===void 0?ha:f,h=t[4],d=h===void 0?0:h,v,p,g,C,y;Kn(a)?(v=a,a={}):vo(a)&&a.onFrame&&(v=a.onFrame,p=a.repeat),vo(l)?(y=l,l=y.duration,u=y.easing||"easeLinear",d=y.delay||0,p=y.repeat||p||!1,c=y.callback||ha,g=y.pauseCallback||ha,C=y.resumeCallback||ha):($s(c)&&(d=c,c=null),Kn(u)?(c=u,u="easeLinear"):u=u||"easeLinear");var m=a_(a,this),w={fromAttrs:o_(m,this),toAttrs:m,duration:l,easing:u,repeat:p,callback:c,pauseCallback:g,resumeCallback:C,delay:d,startTime:i.getTime(),id:aw(),onFrame:v,pathFormatted:!1};o.length>0?o=l_(o,w):i.addAnimator(this),o.push(w),this.set("animations",o),this.set("_pause",{isPaused:!1})}},r.prototype.stopAnimate=function(t){var n=this;t===void 0&&(t=!0);var i=this.get("animations");Ce(i,function(o){t&&(o.onFrame?n.attr(o.onFrame(1)):n.attr(o.toAttrs)),o.callback&&o.callback()}),this.set("animating",!1),this.set("animations",[])},r.prototype.pauseAnimate=function(){var t=this.get("timeline"),n=this.get("animations"),i=t.getTime();return Ce(n,function(o){o._paused=!0,o._pauseTime=i,o.pauseCallback&&o.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:i}),this},r.prototype.resumeAnimate=function(){var t=this.get("timeline"),n=t.getTime(),i=this.get("animations"),o=this.get("_pause").pauseTime;return Ce(i,function(a){a.startTime=a.startTime+(n-o),a._paused=!1,a._pauseTime=null,a.resumeCallback&&a.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",i),this},r.prototype.emitDelegation=function(t,n){var i=this,o=n.propagationPath;this.getEvents();var a;t==="mouseenter"?a=n.fromShape:t==="mouseleave"&&(a=n.toShape);for(var l=function(c){var h=o[c],d=h.get("name");if(d){if((h.isGroup()||h.isCanvas&&h.isCanvas())&&a&&r0(h,a))return"break";or(d)?Ce(d,function(v){i.emitDelegateEvent(h,v,n)}):s.emitDelegateEvent(h,d,n)}},s=this,u=0;u<o.length;u++){var f=l(u);if(f==="break")break}},r.prototype.emitDelegateEvent=function(t,n,i){var o=this.getEvents(),a=n+r_+i.type;(o[a]||o[n_])&&(i.name=a,i.currentTarget=t,i.delegateTarget=this,i.delegateObject=t.get("delegateObject"),this.emit(a,i))},r.prototype.translate=function(t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=this.getMatrix(),o=no(i,[["t",t,n]]);return this.setMatrix(o),this},r.prototype.move=function(t,n){var i=this.attr("x")||0,o=this.attr("y")||0;return this.translate(t-i,n-o),this},r.prototype.moveTo=function(t,n){return this.move(t,n)},r.prototype.scale=function(t,n){var i=this.getMatrix(),o=no(i,[["s",t,n||t]]);return this.setMatrix(o),this},r.prototype.rotate=function(t){var n=this.getMatrix(),i=no(n,[["r",t]]);return this.setMatrix(i),this},r.prototype.rotateAtStart=function(t){var n=this.attr(),i=n.x,o=n.y,a=this.getMatrix(),l=no(a,[["t",-i,-o],["r",t],["t",i,o]]);return this.setMatrix(l),this},r.prototype.rotateAtPoint=function(t,n,i){var o=this.getMatrix(),a=no(o,[["t",-t,-n],["r",i],["t",t,n]]);return this.setMatrix(a),this},r}(Lw),bh={},Gs="_INDEX";function a0(e,r){if(e.set("canvas",r),e.isGroup()){var t=e.get("children");t.length&&t.forEach(function(n){a0(n,r)})}}function l0(e,r){if(e.set("timeline",r),e.isGroup()){var t=e.get("children");t.length&&t.forEach(function(n){l0(n,r)})}}function s_(e,r,t){t===void 0&&(t=!0),t?r.destroy():(r.set("parent",null),r.set("canvas",null)),t0(e.getChildren(),r)}function u_(e){return function(r,t){var n=e(r,t);return n===0?r[Gs]-t[Gs]:n}}var s0=function(e){ki(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isCanvas=function(){return!1},r.prototype.getBBox=function(){var t=1/0,n=-1/0,i=1/0,o=-1/0,a=[],l=[],s=this.getChildren().filter(function(f){return f.get("visible")&&(!f.isGroup()||f.isGroup()&&f.getChildren().length>0)});s.length>0?(Ce(s,function(f){var c=f.getBBox();a.push(c.minX,c.maxX),l.push(c.minY,c.maxY)}),t=Ir(a),n=Or(a),i=Ir(l),o=Or(l)):(t=0,n=0,i=0,o=0);var u={x:t,y:i,minX:t,minY:i,maxX:n,maxY:o,width:n-t,height:o-i};return u},r.prototype.getCanvasBBox=function(){var t=1/0,n=-1/0,i=1/0,o=-1/0,a=[],l=[],s=this.getChildren().filter(function(f){return f.get("visible")&&(!f.isGroup()||f.isGroup()&&f.getChildren().length>0)});s.length>0?(Ce(s,function(f){var c=f.getCanvasBBox();a.push(c.minX,c.maxX),l.push(c.minY,c.maxY)}),t=Ir(a),n=Or(a),i=Ir(l),o=Or(l)):(t=0,n=0,i=0,o=0);var u={x:t,y:i,minX:t,minY:i,maxX:n,maxY:o,width:n-t,height:o-i};return u},r.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},r.prototype.onAttrChange=function(t,n,i){if(e.prototype.onAttrChange.call(this,t,n,i),t==="matrix"){var o=this.getTotalMatrix();this._applyChildrenMarix(o)}},r.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var i=this.getTotalMatrix();i!==n&&this._applyChildrenMarix(i)},r.prototype._applyChildrenMarix=function(t){var n=this.getChildren();Ce(n,function(i){i.applyMatrix(t)})},r.prototype.addShape=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],o=t[1];vo(i)?o=i:o.type=i;var a=bh[o.type];a||(a=jp(o.type),bh[o.type]=a);var l=this.getShapeBase(),s=new l[a](o);return this.add(s),s},r.prototype.addGroup=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0],o=t[1],a;if(Kn(i))o?a=new i(o):a=new i({parent:this});else{var l=i||{},s=this.getGroupBase();a=new s(l)}return this.add(a),a},r.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},r.prototype.getShape=function(t,n,i){if(!Ws(this))return null;var o=this.getChildren(),a;if(this.isCanvas())a=this._findShape(o,t,n,i);else{var l=[t,n,1];l=this.invertFromMatrix(l),this.isClipped(l[0],l[1])||(a=this._findShape(o,l[0],l[1],i))}return a},r.prototype._findShape=function(t,n,i,o){for(var a=null,l=t.length-1;l>=0;l--){var s=t[l];if(Ws(s)&&(s.isGroup()?a=s.getShape(n,i,o):s.isHit(n,i)&&(a=s)),a)break}return a},r.prototype.add=function(t){var n=this.getCanvas(),i=this.getChildren(),o=this.get("timeline"),a=t.getParent();a&&s_(a,t,!1),t.set("parent",this),n&&a0(t,n),o&&l0(t,o),i.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},r.prototype._applyElementMatrix=function(t){var n=this.getTotalMatrix();n&&t.applyMatrix(n)},r.prototype.getChildren=function(){return this.get("children")},r.prototype.sort=function(){var t=this.getChildren();Ce(t,function(n,i){return n[Gs]=i,n}),t.sort(u_(function(n,i){return n.get("zIndex")-i.get("zIndex")})),this.onCanvasChange("sort")},r.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),n=t.length-1;n>=0;n--)t[n].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},r.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},r.prototype.getFirst=function(){return this.getChildByIndex(0)},r.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},r.prototype.getChildByIndex=function(t){var n=this.getChildren();return n[t]},r.prototype.getCount=function(){var t=this.getChildren();return t.length},r.prototype.contain=function(t){var n=this.getChildren();return n.indexOf(t)>-1},r.prototype.removeChild=function(t,n){n===void 0&&(n=!0),this.contain(t)&&t.remove(n)},r.prototype.findAll=function(t){var n=[],i=this.getChildren();return Ce(i,function(o){t(o)&&n.push(o),o.isGroup()&&(n=n.concat(o.findAll(t)))}),n},r.prototype.find=function(t){var n=null,i=this.getChildren();return Ce(i,function(o){if(t(o)?n=o:o.isGroup()&&(n=o.find(t)),n)return!1}),n},r.prototype.findById=function(t){return this.find(function(n){return n.get("id")===t})},r.prototype.findByClassName=function(t){return this.find(function(n){return n.get("className")===t})},r.prototype.findAllByName=function(t){return this.findAll(function(n){return n.get("name")===t})},r}(o0),bi=0,so=0,io=0,u0=1e3,ka,uo,Wa=0,Zn=0,vl=0,Eo=typeof performance=="object"&&performance.now?performance:Date,f0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function c0(){return Zn||(f0(f_),Zn=Eo.now()+vl)}function f_(){Zn=0}function Us(){this._call=this._time=this._next=null}Us.prototype=rf.prototype={constructor:Us,restart:function(e,r,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?c0():+t)+(r==null?0:+r),!this._next&&uo!==this&&(uo?uo._next=this:ka=this,uo=this),this._call=e,this._time=t,Ys()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ys())}};function rf(e,r,t){var n=new Us;return n.restart(e,r,t),n}function c_(){c0(),++bi;for(var e=ka,r;e;)(r=Zn-e._time)>=0&&e._call.call(null,r),e=e._next;--bi}function Lh(){Zn=(Wa=Eo.now())+vl,bi=so=0;try{c_()}finally{bi=0,d_(),Zn=0}}function h_(){var e=Eo.now(),r=e-Wa;r>u0&&(vl-=r,Wa=e)}function d_(){for(var e,r=ka,t,n=1/0;r;)r._call?(n>r._time&&(n=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:ka=t);uo=e,Ys(n)}function Ys(e){if(!bi){so&&(so=clearTimeout(so));var r=e-Zn;r>24?(e<1/0&&(so=setTimeout(Lh,e-Eo.now()-vl)),io&&(io=clearInterval(io))):(io||(Wa=Eo.now(),io=setInterval(h_,u0)),bi=1,f0(Lh))}}function nf(e,r,t){e.prototype=r.prototype=t,t.constructor=e}function h0(e,r){var t=Object.create(e.prototype);for(var n in r)t[n]=r[n];return t}function jo(){}var bo=.7,Ga=1/bo,_i="\\s*([+-]?\\d+)\\s*",Lo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",$r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v_=/^#([0-9a-f]{3,8})$/,p_=new RegExp("^rgb\\("+[_i,_i,_i]+"\\)$"),g_=new RegExp("^rgb\\("+[$r,$r,$r]+"\\)$"),C_=new RegExp("^rgba\\("+[_i,_i,_i,Lo]+"\\)$"),y_=new RegExp("^rgba\\("+[$r,$r,$r,Lo]+"\\)$"),m_=new RegExp("^hsl\\("+[Lo,$r,$r]+"\\)$"),w_=new RegExp("^hsla\\("+[Lo,$r,$r,Lo]+"\\)$"),Ah={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nf(jo,Ao,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Rh,formatHex:Rh,formatHsl:__,formatRgb:Oh,toString:Oh});function Rh(){return this.rgb().formatHex()}function __(){return d0(this).formatHsl()}function Oh(){return this.rgb().formatRgb()}function Ao(e){var r,t;return e=(e+"").trim().toLowerCase(),(r=v_.exec(e))?(t=r[1].length,r=parseInt(r[1],16),t===6?Ih(r):t===3?new Ut(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):t===8?ga(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):t===4?ga(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=p_.exec(e))?new Ut(r[1],r[2],r[3],1):(r=g_.exec(e))?new Ut(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=C_.exec(e))?ga(r[1],r[2],r[3],r[4]):(r=y_.exec(e))?ga(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=m_.exec(e))?Dh(r[1],r[2]/100,r[3]/100,1):(r=w_.exec(e))?Dh(r[1],r[2]/100,r[3]/100,r[4]):Ah.hasOwnProperty(e)?Ih(Ah[e]):e==="transparent"?new Ut(NaN,NaN,NaN,0):null}function Ih(e){return new Ut(e>>16&255,e>>8&255,e&255,1)}function ga(e,r,t,n){return n<=0&&(e=r=t=NaN),new Ut(e,r,t,n)}function S_(e){return e instanceof jo||(e=Ao(e)),e?(e=e.rgb(),new Ut(e.r,e.g,e.b,e.opacity)):new Ut}function Xs(e,r,t,n){return arguments.length===1?S_(e):new Ut(e,r,t,n??1)}function Ut(e,r,t,n){this.r=+e,this.g=+r,this.b=+t,this.opacity=+n}nf(Ut,Xs,h0(jo,{brighter:function(e){return e=e==null?Ga:Math.pow(Ga,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?bo:Math.pow(bo,e),new Ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mh,formatHex:Mh,formatRgb:Bh,toString:Bh}));function Mh(){return"#"+ss(this.r)+ss(this.g)+ss(this.b)}function Bh(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ss(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Dh(e,r,t,n){return n<=0?e=r=t=NaN:t<=0||t>=1?e=r=NaN:r<=0&&(e=NaN),new Ar(e,r,t,n)}function d0(e){if(e instanceof Ar)return new Ar(e.h,e.s,e.l,e.opacity);if(e instanceof jo||(e=Ao(e)),!e)return new Ar;if(e instanceof Ar)return e;e=e.rgb();var r=e.r/255,t=e.g/255,n=e.b/255,i=Math.min(r,t,n),o=Math.max(r,t,n),a=NaN,l=o-i,s=(o+i)/2;return l?(r===o?a=(t-n)/l+(t<n)*6:t===o?a=(n-r)/l+2:a=(r-t)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new Ar(a,l,s,e.opacity)}function x_(e,r,t,n){return arguments.length===1?d0(e):new Ar(e,r,t,n??1)}function Ar(e,r,t,n){this.h=+e,this.s=+r,this.l=+t,this.opacity=+n}nf(Ar,x_,h0(jo,{brighter:function(e){return e=e==null?Ga:Math.pow(Ga,e),new Ar(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?bo:Math.pow(bo,e),new Ar(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*r,i=2*t-n;return new Ut(us(e>=240?e-240:e+120,i,n),us(e,i,n),us(e<120?e+240:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function us(e,r,t){return(e<60?r+(t-r)*e/60:e<180?t:e<240?r+(t-r)*(240-e)/60:r)*255}function of(e){return function(){return e}}function T_(e,r){return function(t){return e+t*r}}function E_(e,r,t){return e=Math.pow(e,t),r=Math.pow(r,t)-e,t=1/t,function(n){return Math.pow(e+n*r,t)}}function b_(e){return(e=+e)==1?v0:function(r,t){return t-r?E_(r,t,e):of(isNaN(r)?t:r)}}function v0(e,r){var t=r-e;return t?T_(e,t):of(isNaN(e)?r:e)}var $h=function e(r){var t=b_(r);function n(i,o){var a=t((i=Xs(i)).r,(o=Xs(o)).r),l=t(i.g,o.g),s=t(i.b,o.b),u=v0(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return n.gamma=e,n}(1);function p0(e,r){r||(r=[]);var t=e?Math.min(r.length,e.length):0,n=r.slice(),i;return function(o){for(i=0;i<t;++i)n[i]=e[i]*(1-o)+r[i]*o;return n}}function g0(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function C0(e,r){return(g0(r)?p0:y0)(e,r)}function y0(e,r){var t=r?r.length:0,n=e?Math.min(t,e.length):0,i=new Array(n),o=new Array(t),a;for(a=0;a<n;++a)i[a]=Ua(e[a],r[a]);for(;a<t;++a)o[a]=r[a];return function(l){for(a=0;a<n;++a)o[a]=i[a](l);return o}}function L_(e,r){var t=new Date;return e=+e,r=+r,function(n){return t.setTime(e*(1-n)+r*n),t}}function Vs(e,r){return e=+e,r=+r,function(t){return e*(1-t)+r*t}}function A_(e,r){var t={},n={},i;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in e?t[i]=Ua(e[i],r[i]):n[i]=r[i];return function(o){for(i in t)n[i]=t[i](o);return n}}var js=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fs=new RegExp(js.source,"g");function R_(e){return function(){return e}}function O_(e){return function(r){return e(r)+""}}function I_(e,r){var t=js.lastIndex=fs.lastIndex=0,n,i,o,a=-1,l=[],s=[];for(e=e+"",r=r+"";(n=js.exec(e))&&(i=fs.exec(r));)(o=i.index)>t&&(o=r.slice(t,o),l[a]?l[a]+=o:l[++a]=o),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:Vs(n,i)})),t=fs.lastIndex;return t<r.length&&(o=r.slice(t),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?O_(s[0].x):R_(r):(r=s.length,function(u){for(var f=0,c;f<r;++f)l[(c=s[f]).i]=c.x(u);return l.join("")})}function Ua(e,r){var t=typeof r,n;return r==null||t==="boolean"?of(r):(t==="number"?Vs:t==="string"?(n=Ao(r))?(r=n,$h):I_:r instanceof Ao?$h:r instanceof Date?L_:g0(r)?p0:Array.isArray(r)?y0:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?A_:Vs)(e,r)}function M_(e){return+e}function B_(e){return e*e}function D_(e){return e*(2-e)}function Ph(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function m0(e){return e*e*e}function $_(e){return--e*e*e+1}function Nh(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var af=3,P_=function e(r){r=+r;function t(n){return Math.pow(n,r)}return t.exponent=e,t}(af),N_=function e(r){r=+r;function t(n){return 1-Math.pow(1-n,r)}return t.exponent=e,t}(af),Fh=function e(r){r=+r;function t(n){return((n*=2)<=1?Math.pow(n,r):2-Math.pow(2-n,r))/2}return t.exponent=e,t}(af),w0=Math.PI,_0=w0/2;function F_(e){return+e==1?1:1-Math.cos(e*_0)}function H_(e){return Math.sin(e*_0)}function Hh(e){return(1-Math.cos(w0*e))/2}function An(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function z_(e){return An(1-+e)}function k_(e){return 1-An(e)}function zh(e){return((e*=2)<=1?An(1-e):2-An(e-1))/2}function W_(e){return 1-Math.sqrt(1-e*e)}function G_(e){return Math.sqrt(1- --e*e)}function kh(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var qs=4/11,U_=6/11,Y_=8/11,X_=3/4,V_=9/11,j_=10/11,q_=15/16,K_=21/22,Z_=63/64,Ca=1/qs/qs;function Q_(e){return 1-Ro(1-e)}function Ro(e){return(e=+e)<qs?Ca*e*e:e<Y_?Ca*(e-=U_)*e+X_:e<j_?Ca*(e-=V_)*e+q_:Ca*(e-=K_)*e+Z_}function J_(e){return((e*=2)<=1?1-Ro(1-e):Ro(e-1)+1)/2}var lf=1.70158,eS=function e(r){r=+r;function t(n){return(n=+n)*n*(r*(n-1)+n)}return t.overshoot=e,t}(lf),tS=function e(r){r=+r;function t(n){return--n*n*((n+1)*r+n)+1}return t.overshoot=e,t}(lf),Wh=function e(r){r=+r;function t(n){return((n*=2)<1?n*n*((r+1)*n-r):(n-=2)*n*((r+1)*n+r)+2)/2}return t.overshoot=e,t}(lf),Li=2*Math.PI,sf=1,uf=.3,rS=function e(r,t){var n=Math.asin(1/(r=Math.max(1,r)))*(t/=Li);function i(o){return r*An(- --o)*Math.sin((n-o)/t)}return i.amplitude=function(o){return e(o,t*Li)},i.period=function(o){return e(r,o)},i}(sf,uf),Gh=function e(r,t){var n=Math.asin(1/(r=Math.max(1,r)))*(t/=Li);function i(o){return 1-r*An(o=+o)*Math.sin((o+n)/t)}return i.amplitude=function(o){return e(o,t*Li)},i.period=function(o){return e(r,o)},i}(sf,uf),nS=function e(r,t){var n=Math.asin(1/(r=Math.max(1,r)))*(t/=Li);function i(o){return((o=o*2-1)<0?r*An(-o)*Math.sin((n-o)/t):2-r*An(o)*Math.sin((n+o)/t))/2}return i.amplitude=function(o){return e(o,t*Li)},i.period=function(o){return e(r,o)},i}(sf,uf),iS=Object.freeze({__proto__:null,easeLinear:M_,easeQuad:Ph,easeQuadIn:B_,easeQuadOut:D_,easeQuadInOut:Ph,easeCubic:Nh,easeCubicIn:m0,easeCubicOut:$_,easeCubicInOut:Nh,easePoly:Fh,easePolyIn:P_,easePolyOut:N_,easePolyInOut:Fh,easeSin:Hh,easeSinIn:F_,easeSinOut:H_,easeSinInOut:Hh,easeExp:zh,easeExpIn:z_,easeExpOut:k_,easeExpInOut:zh,easeCircle:kh,easeCircleIn:W_,easeCircleOut:G_,easeCircleInOut:kh,easeBounce:Ro,easeBounceIn:Q_,easeBounceOut:Ro,easeBounceInOut:J_,easeBack:Wh,easeBackIn:eS,easeBackOut:tS,easeBackInOut:Wh,easeElastic:Gh,easeElasticIn:rS,easeElasticOut:Gh,easeElasticInOut:nS}),oS={};function aS(e){return oS[e.toLowerCase()]||iS[e]}var lS=function(e){return["fill","stroke","fillStyle","strokeStyle"].includes(e)},sS=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)},Uh=[1,0,0,0,1,0,0,0,1];function uS(e,r,t){var n={},i=r.fromAttrs,o=r.toAttrs;if(!e.destroyed){var a;for(var l in o)if(!Ha(i[l],o[l]))if(l==="path"){var s=o[l],u=i[l];s.length>u.length?(s=pi(o[l]),u=pi(i[l]),u=Jp(u,s),u=zs(u,s),r.fromAttrs.path=u,r.toAttrs.path=s):r.pathFormatted||(s=pi(o[l]),u=pi(i[l]),u=zs(u,s),r.fromAttrs.path=u,r.toAttrs.path=s,r.pathFormatted=!0),n[l]=[];for(var f=0;f<s.length;f++){for(var c=s[f],h=u[f],d=[],v=0;v<c.length;v++)$s(c[v])&&h&&$s(h[v])?(a=Ua(h[v],c[v]),d.push(a(t))):d.push(c[v]);n[l].push(d)}}else if(l==="matrix"){var p=C0(i[l]||Uh,o[l]||Uh),g=p(t);n[l]=g}else lS(l)&&sS(o[l])?n[l]=o[l]:Kn(o[l])||(a=Ua(i[l],o[l]),n[l]=a(t));e.attr(n)}}function fS(e,r,t){var n=r.startTime,i=r.delay;if(t<n+i||r._paused)return!1;var o,a=r.duration,l=r.easing,s=aS(l);if(t=t-n-r.delay,r.repeat)o=t%a/a,o=s(o);else if(o=t/a,o<1)o=s(o);else return r.onFrame?e.attr(r.onFrame(1)):e.attr(r.toAttrs),!0;if(r.onFrame){var u=r.onFrame(o);e.attr(u)}else uS(e,r,o);return!1}var cS=function(){function e(r){this.animators=[],this.current=0,this.timer=null,this.canvas=r}return e.prototype.initTimer=function(){var r=this,t=!1,n,i,o;this.timer=rf(function(a){if(r.current=a,r.animators.length>0){for(var l=r.animators.length-1;l>=0;l--){if(n=r.animators[l],n.destroyed){r.removeAnimator(l);continue}if(!n.isAnimatePaused()){i=n.get("animations");for(var s=i.length-1;s>=0;s--)o=i[s],t=fS(n,o,a),t&&(i.splice(s,1),t=!1,o.callback&&o.callback())}i.length===0&&r.removeAnimator(l)}var u=r.canvas.get("autoDraw");u||r.canvas.draw()}})},e.prototype.addAnimator=function(r){this.animators.push(r)},e.prototype.removeAnimator=function(r){this.animators.splice(r,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(r){r===void 0&&(r=!0),this.animators.forEach(function(t){t.stopAnimate(r)}),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),hS=40,Yh=0,Xh=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Vh(e,r,t){t.name=r,t.target=e,t.currentTarget=e,t.delegateTarget=e,e.emit(r,t)}function dS(e,r,t){if(t.bubbles){var n=void 0,i=!1;if(r==="mouseenter"?(n=t.fromShape,i=!0):r==="mouseleave"&&(i=!0,n=t.toShape),e.isCanvas()&&i)return;if(n&&r0(e,n)){t.bubbles=!1;return}t.name=r,t.currentTarget=e,t.delegateTarget=e,e.emit(r,t)}}var vS=function(){function e(r){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(n){var i=n.type;t._triggerEvent(i,n)},this._onDocumentMove=function(n){var i=t.canvas,o=i.get("el");if(o!==n.target&&(t.dragging||t.currentShape)){var a=t._getPointInfo(n);t.dragging&&t._emitEvent("drag",n,a,t.draggingShape)}},this._onDocumentMouseUp=function(n){var i=t.canvas,o=i.get("el");if(o!==n.target&&t.dragging){var a=t._getPointInfo(n);t.draggingShape&&t._emitEvent("drop",n,a,null),t._emitEvent("dragend",n,a,t.draggingShape),t._afterDrag(t.draggingShape,a,n)}},this.canvas=r.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var r=this,t=this.canvas.get("el");Ce(Xh,function(n){t.addEventListener(n,r._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var r=this,t=this.canvas.get("el");Ce(Xh,function(n){t.removeEventListener(n,r._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(r,t,n,i,o,a){var l=new Ew(r,t);return l.fromShape=o,l.toShape=a,l.x=n.x,l.y=n.y,l.clientX=n.clientX,l.clientY=n.clientY,l.propagationPath.push(i),l},e.prototype._getShape=function(r,t){return this.canvas.getShape(r.x,r.y,t)},e.prototype._getPointInfo=function(r){var t=this.canvas,n=t.getClientByEvent(r),i=t.getPointByEvent(r);return{x:i.x,y:i.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(r,t){var n=this._getPointInfo(t),i=this._getShape(n,t),o=this["_on"+r],a=!1;if(o)o.call(this,n,i,t);else{var l=this.currentShape;r==="mouseenter"||r==="dragenter"||r==="mouseover"?(this._emitEvent(r,t,n,null,null,i),i&&this._emitEvent(r,t,n,i,null,i),r==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):r==="mouseleave"||r==="dragleave"||r==="mouseout"?(a=!0,l&&this._emitEvent(r,t,n,l,l,null),this._emitEvent(r,t,n,null,l,null),r==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(r,t,n,i,null,null)}if(a||(this.currentShape=i),i&&!i.get("destroyed")){var s=this.canvas,u=s.get("el");u.style.cursor=i.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(r,t,n){n.button===Yh&&(this.mousedownShape=t,this.mousedownPoint=r,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,r,t,null,null)},e.prototype._emitMouseoverEvents=function(r,t,n,i){var o=this.canvas.get("el");n!==i&&(n&&(this._emitEvent("mouseout",r,t,n,n,i),this._emitEvent("mouseleave",r,t,n,n,i),(!i||i.get("destroyed"))&&(o.style.cursor=this.canvas.get("cursor"))),i&&(this._emitEvent("mouseover",r,t,i,n,i),this._emitEvent("mouseenter",r,t,i,n,i)))},e.prototype._emitDragoverEvents=function(r,t,n,i,o){i?(i!==n&&(n&&this._emitEvent("dragleave",r,t,n,n,i),this._emitEvent("dragenter",r,t,i,n,i)),o||this._emitEvent("dragover",r,t,i)):n&&this._emitEvent("dragleave",r,t,n,n,i),o&&this._emitEvent("dragover",r,t,i)},e.prototype._afterDrag=function(r,t,n){r&&(r.set("capture",!0),this.draggingShape=null),this.dragging=!1;var i=this._getShape(t,n);i!==r&&this._emitMouseoverEvents(n,t,r,i),this.currentShape=i},e.prototype._onmouseup=function(r,t,n){if(n.button===Yh){var i=this.draggingShape;this.dragging?(i&&this._emitEvent("drop",n,r,t),this._emitEvent("dragend",n,r,i),this._afterDrag(i,r,n)):(this._emitEvent("mouseup",n,r,t),t===this.mousedownShape&&this._emitEvent("click",n,r,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(r,t,n){n.preventDefault();var i=this.currentShape;this._emitDragoverEvents(n,r,i,t,!0)},e.prototype._onmousemove=function(r,t,n){var i=this.canvas,o=this.currentShape,a=this.draggingShape;if(this.dragging)a&&this._emitDragoverEvents(n,r,o,t,!1),this._emitEvent("drag",n,r,a);else{var l=this.mousedownPoint;if(l){var s=this.mousedownShape,u=n.timeStamp,f=u-this.mousedownTimeStamp,c=l.clientX-r.clientX,h=l.clientY-r.clientY,d=c*c+h*h;f>120||d>hS?s&&s.get("draggable")?(a=this.mousedownShape,a.set("capture",!1),this.draggingShape=a,this.dragging=!0,this._emitEvent("dragstart",n,r,a),this.mousedownShape=null,this.mousedownPoint=null):!s&&i.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,r,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,r,o,t),this._emitEvent("mousemove",n,r,t)):(this._emitMouseoverEvents(n,r,o,t),this._emitEvent("mousemove",n,r,t))}else this._emitMouseoverEvents(n,r,o,t),this._emitEvent("mousemove",n,r,t)}},e.prototype._emitEvent=function(r,t,n,i,o,a){var l=this._getEventObj(r,t,n,i,o,a);if(i){l.shape=i,Vh(i,r,l);for(var s=i.getParent();s;)s.emitDelegation(r,l),l.propagationStopped||dS(s,r,l),l.propagationPath.push(s),s=s.getParent()}else{var u=this.canvas;Vh(u,r,l)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),jh="px",qh=Pw(),pS=qh&&qh.name==="firefox",gS=function(e){ki(r,e);function r(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return r.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},r.prototype.initContainer=function(){var t=this.get("container");wr(t)&&(t=document.getElementById(t),this.set("container",t))},r.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var n=this.get("container");n.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},r.prototype.initEvents=function(){var t=new vS({canvas:this});t.init(),this.set("eventController",t)},r.prototype.initTimeline=function(){var t=new cS(this);this.set("timeline",t)},r.prototype.setDOMSize=function(t,n){var i=this.get("el");wh&&(i.style.width=t+jh,i.style.height=n+jh)},r.prototype.changeSize=function(t,n){this.setDOMSize(t,n),this.set("width",t),this.set("height",n),this.onCanvasChange("changeSize")},r.prototype.getRenderer=function(){return this.get("renderer")},r.prototype.getCursor=function(){return this.get("cursor")},r.prototype.setCursor=function(t){this.set("cursor",t);var n=this.get("el");wh&&n&&(n.style.cursor=t)},r.prototype.getPointByEvent=function(t){var n=this.get("supportCSSTransform");if(n){if(pS&&!et(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!et(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var i=this.getClientByEvent(t),o=i.x,a=i.y;return this.getPointByClient(o,a)},r.prototype.getClientByEvent=function(t){var n=t;return t.touches&&(t.type==="touchend"?n=t.changedTouches[0]:n=t.touches[0]),{x:n.clientX,y:n.clientY}},r.prototype.getPointByClient=function(t,n){var i=this.get("el"),o=i.getBoundingClientRect();return{x:t-o.left,y:n-o.top}},r.prototype.getClientByPoint=function(t,n){var i=this.get("el"),o=i.getBoundingClientRect();return{x:t+o.left,y:n+o.top}},r.prototype.draw=function(){},r.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},r.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},r.prototype.isCanvas=function(){return!0},r.prototype.getParent=function(){return null},r.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},r}(s0),CS=function(e){ki(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isGroup=function(){return!0},r.prototype.isEntityGroup=function(){return!1},r.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),i=0;i<n.length;i++){var o=n[i];t.add(o.clone())}return t},r}(s0),yS=function(e){ki(r,e);function r(t){return e.call(this,t)||this}return r.prototype._isInBBox=function(t,n){var i=this.getBBox();return i.minX<=t&&i.maxX>=t&&i.minY<=n&&i.maxY>=n},r.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},r.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},r.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},r.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},r.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),n=this.getTotalMatrix(),i=t.minX,o=t.minY,a=t.maxX,l=t.maxY;if(n){var s=Gn(n,[t.minX,t.minY]),u=Gn(n,[t.maxX,t.minY]),f=Gn(n,[t.minX,t.maxY]),c=Gn(n,[t.maxX,t.maxY]);i=Math.min(s[0],u[0],f[0],c[0]),a=Math.max(s[0],u[0],f[0],c[0]),o=Math.min(s[1],u[1],f[1],c[1]),l=Math.max(s[1],u[1],f[1],c[1])}var h=this.attrs;if(h.shadowColor){var d=h.shadowBlur,v=d===void 0?0:d,p=h.shadowOffsetX,g=p===void 0?0:p,C=h.shadowOffsetY,y=C===void 0?0:C,m=i-v+g,w=a+v+g,S=o-v+y,b=l+v+y;i=Math.min(i,m),a=Math.max(a,w),o=Math.min(o,S),l=Math.max(l,b)}return{x:i,y:o,minX:i,minY:o,maxX:a,maxY:l,width:a-i,height:l-o}},r.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},r.prototype.isClipShape=function(){return this.get("isClipShape")},r.prototype.isInShape=function(t,n){return!1},r.prototype.isOnlyHitBox=function(){return!1},r.prototype.isHit=function(t,n){var i=this.get("startArrowShape"),o=this.get("endArrowShape"),a=[t,n,1];a=this.invertFromMatrix(a);var l=a[0],s=a[1],u=this._isInBBox(l,s);return this.isOnlyHitBox()?u:!!(u&&!this.isClipped(l,s)&&(this.isInShape(l,s)||i&&i.isHit(l,s)||o&&o.isHit(l,s)))},r}(o0),S0=new Map;function Gr(e,r){S0.set(e,r)}function mS(e){return S0.get(e)}function x0(e){var r=e.attr(),t=r.x,n=r.y,i=r.width,o=r.height;return{x:t,y:n,width:i,height:o}}function T0(e){var r=e.attr(),t=r.x,n=r.y,i=r.r;return{x:t-i,y:n-i,width:i*2,height:i*2}}function Kh(e){return Math.min.apply(null,e)}function Zh(e){return Math.max.apply(null,e)}function gt(e,r,t,n){var i=e-t,o=r-n;return Math.sqrt(i*i+o*o)}function Ra(e,r){return Math.abs(e-r)<.001}function Wi(e,r){var t=Kh(e),n=Kh(r),i=Zh(e),o=Zh(r);return{x:t,y:n,width:i-t,height:o-n}}function pl(e){return(e+Math.PI*2)%(Math.PI*2)}var Bt={box:function(e,r,t,n){return Wi([e,t],[r,n])},length:function(e,r,t,n){return gt(e,r,t,n)},pointAt:function(e,r,t,n,i){return{x:(1-i)*e+i*t,y:(1-i)*r+i*n}},pointDistance:function(e,r,t,n,i,o){var a=(t-e)*(i-e)+(n-r)*(o-r);if(a<0)return gt(e,r,i,o);var l=(t-e)*(t-e)+(n-r)*(n-r);return a>l?gt(t,n,i,o):this.pointToLine(e,r,t,n,i,o)},pointToLine:function(e,r,t,n,i,o){var a=[t-e,n-r];if(qw(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-r)*(o-r));var l=[-a[1],a[0]];Vw(l,l);var s=[i-e,o-r];return Math.abs(jw(s,l))},tangentAngle:function(e,r,t,n){return Math.atan2(n-r,t-e)}},wS=1e-4;function E0(e,r,t,n,i,o){var a,l=1/0,s=[t,n],u=20;o&&o>200&&(u=o/10);for(var f=1/u,c=f/10,h=0;h<=u;h++){var d=h*f,v=[i.apply(null,e.concat([d])),i.apply(null,r.concat([d]))],p=gt(s[0],s[1],v[0],v[1]);p<l&&(a=d,l=p)}if(a===0)return{x:e[0],y:r[0]};if(a===1){var g=e.length;return{x:e[g-1],y:r[g-1]}}l=1/0;for(var h=0;h<32&&!(c<wS);h++){var C=a-c,y=a+c,v=[i.apply(null,e.concat([C])),i.apply(null,r.concat([C]))],p=gt(s[0],s[1],v[0],v[1]);if(C>=0&&p<l)a=C,l=p;else{var m=[i.apply(null,e.concat([y])),i.apply(null,r.concat([y]))],w=gt(s[0],s[1],m[0],m[1]);y<=1&&w<l?(a=y,l=w):c*=.5}}return{x:i.apply(null,e.concat([a])),y:i.apply(null,r.concat([a]))}}function _S(e,r){for(var t=0,n=e.length,i=0;i<n;i++){var o=e[i],a=r[i],l=e[(i+1)%n],s=r[(i+1)%n];t+=gt(o,a,l,s)}return t/2}function mn(e,r,t,n){var i=1-n;return i*i*e+2*n*i*r+n*n*t}function Qh(e,r,t){var n=e+t-2*r;if(Ra(n,0))return[.5];var i=(e-r)/n;return i<=1&&i>=0?[i]:[]}function Jh(e,r,t,n){return 2*(1-n)*(r-e)+2*n*(t-r)}function b0(e,r,t,n,i,o,a){var l=mn(e,t,i,a),s=mn(r,n,o,a),u=Bt.pointAt(e,r,t,n,a),f=Bt.pointAt(t,n,i,o,a);return[[e,r,u.x,u.y,l,s],[l,s,f.x,f.y,i,o]]}function Ks(e,r,t,n,i,o,a){if(a===0)return(gt(e,r,t,n)+gt(t,n,i,o)+gt(e,r,i,o))/2;var l=b0(e,r,t,n,i,o,.5),s=l[0],u=l[1];return s.push(a-1),u.push(a-1),Ks.apply(null,s)+Ks.apply(null,u)}var L0={box:function(e,r,t,n,i,o){var a=Qh(e,t,i)[0],l=Qh(r,n,o)[0],s=[e,i],u=[r,o];return a!==void 0&&s.push(mn(e,t,i,a)),l!==void 0&&u.push(mn(r,n,o,l)),Wi(s,u)},length:function(e,r,t,n,i,o){return Ks(e,r,t,n,i,o,3)},nearestPoint:function(e,r,t,n,i,o,a,l){return E0([e,t,i],[r,n,o],a,l,mn)},pointDistance:function(e,r,t,n,i,o,a,l){var s=this.nearestPoint(e,r,t,n,i,o,a,l);return gt(s.x,s.y,a,l)},interpolationAt:mn,pointAt:function(e,r,t,n,i,o,a){return{x:mn(e,t,i,a),y:mn(r,n,o,a)}},divide:function(e,r,t,n,i,o,a){return b0(e,r,t,n,i,o,a)},tangentAngle:function(e,r,t,n,i,o,a){var l=Jh(e,t,i,a),s=Jh(r,n,o,a),u=Math.atan2(s,l);return pl(u)}};function wn(e,r,t,n,i){var o=1-i;return o*o*o*e+3*r*i*o*o+3*t*i*i*o+n*i*i*i}function ed(e,r,t,n,i){var o=1-i;return 3*(o*o*(r-e)+2*o*i*(t-r)+i*i*(n-t))}function cs(e,r,t,n){var i=-3*e+9*r-9*t+3*n,o=6*e-12*r+6*t,a=3*r-3*e,l=[],s,u,f;if(Ra(i,0))Ra(o,0)||(s=-a/o,s>=0&&s<=1&&l.push(s));else{var c=o*o-4*i*a;Ra(c,0)?l.push(-o/(2*i)):c>0&&(f=Math.sqrt(c),s=(-o+f)/(2*i),u=(-o-f)/(2*i),s>=0&&s<=1&&l.push(s),u>=0&&u<=1&&l.push(u))}return l}function A0(e,r,t,n,i,o,a,l,s){var u=wn(e,t,i,a,s),f=wn(r,n,o,l,s),c=Bt.pointAt(e,r,t,n,s),h=Bt.pointAt(t,n,i,o,s),d=Bt.pointAt(i,o,a,l,s),v=Bt.pointAt(c.x,c.y,h.x,h.y,s),p=Bt.pointAt(h.x,h.y,d.x,d.y,s);return[[e,r,c.x,c.y,v.x,v.y,u,f],[u,f,p.x,p.y,d.x,d.y,a,l]]}function Zs(e,r,t,n,i,o,a,l,s){if(s===0)return _S([e,t,i,a],[r,n,o,l]);var u=A0(e,r,t,n,i,o,a,l,.5),f=u[0],c=u[1];return f.push(s-1),c.push(s-1),Zs.apply(null,f)+Zs.apply(null,c)}var go={extrema:cs,box:function(e,r,t,n,i,o,a,l){for(var s=[e,a],u=[r,l],f=cs(e,t,i,a),c=cs(r,n,o,l),h=0;h<f.length;h++)s.push(wn(e,t,i,a,f[h]));for(var h=0;h<c.length;h++)u.push(wn(r,n,o,l,c[h]));return Wi(s,u)},length:function(e,r,t,n,i,o,a,l){return Zs(e,r,t,n,i,o,a,l,3)},nearestPoint:function(e,r,t,n,i,o,a,l,s,u,f){return E0([e,t,i,a],[r,n,o,l],s,u,wn,f)},pointDistance:function(e,r,t,n,i,o,a,l,s,u,f){var c=this.nearestPoint(e,r,t,n,i,o,a,l,s,u,f);return gt(c.x,c.y,s,u)},interpolationAt:wn,pointAt:function(e,r,t,n,i,o,a,l,s){return{x:wn(e,t,i,a,s),y:wn(r,n,o,l,s)}},divide:function(e,r,t,n,i,o,a,l,s){return A0(e,r,t,n,i,o,a,l,s)},tangentAngle:function(e,r,t,n,i,o,a,l,s){var u=ed(e,t,i,a,s),f=ed(r,n,o,l,s);return pl(Math.atan2(f,u))}};function td(e,r){var t=Math.abs(e);return r>0?t:t*-1}var SS={box:function(e,r,t,n){return{x:e-t,y:r-n,width:t*2,height:n*2}},length:function(e,r,t,n){return Math.PI*(3*(t+n)-Math.sqrt((3*t+n)*(t+3*n)))},nearestPoint:function(e,r,t,n,i,o){var a=t,l=n;if(a===0||l===0)return{x:e,y:r};for(var s=i-e,u=o-r,f=Math.abs(s),c=Math.abs(u),h=a*a,d=l*l,v=Math.PI/4,p,g,C=0;C<4;C++){p=a*Math.cos(v),g=l*Math.sin(v);var y=(h-d)*Math.pow(Math.cos(v),3)/a,m=(d-h)*Math.pow(Math.sin(v),3)/l,w=p-y,S=g-m,b=f-y,A=c-m,O=Math.hypot(S,w),B=Math.hypot(A,b),P=O*Math.asin((w*A-S*b)/(O*B)),D=P/Math.sqrt(h+d-p*p-g*g);v+=D,v=Math.min(Math.PI/2,Math.max(0,v))}return{x:e+td(p,s),y:r+td(g,u)}},pointDistance:function(e,r,t,n,i,o){var a=this.nearestPoint(e,r,t,n,i,o);return gt(a.x,a.y,i,o)},pointAt:function(e,r,t,n,i){var o=2*Math.PI*i;return{x:e+t*Math.cos(o),y:r+n*Math.sin(o)}},tangentAngle:function(e,r,t,n,i){var o=2*Math.PI*i,a=Math.atan2(n*Math.cos(o),-t*Math.sin(o));return pl(a)}};function xS(e,r,t,n,i,o,a,l){return-1*t*Math.cos(i)*Math.sin(l)-n*Math.sin(i)*Math.cos(l)}function TS(e,r,t,n,i,o,a,l){return-1*t*Math.sin(i)*Math.sin(l)+n*Math.cos(i)*Math.cos(l)}function ES(e,r,t){return Math.atan(-r/e*Math.tan(t))}function bS(e,r,t){return Math.atan(r/(e*Math.tan(t)))}function rd(e,r,t,n,i,o){return t*Math.cos(i)*Math.cos(o)-n*Math.sin(i)*Math.sin(o)+e}function nd(e,r,t,n,i,o){return t*Math.sin(i)*Math.cos(o)+n*Math.cos(i)*Math.sin(o)+r}function LS(e,r,t,n){var i=Math.atan2(n*e,t*r);return(i+Math.PI*2)%(Math.PI*2)}function id(e,r,t){return{x:e*Math.cos(t),y:r*Math.sin(t)}}function od(e,r,t){var n=Math.cos(t),i=Math.sin(t);return[e*n-r*i,e*i+r*n]}var AS={box:function(e,r,t,n,i,o,a){for(var l=ES(t,n,i),s=1/0,u=-1/0,f=[o,a],c=-Math.PI*2;c<=Math.PI*2;c+=Math.PI){var h=l+c;o<a?o<h&&h<a&&f.push(h):a<h&&h<o&&f.push(h)}for(var c=0;c<f.length;c++){var d=rd(e,r,t,n,i,f[c]);d<s&&(s=d),d>u&&(u=d)}for(var v=bS(t,n,i),p=1/0,g=-1/0,C=[o,a],c=-Math.PI*2;c<=Math.PI*2;c+=Math.PI){var y=v+c;o<a?o<y&&y<a&&C.push(y):a<y&&y<o&&C.push(y)}for(var c=0;c<C.length;c++){var m=nd(e,r,t,n,i,C[c]);m<p&&(p=m),m>g&&(g=m)}return{x:s,y:p,width:u-s,height:g-p}},length:function(e,r,t,n,i,o,a){},nearestPoint:function(e,r,t,n,i,o,a,l,s){var u=od(l-e,s-r,-i),f=u[0],c=u[1],h=SS.nearestPoint(0,0,t,n,f,c),d=LS(t,n,h.x,h.y);d<o?h=id(t,n,o):d>a&&(h=id(t,n,a));var v=od(h.x,h.y,i);return{x:v[0]+e,y:v[1]+r}},pointDistance:function(e,r,t,n,i,o,a,l,s){var u=this.nearestPoint(e,r,t,n,l,s);return gt(u.x,u.y,l,s)},pointAt:function(e,r,t,n,i,o,a,l){var s=(a-o)*l+o;return{x:rd(e,r,t,n,i,s),y:nd(e,r,t,n,i,s)}},tangentAngle:function(e,r,t,n,i,o,a,l){var s=(a-o)*l+o,u=xS(e,r,t,n,i,o,a,s),f=TS(e,r,t,n,i,o,a,s);return pl(Math.atan2(f,u))}};function R0(e){for(var r=0,t=[],n=0;n<e.length-1;n++){var i=e[n],o=e[n+1],a=gt(i[0],i[1],o[0],o[1]),l={from:i,to:o,length:a};t.push(l),r+=a}return{segments:t,totalLength:r}}function RS(e){if(e.length<2)return 0;for(var r=0,t=0;t<e.length-1;t++){var n=e[t],i=e[t+1];r+=gt(n[0],n[1],i[0],i[1])}return r}function OS(e,r){if(r>1||r<0||e.length<2)return null;var t=R0(e),n=t.segments,i=t.totalLength;if(i===0)return{x:e[0][0],y:e[0][1]};for(var o=0,a=null,l=0;l<n.length;l++){var s=n[l],u=s.from,f=s.to,c=s.length/i;if(r>=o&&r<=o+c){var h=(r-o)/c;a=Bt.pointAt(u[0],u[1],f[0],f[1],h);break}o+=c}return a}function IS(e,r){if(r>1||r<0||e.length<2)return 0;for(var t=R0(e),n=t.segments,i=t.totalLength,o=0,a=0,l=0;l<n.length;l++){var s=n[l],u=s.from,f=s.to,c=s.length/i;if(r>=o&&r<=o+c){a=Math.atan2(f[1]-u[1],f[0]-u[0]);break}o+=c}return a}function MS(e,r,t){for(var n=1/0,i=0;i<e.length-1;i++){var o=e[i],a=e[i+1],l=Bt.pointDistance(o[0],o[1],a[0],a[1],r,t);l<n&&(n=l)}return n}var BS={box:function(e){for(var r=[],t=[],n=0;n<e.length;n++){var i=e[n];r.push(i[0]),t.push(i[1])}return Wi(r,t)},length:function(e){return RS(e)},pointAt:function(e,r){return OS(e,r)},pointDistance:function(e,r,t){return MS(e,r,t)},tangentAngle:function(e,r){return IS(e,r)}};function ad(e,r){return!e||!r?e||r:{minX:Math.min(e.minX,r.minX),minY:Math.min(e.minY,r.minY),maxX:Math.max(e.maxX,r.maxX),maxY:Math.max(e.maxY,r.maxY)}}function ff(e,r){var t=e.get("startArrowShape"),n=e.get("endArrowShape"),i=null,o=null;return t&&(i=t.getCanvasBBox(),r=ad(r,i)),n&&(o=n.getCanvasBBox(),r=ad(r,o)),r}function DS(e){for(var r=e.attr(),t=r.points,n=[],i=[],o=0;o<t.length;o++){var a=t[o];n.push(a[0]),i.push(a[1])}var l=Wi(n,i),s=l.x,u=l.y,f=l.width,c=l.height,h={minX:s,minY:u,maxX:s+f,maxY:u+c};return h=ff(e,h),{x:h.minX,y:h.minY,width:h.maxX-h.minX,height:h.maxY-h.minY}}function $S(e){for(var r=e.attr(),t=r.points,n=[],i=[],o=0;o<t.length;o++){var a=t[o];n.push(a[0]),i.push(a[1])}return Wi(n,i)}var hs=null;function O0(){if(!hs){var e=document.createElement("canvas");e.width=1,e.height=1,hs=e.getContext("2d")}return hs}function I0(e,r,t){var n=1;if(wr(e)&&(n=e.split(`
`).length),n>1){var i=PS(r,t);return r*n+i*(n-1)}return r}function PS(e,r){return r?r-e:e*.14}function NS(e,r){var t=O0(),n=0;if(et(e)||e==="")return n;if(t.save(),t.font=r,wr(e)&&e.includes(`
`)){var i=e.split(`
`);Ce(i,function(o){var a=t.measureText(o).width;n<a&&(n=a)})}else n=t.measureText(e).width;return t.restore(),n}function M0(e){var r=e.fontSize,t=e.fontFamily,n=e.fontWeight,i=e.fontStyle,o=e.fontVariant;return[i,o,n,r+"px",t].join(" ").trim()}function FS(e){var r=e.attr(),t=r.x,n=r.y,i=r.text,o=r.fontSize,a=r.lineHeight,l=r.font;l||(l=M0(r));var s=NS(i,l),u;if(!s)u={x:t,y:n,width:0,height:0};else{var f=r.textAlign,c=r.textBaseline,h=I0(i,o,a),d={x:t,y:n-h};f&&(f==="end"||f==="right"?d.x-=s:f==="center"&&(d.x-=s/2)),c&&(c==="top"?d.y+=h:c==="middle"&&(d.y+=h/2)),u={x:d.x,y:d.y,width:s,height:h}}return u}var HS=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,zS=/[^\s\,]+/ig;function kS(e){var r=e||[];if(or(r))return r;if(wr(r))return r=r.match(HS),Ce(r,function(t,n){if(t=t.match(zS),t[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}Ce(t,function(o,a){isNaN(o)||(t[a]=+o)}),r[n]=t}),r}var Co=`	
\v\f\r   ᠎             　\u2028\u2029`,WS=new RegExp("([a-z])["+Co+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Co+"]*,?["+Co+"]*)+)","ig"),GS=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Co+"]*,?["+Co+"]*","ig");function US(e){if(!e)return null;if(or(e))return e;var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(e).replace(WS,function(n,i,o){var a=[],l=i.toLowerCase();if(o.replace(GS,function(s,u){u&&a.push(+u)}),l==="m"&&a.length>2&&(t.push([i].concat(a.splice(0,2))),l="l",i=i==="m"?"l":"L"),l==="o"&&a.length===1&&t.push([i,a[0]]),l==="r")t.push([i].concat(a));else for(;a.length>=r[l]&&(t.push([i].concat(a.splice(0,r[l]))),!!r[l]););return""}),t}var YS=/[a-z]/;function ld(e,r){return[r[0]+(r[0]-e[0]),r[1]+(r[1]-e[1])]}function B0(e){var r=US(e);if(!r||!r.length)return[["M",0,0]];for(var t=!1,n=0;n<r.length;n++){var i=r[n][0];if(YS.test(i)||["V","H","T","S"].indexOf(i)>=0){t=!0;break}}if(!t)return r;var o=[],a=0,l=0,s=0,u=0,f=0,c=r[0];(c[0]==="M"||c[0]==="m")&&(a=+c[1],l=+c[2],s=a,u=l,f++,o[0]=["M",a,l]);for(var n=f,h=r.length;n<h;n++){var d=r[n],v=o[n-1],p=[],i=d[0],g=i.toUpperCase();if(i!==g)switch(p[0]=g,g){case"A":p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5],p[6]=+d[6]+a,p[7]=+d[7]+l;break;case"V":p[1]=+d[1]+l;break;case"H":p[1]=+d[1]+a;break;case"M":s=+d[1]+a,u=+d[2]+l,p[1]=s,p[2]=u;break;default:for(var C=1,y=d.length;C<y;C++)p[C]=+d[C]+(C%2?a:l)}else p=r[n];switch(g){case"Z":a=+s,l=+u;break;case"H":a=p[1],p=["L",a,l];break;case"V":l=p[1],p=["L",a,l];break;case"T":a=p[1],l=p[2];var m=ld([v[1],v[2]],[v[3],v[4]]);p=["Q",m[0],m[1],a,l];break;case"S":a=p[p.length-2],l=p[p.length-1];var w=v.length,S=ld([v[w-4],v[w-3]],[v[w-2],v[w-1]]);p=["C",S[0],S[1],p[1],p[2],a,l];break;case"M":s=p[p.length-2],u=p[p.length-1];break;default:a=p[p.length-2],l=p[p.length-1]}o.push(p)}return o}function ya(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Qs(e,r){return ya(e)*ya(r)?(e[0]*r[0]+e[1]*r[1])/(ya(e)*ya(r)):1}function sd(e,r){return(e[0]*r[1]<e[1]*r[0]?-1:1)*Math.acos(Qs(e,r))}function Js(e,r){return e[0]===r[0]&&e[1]===r[1]}function XS(e,r){var t=r[1],n=r[2],i=Xp(Vp(r[3]),Math.PI*2),o=r[4],a=r[5],l=e[0],s=e[1],u=r[6],f=r[7],c=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-f)/2,h=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-f)/2,d=c*c/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(c*c),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;o===a&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,C=t?p*-n*c/t:0,y=(l+u)/2+Math.cos(i)*g-Math.sin(i)*C,m=(s+f)/2+Math.sin(i)*g+Math.cos(i)*C,w=[(c-g)/t,(h-C)/n],S=[(-1*c-g)/t,(-1*h-C)/n],b=sd([1,0],w),A=sd(w,S);return Qs(w,S)<=-1&&(A=Math.PI),Qs(w,S)>=1&&(A=0),a===0&&A>0&&(A=A-2*Math.PI),a===1&&A<0&&(A=A+2*Math.PI),{cx:y,cy:m,rx:Js(e,[u,f])?0:t,ry:Js(e,[u,f])?0:n,startAngle:b,endAngle:b+A,xRotation:i,arcFlag:o,sweepFlag:a}}function ud(e,r){return[r[0]+(r[0]-e[0]),r[1]+(r[1]-e[1])]}function D0(e){e=kS(e);for(var r=[],t=null,n=null,i=null,o=0,a=e.length,l=0;l<a;l++){var s=e[l];n=e[l+1];var u=s[0],f={command:u,prePoint:t,params:s,startTangent:null,endTangent:null};switch(u){case"M":i=[s[1],s[2]],o=l;break;case"A":var c=XS(t,s);f.arcParams=c;break}if(u==="Z")t=i,n=e[o+1];else{var h=s.length;t=[s[h-2],s[h-1]]}n&&n[0]==="Z"&&(n=e[o],r[o]&&(r[o].prePoint=t)),f.currentPoint=t,r[o]&&Js(t,r[o].currentPoint)&&(r[o].prePoint=f.prePoint);var d=n?[n[n.length-2],n[n.length-1]]:null;f.nextPoint=d;var v=f.prePoint;if(["L","H","V"].includes(u))f.startTangent=[v[0]-t[0],v[1]-t[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]];else if(u==="Q"){var p=[s[1],s[2]];f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[t[0]-p[0],t[1]-p[1]]}else if(u==="T"){var g=r[l-1],p=ud(g.currentPoint,v);g.command==="Q"?(f.command="Q",f.startTangent=[v[0]-p[0],v[1]-p[1]],f.endTangent=[t[0]-p[0],t[1]-p[1]]):(f.command="TL",f.startTangent=[v[0]-t[0],v[1]-t[1]],f.endTangent=[t[0]-v[0],t[1]-v[1]])}else if(u==="C"){var C=[s[1],s[2]],y=[s[3],s[4]];f.startTangent=[v[0]-C[0],v[1]-C[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]],f.startTangent[0]===0&&f.startTangent[1]===0&&(f.startTangent=[C[0]-y[0],C[1]-y[1]]),f.endTangent[0]===0&&f.endTangent[1]===0&&(f.endTangent=[y[0]-C[0],y[1]-C[1]])}else if(u==="S"){var g=r[l-1],C=ud(g.currentPoint,v),y=[s[1],s[2]];g.command==="C"?(f.command="C",f.startTangent=[v[0]-C[0],v[1]-C[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]]):(f.command="SQ",f.startTangent=[v[0]-y[0],v[1]-y[1]],f.endTangent=[t[0]-y[0],t[1]-y[1]])}else if(u==="A"){var m=.001,w=f.arcParams||{},S=w.cx,b=S===void 0?0:S,A=w.cy,O=A===void 0?0:A,B=w.rx,P=B===void 0?0:B,D=w.ry,z=D===void 0?0:D,W=w.sweepFlag,U=W===void 0?0:W,V=w.startAngle,k=V===void 0?0:V,pe=w.endAngle,he=pe===void 0?0:pe;U===0&&(m*=-1);var Me=P*Math.cos(k-m)+b,ne=z*Math.sin(k-m)+O;f.startTangent=[Me-i[0],ne-i[1]];var Fe=P*Math.cos(k+he+m)+b,we=z*Math.sin(k+he-m)+O;f.endTangent=[v[0]-Fe,v[1]-we]}r.push(f)}return r}function VS(e,r){for(var t=[],n=[],i=[],o=0;o<e.length;o++){var a=e[o],l=a.currentPoint,s=a.params,u=a.prePoint,f=void 0;switch(a.command){case"Q":f=L0.box(u[0],u[1],s[1],s[2],s[3],s[4]);break;case"C":f=go.box(u[0],u[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var c=a.arcParams;f=AS.box(c.cx,c.cy,c.rx,c.ry,c.xRotation,c.startAngle,c.endAngle);break;default:t.push(l[0]),n.push(l[1]);break}f&&(a.box=f,t.push(f.x,f.x+f.width),n.push(f.y,f.y+f.height)),r&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}t=t.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0}),n=n.filter(function(C){return!Number.isNaN(C)&&C!==1/0&&C!==-1/0});var h=Ir(t),d=Ir(n),v=Or(t),p=Or(n);if(i.length===0)return{x:h,y:d,width:v-h,height:p-d};for(var o=0;o<i.length;o++){var a=i[o],l=a.currentPoint,g=void 0;l[0]===h?(g=ma(a,r),h=h-g.xExtra):l[0]===v&&(g=ma(a,r),v=v+g.xExtra),l[1]===d?(g=ma(a,r),d=d-g.yExtra):l[1]===p&&(g=ma(a,r),p=p+g.yExtra)}return{x:h,y:d,width:v-h,height:p-d}}function ma(e,r){var t=e.prePoint,n=e.currentPoint,i=e.nextPoint,o=Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2),s=Math.acos((o+a-l)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!s||Math.sin(s)===0||Jm(s,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),f=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));u=u>Math.PI/2?Math.PI-u:u,f=f>Math.PI/2?Math.PI-f:f;var c={xExtra:Math.cos(s/2-u)*(r/2*(1/Math.sin(s/2)))-r/2||0,yExtra:Math.cos(f-s/2)*(r/2*(1/Math.sin(s/2)))-r/2||0};return c}function jS(e){var r=e.attr(),t=r.path,n=r.stroke,i=n?r.lineWidth:0,o=e.get("segments")||D0(t),a=VS(o,i),l=a.x,s=a.y,u=a.width,f=a.height,c={minX:l,minY:s,maxX:l+u,maxY:s+f};return c=ff(e,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function qS(e){var r=e.attr(),t=r.x1,n=r.y1,i=r.x2,o=r.y2,a=Math.min(t,i),l=Math.max(t,i),s=Math.min(n,o),u=Math.max(n,o),f={minX:a,maxX:l,minY:s,maxY:u};return f=ff(e,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function KS(e){var r=e.attr(),t=r.x,n=r.y,i=r.rx,o=r.ry;return{x:t-i,y:n-o,width:i*2,height:o*2}}Gr("rect",x0);Gr("image",x0);Gr("circle",T0);Gr("marker",T0);Gr("polyline",DS);Gr("polygon",$S);Gr("text",FS);Gr("path",jS);Gr("line",qS);Gr("ellipse",KS);function ZS(){return window?window.devicePixelRatio:1}function $0(e,r,t,n){var i=e-t,o=r-n;return Math.sqrt(i*i+o*o)}function Un(e,r,t,n,i,o){return i>=e&&i<=e+t&&o>=r&&o<=r+n}function Oo(e,r){return!(r.minX>e.maxX||r.maxX<e.minX||r.minY>e.maxY||r.maxY<e.minY)}function QS(e,r){return!e||!r?e||r:{minX:Math.min(e.minX,r.minX),minY:Math.min(e.minY,r.minY),maxX:Math.max(e.maxX,r.maxX),maxY:Math.max(e.maxY,r.maxY)}}function fd(e,r){return e[0]===r[0]&&e[1]===r[1]}var JS=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,ex=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,tx=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,P0=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function N0(e,r){var t=e.match(P0);Ce(t,function(n){var i=n.split(":");r.addColorStop(i[0],i[1])})}function rx(e,r,t){var n=JS.exec(t),i=parseFloat(n[1])%360*(Math.PI/180),o=n[2],a=r.getBBox(),l,s;i>=0&&i<1/2*Math.PI?(l={x:a.minX,y:a.minY},s={x:a.maxX,y:a.maxY}):1/2*Math.PI<=i&&i<Math.PI?(l={x:a.maxX,y:a.minY},s={x:a.minX,y:a.maxY}):Math.PI<=i&&i<3/2*Math.PI?(l={x:a.maxX,y:a.maxY},s={x:a.minX,y:a.minY}):(l={x:a.minX,y:a.maxY},s={x:a.maxX,y:a.minY});var u=Math.tan(i),f=u*u,c=(s.x-l.x+u*(s.y-l.y))/(f+1)+l.x,h=u*(s.x-l.x+u*(s.y-l.y))/(f+1)+l.y,d=e.createLinearGradient(l.x,l.y,c,h);return N0(o,d),d}function nx(e,r,t){var n=ex.exec(t),i=parseFloat(n[1]),o=parseFloat(n[2]),a=parseFloat(n[3]),l=n[4];if(a===0){var s=l.match(P0);return s[s.length-1].split(":")[1]}var u=r.getBBox(),f=u.maxX-u.minX,c=u.maxY-u.minY,h=Math.sqrt(f*f+c*c)/2,d=e.createRadialGradient(u.minX+f*i,u.minY+c*o,0,u.minX+f/2,u.minY+c/2,a*h);return N0(l,d),d}function ix(e,r,t){if(r.get("patternSource")&&r.get("patternSource")===t)return r.get("pattern");var n,i,o=tx.exec(t),a=o[1],l=o[2];function s(){n=e.createPattern(i,a),r.set("pattern",n),r.set("patternSource",t)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;case"n":a="no-repeat";break;default:a="no-repeat"}return i=new Image,l.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=l,i.complete?s():(i.onload=s,i.src=i.src),n}function ox(e,r,t){var n=r.getBBox();if(isNaN(n.x)||isNaN(n.y)||isNaN(n.width)||isNaN(n.height))return t;if(wr(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return rx(e,r,t);if(t[0]==="r")return nx(e,r,t);if(t[0]==="p")return ix(e,r,t)}return t}if(t instanceof CanvasPattern)return t}function ax(e){var r=0,t=0,n=0,i=0;return or(e)?e.length===1?r=t=n=i=e[0]:e.length===2?(r=n=e[0],t=i=e[1]):e.length===3?(r=e[0],t=i=e[1],n=e[2]):(r=e[0],t=e[1],n=e[2],i=e[3]):r=t=n=i=e,[r,t,n,i]}function wa(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function eu(e,r){return wa(e)*wa(r)?(e[0]*r[0]+e[1]*r[1])/(wa(e)*wa(r)):1}function cd(e,r){return(e[0]*r[1]<e[1]*r[0]?-1:1)*Math.acos(eu(e,r))}function hd(e,r){var t=r[1],n=r[2],i=Xp(Vp(r[3]),Math.PI*2),o=r[4],a=r[5],l=e[0],s=e[1],u=r[6],f=r[7],c=Math.cos(i)*(l-u)/2+Math.sin(i)*(s-f)/2,h=-1*Math.sin(i)*(l-u)/2+Math.cos(i)*(s-f)/2,d=c*c/(t*t)+h*h/(n*n);d>1&&(t*=Math.sqrt(d),n*=Math.sqrt(d));var v=t*t*(h*h)+n*n*(c*c),p=v?Math.sqrt((t*t*(n*n)-v)/v):1;o===a&&(p*=-1),isNaN(p)&&(p=0);var g=n?p*t*h/n:0,C=t?p*-n*c/t:0,y=(l+u)/2+Math.cos(i)*g-Math.sin(i)*C,m=(s+f)/2+Math.sin(i)*g+Math.cos(i)*C,w=[(c-g)/t,(h-C)/n],S=[(-1*c-g)/t,(-1*h-C)/n],b=cd([1,0],w),A=cd(w,S);return eu(w,S)<=-1&&(A=Math.PI),eu(w,S)>=1&&(A=0),a===0&&A>0&&(A=A-2*Math.PI),a===1&&A<0&&(A=A+2*Math.PI),{cx:y,cy:m,rx:fd(e,[u,f])?0:t,ry:fd(e,[u,f])?0:n,startAngle:b,endAngle:b+A,xRotation:i,arcFlag:o,sweepFlag:a}}var Ya=Math.sin,Xa=Math.cos,cf=Math.atan2,_a=Math.PI;function F0(e,r,t,n,i,o,a){var l=r.stroke,s=r.lineWidth,u=t-i,f=n-o,c=cf(f,u),h=new gf({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Xa(_a/6)+","+10*Ya(_a/6)+" L0,0 L"+10*Xa(_a/6)+",-"+10*Ya(_a/6),stroke:l,lineWidth:s}});h.translate(i,o),h.rotateAtPoint(i,o,c),e.set(a?"startArrowShape":"endArrowShape",h)}function H0(e,r,t,n,i,o,a){var l=r.startArrow,s=r.endArrow,u=r.stroke,f=r.lineWidth,c=a?l:s,h=c.d,d=c.fill,v=c.stroke,p=c.lineWidth,g=Km(c,["d","fill","stroke","lineWidth"]),C=t-i,y=n-o,m=cf(y,C);h&&(i=i-Xa(m)*h,o=o-Ya(m)*h);var w=new gf({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:Ue(Ue({},g),{stroke:v||u,lineWidth:p||f,fill:d})});w.translate(i,o),w.rotateAtPoint(i,o,m),e.set(a?"startArrowShape":"endArrowShape",w)}function Xn(e,r,t,n,i){var o=cf(n-r,t-e);return{dx:Xa(o)*i,dy:Ya(o)*i}}function hf(e,r,t,n,i,o){typeof r.startArrow=="object"?H0(e,r,t,n,i,o,!0):r.startArrow?F0(e,r,t,n,i,o,!0):e.set("startArrowShape",null)}function df(e,r,t,n,i,o){typeof r.endArrow=="object"?H0(e,r,t,n,i,o,!1):r.endArrow?F0(e,r,t,n,i,o,!1):e.set("startArrowShape",null)}var dd={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function Ai(e,r){var t=r.attr();for(var n in t){var i=t[n],o=dd[n]?dd[n]:n;o==="matrix"&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):o==="lineDash"&&e.setLineDash?or(i)&&e.setLineDash(i):(o==="strokeStyle"||o==="fillStyle"?i=ox(e,r,i):o==="globalAlpha"&&(i=i*e.globalAlpha),e[o]=i)}}function tu(e,r,t){for(var n=0;n<r.length;n++){var i=r[n];i.cfg.visible?i.draw(e,t):i.skipDraw()}}function lx(e,r,t){var n=e.get("refreshElements");Ce(n,function(i){if(i!==e)for(var o=i.cfg.parent;o&&o!==e&&!o.cfg.refresh;)o.cfg.refresh=!0,o=o.cfg.parent}),n[0]===e?vf(r):ru(r,t)}function ru(e,r){for(var t=0;t<e.length;t++){var n=e[t];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&vf(n.cfg.children);else if(n.cfg.refresh)n.isGroup()&&ru(n.cfg.children,r);else{var i=sx(n,r);n.cfg.refresh=i,i&&n.isGroup()&&ru(n.cfg.children,r)}}}function z0(e){for(var r=0;r<e.length;r++){var t=e[r];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&z0(t.cfg.children)}}function vf(e,r){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.refresh=!0,n.isGroup()&&vf(n.get("children"))}}function sx(e,r){var t=e.cfg.cacheCanvasBBox,n=e.cfg.isInView&&t&&Oo(t,r);return n}function k0(e,r,t,n){var i=t.path,o=t.startArrow,a=t.endArrow;if(i){var l=[0,0],s=[0,0],u={dx:0,dy:0};r.beginPath();for(var f=0;f<i.length;f++){var c=i[f],h=c[0];if(f===0&&o&&o.d){var d=e.getStartTangent();u=Xn(d[0][0],d[0][1],d[1][0],d[1][1],o.d)}else if(f===i.length-2&&i[f+1][0]==="Z"&&a&&a.d){var v=i[f+1];if(v[0]==="Z"){var d=e.getEndTangent();u=Xn(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}}else if(f===i.length-1&&a&&a.d&&i[0]!=="Z"){var d=e.getEndTangent();u=Xn(d[0][0],d[0][1],d[1][0],d[1][1],a.d)}var p=u.dx,g=u.dy;switch(h){case"M":r.moveTo(c[1]-p,c[2]-g),s=[c[1],c[2]];break;case"L":r.lineTo(c[1]-p,c[2]-g);break;case"Q":r.quadraticCurveTo(c[1],c[2],c[3]-p,c[4]-g);break;case"C":r.bezierCurveTo(c[1],c[2],c[3],c[4],c[5]-p,c[6]-g);break;case"A":{var C=void 0;n?(C=n[f],C||(C=hd(l,c),n[f]=C)):C=hd(l,c);var y=C.cx,m=C.cy,w=C.rx,S=C.ry,b=C.startAngle,A=C.endAngle,O=C.xRotation,B=C.sweepFlag;if(r.ellipse)r.ellipse(y,m,w,S,O,b,A,1-B);else{var P=w>S?w:S,D=w>S?1:w/S,z=w>S?S/w:1;r.translate(y,m),r.rotate(O),r.scale(D,z),r.arc(0,0,P,b,A,1-B),r.scale(1/D,1/z),r.rotate(-O),r.translate(-y,-m)}break}case"Z":r.closePath();break}if(h==="Z")l=s;else{var W=c.length;l=[c[W-2],c[W-1]]}}}}function W0(e,r){var t=e.get("canvas");t&&(r==="remove"&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(t.refreshElement(e,r,t),t.get("autoDraw")&&t.draw())))}function ux(e){var r;if(e.destroyed)r=e._cacheCanvasBBox;else{var t=e.get("cacheCanvasBBox"),n=t&&!!(t.width&&t.height),i=e.getCanvasBBox(),o=i&&!!(i.width&&i.height);n&&o?r=QS(t,i):n?r=t:o&&(r=i)}return r}function fx(e){if(!e.length)return null;var r=[],t=[],n=[],i=[];return Ce(e,function(o){var a=ux(o);a&&(r.push(a.minX),t.push(a.minY),n.push(a.maxX),i.push(a.maxY))}),{minX:Ir(r),minY:Ir(t),maxX:Or(n),maxY:Or(i)}}function cx(e,r){return!e||!r||!Oo(e,r)?null:{minX:Math.max(e.minX,r.minX),minY:Math.max(e.minY,r.minY),maxX:Math.min(e.maxX,r.maxX),maxY:Math.min(e.maxY,r.maxY)}}var Ur=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.onCanvasChange=function(t){W0(this,t)},r.prototype.getShapeBase=function(){return tf},r.prototype.getGroupBase=function(){return r},r.prototype._applyClip=function(t,n){n&&(t.save(),Ai(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},r.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,n=[],i=[];Ce(t,function(h){var d=h.cfg.cacheCanvasBBox;d&&h.cfg.isInView&&(n.push(d.minX,d.maxX),i.push(d.minY,d.maxY))});var o=null;if(n.length){var a=Ir(n),l=Or(n),s=Ir(i),u=Or(i);o={minX:a,minY:s,x:a,y:s,maxX:l,maxY:u,width:l-a,height:u-s};var f=this.cfg.canvas;if(f){var c=f.getViewRange();this.set("isInView",Oo(o,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",o)},r.prototype.draw=function(t,n){var i=this.cfg.children,o=n?this.cfg.refresh:!0;i.length&&o&&(t.save(),Ai(t,this),this._applyClip(t,this.getClip()),tu(t,i,n),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},r}(CS),hx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},r.prototype.getShapeBase=function(){return tf},r.prototype.getGroupBase=function(){return Ur},r.prototype.onCanvasChange=function(t){W0(this,t)},r.prototype.calculateBBox=function(){var t=this.get("type"),n=this.getHitLineWidth(),i=mS(t),o=i(this),a=n/2,l=o.x-a,s=o.y-a,u=o.x+o.width+a,f=o.y+o.height+a;return{x:l,minX:l,y:s,minY:s,width:o.width+n,height:o.height+n,maxX:u,maxY:f}},r.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},r.prototype.isStroke=function(){return!!this.attrs.stroke},r.prototype._applyClip=function(t,n){n&&(t.save(),Ai(t,n),n.createPath(t),t.restore(),t.clip(),n._afterDraw())},r.prototype.draw=function(t,n){var i=this.cfg.clipShape;if(n){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var o=this.getCanvasBBox();if(!Oo(n,o)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),Ai(t,this),this._applyClip(t,i),this.drawPath(t),t.restore(),this._afterDraw()},r.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},r.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var n=this.getCanvasBBox(),i=Oo(n,t);this.set("isInView",i),i?this.set("cacheCanvasBBox",n):this.set("cacheCanvasBBox",null)}},r.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},r.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},r.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},r.prototype.fill=function(t){t.fill()},r.prototype.stroke=function(t){t.stroke()},r.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,l=n.fillOpacity;this.isFill()&&(!et(l)&&l!==1?(t.globalAlpha=l,this.fill(t),t.globalAlpha=o):this.fill(t)),this.isStroke()&&i>0&&(!et(a)&&a!==1&&(t.globalAlpha=a),this.stroke(t)),this.afterDrawPath(t)},r.prototype.createPath=function(t){},r.prototype.afterDrawPath=function(t){},r.prototype.isInShape=function(t,n){var i=this.isStroke(),o=this.isFill(),a=this.getHitLineWidth();return this.isInStrokeOrPath(t,n,i,o,a)},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){return!1},r.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},r}(yS),xr=hx,dx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x:0,y:0,r:0})},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){var l=this.attr(),s=l.x,u=l.y,f=l.r,c=a/2,h=$0(s,u,t,n);return o&&i?h<=f+c:o?h<=f:i?h>=f-c&&h<=f+c:!1},r.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.r;t.beginPath(),t.arc(i,o,a,0,Math.PI*2,!1),t.closePath()},r}(xr),vx=dx;function Sa(e,r,t,n){return e/(t*t)+r/(n*n)}var px=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x:0,y:0,rx:0,ry:0})},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){var l=this.attr(),s=a/2,u=l.x,f=l.y,c=l.rx,h=l.ry,d=(t-u)*(t-u),v=(n-f)*(n-f);return o&&i?Sa(d,v,c+s,h+s)<=1:o?Sa(d,v,c,h)<=1:i?Sa(d,v,c-s,h-s)>=1&&Sa(d,v,c+s,h+s)<=1:!1},r.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.rx,l=n.ry;if(t.beginPath(),t.ellipse)t.ellipse(i,o,a,l,0,0,Math.PI*2,!1);else{var s=a>l?a:l,u=a>l?1:a/l,f=a>l?l/a:1;t.save(),t.translate(i,o),t.scale(u,f),t.arc(0,0,s,0,Math.PI*2),t.restore(),t.closePath()}},r}(xr),gx=px;function vd(e){return e instanceof HTMLElement&&wr(e.nodeName)&&e.nodeName.toUpperCase()==="CANVAS"}var Cx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x:0,y:0,width:0,height:0})},r.prototype.initAttrs=function(t){this._setImage(t.img)},r.prototype.isStroke=function(){return!1},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},r.prototype._setImage=function(t){var n=this,i=this.attrs;if(wr(t)){var o=new Image;o.onload=function(){if(n.destroyed)return!1;n.attr("img",o),n.set("loading",!1),n._afterLoading();var a=n.get("callback");a&&a.call(n)},o.crossOrigin="Anonymous",o.src=t,this.set("loading",!0)}else t instanceof Image?(i.width||(i.width=t.width),i.height||(i.height=t.height)):vd(t)&&(i.width||(i.width=Number(t.getAttribute("width"))),i.height||(i.height,Number(t.getAttribute("height"))))},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),t==="img"&&this._setImage(n)},r.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var n=this.attr(),i=n.x,o=n.y,a=n.width,l=n.height,s=n.sx,u=n.sy,f=n.swidth,c=n.sheight,h=n.img;(h instanceof Image||vd(h))&&(!et(s)&&!et(u)&&!et(f)&&!et(c)?t.drawImage(h,s,u,f,c,i,o,a,l):t.drawImage(h,i,o,a,l))},r}(xr),pf=Cx;function Tn(e,r,t,n,i,o,a){var l=Math.min(e,t),s=Math.max(e,t),u=Math.min(r,n),f=Math.max(r,n),c=i/2;return o>=l-c&&o<=s+c&&a>=u-c&&a<=f+c?Bt.pointToLine(e,r,t,n,o,a)<=i/2:!1}var yx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),this.setArrow()},r.prototype.setArrow=function(){var t=this.attr(),n=t.x1,i=t.y1,o=t.x2,a=t.y2,l=t.startArrow,s=t.endArrow;l&&hf(this,t,o,a,n,i),s&&df(this,t,n,i,o,a)},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){if(!i||!a)return!1;var l=this.attr(),s=l.x1,u=l.y1,f=l.x2,c=l.y2;return Tn(s,u,f,c,a,t,n)},r.prototype.createPath=function(t){var n=this.attr(),i=n.x1,o=n.y1,a=n.x2,l=n.y2,s=n.startArrow,u=n.endArrow,f={dx:0,dy:0},c={dx:0,dy:0};s&&s.d&&(f=Xn(i,o,a,l,n.startArrow.d)),u&&u.d&&(c=Xn(i,o,a,l,n.endArrow.d)),t.beginPath(),t.moveTo(i+f.dx,o+f.dy),t.lineTo(a-c.dx,l-c.dy)},r.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr(),n=t.x1,i=t.y1,o=t.x2,a=t.y2;return Bt.length(n,i,o,a)},r.prototype.getPoint=function(t){var n=this.attr(),i=n.x1,o=n.y1,a=n.x2,l=n.y2;return Bt.pointAt(i,o,a,l,t)},r}(xr),mx=yx,wx={circle:function(e,r,t){return[["M",e-t,r],["A",t,t,0,1,0,e+t,r],["A",t,t,0,1,0,e-t,r]]},square:function(e,r,t){return[["M",e-t,r-t],["L",e+t,r-t],["L",e+t,r+t],["L",e-t,r+t],["Z"]]},diamond:function(e,r,t){return[["M",e-t,r],["L",e,r-t],["L",e+t,r],["L",e,r+t],["Z"]]},triangle:function(e,r,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,r+n],["L",e,r-n],["L",e+t,r+n],["Z"]]},"triangle-down":function(e,r,t){var n=t*Math.sin(.3333333333333333*Math.PI);return[["M",e-t,r-n],["L",e+t,r-n],["L",e,r+n],["Z"]]}},_x=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.initAttrs=function(t){this._resetParamsCache()},r.prototype._resetParamsCache=function(){this.set("paramsCache",{})},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},r.prototype.isOnlyHitBox=function(){return!0},r.prototype._getR=function(t){return et(t.r)?t.radius:t.r},r.prototype._getPath=function(){var t=this.attr(),n=t.x,i=t.y,o=t.symbol||"circle",a=this._getR(t),l,s;if(Kn(o))l=o,s=l(n,i,a),s=B0(s);else{if(l=r.Symbols[o],!l)return console.warn(o+" marker is not supported."),null;s=l(n,i,a)}return s},r.prototype.createPath=function(t){var n=this._getPath(),i=this.get("paramsCache");k0(this,t,{path:n},i)},r.Symbols=wx,r}(xr),Sx=_x;function G0(e,r,t){var n=O0();return e.createPath(n),n.isPointInPath(r,t)}var xx=1e-6;function ds(e){return Math.abs(e)<xx?0:e<0?-1:1}function Tx(e,r,t){return(t[0]-e[0])*(r[1]-e[1])===(r[0]-e[0])*(t[1]-e[1])&&Math.min(e[0],r[0])<=t[0]&&t[0]<=Math.max(e[0],r[0])&&Math.min(e[1],r[1])<=t[1]&&t[1]<=Math.max(e[1],r[1])}function U0(e,r,t){var n=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],l=e[(o+1)%i];if(Tx(a,l,[r,t]))return!0;ds(a[1]-t)>0!=ds(l[1]-t)>0&&ds(r-(t-a[1])*(a[0]-l[0])/(a[1]-l[1])-a[0])<0&&(n=!n)}return n}function fo(e,r,t,n,i,o,a,l){var s=(Math.atan2(l-r,a-e)+Math.PI*2)%(Math.PI*2);if(s<n||s>i)return!1;var u={x:e+t*Math.cos(s),y:r+t*Math.sin(s)};return $0(u.x,u.y,a,l)<=o/2}var Ex=n0;function bx(e){for(var r=!1,t=e.length,n=0;n<t;n++){var i=e[n],o=i[0];if(o==="C"||o==="A"||o==="Q"){r=!0;break}}return r}function Lx(e,r,t,n,i){for(var o=!1,a=r/2,l=0;l<e.length;l++){var s=e[l],u=s.currentPoint,f=s.params,c=s.prePoint,h=s.box;if(!(h&&!Un(h.x-a,h.y-a,h.width+r,h.height+r,t,n))){switch(s.command){case"L":case"Z":o=Tn(c[0],c[1],u[0],u[1],r,t,n);break;case"Q":var d=L0.pointDistance(c[0],c[1],f[1],f[2],f[3],f[4],t,n);o=d<=r/2;break;case"C":var v=go.pointDistance(c[0],c[1],f[1],f[2],f[3],f[4],f[5],f[6],t,n,i);o=v<=r/2;break;case"A":var p=s.arcParams,g=p.cx,C=p.cy,y=p.rx,m=p.ry,w=p.startAngle,S=p.endAngle,b=p.xRotation,A=[t,n,1],O=y>m?y:m,B=y>m?1:y/m,P=y>m?m/y:1,D=Ex(null,[["t",-g,-C],["r",-b],["s",1/B,1/P]]);Yw(A,A,D),o=fo(0,0,O,w,S,r,A[0],A[1]);break}if(o)break}}return o}function Ax(e){for(var r=e.length,t=[],n=[],i=[],o=0;o<r;o++){var a=e[o],l=a[0];l==="M"?(i.length&&(n.push(i),i=[]),i.push([a[1],a[2]])):l==="Z"?i.length&&(t.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&n.push(i),{polygons:t,polylines:n}}var xa=Ue({hasArc:bx,extractPolygons:Ax,isPointInStroke:Lx},Tw);function pd(e,r,t){for(var n=!1,i=0;i<e.length;i++){var o=e[i];if(n=U0(o,r,t),n)break}return n}var Rx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),t==="path"&&this._setPathArr(n),this.setArrow()},r.prototype._setPathArr=function(t){this.attrs.path=B0(t);var n=xa.hasArc(t);this.set("hasArc",n),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},r.prototype.getSegments=function(){var t=this.get("segements");return t||(t=D0(this.attr("path")),this.set("segments",t)),t},r.prototype.setArrow=function(){var t=this.attr(),n=t.startArrow,i=t.endArrow;if(n){var o=this.getStartTangent();hf(this,t,o[0][0],o[0][1],o[1][0],o[1][1])}if(i){var o=this.getEndTangent();df(this,t,o[0][0],o[0][1],o[1][0],o[1][1])}},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){var l=this.getSegments(),s=this.get("hasArc"),u=!1;if(i){var f=this.getTotalLength();u=xa.isPointInStroke(l,a,t,n,f)}if(!u&&o)if(s)u=G0(this,t,n);else{var c=this.attr("path"),h=xa.extractPolygons(c);u=pd(h.polygons,t,n)||pd(h.polylines,t,n)}return u},r.prototype.createPath=function(t){var n=this.attr(),i=this.get("paramsCache");k0(this,t,n,i)},r.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.get("totalLength");return et(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},r.prototype.getPoint=function(t){var n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var i,o,a=this.get("curve");if(!n||n.length===0)return a?{x:a[0][1],y:a[0][2]}:null;Ce(n,function(f,c){t>=f[0]&&t<=f[1]&&(i=(t-f[0])/(f[1]-f[0]),o=c)});var l=a[o];if(et(l)||et(o))return null;var s=l.length,u=a[o+1];return go.pointAt(l[s-2],l[s-1],u[1],u[2],u[3],u[4],u[5],u[6],i)},r.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",xa.pathToCurve(t))},r.prototype._setTcache=function(){var t=0,n=0,i=[],o,a,l,s,u=this.get("curve");if(u){if(Ce(u,function(f,c){l=u[c+1],s=f.length,l&&(t+=go.length(f[s-2],f[s-1],l[1],l[2],l[3],l[4],l[5],l[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}Ce(u,function(f,c){l=u[c+1],s=f.length,l&&(o=[],o[0]=n/t,a=go.length(f[s-2],f[s-1],l[1],l[2],l[3],l[4],l[5],l[6]),n+=a||0,o[1]=n/t,i.push(o))}),this.set("tCache",i)}},r.prototype.getStartTangent=function(){var t=this.getSegments(),n;if(t.length>1){var i=t[0].currentPoint,o=t[1].currentPoint,a=t[1].startTangent;n=[],a?(n.push([i[0]-a[0],i[1]-a[1]]),n.push([i[0],i[1]])):(n.push([o[0],o[1]]),n.push([i[0],i[1]]))}return n},r.prototype.getEndTangent=function(){var t=this.getSegments(),n=t.length,i;if(n>1){var o=t[n-2].currentPoint,a=t[n-1].currentPoint,l=t[n-1].endTangent;i=[],l?(i.push([a[0]-l[0],a[1]-l[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},r}(xr),gf=Rx;function Y0(e,r,t,n,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var l=e[a][0],s=e[a][1],u=e[a+1][0],f=e[a+1][1];if(Tn(l,s,u,f,r,t,n))return!0}if(i){var c=e[0],h=e[o-1];if(Tn(c[0],c[1],h[0],h[1],r,t,n))return!0}return!1}var Ox=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isInStrokeOrPath=function(t,n,i,o,a){var l=this.attr().points,s=!1;return i&&(s=Y0(l,a,t,n,!0)),!s&&o&&(s=U0(l,t,n)),s},r.prototype.createPath=function(t){var n=this.attr(),i=n.points;if(!(i.length<2)){t.beginPath();for(var o=0;o<i.length;o++){var a=i[o];o===0?t.moveTo(a[0],a[1]):t.lineTo(a[0],a[1])}t.closePath()}},r}(xr),Ix=Ox,Mx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{startArrow:!1,endArrow:!1})},r.prototype.initAttrs=function(t){this.setArrow()},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},r.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},r.prototype.setArrow=function(){var t=this.attr(),n=this.attrs,i=n.points,o=n.startArrow,a=n.endArrow,l=i.length,s=i[0][0],u=i[0][1],f=i[l-1][0],c=i[l-1][1];o&&hf(this,t,i[1][0],i[1][1],s,u),a&&df(this,t,i[l-2][0],i[l-2][1],f,c)},r.prototype.isFill=function(){return!1},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){if(!i||!a)return!1;var l=this.attr().points;return Y0(l,a,t,n,!1)},r.prototype.isStroke=function(){return!0},r.prototype.createPath=function(t){var n=this.attr(),i=n.points,o=n.startArrow,a=n.endArrow,l=i.length;if(!(i.length<2)){var s=i[0][0],u=i[0][1],f=i[l-1][0],c=i[l-1][1];if(o&&o.d){var h=Xn(s,u,i[1][0],i[1][1],o.d);s+=h.dx,u+=h.dy}if(a&&a.d){var h=Xn(i[l-2][0],i[l-2][1],f,c,a.d);f-=h.dx,c-=h.dy}t.beginPath(),t.moveTo(s,u);for(var d=0;d<l-1;d++){var v=i[d];t.lineTo(v[0],v[1])}t.lineTo(f,c)}},r.prototype.afterDrawPath=function(t){var n=this.get("startArrowShape"),i=this.get("endArrowShape");n&&n.draw(t),i&&i.draw(t)},r.prototype.getTotalLength=function(){var t=this.attr().points,n=this.get("totalLength");return et(n)?(this.set("totalLength",BS.length(t)),this.get("totalLength")):n},r.prototype.getPoint=function(t){var n=this.attr().points,i=this.get("tCache");i||(this._setTcache(),i=this.get("tCache"));var o,a;return Ce(i,function(l,s){t>=l[0]&&t<=l[1]&&(o=(t-l[0])/(l[1]-l[0]),a=s)}),Bt.pointAt(n[a][0],n[a][1],n[a+1][0],n[a+1][1],o)},r.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var n=this.getTotalLength();if(!(n<=0)){var i=0,o=[],a,l;Ce(t,function(s,u){t[u+1]&&(a=[],a[0]=i/n,l=Bt.length(s[0],s[1],t[u+1][0],t[u+1][1]),i+=l,a[1]=i/n,o.push(a))}),this.set("tCache",o)}}},r.prototype.getStartTangent=function(){var t=this.attr().points,n=[];return n.push([t[1][0],t[1][1]]),n.push([t[0][0],t[0][1]]),n},r.prototype.getEndTangent=function(){var t=this.attr().points,n=t.length-1,i=[];return i.push([t[n-1][0],t[n-1][1]]),i.push([t[n][0],t[n][1]]),i},r}(xr),Bx=Mx;function Dx(e,r,t,n,i,o,a){var l=i/2;return Un(e-l,r-l,t,i,o,a)||Un(e+t-l,r-l,i,n,o,a)||Un(e+l,r+n-l,t,i,o,a)||Un(e-l,r+l,i,n,o,a)}function $x(e,r,t,n,i,o,a,l){return Tn(e+i,r,e+t-i,r,o,a,l)||Tn(e+t,r+i,e+t,r+n-i,o,a,l)||Tn(e+t-i,r+n,e+i,r+n,o,a,l)||Tn(e,r+n-i,e,r+i,o,a,l)||fo(e+t-i,r+i,i,1.5*Math.PI,2*Math.PI,o,a,l)||fo(e+t-i,r+n-i,i,0,.5*Math.PI,o,a,l)||fo(e+i,r+n-i,i,.5*Math.PI,Math.PI,o,a,l)||fo(e+i,r+i,i,Math.PI,1.5*Math.PI,o,a,l)}var Px=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x:0,y:0,width:0,height:0,radius:0})},r.prototype.isInStrokeOrPath=function(t,n,i,o,a){var l=this.attr(),s=l.x,u=l.y,f=l.width,c=l.height,h=l.radius;if(h){var v=!1;return i&&(v=$x(s,u,f,c,h,a,t,n)),!v&&o&&(v=G0(this,t,n)),v}else{var d=a/2;if(o&&i)return Un(s-d,u-d,f+d,c+d,t,n);if(o)return Un(s,u,f,c,t,n);if(i)return Dx(s,u,f,c,a,t,n)}},r.prototype.createPath=function(t){var n=this.attr(),i=n.x,o=n.y,a=n.width,l=n.height,s=n.radius;if(t.beginPath(),s===0)t.rect(i,o,a,l);else{var u=ax(s),f=u[0],c=u[1],h=u[2],d=u[3];t.moveTo(i+f,o),t.lineTo(i+a-c,o),c!==0&&t.arc(i+a-c,o+c,c,-Math.PI/2,0),t.lineTo(i+a,o+l-h),h!==0&&t.arc(i+a-h,o+l-h,h,0,Math.PI/2),t.lineTo(i+d,o+l),d!==0&&t.arc(i+d,o+l-d,d,Math.PI/2,Math.PI),t.lineTo(i,o+f),f!==0&&t.arc(i+f,o+f,f,Math.PI,Math.PI*1.5),t.closePath()}},r}(xr),Nx=Px,Fx=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return Ue(Ue({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},r.prototype.isOnlyHitBox=function(){return!0},r.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},r.prototype._assembleFont=function(){var t=this.attrs;t.font=M0(t)},r.prototype._setText=function(t){var n=null;wr(t)&&t.indexOf(`
`)!==-1&&(n=t.split(`
`)),this.set("textArr",n)},r.prototype.onAttrChange=function(t,n,i){e.prototype.onAttrChange.call(this,t,n,i),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(n)},r.prototype._getSpaceingY=function(){var t=this.attrs,n=t.lineHeight,i=t.fontSize*1;return n?n-i:i*.14},r.prototype._drawTextArr=function(t,n,i){var o=this.attrs,a=o.textBaseline,l=o.x,s=o.y,u=o.fontSize*1,f=this._getSpaceingY(),c=I0(o.text,o.fontSize,o.lineHeight),h;Ce(n,function(d,v){h=s+v*(f+u)-c+u,a==="middle"&&(h+=c-u-(c-u)/2),a==="top"&&(h+=c-u),et(d)||(i?t.fillText(d,l,h):t.strokeText(d,l,h))})},r.prototype._drawText=function(t,n){var i=this.attr(),o=i.x,a=i.y,l=this.get("textArr");if(l)this._drawTextArr(t,l,n);else{var s=i.text;et(s)||(n?t.fillText(s,o,a):t.strokeText(s,o,a))}},r.prototype.strokeAndFill=function(t){var n=this.attrs,i=n.lineWidth,o=n.opacity,a=n.strokeOpacity,l=n.fillOpacity;this.isStroke()&&i>0&&(!et(a)&&a!==1&&(t.globalAlpha=o),this.stroke(t)),this.isFill()&&(!et(l)&&l!==1?(t.globalAlpha=l,this.fill(t),t.globalAlpha=o):this.fill(t)),this.afterDrawPath(t)},r.prototype.fill=function(t){this._drawText(t,!0)},r.prototype.stroke=function(t){this._drawText(t,!1)},r}(xr),Hx=Fx;function zx(e,r){if(r){var t=i0(r);return Gn(t,e)}return e}function X0(e,r,t){var n=e.getTotalMatrix();if(n){var i=zx([r,t,1],n),o=i[0],a=i[1];return[o,a]}return[r,t]}function gd(e,r,t){if(e.isCanvas&&e.isCanvas())return!0;if(!Ws(e)||e.cfg.isInView===!1)return!1;if(e.cfg.clipShape){var n=X0(e,r,t),i=n[0],o=n[1];if(e.isClipped(i,o))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return r>=a.minX&&r<=a.maxX&&t>=a.minY&&t<=a.maxY}function V0(e,r,t){if(!gd(e,r,t))return null;for(var n=null,i=e.getChildren(),o=i.length,a=o-1;a>=0;a--){var l=i[a];if(l.isGroup())n=V0(l,r,t);else if(gd(l,r,t)){var s=l,u=X0(l,r,t),f=u[0],c=u[1];s.isInShape(f,c)&&(n=l)}if(n)break}return n}var Cd=function(e){Zt(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},r.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},r.prototype.getShapeBase=function(){return tf},r.prototype.getGroupBase=function(){return Ur},r.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||ZS();return t>=1?Math.ceil(t):1},r.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},r.prototype.createDom=function(){var t=document.createElement("canvas"),n=t.getContext("2d");return this.set("context",n),t},r.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var i=this.get("context"),o=this.get("el"),a=this.getPixelRatio();o.width=a*t,o.height=a*n,a>1&&i.scale(a,a)},r.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},r.prototype.getShape=function(t,n){var i;return this.get("quickHit")?i=V0(this,t,n):i=e.prototype.getShape.call(this,t,n,null),i},r.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),n=this.getViewRange(),i;if(t.length&&t[0]===this)i=n;else if(i=fx(t),i){i.minX=Math.floor(i.minX),i.minY=Math.floor(i.minY),i.maxX=Math.ceil(i.maxX),i.maxY=Math.ceil(i.maxY),i.maxY+=1;var o=this.get("clipView");o&&(i=cx(i,n))}return i},r.prototype.refreshElement=function(t){var n=this.get("refreshElements");n.push(t)},r.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(iw(t),this.set("drawFrame",null),this.set("refreshElements",[]))},r.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},r.prototype._drawAll=function(){var t=this.get("context"),n=this.get("el"),i=this.getChildren();t.clearRect(0,0,n.width,n.height),Ai(t,this),tu(t,i),this.set("refreshElements",[])},r.prototype._drawRegion=function(){var t=this.get("context"),n=this.get("refreshElements"),i=this.getChildren(),o=this._getRefreshRegion();o?(t.clearRect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.save(),t.beginPath(),t.rect(o.minX,o.minY,o.maxX-o.minX,o.maxY-o.minY),t.clip(),Ai(t,this),lx(this,i,o),tu(t,i,o),t.restore()):n.length&&z0(n),Ce(n,function(a){a.get("hasChanged")&&a.set("hasChanged",!1)}),this.set("refreshElements",[])},r.prototype._startDraw=function(){var t=this,n=this.get("drawFrame");n||(n=nw(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",n))},r.prototype.skipDraw=function(){},r.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},r}(gS),yd;(function(e){e.DATA_CELL_CLICK_EVENT="interaction:data-cell-click",e.MERGED_CELLS_CLICK_EVENT="interaction:merged-cells-click",e.CORNER_TEXT_CLICK_EVENT="interaction:corner-cell-text-click",e.ROW_COLUMN_CLICK_EVENT="interaction:row-column-click",e.ROW_TEXT_CLICK_EVENT="interaction:row-text-click",e.HOVER_EVENT="interaction:hover",e.TREND_ICON_CLICK="interaction:trend-icon-click"})(yd||(yd={}));var St;(function(e){e.MOUSE_DOWN="mousedown",e.MOUSE_MOVE="mousemove",e.MOUSE_OUT="mouseout",e.MOUSE_LEAVE="mouseleave",e.MOUSE_UP="mouseup",e.KEY_DOWN="keydown",e.KEY_UP="keyup",e.CLICK="click",e.HOVER="hover",e.DOUBLE_CLICK="dblclick",e.CONTEXT_MENU="contextmenu"})(St||(St={}));var T;(function(e){e.ROW_CELL_HOVER="row-cell:hover",e.ROW_CELL_CLICK="row-cell:click",e.ROW_CELL_DOUBLE_CLICK="row-cell:double-click",e.ROW_CELL_CONTEXT_MENU="row-cell:context-menu",e.ROW_CELL_MOUSE_DOWN="row-cell:mouse-down",e.ROW_CELL_MOUSE_UP="row-cell:mouse-up",e.ROW_CELL_MOUSE_MOVE="row-cell:mouse-move",e.ROW_CELL_COLLAPSE_TREE_ROWS="row-cell:collapsed-tree-rows",e.ROW_CELL_SCROLL="row-cell:scroll",e.ROW_CELL_BRUSH_SELECTION="row-cell:brush-selection",e.COL_CELL_HOVER="col-cell:hover",e.COL_CELL_CLICK="col-cell:click",e.COL_CELL_DOUBLE_CLICK="col-cell:double-click",e.COL_CELL_CONTEXT_MENU="col-cell:context-menu",e.COL_CELL_MOUSE_DOWN="col-cell:mouse-down",e.COL_CELL_MOUSE_UP="col-cell:mouse-up",e.COL_CELL_MOUSE_MOVE="col-cell:mouse-move",e.COL_CELL_BRUSH_SELECTION="col-cell:brush-selection",e.DATA_CELL_HOVER="data-cell:hover",e.DATA_CELL_CLICK="data-cell:click",e.DATA_CELL_DOUBLE_CLICK="data-cell:double-click",e.DATA_CELL_CONTEXT_MENU="data-cell:context-menu",e.DATA_CELL_MOUSE_UP="data-cell:mouse-up",e.DATA_CELL_MOUSE_DOWN="data-cell:mouse-down",e.DATA_CELL_MOUSE_MOVE="data-cell:mouse-move",e.DATA_CELL_TREND_ICON_CLICK="data-cell:trend-icon-click",e.DATA_CELL_BRUSH_SELECTION="data-cell:brush-selection",e.DATA_CELL_SELECT_MOVE="data-cell:select-move",e.CORNER_CELL_HOVER="corner-cell:hover",e.CORNER_CELL_CLICK="corner-cell:click",e.CORNER_CELL_DOUBLE_CLICK="corner-cell:double-click",e.CORNER_CELL_CONTEXT_MENU="corner-cell:context-menu",e.CORNER_CELL_MOUSE_DOWN="corner-cell:mouse-down",e.CORNER_CELL_MOUSE_UP="corner-cell:mouse-up",e.CORNER_CELL_MOUSE_MOVE="corner-cell:mouse-move",e.MERGED_CELLS_HOVER="merged-cells:hover",e.MERGED_CELLS_CLICK="merged-cells:click",e.MERGED_CELLS_DOUBLE_CLICK="merged-cells:double-click",e.MERGED_CELLS_CONTEXT_MENU="merged-cell:context-menu",e.MERGED_CELLS_MOUSE_DOWN="merged-cells:mouse-down",e.MERGED_CELLS_MOUSE_UP="merged-cells:mouse-up",e.MERGED_CELLS_MOUSE_MOVE="merged-cells:mouse-move",e.RANGE_SORT="sort:range-sort",e.RANGE_SORTED="sort:range-sorted",e.RANGE_FILTER="filter:range-filter",e.RANGE_FILTERED="filter:range-filtered",e.LAYOUT_AFTER_HEADER_LAYOUT="layout:after-header-layout",e.LAYOUT_CELL_SCROLL="layout:cell-scroll",e.LAYOUT_PAGINATION="layout:pagination",e.LAYOUT_COLLAPSE_ROWS="layout:collapsed-rows",e.LAYOUT_AFTER_COLLAPSE_ROWS="layout:after-collapsed-rows",e.LAYOUT_AFTER_REAL_DATA_CELL_RENDER="layout:after-real-data-cell-render",e.LAYOUT_TREE_ROWS_COLLAPSE_ALL="layout:toggle-collapse-all",e.LAYOUT_COLS_EXPANDED="layout:table-col-expanded",e.LAYOUT_COLS_HIDDEN="layout:table-col-hidden",e.LAYOUT_AFTER_RENDER="layout:after-render",e.LAYOUT_BEFORE_RENDER="layout:before-render",e.LAYOUT_DESTROY="layout:destroy",e.LAYOUT_RESIZE="layout:resize",e.LAYOUT_RESIZE_SERIES_WIDTH="layout:resize-series-width",e.LAYOUT_RESIZE_ROW_WIDTH="layout:resize-row-width",e.LAYOUT_RESIZE_ROW_HEIGHT="layout:resize-row-height",e.LAYOUT_RESIZE_COL_WIDTH="layout:resize-column-width",e.LAYOUT_RESIZE_COL_HEIGHT="layout:resize-column-height",e.LAYOUT_RESIZE_TREE_WIDTH="layout:resize-tree-width",e.LAYOUT_RESIZE_MOUSE_DOWN="layout:resize:mouse-down",e.LAYOUT_RESIZE_MOUSE_MOVE="layout:resize:mouse-move",e.LAYOUT_RESIZE_MOUSE_UP="layout:resize-mouse-up",e.GLOBAL_KEYBOARD_DOWN="global:keyboard-down",e.GLOBAL_KEYBOARD_UP="global:keyboard-up",e.GLOBAL_COPIED="global:copied",e.GLOBAL_MOUSE_UP="global:mouse-up",e.GLOBAL_MOUSE_MOVE="global:mouse-move",e.GLOBAL_ACTION_ICON_CLICK="global:action-icon-click",e.GLOBAL_ACTION_ICON_HOVER="global:action-icon-hover",e.GLOBAL_ACTION_ICON_HOVER_OFF="global:action-icon-hover-off",e.GLOBAL_CONTEXT_MENU="global:context-menu",e.GLOBAL_CLICK="global:click",e.GLOBAL_DOUBLE_CLICK="global:double-click",e.GLOBAL_SELECTED="global:selected",e.GLOBAL_HOVER="global:hover",e.GLOBAL_RESET="global:reset",e.GLOBAL_LINK_FIELD_JUMP="global:link-field-jump",e.GLOBAL_SCROLL="global:scroll"})(T||(T={}));var rr="$$value$$",fe="$$extra$$",kx="$$extra_column$$",Cf="$$total$$",Qn="$$series_number$$",Wx=0,Gx=3,Ux=3,nu=4,Yx=5,Xx=5,Vx=1,jx=1,qx=2,Kx="backGroundGroup",Zx="foreGroundGroup",Qx="panelGroup",Jx="panelScrollGroup",md="mergedCellsGroup",e2="frozenRowGroup",j0="frozenColGroup",t2="frozenTrailingRowGroup",r2="frozenTrailingColGroup",n2="frozenTopGroup",i2="frozenBottomGroup",Ri="rowResizeAreaGroup",q0="rowFrozenResizeAreaGroup",wd="frozenSplitLine",_d="rowIndexResizeAreaGroup",iu="cornerResizeAreaGroup",K0="colResizeAreaGroup",Z0="colFrozenResizeAreaGroup",o2="colScrollGroup",a2="colFrozenGroup",l2="colFrozenTrailingGroup",Sd="gridGroup",s2="series-number-node",Q0="horizontal-resize-area-",gl="root",tt="[&]",Oi="-",xd=28,Td=16,J0=16,u2=.5,vs=50,Ii;(function(e){e.Line="line",e.Bar="bar",e.Bullet="bullet"})(Ii||(Ii={}));var Ed="square",yo="...",yf="antv-s2",Va="valueRanges",mf={},eg="#000000",ou="#FFFFFF",f2={data:[],totalData:[],fields:{rows:[],columns:[],values:[],customTreeItems:[],valueInCols:!0},meta:[],sortParams:[],filterParams:[]},Qr,Ke;(function(e){e.ROW="row",e.COL="col",e.TRAILING_ROW="trailingRow",e.TRAILING_COL="trailingCol",e.SCROLL="scroll",e.TOP="top",e.BOTTOM="bottom"})(Ke||(Ke={}));var vr;(function(e){e.FROZEN_COL="frozenCol",e.FROZEN_ROW="frozenRow",e.FROZEN_TRAILING_COL="frozenTrailingCol",e.FROZEN_TRAILING_ROW="frozenTrailingRow"})(vr||(vr={}));var bd=(Qr={},Qr[Ke.ROW]="frozenRowGroup",Qr[Ke.COL]="frozenColGroup",Qr[Ke.TRAILING_COL]="frozenTrailingColGroup",Qr[Ke.TRAILING_ROW]="frozenTrailingRowGroup",Qr[Ke.SCROLL]="panelScrollGroup",Qr[Ke.TOP]="frozenTopGroup",Qr[Ke.BOTTOM]="frozenBottomGroup",Qr),_t;(function(e){e.CORNER_CELL_CLICK="cornerCellClick",e.DATA_CELL_CLICK="dataCellClick",e.MERGED_CELLS_CLICK="mergedCellsClick",e.ROW_COLUMN_CLICK="rowColumnClick",e.ROW_TEXT_CLICK="rowTextClick",e.HOVER="hover",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.COL_ROW_RESIZE="rowColResize",e.DATA_CELL_MULTI_SELECTION="dataCellMultiSelection",e.RANGE_SELECTION="rangeSelection",e.SELECTED_CELL_MOVE="selectedCellMove"})(_t||(_t={}));var q;(function(e){e.ALL_SELECTED="allSelected",e.SELECTED="selected",e.UNSELECTED="unselected",e.HOVER="hover",e.HOVER_FOCUS="hoverFocus",e.HIGHLIGHT="highlight",e.SEARCH_RESULT="searchResult",e.PREPARE_SELECT="prepareSelect"})(q||(q={}));var N;(function(e){e.DATA_CELL="dataCell",e.HEADER_CELL="headerCell",e.ROW_CELL="rowCell",e.COL_CELL="colCell",e.CORNER_CELL="cornerCell",e.MERGED_CELL="mergedCell"})(N||(N={}));var au=800,Gt={textOpacity:"fillOpacity",backgroundOpacity:"fillOpacity",backgroundColor:"fill",borderOpacity:"strokeOpacity",borderColor:"stroke",borderWidth:"lineWidth",opacity:"opacity"},c2={textShape:["textOpacity"],textShapes:["textOpacity"],linkFieldShape:["opacity"],interactiveBgShape:["backgroundColor","backgroundOpacity"],interactiveBorderShape:["borderColor","borderOpacity","borderWidth"]},lu="interactionStateInfo",vt;(function(e){e.CLICK="click",e.UN_DRAGGED="unDragged",e.DRAGGED="dragged"})(vt||(vt={}));var pt;(function(e){e.SHIFT="Shift",e.COPY="c",e.ESC="Escape",e.META="Meta",e.CONTROL="Control",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_LEFT="ArrowLeft",e.ARROW_RIGHT="ArrowRight"})(pt||(pt={}));var Ld;(function(e){e.ASC="ASC",e.DESC="DESC"})(Ld||(Ld={}));var le;(function(e){e.HOVER="hover",e.CLICK="click",e.BRUSH_SELECTION="brushSelection",e.ROW_BRUSH_SELECTION="rowBrushSelection",e.COL_BRUSH_SELECTION="colBrushSelection",e.MULTI_SELECTION="multiSelection",e.RESIZE="resize"})(le||(le={}));var Ad={x:{value:0,scroll:!1},y:{value:0,scroll:!1}},ja;(function(e){e.CONTENT="content",e.CANVAS="canvas"})(ja||(ja={}));var Mt;(function(e){e.SCROLL_UP="scrollUp",e.SCROLL_DOWN="scrollDown"})(Mt||(Mt={}));var qa;(function(e){e[e.SCROLL_UP=-1]="SCROLL_UP",e[e.SCROLL_DOWN=1]="SCROLL_DOWN"})(qa||(qa={}));var h2="RESIZE_START_GUIDE_LINE",d2="RESIZE_END_GUIDE_LINE",v2="RESIZE_MASK",nr;(function(e){e.Horizontal="col",e.Vertical="row"})(nr||(nr={}));var xt;(function(e){e.Field="field",e.Cell="cell",e.Tree="tree",e.Series="series"})(xt||(xt={}));var Ka;(function(e){e.ALL="all",e.CURRENT="current"})(Ka||(Ka={}));var tg=1,Jn;(function(e){e.Adaptive="adaptive",e.ColAdaptive="colAdaptive",e.Compact="compact"})(Jn||(Jn={}));var p2=120,g2={layoutWidthType:Jn.Adaptive,showTreeLeafNodeAlignDot:!1,collapsedRows:{},collapsedCols:{},cellCfg:{width:96,height:30},rowCfg:{width:null,widthByField:{},heightByField:{}},colCfg:{height:30,widthByFieldValue:{},heightByField:{}},device:"pc"},rg={width:600,height:480,debug:!1,hierarchyType:"grid",conditions:{},totals:{},tooltip:{showTooltip:!1,autoAdjustBoundary:"body",operation:{hiddenColumns:!1,trend:!1,sort:!1,menus:[]}},interaction:{linkFields:[],hiddenColumnFields:[],selectedCellsSpotlight:!1,hoverHighlight:!0,hoverFocus:{duration:au},scrollSpeedRatio:{horizontal:1,vertical:1},autoResetSheetStyle:!0,brushSelection:{data:!0,row:!1,col:!1},multiSelection:!0,rangeSelection:!0,scrollbarPosition:ja.CONTENT,resize:{rowCellVertical:!0,cornerCellHorizontal:!0,colCellHorizontal:!0,colCellVertical:!0,rowResizeType:Ka.ALL},eventListenerOptions:!1,selectedCellHighlight:!1,overscrollBehavior:"auto"},showSeriesNumber:!1,customSVGIcons:[],showDefaultHeaderActionIcon:!1,headerActionIcons:[],style:g2,frozenRowHeader:!0,frozenRowCount:0,frozenColCount:0,frozenTrailingRowCount:0,frozenTrailingColCount:0,hdAdapter:!0,cornerText:"",cornerExtraFieldText:"",placeholder:Oi,supportCSSTransform:!1,devicePixelRatio:window.devicePixelRatio},su=function(e,r){return su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},su(e,r)};function Q(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");su(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var L=function(){return L=Object.assign||function(r){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},L.apply(this,arguments)};function wf(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(t[n[i]]=e[n[i]]);return t}function tr(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function I(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return o}function $(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var C2=typeof global=="object"&&global&&global.Object===Object&&global,ng=C2,y2=typeof self=="object"&&self&&self.Object===Object&&self,m2=ng||y2||Function("return this")(),lt=m2,w2=lt.Symbol,Ct=w2,ig=Object.prototype,_2=ig.hasOwnProperty,S2=ig.toString,oo=Ct?Ct.toStringTag:void 0;function x2(e){var r=_2.call(e,oo),t=e[oo];try{e[oo]=void 0;var n=!0}catch{}var i=S2.call(e);return n&&(r?e[oo]=t:delete e[oo]),i}var T2=Object.prototype,E2=T2.toString;function b2(e){return E2.call(e)}var L2="[object Null]",A2="[object Undefined]",Rd=Ct?Ct.toStringTag:void 0;function Rt(e){return e==null?e===void 0?A2:L2:Rd&&Rd in Object(e)?x2(e):b2(e)}function Ye(e){return e!=null&&typeof e=="object"}var R2="[object Symbol]";function Vt(e){return typeof e=="symbol"||Ye(e)&&Rt(e)==R2}var O2=0/0;function Od(e){return typeof e=="number"?e:Vt(e)?O2:+e}function ze(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}var I2=Array.isArray,re=I2,M2=1/0,Id=Ct?Ct.prototype:void 0,Md=Id?Id.toString:void 0;function jt(e){if(typeof e=="string")return e;if(re(e))return ze(e,jt)+"";if(Vt(e))return Md?Md.call(e):"";var r=e+"";return r=="0"&&1/e==-M2?"-0":r}function Cl(e,r){return function(t,n){var i;if(t===void 0&&n===void 0)return r;if(t!==void 0&&(i=t),n!==void 0){if(i===void 0)return n;typeof t=="string"||typeof n=="string"?(t=jt(t),n=jt(n)):(t=Od(t),n=Od(n)),i=e(t,n)}return i}}var B2=Cl(function(e,r){return e+r},0),D2=B2,$2=/\s/;function og(e){for(var r=e.length;r--&&$2.test(e.charAt(r)););return r}var P2=/^\s+/;function ag(e){return e&&e.slice(0,og(e)+1).replace(P2,"")}function Ae(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Bd=0/0,N2=/^[-+]0x[0-9a-f]+$/i,F2=/^0b[01]+$/i,H2=/^0o[0-7]+$/i,z2=parseInt;function Xt(e){if(typeof e=="number")return e;if(Vt(e))return Bd;if(Ae(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ae(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ag(e);var t=F2.test(e);return t||H2.test(e)?z2(e.slice(2),t?2:8):N2.test(e)?Bd:+e}var Dd=1/0,k2=17976931348623157e292;function nn(e){if(!e)return e===0?e:0;if(e=Xt(e),e===Dd||e===-Dd){var r=e<0?-1:1;return r*k2}return e===e?e:0}function ue(e){var r=nn(e),t=r%1;return r===r?t?r-t:r:0}var W2="Expected a function";function G2(e,r){if(typeof r!="function")throw new TypeError(W2);return e=ue(e),function(){if(--e<1)return r.apply(this,arguments)}}function wt(e){return e}var U2="[object AsyncFunction]",Y2="[object Function]",X2="[object GeneratorFunction]",V2="[object Proxy]";function ft(e){if(!Ae(e))return!1;var r=Rt(e);return r==Y2||r==X2||r==U2||r==V2}var j2=lt["__core-js_shared__"],Oa=j2,$d=function(){var e=/[^.]+$/.exec(Oa&&Oa.keys&&Oa.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function q2(e){return!!$d&&$d in e}var K2=Function.prototype,Z2=K2.toString;function ai(e){if(e!=null){try{return Z2.call(e)}catch{}try{return e+""}catch{}}return""}var Q2=/[\\^$.*+?()[\]{}|]/g,J2=/^\[object .+?Constructor\]$/,eT=Function.prototype,tT=Object.prototype,rT=eT.toString,nT=tT.hasOwnProperty,iT=RegExp("^"+rT.call(nT).replace(Q2,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lg(e){if(!Ae(e)||q2(e))return!1;var r=ft(e)?iT:J2;return r.test(ai(e))}function oT(e,r){return e==null?void 0:e[r]}function li(e,r){var t=oT(e,r);return lg(t)?t:void 0}var aT=li(lt,"WeakMap"),Io=aT,lT=Io&&new Io,Za=lT,sT=Za?function(e,r){return Za.set(e,r),e}:wt,sg=sT,Pd=Object.create,uT=function(){function e(){}return function(r){if(!Ae(r))return{};if(Pd)return Pd(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),Gi=uT;function Mo(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var t=Gi(e.prototype),n=e.apply(t,r);return Ae(n)?n:t}}var fT=1;function cT(e,r,t){var n=r&fT,i=Mo(e);function o(){var a=this&&this!==lt&&this instanceof o?i:e;return a.apply(n?t:this,arguments)}return o}function qt(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var hT=Math.max;function ug(e,r,t,n){for(var i=-1,o=e.length,a=t.length,l=-1,s=r.length,u=hT(o-a,0),f=Array(s+u),c=!n;++l<s;)f[l]=r[l];for(;++i<a;)(c||i<o)&&(f[t[i]]=e[i]);for(;u--;)f[l++]=e[i++];return f}var dT=Math.max;function fg(e,r,t,n){for(var i=-1,o=e.length,a=-1,l=t.length,s=-1,u=r.length,f=dT(o-l,0),c=Array(f+u),h=!n;++i<f;)c[i]=e[i];for(var d=i;++s<u;)c[d+s]=r[s];for(;++a<l;)(h||i<o)&&(c[d+t[a]]=e[i++]);return c}function vT(e,r){for(var t=e.length,n=0;t--;)e[t]===r&&++n;return n}function yl(){}var pT=4294967295;function ve(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pT,this.__views__=[]}ve.prototype=Gi(yl.prototype);ve.prototype.constructor=ve;function ml(){}var gT=Za?function(e){return Za.get(e)}:ml,_f=gT,CT={},Si=CT,yT=Object.prototype,mT=yT.hasOwnProperty;function Ia(e){for(var r=e.name+"",t=Si[r],n=mT.call(Si,r)?t.length:0;n--;){var i=t[n],o=i.func;if(o==null||o==e)return i.name}return r}function ar(e,r){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}ar.prototype=Gi(yl.prototype);ar.prototype.constructor=ar;function $t(e,r){var t=-1,n=e.length;for(r||(r=Array(n));++t<n;)r[t]=e[t];return r}function cg(e){if(e instanceof ve)return e.clone();var r=new ar(e.__wrapped__,e.__chain__);return r.__actions__=$t(e.__actions__),r.__index__=e.__index__,r.__values__=e.__values__,r}var wT=Object.prototype,_T=wT.hasOwnProperty;function _(e){if(Ye(e)&&!re(e)&&!(e instanceof ve)){if(e instanceof ar)return e;if(_T.call(e,"__wrapped__"))return cg(e)}return new ar(e)}_.prototype=yl.prototype;_.prototype.constructor=_;function uu(e){var r=Ia(e),t=_[r];if(typeof t!="function"||!(r in ve.prototype))return!1;if(e===t)return!0;var n=_f(t);return!!n&&e===n[0]}var ST=800,xT=16,TT=Date.now;function hg(e){var r=0,t=0;return function(){var n=TT(),i=xT-(n-t);if(t=n,i>0){if(++r>=ST)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var ET=hg(sg),dg=ET,bT=/\{\n\/\* \[wrapped with (.+)\] \*/,LT=/,? & /;function AT(e){var r=e.match(bT);return r?r[1].split(LT):[]}var RT=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function OT(e,r){var t=r.length;if(!t)return e;var n=t-1;return r[n]=(t>1?"& ":"")+r[n],r=r.join(t>2?", ":" "),e.replace(RT,`{
/* [wrapped with `+r+`] */
`)}function xi(e){return function(){return e}}var IT=function(){try{var e=li(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Qa=IT,MT=Qa?function(e,r){return Qa(e,"toString",{configurable:!0,enumerable:!1,value:xi(r),writable:!0})}:wt,BT=MT,DT=hg(BT),Sf=DT;function ur(e,r){for(var t=-1,n=e==null?0:e.length;++t<n&&r(e[t],t,e)!==!1;);return e}function wl(e,r,t,n){for(var i=e.length,o=t+(n?1:-1);n?o--:++o<i;)if(r(e[o],o,e))return o;return-1}function vg(e){return e!==e}function $T(e,r,t){for(var n=t-1,i=e.length;++n<i;)if(e[n]===r)return n;return-1}function Ui(e,r,t){return r===r?$T(e,r,t):wl(e,vg,t)}function _l(e,r){var t=e==null?0:e.length;return!!t&&Ui(e,r,0)>-1}var PT=1,NT=2,FT=8,HT=16,zT=32,kT=64,WT=128,GT=256,UT=512,YT=[["ary",WT],["bind",PT],["bindKey",NT],["curry",FT],["curryRight",HT],["flip",UT],["partial",zT],["partialRight",kT],["rearg",GT]];function XT(e,r){return ur(YT,function(t){var n="_."+t[0];r&t[1]&&!_l(e,n)&&e.push(n)}),e.sort()}function pg(e,r,t){var n=r+"";return Sf(e,OT(n,XT(AT(n),t)))}var VT=1,jT=2,qT=4,KT=8,Nd=32,Fd=64;function gg(e,r,t,n,i,o,a,l,s,u){var f=r&KT,c=f?a:void 0,h=f?void 0:a,d=f?o:void 0,v=f?void 0:o;r|=f?Nd:Fd,r&=~(f?Fd:Nd),r&qT||(r&=~(VT|jT));var p=[e,r,i,d,c,v,h,l,s,u],g=t.apply(void 0,p);return uu(e)&&dg(g,p),g.placeholder=n,pg(g,e,r)}function Yi(e){var r=e;return r.placeholder}var ZT=9007199254740991,QT=/^(?:0|[1-9]\d*)$/;function un(e,r){var t=typeof e;return r=r??ZT,!!r&&(t=="number"||t!="symbol"&&QT.test(e))&&e>-1&&e%1==0&&e<r}var JT=Math.min;function eE(e,r){for(var t=e.length,n=JT(r.length,t),i=$t(e);n--;){var o=r[n];e[n]=un(o,t)?i[o]:void 0}return e}var Hd="__lodash_placeholder__";function Rn(e,r){for(var t=-1,n=e.length,i=0,o=[];++t<n;){var a=e[t];(a===r||a===Hd)&&(e[t]=Hd,o[i++]=t)}return o}var tE=1,rE=2,nE=8,iE=16,oE=128,aE=512;function Sl(e,r,t,n,i,o,a,l,s,u){var f=r&oE,c=r&tE,h=r&rE,d=r&(nE|iE),v=r&aE,p=h?void 0:Mo(e);function g(){for(var C=arguments.length,y=Array(C),m=C;m--;)y[m]=arguments[m];if(d)var w=Yi(g),S=vT(y,w);if(n&&(y=ug(y,n,i,d)),o&&(y=fg(y,o,a,d)),C-=S,d&&C<u){var b=Rn(y,w);return gg(e,r,Sl,g.placeholder,t,y,b,l,s,u-C)}var A=c?t:this,O=h?A[e]:e;return C=y.length,l?y=eE(y,l):v&&C>1&&y.reverse(),f&&s<C&&(y.length=s),this&&this!==lt&&this instanceof g&&(O=p||Mo(O)),O.apply(A,y)}return g}function lE(e,r,t){var n=Mo(e);function i(){for(var o=arguments.length,a=Array(o),l=o,s=Yi(i);l--;)a[l]=arguments[l];var u=o<3&&a[0]!==s&&a[o-1]!==s?[]:Rn(a,s);if(o-=u.length,o<t)return gg(e,r,Sl,i.placeholder,void 0,a,u,void 0,void 0,t-o);var f=this&&this!==lt&&this instanceof i?n:e;return qt(f,this,a)}return i}var sE=1;function uE(e,r,t,n){var i=r&sE,o=Mo(e);function a(){for(var l=-1,s=arguments.length,u=-1,f=n.length,c=Array(f+s),h=this&&this!==lt&&this instanceof a?o:e;++u<f;)c[u]=n[u];for(;s--;)c[u++]=arguments[++l];return qt(h,i?t:this,c)}return a}var zd="__lodash_placeholder__",ps=1,fE=2,cE=4,kd=8,ao=128,Wd=256,hE=Math.min;function dE(e,r){var t=e[1],n=r[1],i=t|n,o=i<(ps|fE|ao),a=n==ao&&t==kd||n==ao&&t==Wd&&e[7].length<=r[8]||n==(ao|Wd)&&r[7].length<=r[8]&&t==kd;if(!(o||a))return e;n&ps&&(e[2]=r[2],i|=t&ps?0:cE);var l=r[3];if(l){var s=e[3];e[3]=s?ug(s,l,r[4]):l,e[4]=s?Rn(e[3],zd):r[4]}return l=r[5],l&&(s=e[5],e[5]=s?fg(s,l,r[6]):l,e[6]=s?Rn(e[5],zd):r[6]),l=r[7],l&&(e[7]=l),n&ao&&(e[8]=e[8]==null?r[8]:hE(e[8],r[8])),e[9]==null&&(e[9]=r[9]),e[0]=r[0],e[1]=i,e}var vE="Expected a function",Gd=1,pE=2,gs=8,Cs=16,ys=32,Ud=64,Yd=Math.max;function fn(e,r,t,n,i,o,a,l){var s=r&pE;if(!s&&typeof e!="function")throw new TypeError(vE);var u=n?n.length:0;if(u||(r&=~(ys|Ud),n=i=void 0),a=a===void 0?a:Yd(ue(a),0),l=l===void 0?l:ue(l),u-=i?i.length:0,r&Ud){var f=n,c=i;n=i=void 0}var h=s?void 0:_f(e),d=[e,r,t,n,i,f,c,o,a,l];if(h&&dE(d,h),e=d[0],r=d[1],t=d[2],n=d[3],i=d[4],l=d[9]=d[9]===void 0?s?0:e.length:Yd(d[9]-u,0),!l&&r&(gs|Cs)&&(r&=~(gs|Cs)),!r||r==Gd)var v=cT(e,r,t);else r==gs||r==Cs?v=lE(e,r,l):(r==ys||r==(Gd|ys))&&!i.length?v=uE(e,r,t,n):v=Sl.apply(void 0,d);var p=h?sg:dg;return pg(p(v,d),e,r)}var gE=128;function Cg(e,r,t){return r=t?void 0:r,r=e&&r==null?e.length:r,fn(e,gE,void 0,void 0,void 0,void 0,r)}function cn(e,r,t){r=="__proto__"&&Qa?Qa(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function Tr(e,r){return e===r||e!==e&&r!==r}var CE=Object.prototype,yE=CE.hasOwnProperty;function qo(e,r,t){var n=e[r];(!(yE.call(e,r)&&Tr(n,t))||t===void 0&&!(r in e))&&cn(e,r,t)}function Yr(e,r,t,n){var i=!t;t||(t={});for(var o=-1,a=r.length;++o<a;){var l=r[o],s=n?n(t[l],e[l],l,t,e):void 0;s===void 0&&(s=e[l]),i?cn(t,l,s):qo(t,l,s)}return t}var Xd=Math.max;function yg(e,r,t){return r=Xd(r===void 0?e.length-1:r,0),function(){for(var n=arguments,i=-1,o=Xd(n.length-r,0),a=Array(o);++i<o;)a[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=t(a),qt(e,this,l)}}function ce(e,r){return Sf(yg(e,r,wt),e+"")}var mE=9007199254740991;function xl(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mE}function zt(e){return e!=null&&xl(e.length)&&!ft(e)}function At(e,r,t){if(!Ae(t))return!1;var n=typeof r;return(n=="number"?zt(t)&&un(r,t.length):n=="string"&&r in t)?Tr(t[r],e):!1}function Xi(e){return ce(function(r,t){var n=-1,i=t.length,o=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,a&&At(t[0],t[1],a)&&(o=i<3?void 0:o,i=1),r=Object(r);++n<i;){var l=t[n];l&&e(r,l,n,o)}return r})}var wE=Object.prototype;function Ko(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||wE;return e===t}function xf(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var _E="[object Arguments]";function Vd(e){return Ye(e)&&Rt(e)==_E}var mg=Object.prototype,SE=mg.hasOwnProperty,xE=mg.propertyIsEnumerable,TE=Vd(function(){return arguments}())?Vd:function(e){return Ye(e)&&SE.call(e,"callee")&&!xE.call(e,"callee")},ei=TE;function Tf(){return!1}var wg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jd=wg&&typeof module=="object"&&module&&!module.nodeType&&module,EE=jd&&jd.exports===wg,qd=EE?lt.Buffer:void 0,bE=qd?qd.isBuffer:void 0,LE=bE||Tf,On=LE,AE="[object Arguments]",RE="[object Array]",OE="[object Boolean]",IE="[object Date]",ME="[object Error]",BE="[object Function]",DE="[object Map]",$E="[object Number]",PE="[object Object]",NE="[object RegExp]",FE="[object Set]",HE="[object String]",zE="[object WeakMap]",kE="[object ArrayBuffer]",WE="[object DataView]",GE="[object Float32Array]",UE="[object Float64Array]",YE="[object Int8Array]",XE="[object Int16Array]",VE="[object Int32Array]",jE="[object Uint8Array]",qE="[object Uint8ClampedArray]",KE="[object Uint16Array]",ZE="[object Uint32Array]",Pe={};Pe[GE]=Pe[UE]=Pe[YE]=Pe[XE]=Pe[VE]=Pe[jE]=Pe[qE]=Pe[KE]=Pe[ZE]=!0;Pe[AE]=Pe[RE]=Pe[kE]=Pe[OE]=Pe[WE]=Pe[IE]=Pe[ME]=Pe[BE]=Pe[DE]=Pe[$E]=Pe[PE]=Pe[NE]=Pe[FE]=Pe[HE]=Pe[zE]=!1;function QE(e){return Ye(e)&&xl(e.length)&&!!Pe[Rt(e)]}function Kt(e){return function(r){return e(r)}}var _g=typeof exports=="object"&&exports&&!exports.nodeType&&exports,mo=_g&&typeof module=="object"&&module&&!module.nodeType&&module,JE=mo&&mo.exports===_g,ms=JE&&ng.process,eb=function(){try{var e=mo&&mo.require&&mo.require("util").types;return e||ms&&ms.binding&&ms.binding("util")}catch{}}(),lr=eb,Kd=lr&&lr.isTypedArray,tb=Kd?Kt(Kd):QE,Vi=tb,rb=Object.prototype,nb=rb.hasOwnProperty;function Sg(e,r){var t=re(e),n=!t&&ei(e),i=!t&&!n&&On(e),o=!t&&!n&&!i&&Vi(e),a=t||n||i||o,l=a?xf(e.length,String):[],s=l.length;for(var u in e)(r||nb.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||un(u,s)))&&l.push(u);return l}function xg(e,r){return function(t){return e(r(t))}}var ib=xg(Object.keys,Object),ob=ib,ab=Object.prototype,lb=ab.hasOwnProperty;function Ef(e){if(!Ko(e))return ob(e);var r=[];for(var t in Object(e))lb.call(e,t)&&t!="constructor"&&r.push(t);return r}function me(e){return zt(e)?Sg(e):Ef(e)}var sb=Object.prototype,ub=sb.hasOwnProperty,fb=Xi(function(e,r){if(Ko(r)||zt(r)){Yr(r,me(r),e);return}for(var t in r)ub.call(r,t)&&qo(e,t,r[t])}),Tg=fb;function cb(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var hb=Object.prototype,db=hb.hasOwnProperty;function vb(e){if(!Ae(e))return cb(e);var r=Ko(e),t=[];for(var n in e)n=="constructor"&&(r||!db.call(e,n))||t.push(n);return t}function kt(e){return zt(e)?Sg(e,!0):vb(e)}var pb=Xi(function(e,r){Yr(r,kt(r),e)}),Zd=pb,gb=Xi(function(e,r,t,n){Yr(r,kt(r),e,n)}),Ja=gb,Cb=Xi(function(e,r,t,n){Yr(r,me(r),e,n)}),yb=Cb,mb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wb=/^\w*$/;function bf(e,r){if(re(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Vt(e)?!0:wb.test(e)||!mb.test(e)||r!=null&&e in Object(r)}var _b=li(Object,"create"),Bo=_b;function Sb(){this.__data__=Bo?Bo(null):{},this.size=0}function xb(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var Tb="__lodash_hash_undefined__",Eb=Object.prototype,bb=Eb.hasOwnProperty;function Lb(e){var r=this.__data__;if(Bo){var t=r[e];return t===Tb?void 0:t}return bb.call(r,e)?r[e]:void 0}var Ab=Object.prototype,Rb=Ab.hasOwnProperty;function Ob(e){var r=this.__data__;return Bo?r[e]!==void 0:Rb.call(r,e)}var Ib="__lodash_hash_undefined__";function Mb(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Bo&&r===void 0?Ib:r,this}function ti(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}ti.prototype.clear=Sb;ti.prototype.delete=xb;ti.prototype.get=Lb;ti.prototype.has=Ob;ti.prototype.set=Mb;function Bb(){this.__data__=[],this.size=0}function Tl(e,r){for(var t=e.length;t--;)if(Tr(e[t][0],r))return t;return-1}var Db=Array.prototype,$b=Db.splice;function Pb(e){var r=this.__data__,t=Tl(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():$b.call(r,t,1),--this.size,!0}function Nb(e){var r=this.__data__,t=Tl(r,e);return t<0?void 0:r[t][1]}function Fb(e){return Tl(this.__data__,e)>-1}function Hb(e,r){var t=this.__data__,n=Tl(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}function hn(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}hn.prototype.clear=Bb;hn.prototype.delete=Pb;hn.prototype.get=Nb;hn.prototype.has=Fb;hn.prototype.set=Hb;var zb=li(lt,"Map"),Do=zb;function kb(){this.size=0,this.__data__={hash:new ti,map:new(Do||hn),string:new ti}}function Wb(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function El(e,r){var t=e.__data__;return Wb(r)?t[typeof r=="string"?"string":"hash"]:t.map}function Gb(e){var r=El(this,e).delete(e);return this.size-=r?1:0,r}function Ub(e){return El(this,e).get(e)}function Yb(e){return El(this,e).has(e)}function Xb(e,r){var t=El(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}function dn(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}dn.prototype.clear=kb;dn.prototype.delete=Gb;dn.prototype.get=Ub;dn.prototype.has=Yb;dn.prototype.set=Xb;var Vb="Expected a function";function si(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Vb);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=t.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return t.cache=o.set(i,a)||o,a};return t.cache=new(si.Cache||dn),t}si.Cache=dn;var jb=500;function qb(e){var r=si(e,function(n){return t.size===jb&&t.clear(),n}),t=r.cache;return r}var Kb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zb=/\\(\\)?/g,Qb=qb(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Kb,function(t,n,i,o){r.push(i?o.replace(Zb,"$1"):n||t)}),r}),Eg=Qb;function xe(e){return e==null?"":jt(e)}function Bn(e,r){return re(e)?e:bf(e,r)?[e]:Eg(xe(e))}var Jb=1/0;function Xr(e){if(typeof e=="string"||Vt(e))return e;var r=e+"";return r=="0"&&1/e==-Jb?"-0":r}function ui(e,r){r=Bn(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[Xr(r[t++])];return t&&t==n?e:void 0}function j(e,r,t){var n=e==null?void 0:ui(e,r);return n===void 0?t:n}function Lf(e,r){for(var t=-1,n=r.length,i=Array(n),o=e==null;++t<n;)i[t]=o?void 0:j(e,r[t]);return i}function Dn(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var Qd=Ct?Ct.isConcatSpreadable:void 0;function eL(e){return re(e)||ei(e)||!!(Qd&&e&&e[Qd])}function ht(e,r,t,n,i){var o=-1,a=e.length;for(t||(t=eL),i||(i=[]);++o<a;){var l=e[o];r>0&&t(l)?r>1?ht(l,r-1,t,n,i):Dn(i,l):n||(i[i.length]=l)}return i}function bg(e){var r=e==null?0:e.length;return r?ht(e,1):[]}function vn(e){return Sf(yg(e,void 0,bg),e+"")}var tL=vn(Lf),rL=tL,nL=xg(Object.getPrototypeOf,Object),bl=nL,iL="[object Object]",oL=Function.prototype,aL=Object.prototype,Lg=oL.toString,lL=aL.hasOwnProperty,sL=Lg.call(Object);function Zo(e){if(!Ye(e)||Rt(e)!=iL)return!1;var r=bl(e);if(r===null)return!0;var t=lL.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Lg.call(t)==sL}var uL="[object DOMException]",fL="[object Error]";function Af(e){if(!Ye(e))return!1;var r=Rt(e);return r==fL||r==uL||typeof e.message=="string"&&typeof e.name=="string"&&!Zo(e)}var cL=ce(function(e,r){try{return qt(e,void 0,r)}catch(t){return Af(t)?t:new Error(t)}}),Ag=cL,hL="Expected a function";function Rg(e,r){var t;if(typeof r!="function")throw new TypeError(hL);return e=ue(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}var dL=1,vL=32,Rf=ce(function(e,r,t){var n=dL;if(t.length){var i=Rn(t,Yi(Rf));n|=vL}return fn(e,n,r,t,i)});Rf.placeholder={};var Og=Rf,pL=vn(function(e,r){return ur(r,function(t){t=Xr(t),cn(e,t,Og(e[t],e))}),e}),gL=pL,CL=1,yL=2,mL=32,Of=ce(function(e,r,t){var n=CL|yL;if(t.length){var i=Rn(t,Yi(Of));n|=mL}return fn(r,n,e,t,i)});Of.placeholder={};var wL=Of;function sr(e,r,t){var n=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+r];return o}function $n(e,r,t){var n=e.length;return t=t===void 0?n:t,!r&&t>=n?e:sr(e,r,t)}var _L="\\ud800-\\udfff",SL="\\u0300-\\u036f",xL="\\ufe20-\\ufe2f",TL="\\u20d0-\\u20ff",EL=SL+xL+TL,bL="\\ufe0e\\ufe0f",LL="\\u200d",AL=RegExp("["+LL+_L+EL+bL+"]");function ji(e){return AL.test(e)}function RL(e){return e.split("")}var Ig="\\ud800-\\udfff",OL="\\u0300-\\u036f",IL="\\ufe20-\\ufe2f",ML="\\u20d0-\\u20ff",BL=OL+IL+ML,DL="\\ufe0e\\ufe0f",$L="["+Ig+"]",fu="["+BL+"]",cu="\\ud83c[\\udffb-\\udfff]",PL="(?:"+fu+"|"+cu+")",Mg="[^"+Ig+"]",Bg="(?:\\ud83c[\\udde6-\\uddff]){2}",Dg="[\\ud800-\\udbff][\\udc00-\\udfff]",NL="\\u200d",$g=PL+"?",Pg="["+DL+"]?",FL="(?:"+NL+"(?:"+[Mg,Bg,Dg].join("|")+")"+Pg+$g+")*",HL=Pg+$g+FL,zL="(?:"+[Mg+fu+"?",fu,Bg,Dg,$L].join("|")+")",kL=RegExp(cu+"(?="+cu+")|"+zL+HL,"g");function WL(e){return e.match(kL)||[]}function _r(e){return ji(e)?WL(e):RL(e)}function Ng(e){return function(r){r=xe(r);var t=ji(r)?_r(r):void 0,n=t?t[0]:r.charAt(0),i=t?$n(t,1).join(""):r.slice(1);return n[e]()+i}}var GL=Ng("toUpperCase"),If=GL;function Fg(e){return If(xe(e).toLowerCase())}function Mf(e,r,t,n){var i=-1,o=e==null?0:e.length;for(n&&o&&(t=e[++i]);++i<o;)t=r(t,e[i],i,e);return t}function Bf(e){return function(r){return e==null?void 0:e[r]}}var UL={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},YL=Bf(UL),XL=YL,VL=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jL="\\u0300-\\u036f",qL="\\ufe20-\\ufe2f",KL="\\u20d0-\\u20ff",ZL=jL+qL+KL,QL="["+ZL+"]",JL=RegExp(QL,"g");function Hg(e){return e=xe(e),e&&e.replace(VL,XL).replace(JL,"")}var eA=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function tA(e){return e.match(eA)||[]}var rA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function nA(e){return rA.test(e)}var zg="\\ud800-\\udfff",iA="\\u0300-\\u036f",oA="\\ufe20-\\ufe2f",aA="\\u20d0-\\u20ff",lA=iA+oA+aA,kg="\\u2700-\\u27bf",Wg="a-z\\xdf-\\xf6\\xf8-\\xff",sA="\\xac\\xb1\\xd7\\xf7",uA="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fA="\\u2000-\\u206f",cA=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gg="A-Z\\xc0-\\xd6\\xd8-\\xde",hA="\\ufe0e\\ufe0f",Ug=sA+uA+fA+cA,Yg="['’]",Jd="["+Ug+"]",dA="["+lA+"]",Xg="\\d+",vA="["+kg+"]",Vg="["+Wg+"]",jg="[^"+zg+Ug+Xg+kg+Wg+Gg+"]",pA="\\ud83c[\\udffb-\\udfff]",gA="(?:"+dA+"|"+pA+")",CA="[^"+zg+"]",qg="(?:\\ud83c[\\udde6-\\uddff]){2}",Kg="[\\ud800-\\udbff][\\udc00-\\udfff]",vi="["+Gg+"]",yA="\\u200d",ev="(?:"+Vg+"|"+jg+")",mA="(?:"+vi+"|"+jg+")",tv="(?:"+Yg+"(?:d|ll|m|re|s|t|ve))?",rv="(?:"+Yg+"(?:D|LL|M|RE|S|T|VE))?",Zg=gA+"?",Qg="["+hA+"]?",wA="(?:"+yA+"(?:"+[CA,qg,Kg].join("|")+")"+Qg+Zg+")*",_A="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",SA="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xA=Qg+Zg+wA,TA="(?:"+[vA,qg,Kg].join("|")+")"+xA,EA=RegExp([vi+"?"+Vg+"+"+tv+"(?="+[Jd,vi,"$"].join("|")+")",mA+"+"+rv+"(?="+[Jd,vi+ev,"$"].join("|")+")",vi+"?"+ev+"+"+tv,vi+"+"+rv,SA,_A,Xg,TA].join("|"),"g");function bA(e){return e.match(EA)||[]}function Jg(e,r,t){return e=xe(e),r=t?void 0:r,r===void 0?nA(e)?bA(e):tA(e):e.match(r)||[]}var LA="['’]",AA=RegExp(LA,"g");function qi(e){return function(r){return Mf(Jg(Hg(r).replace(AA,"")),e,"")}}var RA=qi(function(e,r,t){return r=r.toLowerCase(),e+(t?Fg(r):r)}),OA=RA;function IA(){if(!arguments.length)return[];var e=arguments[0];return re(e)?e:[e]}var MA=lt.isFinite,BA=Math.min;function Df(e){var r=Math[e];return function(t,n){if(t=Xt(t),n=n==null?0:BA(ue(n),292),n&&MA(t)){var i=(xe(t)+"e").split("e"),o=r(i[0]+"e"+(+i[1]+n));return i=(xe(o)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return r(t)}}var DA=Df("ceil"),$A=DA;function e1(e){var r=_(e);return r.__chain__=!0,r}var PA=Math.ceil,NA=Math.max;function FA(e,r,t){(t?At(e,r,t):r===void 0)?r=1:r=NA(ue(r),0);var n=e==null?0:e.length;if(!n||r<1)return[];for(var i=0,o=0,a=Array(PA(n/r));i<n;)a[o++]=sr(e,i,i+=r);return a}function fi(e,r,t){return e===e&&(t!==void 0&&(e=e<=t?e:t),r!==void 0&&(e=e>=r?e:r)),e}function el(e,r,t){return t===void 0&&(t=r,r=void 0),t!==void 0&&(t=Xt(t),t=t===t?t:0),r!==void 0&&(r=Xt(r),r=r===r?r:0),fi(Xt(e),r,t)}function HA(){this.__data__=new hn,this.size=0}function zA(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function kA(e){return this.__data__.get(e)}function WA(e){return this.__data__.has(e)}var GA=200;function UA(e,r){var t=this.__data__;if(t instanceof hn){var n=t.__data__;if(!Do||n.length<GA-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new dn(n)}return t.set(e,r),this.size=t.size,this}function yr(e){var r=this.__data__=new hn(e);this.size=r.size}yr.prototype.clear=HA;yr.prototype.delete=zA;yr.prototype.get=kA;yr.prototype.has=WA;yr.prototype.set=UA;function t1(e,r){return e&&Yr(r,me(r),e)}function YA(e,r){return e&&Yr(r,kt(r),e)}var r1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,nv=r1&&typeof module=="object"&&module&&!module.nodeType&&module,XA=nv&&nv.exports===r1,iv=XA?lt.Buffer:void 0,ov=iv?iv.allocUnsafe:void 0;function n1(e,r){if(r)return e.slice();var t=e.length,n=ov?ov(t):new e.constructor(t);return e.copy(n),n}function Pn(e,r){for(var t=-1,n=e==null?0:e.length,i=0,o=[];++t<n;){var a=e[t];r(a,t,e)&&(o[i++]=a)}return o}function $f(){return[]}var VA=Object.prototype,jA=VA.propertyIsEnumerable,av=Object.getOwnPropertySymbols,qA=av?function(e){return e==null?[]:(e=Object(e),Pn(av(e),function(r){return jA.call(e,r)}))}:$f,Pf=qA;function KA(e,r){return Yr(e,Pf(e),r)}var ZA=Object.getOwnPropertySymbols,QA=ZA?function(e){for(var r=[];e;)Dn(r,Pf(e)),e=bl(e);return r}:$f,i1=QA;function JA(e,r){return Yr(e,i1(e),r)}function o1(e,r,t){var n=r(e);return re(e)?n:Dn(n,t(e))}function hu(e){return o1(e,me,Pf)}function Nf(e){return o1(e,kt,i1)}var eR=li(lt,"DataView"),du=eR,tR=li(lt,"Promise"),vu=tR,rR=li(lt,"Set"),Ti=rR,lv="[object Map]",nR="[object Object]",sv="[object Promise]",uv="[object Set]",fv="[object WeakMap]",cv="[object DataView]",iR=ai(du),oR=ai(Do),aR=ai(vu),lR=ai(Ti),sR=ai(Io),kn=Rt;(du&&kn(new du(new ArrayBuffer(1)))!=cv||Do&&kn(new Do)!=lv||vu&&kn(vu.resolve())!=sv||Ti&&kn(new Ti)!=uv||Io&&kn(new Io)!=fv)&&(kn=function(e){var r=Rt(e),t=r==nR?e.constructor:void 0,n=t?ai(t):"";if(n)switch(n){case iR:return cv;case oR:return lv;case aR:return sv;case lR:return uv;case sR:return fv}return r});var Hr=kn,uR=Object.prototype,fR=uR.hasOwnProperty;function cR(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&fR.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var hR=lt.Uint8Array,tl=hR;function Ff(e){var r=new e.constructor(e.byteLength);return new tl(r).set(new tl(e)),r}function dR(e,r){var t=r?Ff(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var vR=/\w*$/;function pR(e){var r=new e.constructor(e.source,vR.exec(e));return r.lastIndex=e.lastIndex,r}var hv=Ct?Ct.prototype:void 0,dv=hv?hv.valueOf:void 0;function gR(e){return dv?Object(dv.call(e)):{}}function a1(e,r){var t=r?Ff(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var CR="[object Boolean]",yR="[object Date]",mR="[object Map]",wR="[object Number]",_R="[object RegExp]",SR="[object Set]",xR="[object String]",TR="[object Symbol]",ER="[object ArrayBuffer]",bR="[object DataView]",LR="[object Float32Array]",AR="[object Float64Array]",RR="[object Int8Array]",OR="[object Int16Array]",IR="[object Int32Array]",MR="[object Uint8Array]",BR="[object Uint8ClampedArray]",DR="[object Uint16Array]",$R="[object Uint32Array]";function PR(e,r,t){var n=e.constructor;switch(r){case ER:return Ff(e);case CR:case yR:return new n(+e);case bR:return dR(e,t);case LR:case AR:case RR:case OR:case IR:case MR:case BR:case DR:case $R:return a1(e,t);case mR:return new n;case wR:case xR:return new n(e);case _R:return pR(e);case SR:return new n;case TR:return gR(e)}}function l1(e){return typeof e.constructor=="function"&&!Ko(e)?Gi(bl(e)):{}}var NR="[object Map]";function FR(e){return Ye(e)&&Hr(e)==NR}var vv=lr&&lr.isMap,HR=vv?Kt(vv):FR,s1=HR,zR="[object Set]";function kR(e){return Ye(e)&&Hr(e)==zR}var pv=lr&&lr.isSet,WR=pv?Kt(pv):kR,u1=WR,GR=1,UR=2,YR=4,f1="[object Arguments]",XR="[object Array]",VR="[object Boolean]",jR="[object Date]",qR="[object Error]",c1="[object Function]",KR="[object GeneratorFunction]",ZR="[object Map]",QR="[object Number]",h1="[object Object]",JR="[object RegExp]",eO="[object Set]",tO="[object String]",rO="[object Symbol]",nO="[object WeakMap]",iO="[object ArrayBuffer]",oO="[object DataView]",aO="[object Float32Array]",lO="[object Float64Array]",sO="[object Int8Array]",uO="[object Int16Array]",fO="[object Int32Array]",cO="[object Uint8Array]",hO="[object Uint8ClampedArray]",dO="[object Uint16Array]",vO="[object Uint32Array]",Be={};Be[f1]=Be[XR]=Be[iO]=Be[oO]=Be[VR]=Be[jR]=Be[aO]=Be[lO]=Be[sO]=Be[uO]=Be[fO]=Be[ZR]=Be[QR]=Be[h1]=Be[JR]=Be[eO]=Be[tO]=Be[rO]=Be[cO]=Be[hO]=Be[dO]=Be[vO]=!0;Be[qR]=Be[c1]=Be[nO]=!1;function ir(e,r,t,n,i,o){var a,l=r&GR,s=r&UR,u=r&YR;if(t&&(a=i?t(e,n,i,o):t(e)),a!==void 0)return a;if(!Ae(e))return e;var f=re(e);if(f){if(a=cR(e),!l)return $t(e,a)}else{var c=Hr(e),h=c==c1||c==KR;if(On(e))return n1(e,l);if(c==h1||c==f1||h&&!i){if(a=s||h?{}:l1(e),!l)return s?JA(e,YA(a,e)):KA(e,t1(a,e))}else{if(!Be[c])return i?e:{};a=PR(e,c,l)}}o||(o=new yr);var d=o.get(e);if(d)return d;o.set(e,a),u1(e)?e.forEach(function(g){a.add(ir(g,r,t,g,e,o))}):s1(e)&&e.forEach(function(g,C){a.set(C,ir(g,r,t,C,e,o))});var v=u?s?Nf:hu:s?kt:me,p=f?void 0:v(e);return ur(p||e,function(g,C){p&&(C=g,g=e[C]),qo(a,C,ir(g,r,t,C,e,o))}),a}var pO=4;function Qo(e){return ir(e,pO)}var gO=1,CO=4;function pu(e){return ir(e,gO|CO)}var yO=1,mO=4;function wO(e,r){return r=typeof r=="function"?r:void 0,ir(e,yO|mO,r)}var _O=4;function SO(e,r){return r=typeof r=="function"?r:void 0,ir(e,_O,r)}function xO(){return new ar(this.value(),this.__chain__)}function on(e){for(var r=-1,t=e==null?0:e.length,n=0,i=[];++r<t;){var o=e[r];o&&(i[n++]=o)}return i}function Mr(){var e=arguments.length;if(!e)return[];for(var r=Array(e-1),t=arguments[0],n=e;n--;)r[n-1]=arguments[n];return Dn(re(t)?$t(t):[t],ht(r,1))}var TO="__lodash_hash_undefined__";function EO(e){return this.__data__.set(e,TO),this}function bO(e){return this.__data__.has(e)}function ri(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new dn;++r<t;)this.add(e[r])}ri.prototype.add=ri.prototype.push=EO;ri.prototype.has=bO;function Hf(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}function $o(e,r){return e.has(r)}var LO=1,AO=2;function d1(e,r,t,n,i,o){var a=t&LO,l=e.length,s=r.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(e),f=o.get(r);if(u&&f)return u==r&&f==e;var c=-1,h=!0,d=t&AO?new ri:void 0;for(o.set(e,r),o.set(r,e);++c<l;){var v=e[c],p=r[c];if(n)var g=a?n(p,v,c,r,e,o):n(v,p,c,e,r,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!Hf(r,function(C,y){if(!$o(d,y)&&(v===C||i(v,C,t,n,o)))return d.push(y)})){h=!1;break}}else if(!(v===p||i(v,p,t,n,o))){h=!1;break}}return o.delete(e),o.delete(r),h}function zf(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}function Ll(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var RO=1,OO=2,IO="[object Boolean]",MO="[object Date]",BO="[object Error]",DO="[object Map]",$O="[object Number]",PO="[object RegExp]",NO="[object Set]",FO="[object String]",HO="[object Symbol]",zO="[object ArrayBuffer]",kO="[object DataView]",gv=Ct?Ct.prototype:void 0,ws=gv?gv.valueOf:void 0;function WO(e,r,t,n,i,o,a){switch(t){case kO:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case zO:return!(e.byteLength!=r.byteLength||!o(new tl(e),new tl(r)));case IO:case MO:case $O:return Tr(+e,+r);case BO:return e.name==r.name&&e.message==r.message;case PO:case FO:return e==r+"";case DO:var l=zf;case NO:var s=n&RO;if(l||(l=Ll),e.size!=r.size&&!s)return!1;var u=a.get(e);if(u)return u==r;n|=OO,a.set(e,r);var f=d1(l(e),l(r),n,i,o,a);return a.delete(e),f;case HO:if(ws)return ws.call(e)==ws.call(r)}return!1}var GO=1,UO=Object.prototype,YO=UO.hasOwnProperty;function XO(e,r,t,n,i,o){var a=t&GO,l=hu(e),s=l.length,u=hu(r),f=u.length;if(s!=f&&!a)return!1;for(var c=s;c--;){var h=l[c];if(!(a?h in r:YO.call(r,h)))return!1}var d=o.get(e),v=o.get(r);if(d&&v)return d==r&&v==e;var p=!0;o.set(e,r),o.set(r,e);for(var g=a;++c<s;){h=l[c];var C=e[h],y=r[h];if(n)var m=a?n(y,C,h,r,e,o):n(C,y,h,e,r,o);if(!(m===void 0?C===y||i(C,y,t,n,o):m)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var w=e.constructor,S=r.constructor;w!=S&&"constructor"in e&&"constructor"in r&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(p=!1)}return o.delete(e),o.delete(r),p}var VO=1,Cv="[object Arguments]",yv="[object Array]",Ta="[object Object]",jO=Object.prototype,mv=jO.hasOwnProperty;function qO(e,r,t,n,i,o){var a=re(e),l=re(r),s=a?yv:Hr(e),u=l?yv:Hr(r);s=s==Cv?Ta:s,u=u==Cv?Ta:u;var f=s==Ta,c=u==Ta,h=s==u;if(h&&On(e)){if(!On(r))return!1;a=!0,f=!1}if(h&&!f)return o||(o=new yr),a||Vi(e)?d1(e,r,t,n,i,o):WO(e,r,s,t,n,i,o);if(!(t&VO)){var d=f&&mv.call(e,"__wrapped__"),v=c&&mv.call(r,"__wrapped__");if(d||v){var p=d?e.value():e,g=v?r.value():r;return o||(o=new yr),i(p,g,t,n,o)}}return h?(o||(o=new yr),XO(e,r,t,n,i,o)):!1}function Jo(e,r,t,n,i){return e===r?!0:e==null||r==null||!Ye(e)&&!Ye(r)?e!==e&&r!==r:qO(e,r,t,n,Jo,i)}var KO=1,ZO=2;function kf(e,r,t,n){var i=t.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var l=t[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=t[i];var s=l[0],u=e[s],f=l[1];if(a&&l[2]){if(u===void 0&&!(s in e))return!1}else{var c=new yr;if(n)var h=n(u,f,s,e,r,c);if(!(h===void 0?Jo(f,u,KO|ZO,n,c):h))return!1}}return!0}function v1(e){return e===e&&!Ae(e)}function Wf(e){for(var r=me(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,v1(i)]}return r}function p1(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}function g1(e){var r=Wf(e);return r.length==1&&r[0][2]?p1(r[0][0],r[0][1]):function(t){return t===e||kf(t,e,r)}}function QO(e,r){return e!=null&&r in Object(e)}function C1(e,r,t){r=Bn(r,e);for(var n=-1,i=r.length,o=!1;++n<i;){var a=Xr(r[n]);if(!(o=e!=null&&t(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&xl(i)&&un(a,i)&&(re(e)||ei(e)))}function Po(e,r){return e!=null&&C1(e,r,QO)}var JO=1,eI=2;function y1(e,r){return bf(e)&&v1(r)?p1(Xr(e),r):function(t){var n=j(t,e);return n===void 0&&n===r?Po(t,e):Jo(r,n,JO|eI)}}function Gf(e){return function(r){return r==null?void 0:r[e]}}function tI(e){return function(r){return ui(r,e)}}function m1(e){return bf(e)?Gf(Xr(e)):tI(e)}function se(e){return typeof e=="function"?e:e==null?wt:typeof e=="object"?re(e)?y1(e[0],e[1]):g1(e):m1(e)}var rI="Expected a function";function w1(e){var r=e==null?0:e.length,t=se;return e=r?ze(e,function(n){if(typeof n[1]!="function")throw new TypeError(rI);return[t(n[0]),n[1]]}):[],ce(function(n){for(var i=-1;++i<r;){var o=e[i];if(qt(o[0],this,n))return qt(o[1],this,n)}})}function _1(e,r,t){var n=t.length;if(e==null)return!n;for(e=Object(e);n--;){var i=t[n],o=r[i],a=e[i];if(a===void 0&&!(i in e)||!o(a))return!1}return!0}function nI(e){var r=me(e);return function(t){return _1(t,e,r)}}var iI=1;function oI(e){return nI(ir(e,iI))}function aI(e,r){return r==null||_1(e,r,me(r))}function lI(e,r,t,n){for(var i=-1,o=e==null?0:e.length;++i<o;){var a=e[i];r(n,a,t(a),e)}return n}function S1(e){return function(r,t,n){for(var i=-1,o=Object(r),a=n(r),l=a.length;l--;){var s=a[e?l:++i];if(t(o[s],s,o)===!1)break}return r}}var sI=S1(),Uf=sI;function Vr(e,r){return e&&Uf(e,r,me)}function x1(e,r){return function(t,n){if(t==null)return t;if(!zt(t))return e(t,n);for(var i=t.length,o=r?i:-1,a=Object(t);(r?o--:++o<i)&&n(a[o],o,a)!==!1;);return t}}var uI=x1(Vr),Nn=uI;function fI(e,r,t,n){return Nn(e,function(i,o,a){r(n,i,t(i),a)}),n}function Al(e,r){return function(t,n){var i=re(t)?lI:fI,o=r?r():{};return i(t,e,se(n),o)}}var cI=Object.prototype,hI=cI.hasOwnProperty,dI=Al(function(e,r,t){hI.call(e,t)?++e[t]:cn(e,t,1)}),vI=dI;function pI(e,r){var t=Gi(e);return r==null?t:t1(t,r)}var gI=8;function Yf(e,r,t){r=t?void 0:r;var n=fn(e,gI,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=Yf.placeholder,n}Yf.placeholder={};var CI=16;function Xf(e,r,t){r=t?void 0:r;var n=fn(e,CI,void 0,void 0,void 0,void 0,void 0,r);return n.placeholder=Xf.placeholder,n}Xf.placeholder={};var yI=function(){return lt.Date.now()},Ma=yI,mI="Expected a function",wI=Math.max,_I=Math.min;function No(e,r,t){var n,i,o,a,l,s,u=0,f=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(mI);r=Xt(r)||0,Ae(t)&&(f=!!t.leading,c="maxWait"in t,o=c?wI(Xt(t.maxWait)||0,r):o,h="trailing"in t?!!t.trailing:h);function d(b){var A=n,O=i;return n=i=void 0,u=b,a=e.apply(O,A),a}function v(b){return u=b,l=setTimeout(C,r),f?d(b):a}function p(b){var A=b-s,O=b-u,B=r-A;return c?_I(B,o-O):B}function g(b){var A=b-s,O=b-u;return s===void 0||A>=r||A<0||c&&O>=o}function C(){var b=Ma();if(g(b))return y(b);l=setTimeout(C,p(b))}function y(b){return l=void 0,h&&n?d(b):(n=i=void 0,a)}function m(){l!==void 0&&clearTimeout(l),u=0,n=s=i=l=void 0}function w(){return l===void 0?a:y(Ma())}function S(){var b=Ma(),A=g(b);if(n=arguments,i=this,s=b,A){if(l===void 0)return v(s);if(c)return clearTimeout(l),l=setTimeout(C,r),d(s)}return l===void 0&&(l=setTimeout(C,r)),a}return S.cancel=m,S.flush=w,S}function SI(e,r){return e==null||e!==e?r:e}var T1=Object.prototype,xI=T1.hasOwnProperty,TI=ce(function(e,r){e=Object(e);var t=-1,n=r.length,i=n>2?r[2]:void 0;for(i&&At(r[0],r[1],i)&&(n=1);++t<n;)for(var o=r[t],a=kt(o),l=-1,s=a.length;++l<s;){var u=a[l],f=e[u];(f===void 0||Tr(f,T1[u])&&!xI.call(e,u))&&(e[u]=o[u])}return e}),EI=TI;function gu(e,r,t){(t!==void 0&&!Tr(e[r],t)||t===void 0&&!(r in e))&&cn(e,r,t)}function qe(e){return Ye(e)&&zt(e)}function Cu(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}function E1(e){return Yr(e,kt(e))}function bI(e,r,t,n,i,o,a){var l=Cu(e,t),s=Cu(r,t),u=a.get(s);if(u){gu(e,t,u);return}var f=o?o(l,s,t+"",e,r,a):void 0,c=f===void 0;if(c){var h=re(s),d=!h&&On(s),v=!h&&!d&&Vi(s);f=s,h||d||v?re(l)?f=l:qe(l)?f=$t(l):d?(c=!1,f=n1(s,!0)):v?(c=!1,f=a1(s,!0)):f=[]:Zo(s)||ei(s)?(f=l,ei(l)?f=E1(l):(!Ae(l)||ft(l))&&(f=l1(s))):c=!1}c&&(a.set(s,f),i(f,s,n,o,a),a.delete(s)),gu(e,t,f)}function Rl(e,r,t,n,i){e!==r&&Uf(r,function(o,a){if(i||(i=new yr),Ae(o))bI(e,r,a,t,Rl,n,i);else{var l=n?n(Cu(e,a),o,a+"",e,r,i):void 0;l===void 0&&(l=o),gu(e,a,l)}},kt)}function b1(e,r,t,n,i,o){return Ae(e)&&Ae(r)&&(o.set(r,e),Rl(e,r,void 0,b1,o),o.delete(r)),e}var LI=Xi(function(e,r,t,n){Rl(e,r,t,n)}),Vf=LI,AI=ce(function(e){return e.push(void 0,b1),qt(Vf,void 0,e)}),RI=AI,OI="Expected a function";function L1(e,r,t){if(typeof e!="function")throw new TypeError(OI);return setTimeout(function(){e.apply(void 0,t)},r)}var II=ce(function(e,r){return L1(e,1,r)}),MI=II,BI=ce(function(e,r,t){return L1(e,Xt(r)||0,t)}),DI=BI;function jf(e,r,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(r,e[n]))return!0;return!1}var $I=200;function ea(e,r,t,n){var i=-1,o=_l,a=!0,l=e.length,s=[],u=r.length;if(!l)return s;t&&(r=ze(r,Kt(t))),n?(o=jf,a=!1):r.length>=$I&&(o=$o,a=!1,r=new ri(r));e:for(;++i<l;){var f=e[i],c=t==null?f:t(f);if(f=n||f!==0?f:0,a&&c===c){for(var h=u;h--;)if(r[h]===c)continue e;s.push(f)}else o(r,c,n)||s.push(f)}return s}var PI=ce(function(e,r){return qe(e)?ea(e,ht(r,1,qe,!0)):[]}),qf=PI;function Ie(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var NI=ce(function(e,r){var t=Ie(r);return qe(t)&&(t=void 0),qe(e)?ea(e,ht(r,1,qe,!0),se(t)):[]}),FI=NI,HI=ce(function(e,r){var t=Ie(r);return qe(t)&&(t=void 0),qe(e)?ea(e,ht(r,1,qe,!0),void 0,t):[]}),A1=HI,zI=Cl(function(e,r){return e/r},1),kI=zI;function WI(e,r,t){var n=e==null?0:e.length;return n?(r=t||r===void 0?1:ue(r),sr(e,r<0?0:r,n)):[]}function GI(e,r,t){var n=e==null?0:e.length;return n?(r=t||r===void 0?1:ue(r),r=n-r,sr(e,0,r<0?0:r)):[]}function Ol(e,r,t,n){for(var i=e.length,o=n?i:-1;(n?o--:++o<i)&&r(e[o],o,e););return t?sr(e,n?0:o,n?o+1:i):sr(e,n?o+1:0,n?i:o)}function UI(e,r){return e&&e.length?Ol(e,se(r),!0,!0):[]}function YI(e,r){return e&&e.length?Ol(e,se(r),!0):[]}function jr(e){return typeof e=="function"?e:wt}function te(e,r){var t=re(e)?ur:Nn;return t(e,jr(r))}function XI(e,r){for(var t=e==null?0:e.length;t--&&r(e[t],t,e)!==!1;);return e}var VI=S1(!0),R1=VI;function Kf(e,r){return e&&R1(e,r,me)}var jI=x1(Kf,!0),O1=jI;function wv(e,r){var t=re(e)?XI:O1;return t(e,jr(r))}function I1(e,r,t){e=xe(e),r=jt(r);var n=e.length;t=t===void 0?n:fi(ue(t),0,n);var i=t;return t-=r.length,t>=0&&e.slice(t,i)==r}function qI(e,r){return ze(r,function(t){return[t,e[t]]})}function KI(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=[n,n]}),t}var ZI="[object Map]",QI="[object Set]";function M1(e){return function(r){var t=Hr(r);return t==ZI?zf(r):t==QI?KI(r):qI(r,e(r))}}var JI=M1(me),_v=JI,eM=M1(kt),Sv=eM,tM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rM=Bf(tM),nM=rM,B1=/[&<>"']/g,iM=RegExp(B1.source);function Zf(e){return e=xe(e),e&&iM.test(e)?e.replace(B1,nM):e}var D1=/[\\^$.*+?()[\]{}|]/g,oM=RegExp(D1.source);function aM(e){return e=xe(e),e&&oM.test(e)?e.replace(D1,"\\$&"):e}function $1(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(!r(e[t],t,e))return!1;return!0}function lM(e,r){var t=!0;return Nn(e,function(n,i,o){return t=!!r(n,i,o),t}),t}function ta(e,r,t){var n=re(e)?$1:lM;return t&&At(e,r,t)&&(r=void 0),n(e,se(r))}var sM=4294967295;function P1(e){return e?fi(ue(e),0,sM):0}function uM(e,r,t,n){var i=e.length;for(t=ue(t),t<0&&(t=-t>i?0:i+t),n=n===void 0||n>i?i:ue(n),n<0&&(n+=i),n=t>n?0:P1(n);t<n;)e[t++]=r;return e}function fM(e,r,t,n){var i=e==null?0:e.length;return i?(t&&typeof t!="number"&&At(e,r,t)&&(t=0,n=i),uM(e,r,t,n)):[]}function N1(e,r){var t=[];return Nn(e,function(n,i,o){r(n,i,o)&&t.push(n)}),t}function qr(e,r){var t=re(e)?Pn:N1;return t(e,se(r))}function F1(e){return function(r,t,n){var i=Object(r);if(!zt(r)){var o=se(t);r=me(r),t=function(l){return o(i[l],l,i)}}var a=e(r,t,n);return a>-1?i[o?r[a]:a]:void 0}}var cM=Math.max;function Mi(e,r,t){var n=e==null?0:e.length;if(!n)return-1;var i=t==null?0:ue(t);return i<0&&(i=cM(n+i,0)),wl(e,se(r),i)}var hM=F1(Mi),ct=hM;function H1(e,r,t){var n;return t(e,function(i,o,a){if(r(i,o,a))return n=o,!1}),n}function dM(e,r){return H1(e,se(r),Vr)}var vM=Math.max,pM=Math.min;function z1(e,r,t){var n=e==null?0:e.length;if(!n)return-1;var i=n-1;return t!==void 0&&(i=ue(t),i=t<0?vM(n+i,0):pM(i,n-1)),wl(e,se(r),i,!0)}var gM=F1(z1),Il=gM;function CM(e,r){return H1(e,se(r),Kf)}function Bi(e){return e&&e.length?e[0]:void 0}function k1(e,r){var t=-1,n=zt(e)?Array(e.length):[];return Nn(e,function(i,o,a){n[++t]=r(i,o,a)}),n}function de(e,r){var t=re(e)?ze:k1;return t(e,se(r))}function yM(e,r){return ht(de(e,r),1)}var mM=1/0;function wM(e,r){return ht(de(e,r),mM)}function _M(e,r,t){return t=t===void 0?1:ue(t),ht(de(e,r),t)}var SM=1/0;function xM(e){var r=e==null?0:e.length;return r?ht(e,SM):[]}function TM(e,r){var t=e==null?0:e.length;return t?(r=r===void 0?1:ue(r),ht(e,r)):[]}var EM=512;function bM(e){return fn(e,EM)}var LM=Df("floor"),AM=LM,RM="Expected a function",OM=8,IM=32,MM=128,BM=256;function W1(e){return vn(function(r){var t=r.length,n=t,i=ar.prototype.thru;for(e&&r.reverse();n--;){var o=r[n];if(typeof o!="function")throw new TypeError(RM);if(i&&!a&&Ia(o)=="wrapper")var a=new ar([],!0)}for(n=a?n:t;++n<t;){o=r[n];var l=Ia(o),s=l=="wrapper"?_f(o):void 0;s&&uu(s[0])&&s[1]==(MM|OM|IM|BM)&&!s[4].length&&s[9]==1?a=a[Ia(s[0])].apply(a,s[3]):a=o.length==1&&uu(o)?a[l]():a.thru(o)}return function(){var u=arguments,f=u[0];if(a&&u.length==1&&re(f))return a.plant(f).value();for(var c=0,h=t?r[c].apply(this,u):f;++c<t;)h=r[c].call(this,h);return h}})}var DM=W1(),$M=DM,PM=W1(!0),NM=PM;function G1(e,r){return e==null?e:Uf(e,jr(r),kt)}function FM(e,r){return e==null?e:R1(e,jr(r),kt)}function HM(e,r){return e&&Vr(e,jr(r))}function zM(e,r){return e&&Kf(e,jr(r))}function kM(e){for(var r=-1,t=e==null?0:e.length,n={};++r<t;){var i=e[r];n[i[0]]=i[1]}return n}function Ml(e,r){return Pn(r,function(t){return ft(e[t])})}function WM(e){return e==null?[]:Ml(e,me(e))}function GM(e){return e==null?[]:Ml(e,kt(e))}var UM=Object.prototype,YM=UM.hasOwnProperty,XM=Al(function(e,r,t){YM.call(e,t)?e[t].push(r):cn(e,t,[r])}),VM=XM;function Qf(e,r){return e>r}function Bl(e){return function(r,t){return typeof r=="string"&&typeof t=="string"||(r=Xt(r),t=Xt(t)),e(r,t)}}var jM=Bl(Qf),qM=jM,KM=Bl(function(e,r){return e>=r}),ZM=KM,QM=Object.prototype,JM=QM.hasOwnProperty;function e8(e,r){return e!=null&&JM.call(e,r)}function gi(e,r){return e!=null&&C1(e,r,e8)}var t8=Math.max,r8=Math.min;function n8(e,r,t){return e>=r8(r,t)&&e<t8(r,t)}function yu(e,r,t){return r=nn(r),t===void 0?(t=r,r=0):t=nn(t),e=Xt(e),n8(e,r,t)}var i8="[object String]";function Ki(e){return typeof e=="string"||!re(e)&&Ye(e)&&Rt(e)==i8}function Jf(e,r){return ze(r,function(t){return e[t]})}function Kr(e){return e==null?[]:Jf(e,me(e))}var o8=Math.max;function Tt(e,r,t,n){e=zt(e)?e:Kr(e),t=t&&!n?ue(t):0;var i=e.length;return t<0&&(t=o8(i+t,0)),Ki(e)?t<=i&&e.indexOf(r,t)>-1:!!i&&Ui(e,r,t)>-1}var a8=Math.max;function U1(e,r,t){var n=e==null?0:e.length;if(!n)return-1;var i=t==null?0:ue(t);return i<0&&(i=a8(n+i,0)),Ui(e,r,i)}function l8(e){var r=e==null?0:e.length;return r?sr(e,0,-1):[]}var s8=Math.min;function ec(e,r,t){for(var n=t?jf:_l,i=e[0].length,o=e.length,a=o,l=Array(o),s=1/0,u=[];a--;){var f=e[a];a&&r&&(f=ze(f,Kt(r))),s=s8(f.length,s),l[a]=!t&&(r||i>=120&&f.length>=120)?new ri(a&&f):void 0}f=e[0];var c=-1,h=l[0];e:for(;++c<i&&u.length<s;){var d=f[c],v=r?r(d):d;if(d=t||d!==0?d:0,!(h?$o(h,v):n(u,v,t))){for(a=o;--a;){var p=l[a];if(!(p?$o(p,v):n(e[a],v,t)))continue e}h&&h.push(v),u.push(d)}}return u}function tc(e){return qe(e)?e:[]}var u8=ce(function(e){var r=ze(e,tc);return r.length&&r[0]===e[0]?ec(r):[]}),rc=u8,f8=ce(function(e){var r=Ie(e),t=ze(e,tc);return r===Ie(t)?r=void 0:t.pop(),t.length&&t[0]===e[0]?ec(t,se(r)):[]}),c8=f8,h8=ce(function(e){var r=Ie(e),t=ze(e,tc);return r=typeof r=="function"?r:void 0,r&&t.pop(),t.length&&t[0]===e[0]?ec(t,void 0,r):[]}),d8=h8;function v8(e,r,t,n){return Vr(e,function(i,o,a){r(n,t(i),o,a)}),n}function Y1(e,r){return function(t,n){return v8(t,e,r(n),{})}}var p8=Object.prototype,g8=p8.toString,C8=Y1(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=g8.call(r)),e[r]=t},xi(wt)),y8=C8,X1=Object.prototype,m8=X1.hasOwnProperty,w8=X1.toString,_8=Y1(function(e,r,t){r!=null&&typeof r.toString!="function"&&(r=w8.call(r)),m8.call(e,r)?e[r].push(t):e[r]=[t]},se),S8=_8;function V1(e,r){return r.length<2?e:ui(e,sr(r,0,-1))}function ra(e,r,t){r=Bn(r,e),e=V1(e,r);var n=e==null?e:e[Xr(Ie(r))];return n==null?void 0:qt(n,e,t)}var x8=ce(ra),T8=x8,E8=ce(function(e,r,t){var n=-1,i=typeof r=="function",o=zt(e)?Array(e.length):[];return Nn(e,function(a){o[++n]=i?qt(r,a,t):ra(a,r,t)}),o}),b8=E8,L8="[object ArrayBuffer]";function A8(e){return Ye(e)&&Rt(e)==L8}var xv=lr&&lr.isArrayBuffer,R8=xv?Kt(xv):A8,O8=R8,I8="[object Boolean]";function Br(e){return e===!0||e===!1||Ye(e)&&Rt(e)==I8}var M8="[object Date]";function B8(e){return Ye(e)&&Rt(e)==M8}var Tv=lr&&lr.isDate,D8=Tv?Kt(Tv):B8,$8=D8;function P8(e){return Ye(e)&&e.nodeType===1&&!Zo(e)}var N8="[object Map]",F8="[object Set]",H8=Object.prototype,z8=H8.hasOwnProperty;function H(e){if(e==null)return!0;if(zt(e)&&(re(e)||typeof e=="string"||typeof e.splice=="function"||On(e)||Vi(e)||ei(e)))return!e.length;var r=Hr(e);if(r==N8||r==F8)return!e.size;if(Ko(e))return!Ef(e).length;for(var t in e)if(z8.call(e,t))return!1;return!0}function at(e,r){return Jo(e,r)}function k8(e,r,t){t=typeof t=="function"?t:void 0;var n=t?t(e,r):void 0;return n===void 0?Jo(e,r,void 0,t):!!n}var W8=lt.isFinite;function G8(e){return typeof e=="number"&&W8(e)}function j1(e){return typeof e=="number"&&e==ue(e)}function U8(e,r){return e===r||kf(e,r,Wf(r))}function Y8(e,r,t){return t=typeof t=="function"?t:void 0,kf(e,r,Wf(r),t)}var X8="[object Number]";function Yt(e){return typeof e=="number"||Ye(e)&&Rt(e)==X8}function q1(e){return Yt(e)&&e!=+e}var V8=Oa?ft:Tf,j8=V8,q8="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function K8(e){if(j8(e))throw new Error(q8);return lg(e)}function rt(e){return e==null}function Z8(e){return e===null}var Q8="[object RegExp]";function J8(e){return Ye(e)&&Rt(e)==Q8}var Ev=lr&&lr.isRegExp,e6=Ev?Kt(Ev):J8,nc=e6,bv=9007199254740991;function t6(e){return j1(e)&&e>=-bv&&e<=bv}function Pr(e){return e===void 0}var r6="[object WeakMap]";function n6(e){return Ye(e)&&Hr(e)==r6}var i6="[object WeakSet]";function o6(e){return Ye(e)&&Rt(e)==i6}var a6=1;function l6(e){return se(typeof e=="function"?e:ir(e,a6))}var s6=Array.prototype,u6=s6.join;function f6(e,r){return e==null?"":u6.call(e,r)}var c6=qi(function(e,r,t){return e+(t?"-":"")+r.toLowerCase()}),h6=c6,d6=Al(function(e,r,t){cn(e,t,r)}),v6=d6;function p6(e,r,t){for(var n=t+1;n--;)if(e[n]===r)return n;return n}var g6=Math.max,C6=Math.min;function y6(e,r,t){var n=e==null?0:e.length;if(!n)return-1;var i=n;return t!==void 0&&(i=ue(t),i=i<0?g6(n+i,0):C6(i,n-1)),r===r?p6(e,r,i):wl(e,vg,i,!0)}var m6=qi(function(e,r,t){return e+(t?" ":"")+r.toLowerCase()}),ic=m6,w6=Ng("toLowerCase"),_6=w6;function oc(e,r){return e<r}var S6=Bl(oc),x6=S6,T6=Bl(function(e,r){return e<=r}),E6=T6;function K1(e,r){var t={};return r=se(r),Vr(e,function(n,i,o){cn(t,r(n,i,o),n)}),t}function b6(e,r){var t={};return r=se(r),Vr(e,function(n,i,o){cn(t,i,r(n,i,o))}),t}var L6=1;function mu(e){return g1(ir(e,L6))}var A6=1;function R6(e,r){return y1(e,ir(r,A6))}function Dl(e,r,t){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=r(o);if(a!=null&&(l===void 0?a===a&&!Vt(a):t(a,l)))var l=a,s=o}return s}function Di(e){return e&&e.length?Dl(e,wt,Qf):void 0}function ac(e,r){return e&&e.length?Dl(e,se(r),Qf):void 0}function lc(e,r){for(var t,n=-1,i=e.length;++n<i;){var o=r(e[n]);o!==void 0&&(t=t===void 0?o:t+o)}return t}var O6=0/0;function Z1(e,r){var t=e==null?0:e.length;return t?lc(e,r)/t:O6}function I6(e){return Z1(e,wt)}function M6(e,r){return Z1(e,se(r))}var B6=Xi(function(e,r,t){Rl(e,r,t)}),$l=B6,D6=ce(function(e,r){return function(t){return ra(t,e,r)}}),$6=D6,P6=ce(function(e,r){return function(t){return ra(e,t,r)}}),N6=P6;function sc(e){return e&&e.length?Dl(e,wt,oc):void 0}function F6(e,r){return e&&e.length?Dl(e,se(r),oc):void 0}function Q1(e,r,t){var n=me(r),i=Ml(r,n),o=!(Ae(t)&&"chain"in t)||!!t.chain,a=ft(e);return ur(i,function(l){var s=r[l];e[l]=s,a&&(e.prototype[l]=function(){var u=this.__chain__;if(o||u){var f=e(this.__wrapped__),c=f.__actions__=$t(this.__actions__);return c.push({func:s,args:arguments,thisArg:e}),f.__chain__=u,f}return s.apply(e,Dn([this.value()],arguments))})}),e}var H6=Cl(function(e,r){return e*r},1),z6=H6,k6="Expected a function";function na(e){if(typeof e!="function")throw new TypeError(k6);return function(){var r=arguments;switch(r.length){case 0:return!e.call(this);case 1:return!e.call(this,r[0]);case 2:return!e.call(this,r[0],r[1]);case 3:return!e.call(this,r[0],r[1],r[2])}return!e.apply(this,r)}}function W6(e){for(var r,t=[];!(r=e.next()).done;)t.push(r.value);return t}var G6="[object Map]",U6="[object Set]",_s=Ct?Ct.iterator:void 0;function J1(e){if(!e)return[];if(zt(e))return Ki(e)?_r(e):$t(e);if(_s&&e[_s])return W6(e[_s]());var r=Hr(e),t=r==G6?zf:r==U6?Ll:Kr;return t(e)}function Y6(){this.__values__===void 0&&(this.__values__=J1(this.value()));var e=this.__index__>=this.__values__.length,r=e?void 0:this.__values__[this.__index__++];return{done:e,value:r}}function eC(e,r){var t=e.length;if(t)return r+=r<0?t:0,un(r,t)?e[r]:void 0}function X6(e,r){return e&&e.length?eC(e,ue(r)):void 0}function V6(e){return e=ue(e),ce(function(r){return eC(r,e)})}function uc(e,r){return r=Bn(r,e),e=V1(e,r),e==null||delete e[Xr(Ie(r))]}function j6(e){return Zo(e)?void 0:e}var q6=1,K6=2,Z6=4,Q6=vn(function(e,r){var t={};if(e==null)return t;var n=!1;r=ze(r,function(o){return o=Bn(o,e),n||(n=o.length>1),o}),Yr(e,Nf(e),t),n&&(t=ir(t,q6|K6|Z6,j6));for(var i=r.length;i--;)uc(t,r[i]);return t}),fc=Q6;function ia(e,r,t,n){if(!Ae(e))return e;r=Bn(r,e);for(var i=-1,o=r.length,a=o-1,l=e;l!=null&&++i<o;){var s=Xr(r[i]),u=t;if(s==="__proto__"||s==="constructor"||s==="prototype")return e;if(i!=a){var f=l[s];u=n?n(f,s,l):void 0,u===void 0&&(u=Ae(f)?f:un(r[i+1])?[]:{})}qo(l,s,u),l=l[s]}return e}function tC(e,r,t){for(var n=-1,i=r.length,o={};++n<i;){var a=r[n],l=ui(e,a);t(l,a)&&ia(o,Bn(a,e),l)}return o}function cc(e,r){if(e==null)return{};var t=ze(Nf(e),function(n){return[n]});return r=se(r),tC(e,t,function(n,i){return r(n,i[0])})}function J6(e,r){return cc(e,na(se(r)))}function e3(e){return Rg(2,e)}function t3(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}function rC(e,r){if(e!==r){var t=e!==void 0,n=e===null,i=e===e,o=Vt(e),a=r!==void 0,l=r===null,s=r===r,u=Vt(r);if(!l&&!u&&!o&&e>r||o&&a&&s&&!l&&!u||n&&a&&s||!t&&s||!i)return 1;if(!n&&!o&&!u&&e<r||u&&t&&i&&!n&&!o||l&&t&&i||!a&&i||!s)return-1}return 0}function r3(e,r,t){for(var n=-1,i=e.criteria,o=r.criteria,a=i.length,l=t.length;++n<a;){var s=rC(i[n],o[n]);if(s){if(n>=l)return s;var u=t[n];return s*(u=="desc"?-1:1)}}return e.index-r.index}function nC(e,r,t){r.length?r=ze(r,function(o){return re(o)?function(a){return ui(a,o.length===1?o[0]:o)}:o}):r=[wt];var n=-1;r=ze(r,Kt(se));var i=k1(e,function(o,a,l){var s=ze(r,function(u){return u(o)});return{criteria:s,index:++n,value:o}});return t3(i,function(o,a){return r3(o,a,t)})}function hc(e,r,t,n){return e==null?[]:(re(r)||(r=r==null?[]:[r]),t=n?void 0:t,re(t)||(t=t==null?[]:[t]),nC(e,r,t))}function dc(e){return vn(function(r){return r=ze(r,Kt(se)),ce(function(t){var n=this;return e(r,function(i){return qt(i,n,t)})})})}var n3=dc(ze),i3=n3,o3=ce,a3=o3,l3=Math.min,s3=a3(function(e,r){r=r.length==1&&re(r[0])?ze(r[0],Kt(se)):ze(ht(r,1),Kt(se));var t=r.length;return ce(function(n){for(var i=-1,o=l3(n.length,t);++i<o;)n[i]=r[i].call(this,n[i]);return qt(e,this,n)})}),u3=s3,f3=dc($1),c3=f3,h3=dc(Hf),d3=h3,v3=9007199254740991,p3=Math.floor;function wu(e,r){var t="";if(!e||r<1||r>v3)return t;do r%2&&(t+=e),r=p3(r/2),r&&(e+=e);while(r);return t}var g3=Gf("length"),C3=g3,iC="\\ud800-\\udfff",y3="\\u0300-\\u036f",m3="\\ufe20-\\ufe2f",w3="\\u20d0-\\u20ff",_3=y3+m3+w3,S3="\\ufe0e\\ufe0f",x3="["+iC+"]",_u="["+_3+"]",Su="\\ud83c[\\udffb-\\udfff]",T3="(?:"+_u+"|"+Su+")",oC="[^"+iC+"]",aC="(?:\\ud83c[\\udde6-\\uddff]){2}",lC="[\\ud800-\\udbff][\\udc00-\\udfff]",E3="\\u200d",sC=T3+"?",uC="["+S3+"]?",b3="(?:"+E3+"(?:"+[oC,aC,lC].join("|")+")"+uC+sC+")*",L3=uC+sC+b3,A3="(?:"+[oC+_u+"?",_u,aC,lC,x3].join("|")+")",Lv=RegExp(Su+"(?="+Su+")|"+A3+L3,"g");function R3(e){for(var r=Lv.lastIndex=0;Lv.test(e);)++r;return r}function Zi(e){return ji(e)?R3(e):C3(e)}var O3=Math.ceil;function rl(e,r){r=r===void 0?" ":jt(r);var t=r.length;if(t<2)return t?wu(r,e):r;var n=wu(r,O3(e/Zi(r)));return ji(r)?$n(_r(n),0,e).join(""):n.slice(0,e)}var I3=Math.ceil,M3=Math.floor;function B3(e,r,t){e=xe(e),r=ue(r);var n=r?Zi(e):0;if(!r||n>=r)return e;var i=(r-n)/2;return rl(M3(i),t)+e+rl(I3(i),t)}function D3(e,r,t){e=xe(e),r=ue(r);var n=r?Zi(e):0;return r&&n<r?e+rl(r-n,t):e}function $3(e,r,t){e=xe(e),r=ue(r);var n=r?Zi(e):0;return r&&n<r?rl(r-n,t)+e:e}var P3=/^\s+/,N3=lt.parseInt;function F3(e,r,t){return t||r==null?r=0:r&&(r=+r),N3(xe(e).replace(P3,""),r||0)}var H3=32,vc=ce(function(e,r){var t=Rn(r,Yi(vc));return fn(e,H3,void 0,r,t)});vc.placeholder={};var fC=vc,z3=64,pc=ce(function(e,r){var t=Rn(r,Yi(pc));return fn(e,z3,void 0,r,t)});pc.placeholder={};var k3=pc,W3=Al(function(e,r,t){e[t?0:1].push(r)},function(){return[[],[]]}),G3=W3;function U3(e,r){return tC(e,r,function(t,n){return Po(e,n)})}var Y3=vn(function(e,r){return e==null?{}:U3(e,r)}),cC=Y3;function X3(e){for(var r,t=this;t instanceof yl;){var n=cg(t);n.__index__=0,n.__values__=void 0,r?i.__wrapped__=n:r=n;var i=n;t=t.__wrapped__}return i.__wrapped__=e,r}function V3(e){return function(r){return e==null?void 0:ui(e,r)}}function j3(e,r,t,n){for(var i=t-1,o=e.length;++i<o;)if(n(e[i],r))return i;return-1}var q3=Array.prototype,Av=q3.splice;function gc(e,r,t,n){var i=n?j3:Ui,o=-1,a=r.length,l=e;for(e===r&&(r=$t(r)),t&&(l=ze(e,Kt(t)));++o<a;)for(var s=0,u=r[o],f=t?t(u):u;(s=i(l,f,s,n))>-1;)l!==e&&Av.call(l,s,1),Av.call(e,s,1);return e}function hC(e,r){return e&&e.length&&r&&r.length?gc(e,r):e}var K3=ce(hC),Z3=K3;function Q3(e,r,t){return e&&e.length&&r&&r.length?gc(e,r,se(t)):e}function J3(e,r,t){return e&&e.length&&r&&r.length?gc(e,r,void 0,t):e}var e5=Array.prototype,t5=e5.splice;function dC(e,r){for(var t=e?r.length:0,n=t-1;t--;){var i=r[t];if(t==n||i!==o){var o=i;un(i)?t5.call(e,i,1):uc(e,i)}}return e}var r5=vn(function(e,r){var t=e==null?0:e.length,n=Lf(e,r);return dC(e,ze(r,function(i){return un(i,t)?+i:i}).sort(rC)),n}),n5=r5,i5=Math.floor,o5=Math.random;function Cc(e,r){return e+i5(o5()*(r-e+1))}var a5=parseFloat,l5=Math.min,s5=Math.random;function u5(e,r,t){if(t&&typeof t!="boolean"&&At(e,r,t)&&(r=t=void 0),t===void 0&&(typeof r=="boolean"?(t=r,r=void 0):typeof e=="boolean"&&(t=e,e=void 0)),e===void 0&&r===void 0?(e=0,r=1):(e=nn(e),r===void 0?(r=e,e=0):r=nn(r)),e>r){var n=e;e=r,r=n}if(t||e%1||r%1){var i=s5();return l5(e+i*(r-e+a5("1e-"+((i+"").length-1))),r)}return Cc(e,r)}var f5=Math.ceil,c5=Math.max;function h5(e,r,t,n){for(var i=-1,o=c5(f5((r-e)/(t||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=t;return a}function vC(e){return function(r,t,n){return n&&typeof n!="number"&&At(r,t,n)&&(t=n=void 0),r=nn(r),t===void 0?(t=r,r=0):t=nn(t),n=n===void 0?r<t?1:-1:nn(n),h5(r,t,n,e)}}var d5=vC(),Ei=d5,v5=vC(!0),p5=v5,g5=256,C5=vn(function(e,r){return fn(e,g5,void 0,void 0,void 0,r)}),y5=C5;function pC(e,r,t,n,i){return i(e,function(o,a,l){t=n?(n=!1,o):r(t,o,a,l)}),t}function Qi(e,r,t){var n=re(e)?Mf:pC,i=arguments.length<3;return n(e,se(r),t,i,Nn)}function m5(e,r,t,n){var i=e==null?0:e.length;for(n&&i&&(t=e[--i]);i--;)t=r(t,e[i],i,e);return t}function w5(e,r,t){var n=re(e)?m5:pC,i=arguments.length<3;return n(e,se(r),t,i,O1)}function _5(e,r){var t=re(e)?Pn:N1;return t(e,na(se(r)))}function S5(e,r){var t=[];if(!(e&&e.length))return t;var n=-1,i=[],o=e.length;for(r=se(r);++n<o;){var a=e[n];r(a,n,e)&&(t.push(a),i.push(n))}return dC(e,i),t}function x5(e,r,t){return(t?At(e,r,t):r===void 0)?r=1:r=ue(r),wu(xe(e),r)}function T5(){var e=arguments,r=xe(e[0]);return e.length<3?r:r.replace(e[1],e[2])}var E5="Expected a function";function b5(e,r){if(typeof e!="function")throw new TypeError(E5);return r=r===void 0?r:ue(r),ce(e,r)}function L5(e,r,t){r=Bn(r,e);var n=-1,i=r.length;for(i||(i=1,e=void 0);++n<i;){var o=e==null?void 0:e[Xr(r[n])];o===void 0&&(n=i,o=t),e=ft(o)?o.call(e):o}return e}var A5=Array.prototype,R5=A5.reverse;function xu(e){return e==null?e:R5.call(e)}var O5=Df("round"),I5=O5;function gC(e){var r=e.length;return r?e[Cc(0,r-1)]:void 0}function M5(e){return gC(Kr(e))}function B5(e){var r=re(e)?gC:M5;return r(e)}function Pl(e,r){var t=-1,n=e.length,i=n-1;for(r=r===void 0?n:r;++t<r;){var o=Cc(t,i),a=e[o];e[o]=e[t],e[t]=a}return e.length=r,e}function D5(e,r){return Pl($t(e),fi(r,0,e.length))}function $5(e,r){var t=Kr(e);return Pl(t,fi(r,0,t.length))}function P5(e,r,t){(t?At(e,r,t):r===void 0)?r=1:r=ue(r);var n=re(e)?D5:$5;return n(e,r)}function Fo(e,r,t){return e==null?e:ia(e,r,t)}function N5(e,r,t,n){return n=typeof n=="function"?n:void 0,e==null?e:ia(e,r,t,n)}function F5(e){return Pl($t(e))}function H5(e){return Pl(Kr(e))}function z5(e){var r=re(e)?F5:H5;return r(e)}var k5="[object Map]",W5="[object Set]";function Ci(e){if(e==null)return 0;if(zt(e))return Ki(e)?Zi(e):e.length;var r=Hr(e);return r==k5||r==W5?e.size:Ef(e).length}function G5(e,r,t){var n=e==null?0:e.length;return n?(t&&typeof t!="number"&&At(e,r,t)?(r=0,t=n):(r=r==null?0:ue(r),t=t===void 0?n:ue(t)),sr(e,r,t)):[]}var U5=qi(function(e,r,t){return e+(t?"_":"")+r.toLowerCase()}),Y5=U5;function X5(e,r){var t;return Nn(e,function(n,i,o){return t=r(n,i,o),!t}),!!t}function CC(e,r,t){var n=re(e)?Hf:X5;return t&&At(e,r,t)&&(r=void 0),n(e,se(r))}var V5=ce(function(e,r){if(e==null)return[];var t=r.length;return t>1&&At(e,r[0],r[1])?r=[]:t>2&&At(r[0],r[1],r[2])&&(r=[r[0]]),nC(e,ht(r,1),[])}),j5=V5,q5=4294967295,K5=q5-1,Z5=Math.floor,Q5=Math.min;function yc(e,r,t,n){var i=0,o=e==null?0:e.length;if(o===0)return 0;r=t(r);for(var a=r!==r,l=r===null,s=Vt(r),u=r===void 0;i<o;){var f=Z5((i+o)/2),c=t(e[f]),h=c!==void 0,d=c===null,v=c===c,p=Vt(c);if(a)var g=n||v;else u?g=v&&(n||h):l?g=v&&h&&(n||!d):s?g=v&&h&&!d&&(n||!p):d||p?g=!1:g=n?c<=r:c<r;g?i=f+1:o=f}return Q5(o,K5)}var J5=4294967295,e4=J5>>>1;function Nl(e,r,t){var n=0,i=e==null?n:e.length;if(typeof r=="number"&&r===r&&i<=e4){for(;n<i;){var o=n+i>>>1,a=e[o];a!==null&&!Vt(a)&&(t?a<=r:a<r)?n=o+1:i=o}return i}return yc(e,r,wt,t)}function t4(e,r){return Nl(e,r)}function r4(e,r,t){return yc(e,r,se(t))}function n4(e,r){var t=e==null?0:e.length;if(t){var n=Nl(e,r);if(n<t&&Tr(e[n],r))return n}return-1}function i4(e,r){return Nl(e,r,!0)}function o4(e,r,t){return yc(e,r,se(t),!0)}function a4(e,r){var t=e==null?0:e.length;if(t){var n=Nl(e,r,!0)-1;if(Tr(e[n],r))return n}return-1}function yC(e,r){for(var t=-1,n=e.length,i=0,o=[];++t<n;){var a=e[t],l=r?r(a):a;if(!t||!Tr(l,s)){var s=l;o[i++]=a===0?0:a}}return o}function l4(e){return e&&e.length?yC(e):[]}function s4(e,r){return e&&e.length?yC(e,se(r)):[]}var u4=4294967295;function mC(e,r,t){return t&&typeof t!="number"&&At(e,r,t)&&(r=t=void 0),t=t===void 0?u4:t>>>0,t?(e=xe(e),e&&(typeof r=="string"||r!=null&&!nc(r))&&(r=jt(r),!r&&ji(e))?$n(_r(e),0,t):e.split(r,t)):[]}var f4="Expected a function",c4=Math.max;function h4(e,r){if(typeof e!="function")throw new TypeError(f4);return r=r==null?0:c4(ue(r),0),ce(function(t){var n=t[r],i=$n(t,0,r);return n&&Dn(i,n),qt(e,this,i)})}var d4=qi(function(e,r,t){return e+(t?" ":"")+If(r)}),v4=d4;function p4(e,r,t){return e=xe(e),t=t==null?0:fi(ue(t),0,e.length),r=jt(r),e.slice(t,t+r.length)==r}function g4(){return{}}function C4(){return""}function wC(){return!0}var y4=Cl(function(e,r){return e-r},0),m4=y4;function w4(e){return e&&e.length?lc(e,wt):0}function _C(e,r){return e&&e.length?lc(e,se(r)):0}function _4(e){var r=e==null?0:e.length;return r?sr(e,1,r):[]}function S4(e,r,t){return e&&e.length?(r=t||r===void 0?1:ue(r),sr(e,0,r<0?0:r)):[]}function x4(e,r,t){var n=e==null?0:e.length;return n?(r=t||r===void 0?1:ue(r),r=n-r,sr(e,r<0?0:r,n)):[]}function T4(e,r){return e&&e.length?Ol(e,se(r),!1,!0):[]}function E4(e,r){return e&&e.length?Ol(e,se(r)):[]}function b4(e,r){return r(e),e}var SC=Object.prototype,L4=SC.hasOwnProperty;function Rv(e,r,t,n){return e===void 0||Tr(e,SC[t])&&!L4.call(n,t)?r:e}var A4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function R4(e){return"\\"+A4[e]}var O4=/<%=([\s\S]+?)%>/g,xC=O4,I4=/<%-([\s\S]+?)%>/g,M4=I4,B4=/<%([\s\S]+?)%>/g,D4=B4,$4={escape:M4,evaluate:D4,interpolate:xC,variable:"",imports:{_:{escape:Zf}}},Tu=$4,P4="Invalid `variable` option passed into `_.template`",N4=/\b__p \+= '';/g,F4=/\b(__p \+=) '' \+/g,H4=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z4=/[()=,{}\[\]\/\s]/,k4=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ea=/($^)/,W4=/['\n\r\u2028\u2029\\]/g,G4=Object.prototype,Ov=G4.hasOwnProperty;function U4(e,r,t){var n=Tu.imports._.templateSettings||Tu;t&&At(e,r,t)&&(r=void 0),e=xe(e),r=Ja({},r,n,Rv);var i=Ja({},r.imports,n.imports,Rv),o=me(i),a=Jf(i,o),l,s,u=0,f=r.interpolate||Ea,c="__p += '",h=RegExp((r.escape||Ea).source+"|"+f.source+"|"+(f===xC?k4:Ea).source+"|"+(r.evaluate||Ea).source+"|$","g"),d=Ov.call(r,"sourceURL")?"//# sourceURL="+(r.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(h,function(g,C,y,m,w,S){return y||(y=m),c+=e.slice(u,S).replace(W4,R4),C&&(l=!0,c+=`' +
__e(`+C+`) +
'`),w&&(s=!0,c+=`';
`+w+`;
__p += '`),y&&(c+=`' +
((__t = (`+y+`)) == null ? '' : __t) +
'`),u=S+g.length,g}),c+=`';
`;var v=Ov.call(r,"variable")&&r.variable;if(!v)c=`with (obj) {
`+c+`
}
`;else if(z4.test(v))throw new Error(P4);c=(s?c.replace(N4,""):c).replace(F4,"$1").replace(H4,"$1;"),c="function("+(v||"obj")+`) {
`+(v?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(l?", __e = _.escape":"")+(s?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+c+`return __p
}`;var p=Ag(function(){return Function(o,d+"return "+c).apply(void 0,a)});if(p.source=c,Af(p))throw p;return p}var Y4="Expected a function";function mc(e,r,t){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Y4);return Ae(t)&&(n="leading"in t?!!t.leading:n,i="trailing"in t?!!t.trailing:i),No(e,r,{leading:n,maxWait:r,trailing:i})}function oa(e,r){return r(e)}var X4=9007199254740991,Ss=4294967295,V4=Math.min;function j4(e,r){if(e=ue(e),e<1||e>X4)return[];var t=Ss,n=V4(e,Ss);r=jr(r),e-=Ss;for(var i=xf(n,r);++t<e;)r(t);return i}function q4(){return this}function TC(e,r){var t=e;return t instanceof ve&&(t=t.value()),Mf(r,function(n,i){return i.func.apply(i.thisArg,Dn([n],i.args))},t)}function xs(){return TC(this.__wrapped__,this.__actions__)}function K4(e){return xe(e).toLowerCase()}function Z4(e){return re(e)?ze(e,Xr):Vt(e)?[e]:$t(Eg(xe(e)))}var Iv=9007199254740991;function Q4(e){return e?fi(ue(e),-Iv,Iv):e===0?e:0}function Ho(e){return xe(e).toUpperCase()}function J4(e,r,t){var n=re(e),i=n||On(e)||Vi(e);if(r=se(r),t==null){var o=e&&e.constructor;i?t=n?new o:[]:Ae(e)?t=ft(o)?Gi(bl(e)):{}:t={}}return(i?ur:Vr)(e,function(a,l,s){return r(t,a,l,s)}),t}function EC(e,r){for(var t=e.length;t--&&Ui(r,e[t],0)>-1;);return t}function bC(e,r){for(var t=-1,n=e.length;++t<n&&Ui(r,e[t],0)>-1;);return t}function eB(e,r,t){if(e=xe(e),e&&(t||r===void 0))return ag(e);if(!e||!(r=jt(r)))return e;var n=_r(e),i=_r(r),o=bC(n,i),a=EC(n,i)+1;return $n(n,o,a).join("")}function tB(e,r,t){if(e=xe(e),e&&(t||r===void 0))return e.slice(0,og(e)+1);if(!e||!(r=jt(r)))return e;var n=_r(e),i=EC(n,_r(r))+1;return $n(n,0,i).join("")}var rB=/^\s+/;function nB(e,r,t){if(e=xe(e),e&&(t||r===void 0))return e.replace(rB,"");if(!e||!(r=jt(r)))return e;var n=_r(e),i=bC(n,_r(r));return $n(n,i).join("")}var iB=30,oB="...",aB=/\w*$/;function lB(e,r){var t=iB,n=oB;if(Ae(r)){var i="separator"in r?r.separator:i;t="length"in r?ue(r.length):t,n="omission"in r?jt(r.omission):n}e=xe(e);var o=e.length;if(ji(e)){var a=_r(e);o=a.length}if(t>=o)return e;var l=t-Zi(n);if(l<1)return n;var s=a?$n(a,0,l).join(""):e.slice(0,l);if(i===void 0)return s+n;if(a&&(l+=s.length-l),nc(i)){if(e.slice(l).search(i)){var u,f=s;for(i.global||(i=RegExp(i.source,xe(aB.exec(i))+"g")),i.lastIndex=0;u=i.exec(f);)var c=u.index;s=s.slice(0,c===void 0?l:c)}}else if(e.indexOf(jt(i),l)!=l){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+n}function sB(e){return Cg(e,1)}var uB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fB=Bf(uB),cB=fB,LC=/&(?:amp|lt|gt|quot|#39);/g,hB=RegExp(LC.source);function dB(e){return e=xe(e),e&&hB.test(e)?e.replace(LC,cB):e}var vB=1/0,pB=Ti&&1/Ll(new Ti([,-0]))[1]==vB?function(e){return new Ti(e)}:ml,gB=pB,CB=200;function In(e,r,t){var n=-1,i=_l,o=e.length,a=!0,l=[],s=l;if(t)a=!1,i=jf;else if(o>=CB){var u=r?null:gB(e);if(u)return Ll(u);a=!1,i=$o,s=new ri}else s=r?[]:l;e:for(;++n<o;){var f=e[n],c=r?r(f):f;if(f=t||f!==0?f:0,a&&c===c){for(var h=s.length;h--;)if(s[h]===c)continue e;r&&s.push(c),l.push(f)}else i(s,c,t)||(s!==l&&s.push(c),l.push(f))}return l}var yB=ce(function(e){return In(ht(e,1,qe,!0))}),mB=yB,wB=ce(function(e){var r=Ie(e);return qe(r)&&(r=void 0),In(ht(e,1,qe,!0),se(r))}),_B=wB,SB=ce(function(e){var r=Ie(e);return r=typeof r=="function"?r:void 0,In(ht(e,1,qe,!0),void 0,r)}),xB=SB;function Rr(e){return e&&e.length?In(e):[]}function TB(e,r){return e&&e.length?In(e,se(r)):[]}function EB(e,r){return r=typeof r=="function"?r:void 0,e&&e.length?In(e,void 0,r):[]}var bB=0;function LB(e){var r=++bB;return xe(e)+r}function Eu(e,r){return e==null?!0:uc(e,r)}var AB=Math.max;function wc(e){if(!(e&&e.length))return[];var r=0;return e=Pn(e,function(t){if(qe(t))return r=AB(t.length,r),!0}),xf(r,function(t){return ze(e,Gf(t))})}function AC(e,r){if(!(e&&e.length))return[];var t=wc(e);return r==null?t:ze(t,function(n){return qt(r,void 0,n)})}function RC(e,r,t,n){return ia(e,r,t(ui(e,r)),n)}function RB(e,r,t){return e==null?e:RC(e,r,jr(t))}function OB(e,r,t,n){return n=typeof n=="function"?n:void 0,e==null?e:RC(e,r,jr(t),n)}var IB=qi(function(e,r,t){return e+(t?" ":"")+r.toUpperCase()}),MB=IB;function BB(e){return e==null?[]:Jf(e,kt(e))}var DB=ce(function(e,r){return qe(e)?ea(e,r):[]}),$B=DB;function PB(e,r){return fC(jr(r),e)}var NB=vn(function(e){var r=e.length,t=r?e[0]:0,n=this.__wrapped__,i=function(o){return Lf(o,e)};return r>1||this.__actions__.length||!(n instanceof ve)||!un(t)?this.thru(i):(n=n.slice(t,+t+(r?1:0)),n.__actions__.push({func:oa,args:[i],thisArg:void 0}),new ar(n,this.__chain__).thru(function(o){return r&&!o.length&&o.push(void 0),o}))}),FB=NB;function HB(){return e1(this)}function zB(){var e=this.__wrapped__;if(e instanceof ve){var r=e;return this.__actions__.length&&(r=new ve(this)),r=r.reverse(),r.__actions__.push({func:oa,args:[xu],thisArg:void 0}),new ar(r,this.__chain__)}return this.thru(xu)}function _c(e,r,t){var n=e.length;if(n<2)return n?In(e[0]):[];for(var i=-1,o=Array(n);++i<n;)for(var a=e[i],l=-1;++l<n;)l!=i&&(o[i]=ea(o[i]||a,e[l],r,t));return In(ht(o,1),r,t)}var kB=ce(function(e){return _c(Pn(e,qe))}),WB=kB,GB=ce(function(e){var r=Ie(e);return qe(r)&&(r=void 0),_c(Pn(e,qe),se(r))}),UB=GB,YB=ce(function(e){var r=Ie(e);return r=typeof r=="function"?r:void 0,_c(Pn(e,qe),void 0,r)}),XB=YB,VB=ce(wc),Fl=VB;function OC(e,r,t){for(var n=-1,i=e.length,o=r.length,a={};++n<i;){var l=n<o?r[n]:void 0;t(a,e[n],l)}return a}function jB(e,r){return OC(e||[],r||[],qo)}function qB(e,r){return OC(e||[],r||[],ia)}var KB=ce(function(e){var r=e.length,t=r>1?e[r-1]:void 0;return t=typeof t=="function"?(e.pop(),t):void 0,AC(e,t)}),ZB=KB,X={chunk:FA,compact:on,concat:Mr,difference:qf,differenceBy:FI,differenceWith:A1,drop:WI,dropRight:GI,dropRightWhile:UI,dropWhile:YI,fill:fM,findIndex:Mi,findLastIndex:z1,first:Bi,flatten:bg,flattenDeep:xM,flattenDepth:TM,fromPairs:kM,head:Bi,indexOf:U1,initial:l8,intersection:rc,intersectionBy:c8,intersectionWith:d8,join:f6,last:Ie,lastIndexOf:y6,nth:X6,pull:Z3,pullAll:hC,pullAllBy:Q3,pullAllWith:J3,pullAt:n5,remove:S5,reverse:xu,slice:G5,sortedIndex:t4,sortedIndexBy:r4,sortedIndexOf:n4,sortedLastIndex:i4,sortedLastIndexBy:o4,sortedLastIndexOf:a4,sortedUniq:l4,sortedUniqBy:s4,tail:_4,take:S4,takeRight:x4,takeRightWhile:T4,takeWhile:E4,union:mB,unionBy:_B,unionWith:xB,uniq:Rr,uniqBy:TB,uniqWith:EB,unzip:wc,unzipWith:AC,without:$B,xor:WB,xorBy:UB,xorWith:XB,zip:Fl,zipObject:jB,zipObjectDeep:qB,zipWith:ZB},Re={countBy:vI,each:te,eachRight:wv,every:ta,filter:qr,find:ct,findLast:Il,flatMap:yM,flatMapDeep:wM,flatMapDepth:_M,forEach:te,forEachRight:wv,groupBy:VM,includes:Tt,invokeMap:b8,keyBy:v6,map:de,orderBy:hc,partition:G3,reduce:Qi,reduceRight:w5,reject:_5,sample:B5,sampleSize:P5,shuffle:z5,size:Ci,some:CC,sortBy:j5},QB={now:Ma},Xe={after:G2,ary:Cg,before:Rg,bind:Og,bindKey:wL,curry:Yf,curryRight:Xf,debounce:No,defer:MI,delay:DI,flip:bM,memoize:si,negate:na,once:e3,overArgs:u3,partial:fC,partialRight:k3,rearg:y5,rest:b5,spread:h4,throttle:mc,unary:sB,wrap:PB},J={castArray:IA,clone:Qo,cloneDeep:pu,cloneDeepWith:wO,cloneWith:SO,conformsTo:aI,eq:Tr,gt:qM,gte:ZM,isArguments:ei,isArray:re,isArrayBuffer:O8,isArrayLike:zt,isArrayLikeObject:qe,isBoolean:Br,isBuffer:On,isDate:$8,isElement:P8,isEmpty:H,isEqual:at,isEqualWith:k8,isError:Af,isFinite:G8,isFunction:ft,isInteger:j1,isLength:xl,isMap:s1,isMatch:U8,isMatchWith:Y8,isNaN:q1,isNative:K8,isNil:rt,isNull:Z8,isNumber:Yt,isObject:Ae,isObjectLike:Ye,isPlainObject:Zo,isRegExp:nc,isSafeInteger:t6,isSet:u1,isString:Ki,isSymbol:Vt,isTypedArray:Vi,isUndefined:Pr,isWeakMap:n6,isWeakSet:o6,lt:x6,lte:E6,toArray:J1,toFinite:nn,toInteger:ue,toLength:P1,toNumber:Xt,toPlainObject:E1,toSafeInteger:Q4,toString:xe},Ot={add:D2,ceil:$A,divide:kI,floor:AM,max:Di,maxBy:ac,mean:I6,meanBy:M6,min:sc,minBy:F6,multiply:z6,round:I5,subtract:m4,sum:w4,sumBy:_C},Sc={clamp:el,inRange:yu,random:u5},ae={assign:Tg,assignIn:Zd,assignInWith:Ja,assignWith:yb,at:rL,create:pI,defaults:EI,defaultsDeep:RI,entries:_v,entriesIn:Sv,extend:Zd,extendWith:Ja,findKey:dM,findLastKey:CM,forIn:G1,forInRight:FM,forOwn:HM,forOwnRight:zM,functions:WM,functionsIn:GM,get:j,has:gi,hasIn:Po,invert:y8,invertBy:S8,invoke:T8,keys:me,keysIn:kt,mapKeys:K1,mapValues:b6,merge:$l,mergeWith:Vf,omit:fc,omitBy:J6,pick:cC,pickBy:cc,result:L5,set:Fo,setWith:N5,toPairs:_v,toPairsIn:Sv,transform:J4,unset:Eu,update:RB,updateWith:OB,values:Kr,valuesIn:BB},Zr={at:FB,chain:e1,commit:xO,lodash:_,next:Y6,plant:X3,reverse:zB,tap:b4,thru:oa,toIterator:q4,toJSON:xs,value:xs,valueOf:xs,wrapperChain:HB},Te={camelCase:OA,capitalize:Fg,deburr:Hg,endsWith:I1,escape:Zf,escapeRegExp:aM,kebabCase:h6,lowerCase:ic,lowerFirst:_6,pad:B3,padEnd:D3,padStart:$3,parseInt:F3,repeat:x5,replace:T5,snakeCase:Y5,split:mC,startCase:v4,startsWith:p4,template:U4,templateSettings:Tu,toLower:K4,toUpper:Ho,trim:eB,trimEnd:tB,trimStart:nB,truncate:lB,unescape:dB,upperCase:MB,upperFirst:If,words:Jg},Ee={attempt:Ag,bindAll:gL,cond:w1,conforms:oI,constant:xi,defaultTo:SI,flow:$M,flowRight:NM,identity:wt,iteratee:l6,matches:mu,matchesProperty:R6,method:$6,methodOf:N6,mixin:Q1,noop:ml,nthArg:V6,over:i3,overEvery:c3,overSome:d3,property:m1,propertyOf:V3,range:Ei,rangeRight:p5,stubArray:$f,stubFalse:Tf,stubObject:g4,stubString:C4,stubTrue:wC,times:j4,toPath:Z4,uniqueId:LB};function JB(){var e=new ve(this.__wrapped__);return e.__actions__=$t(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=$t(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=$t(this.__views__),e}function eD(){if(this.__filtered__){var e=new ve(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var tD=Math.max,rD=Math.min;function nD(e,r,t){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":r-=a;break;case"take":r=rD(r,e+a);break;case"takeRight":e=tD(e,r-a);break}}return{start:e,end:r}}var iD=1,oD=2,aD=Math.min;function lD(){var e=this.__wrapped__.value(),r=this.__dir__,t=re(e),n=r<0,i=t?e.length:0,o=nD(0,i,this.__views__),a=o.start,l=o.end,s=l-a,u=n?l:a-1,f=this.__iteratees__,c=f.length,h=0,d=aD(s,this.__takeCount__);if(!t||!n&&i==s&&d==s)return TC(e,this.__actions__);var v=[];e:for(;s--&&h<d;){u+=r;for(var p=-1,g=e[u];++p<c;){var C=f[p],y=C.iteratee,m=C.type,w=y(g);if(m==oD)g=w;else if(!w){if(m==iD)continue e;break e}}v[h++]=g}return v}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var sD="4.17.21",uD=2,fD=1,cD=3,IC=4294967295,hD=Array.prototype,dD=Object.prototype,MC=dD.hasOwnProperty,Mv=Ct?Ct.iterator:void 0,vD=Math.max,Bv=Math.min,xc=function(e){return function(r,t,n){if(n==null){var i=Ae(t),o=i&&me(t),a=o&&o.length&&Ml(t,o);(a?a.length:i)||(n=t,t=r,r=this)}return e(r,t,n)}}(Q1);_.after=Xe.after;_.ary=Xe.ary;_.assign=ae.assign;_.assignIn=ae.assignIn;_.assignInWith=ae.assignInWith;_.assignWith=ae.assignWith;_.at=ae.at;_.before=Xe.before;_.bind=Xe.bind;_.bindAll=Ee.bindAll;_.bindKey=Xe.bindKey;_.castArray=J.castArray;_.chain=Zr.chain;_.chunk=X.chunk;_.compact=X.compact;_.concat=X.concat;_.cond=Ee.cond;_.conforms=Ee.conforms;_.constant=Ee.constant;_.countBy=Re.countBy;_.create=ae.create;_.curry=Xe.curry;_.curryRight=Xe.curryRight;_.debounce=Xe.debounce;_.defaults=ae.defaults;_.defaultsDeep=ae.defaultsDeep;_.defer=Xe.defer;_.delay=Xe.delay;_.difference=X.difference;_.differenceBy=X.differenceBy;_.differenceWith=X.differenceWith;_.drop=X.drop;_.dropRight=X.dropRight;_.dropRightWhile=X.dropRightWhile;_.dropWhile=X.dropWhile;_.fill=X.fill;_.filter=Re.filter;_.flatMap=Re.flatMap;_.flatMapDeep=Re.flatMapDeep;_.flatMapDepth=Re.flatMapDepth;_.flatten=X.flatten;_.flattenDeep=X.flattenDeep;_.flattenDepth=X.flattenDepth;_.flip=Xe.flip;_.flow=Ee.flow;_.flowRight=Ee.flowRight;_.fromPairs=X.fromPairs;_.functions=ae.functions;_.functionsIn=ae.functionsIn;_.groupBy=Re.groupBy;_.initial=X.initial;_.intersection=X.intersection;_.intersectionBy=X.intersectionBy;_.intersectionWith=X.intersectionWith;_.invert=ae.invert;_.invertBy=ae.invertBy;_.invokeMap=Re.invokeMap;_.iteratee=Ee.iteratee;_.keyBy=Re.keyBy;_.keys=me;_.keysIn=ae.keysIn;_.map=Re.map;_.mapKeys=ae.mapKeys;_.mapValues=ae.mapValues;_.matches=Ee.matches;_.matchesProperty=Ee.matchesProperty;_.memoize=Xe.memoize;_.merge=ae.merge;_.mergeWith=ae.mergeWith;_.method=Ee.method;_.methodOf=Ee.methodOf;_.mixin=xc;_.negate=na;_.nthArg=Ee.nthArg;_.omit=ae.omit;_.omitBy=ae.omitBy;_.once=Xe.once;_.orderBy=Re.orderBy;_.over=Ee.over;_.overArgs=Xe.overArgs;_.overEvery=Ee.overEvery;_.overSome=Ee.overSome;_.partial=Xe.partial;_.partialRight=Xe.partialRight;_.partition=Re.partition;_.pick=ae.pick;_.pickBy=ae.pickBy;_.property=Ee.property;_.propertyOf=Ee.propertyOf;_.pull=X.pull;_.pullAll=X.pullAll;_.pullAllBy=X.pullAllBy;_.pullAllWith=X.pullAllWith;_.pullAt=X.pullAt;_.range=Ee.range;_.rangeRight=Ee.rangeRight;_.rearg=Xe.rearg;_.reject=Re.reject;_.remove=X.remove;_.rest=Xe.rest;_.reverse=X.reverse;_.sampleSize=Re.sampleSize;_.set=ae.set;_.setWith=ae.setWith;_.shuffle=Re.shuffle;_.slice=X.slice;_.sortBy=Re.sortBy;_.sortedUniq=X.sortedUniq;_.sortedUniqBy=X.sortedUniqBy;_.split=Te.split;_.spread=Xe.spread;_.tail=X.tail;_.take=X.take;_.takeRight=X.takeRight;_.takeRightWhile=X.takeRightWhile;_.takeWhile=X.takeWhile;_.tap=Zr.tap;_.throttle=Xe.throttle;_.thru=oa;_.toArray=J.toArray;_.toPairs=ae.toPairs;_.toPairsIn=ae.toPairsIn;_.toPath=Ee.toPath;_.toPlainObject=J.toPlainObject;_.transform=ae.transform;_.unary=Xe.unary;_.union=X.union;_.unionBy=X.unionBy;_.unionWith=X.unionWith;_.uniq=X.uniq;_.uniqBy=X.uniqBy;_.uniqWith=X.uniqWith;_.unset=ae.unset;_.unzip=X.unzip;_.unzipWith=X.unzipWith;_.update=ae.update;_.updateWith=ae.updateWith;_.values=ae.values;_.valuesIn=ae.valuesIn;_.without=X.without;_.words=Te.words;_.wrap=Xe.wrap;_.xor=X.xor;_.xorBy=X.xorBy;_.xorWith=X.xorWith;_.zip=X.zip;_.zipObject=X.zipObject;_.zipObjectDeep=X.zipObjectDeep;_.zipWith=X.zipWith;_.entries=ae.toPairs;_.entriesIn=ae.toPairsIn;_.extend=ae.assignIn;_.extendWith=ae.assignInWith;xc(_,_);_.add=Ot.add;_.attempt=Ee.attempt;_.camelCase=Te.camelCase;_.capitalize=Te.capitalize;_.ceil=Ot.ceil;_.clamp=Sc.clamp;_.clone=J.clone;_.cloneDeep=J.cloneDeep;_.cloneDeepWith=J.cloneDeepWith;_.cloneWith=J.cloneWith;_.conformsTo=J.conformsTo;_.deburr=Te.deburr;_.defaultTo=Ee.defaultTo;_.divide=Ot.divide;_.endsWith=Te.endsWith;_.eq=J.eq;_.escape=Te.escape;_.escapeRegExp=Te.escapeRegExp;_.every=Re.every;_.find=Re.find;_.findIndex=X.findIndex;_.findKey=ae.findKey;_.findLast=Re.findLast;_.findLastIndex=X.findLastIndex;_.findLastKey=ae.findLastKey;_.floor=Ot.floor;_.forEach=Re.forEach;_.forEachRight=Re.forEachRight;_.forIn=ae.forIn;_.forInRight=ae.forInRight;_.forOwn=ae.forOwn;_.forOwnRight=ae.forOwnRight;_.get=ae.get;_.gt=J.gt;_.gte=J.gte;_.has=ae.has;_.hasIn=ae.hasIn;_.head=X.head;_.identity=wt;_.includes=Re.includes;_.indexOf=X.indexOf;_.inRange=Sc.inRange;_.invoke=ae.invoke;_.isArguments=J.isArguments;_.isArray=re;_.isArrayBuffer=J.isArrayBuffer;_.isArrayLike=J.isArrayLike;_.isArrayLikeObject=J.isArrayLikeObject;_.isBoolean=J.isBoolean;_.isBuffer=J.isBuffer;_.isDate=J.isDate;_.isElement=J.isElement;_.isEmpty=J.isEmpty;_.isEqual=J.isEqual;_.isEqualWith=J.isEqualWith;_.isError=J.isError;_.isFinite=J.isFinite;_.isFunction=J.isFunction;_.isInteger=J.isInteger;_.isLength=J.isLength;_.isMap=J.isMap;_.isMatch=J.isMatch;_.isMatchWith=J.isMatchWith;_.isNaN=J.isNaN;_.isNative=J.isNative;_.isNil=J.isNil;_.isNull=J.isNull;_.isNumber=J.isNumber;_.isObject=Ae;_.isObjectLike=J.isObjectLike;_.isPlainObject=J.isPlainObject;_.isRegExp=J.isRegExp;_.isSafeInteger=J.isSafeInteger;_.isSet=J.isSet;_.isString=J.isString;_.isSymbol=J.isSymbol;_.isTypedArray=J.isTypedArray;_.isUndefined=J.isUndefined;_.isWeakMap=J.isWeakMap;_.isWeakSet=J.isWeakSet;_.join=X.join;_.kebabCase=Te.kebabCase;_.last=Ie;_.lastIndexOf=X.lastIndexOf;_.lowerCase=Te.lowerCase;_.lowerFirst=Te.lowerFirst;_.lt=J.lt;_.lte=J.lte;_.max=Ot.max;_.maxBy=Ot.maxBy;_.mean=Ot.mean;_.meanBy=Ot.meanBy;_.min=Ot.min;_.minBy=Ot.minBy;_.stubArray=Ee.stubArray;_.stubFalse=Ee.stubFalse;_.stubObject=Ee.stubObject;_.stubString=Ee.stubString;_.stubTrue=Ee.stubTrue;_.multiply=Ot.multiply;_.nth=X.nth;_.noop=Ee.noop;_.now=QB.now;_.pad=Te.pad;_.padEnd=Te.padEnd;_.padStart=Te.padStart;_.parseInt=Te.parseInt;_.random=Sc.random;_.reduce=Re.reduce;_.reduceRight=Re.reduceRight;_.repeat=Te.repeat;_.replace=Te.replace;_.result=ae.result;_.round=Ot.round;_.sample=Re.sample;_.size=Re.size;_.snakeCase=Te.snakeCase;_.some=Re.some;_.sortedIndex=X.sortedIndex;_.sortedIndexBy=X.sortedIndexBy;_.sortedIndexOf=X.sortedIndexOf;_.sortedLastIndex=X.sortedLastIndex;_.sortedLastIndexBy=X.sortedLastIndexBy;_.sortedLastIndexOf=X.sortedLastIndexOf;_.startCase=Te.startCase;_.startsWith=Te.startsWith;_.subtract=Ot.subtract;_.sum=Ot.sum;_.sumBy=Ot.sumBy;_.template=Te.template;_.times=Ee.times;_.toFinite=J.toFinite;_.toInteger=ue;_.toLength=J.toLength;_.toLower=Te.toLower;_.toNumber=J.toNumber;_.toSafeInteger=J.toSafeInteger;_.toString=J.toString;_.toUpper=Te.toUpper;_.trim=Te.trim;_.trimEnd=Te.trimEnd;_.trimStart=Te.trimStart;_.truncate=Te.truncate;_.unescape=Te.unescape;_.uniqueId=Ee.uniqueId;_.upperCase=Te.upperCase;_.upperFirst=Te.upperFirst;_.each=Re.forEach;_.eachRight=Re.forEachRight;_.first=X.head;xc(_,function(){var e={};return Vr(_,function(r,t){MC.call(_.prototype,t)||(e[t]=r)}),e}(),{chain:!1});_.VERSION=sD;(_.templateSettings=Te.templateSettings).imports._=_;ur(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){_[e].placeholder=_});ur(["drop","take"],function(e,r){ve.prototype[e]=function(t){t=t===void 0?1:vD(ue(t),0);var n=this.__filtered__&&!r?new ve(this):this.clone();return n.__filtered__?n.__takeCount__=Bv(t,n.__takeCount__):n.__views__.push({size:Bv(t,IC),type:e+(n.__dir__<0?"Right":"")}),n},ve.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}});ur(["filter","map","takeWhile"],function(e,r){var t=r+1,n=t==fD||t==cD;ve.prototype[e]=function(i){var o=this.clone();return o.__iteratees__.push({iteratee:se(i),type:t}),o.__filtered__=o.__filtered__||n,o}});ur(["head","last"],function(e,r){var t="take"+(r?"Right":"");ve.prototype[e]=function(){return this[t](1).value()[0]}});ur(["initial","tail"],function(e,r){var t="drop"+(r?"":"Right");ve.prototype[e]=function(){return this.__filtered__?new ve(this):this[t](1)}});ve.prototype.compact=function(){return this.filter(wt)};ve.prototype.find=function(e){return this.filter(e).head()};ve.prototype.findLast=function(e){return this.reverse().find(e)};ve.prototype.invokeMap=ce(function(e,r){return typeof e=="function"?new ve(this):this.map(function(t){return ra(t,e,r)})});ve.prototype.reject=function(e){return this.filter(na(se(e)))};ve.prototype.slice=function(e,r){e=ue(e);var t=this;return t.__filtered__&&(e>0||r<0)?new ve(t):(e<0?t=t.takeRight(-e):e&&(t=t.drop(e)),r!==void 0&&(r=ue(r),t=r<0?t.dropRight(-r):t.take(r-e)),t)};ve.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};ve.prototype.toArray=function(){return this.take(IC)};Vr(ve.prototype,function(e,r){var t=/^(?:filter|find|map|reject)|While$/.test(r),n=/^(?:head|last)$/.test(r),i=_[n?"take"+(r=="last"?"Right":""):r],o=n||/^find/.test(r);i&&(_.prototype[r]=function(){var a=this.__wrapped__,l=n?[1]:arguments,s=a instanceof ve,u=l[0],f=s||re(a),c=function(C){var y=i.apply(_,Dn([C],l));return n&&h?y[0]:y};f&&t&&typeof u=="function"&&u.length!=1&&(s=f=!1);var h=this.__chain__,d=!!this.__actions__.length,v=o&&!h,p=s&&!d;if(!o&&f){a=p?a:new ve(this);var g=e.apply(a,l);return g.__actions__.push({func:oa,args:[c],thisArg:void 0}),new ar(g,h)}return v&&p?e.apply(this,l):(g=this.thru(c),v?n?g.value()[0]:g.value():g)})});ur(["pop","push","shift","sort","splice","unshift"],function(e){var r=hD[e],t=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);_.prototype[e]=function(){var i=arguments;if(n&&!this.__chain__){var o=this.value();return r.apply(re(o)?o:[],i)}return this[t](function(a){return r.apply(re(a)?a:[],i)})}});Vr(ve.prototype,function(e,r){var t=_[r];if(t){var n=t.name+"";MC.call(Si,n)||(Si[n]=[]),Si[n].push({name:r,func:t})}});Si[Sl(void 0,uD).name]=[{name:"wrapper",func:void 0}];ve.prototype.clone=JB;ve.prototype.reverse=eD;ve.prototype.value=lD;_.prototype.at=Zr.at;_.prototype.chain=Zr.wrapperChain;_.prototype.commit=Zr.commit;_.prototype.next=Zr.next;_.prototype.plant=Zr.plant;_.prototype.reverse=Zr.reverse;_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=Zr.value;_.prototype.first=_.prototype.head;Mv&&(_.prototype[Mv]=Zr.toIterator);var BC={exports:{}};(function(e){(function(r){var t=/^\s+/,n=/\s+$/,i=0,o=r.round,a=r.min,l=r.max,s=r.random;function u(x,R){if(x=x||"",R=R||{},x instanceof u)return x;if(!(this instanceof u))return new u(x,R);var E=f(x);this._originalInput=x,this._r=E.r,this._g=E.g,this._b=E.b,this._a=E.a,this._roundA=o(100*this._a)/100,this._format=R.format||E.format,this._gradientType=R.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=E.ok,this._tc_id=i++}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var x=this.toRgb();return(x.r*299+x.g*587+x.b*114)/1e3},getLuminance:function(){var x=this.toRgb(),R,E,F,Y,G,Se;return R=x.r/255,E=x.g/255,F=x.b/255,R<=.03928?Y=R/12.92:Y=r.pow((R+.055)/1.055,2.4),E<=.03928?G=E/12.92:G=r.pow((E+.055)/1.055,2.4),F<=.03928?Se=F/12.92:Se=r.pow((F+.055)/1.055,2.4),.2126*Y+.7152*G+.0722*Se},setAlpha:function(x){return this._a=Me(x),this._roundA=o(100*this._a)/100,this},toHsv:function(){var x=v(this._r,this._g,this._b);return{h:x.h*360,s:x.s,v:x.v,a:this._a}},toHsvString:function(){var x=v(this._r,this._g,this._b),R=o(x.h*360),E=o(x.s*100),F=o(x.v*100);return this._a==1?"hsv("+R+", "+E+"%, "+F+"%)":"hsva("+R+", "+E+"%, "+F+"%, "+this._roundA+")"},toHsl:function(){var x=h(this._r,this._g,this._b);return{h:x.h*360,s:x.s,l:x.l,a:this._a}},toHslString:function(){var x=h(this._r,this._g,this._b),R=o(x.h*360),E=o(x.s*100),F=o(x.l*100);return this._a==1?"hsl("+R+", "+E+"%, "+F+"%)":"hsla("+R+", "+E+"%, "+F+"%, "+this._roundA+")"},toHex:function(x){return g(this._r,this._g,this._b,x)},toHexString:function(x){return"#"+this.toHex(x)},toHex8:function(x){return C(this._r,this._g,this._b,this._a,x)},toHex8String:function(x){return"#"+this.toHex8(x)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(ne(this._r,255)*100)+"%",g:o(ne(this._g,255)*100)+"%",b:o(ne(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+o(ne(this._r,255)*100)+"%, "+o(ne(this._g,255)*100)+"%, "+o(ne(this._b,255)*100)+"%)":"rgba("+o(ne(this._r,255)*100)+"%, "+o(ne(this._g,255)*100)+"%, "+o(ne(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:pe[g(this._r,this._g,this._b,!0)]||!1},toFilter:function(x){var R="#"+y(this._r,this._g,this._b,this._a),E=R,F=this._gradientType?"GradientType = 1, ":"";if(x){var Y=u(x);E="#"+y(Y._r,Y._g,Y._b,Y._a)}return"progid:DXImageTransform.Microsoft.gradient("+F+"startColorstr="+R+",endColorstr="+E+")"},toString:function(x){var R=!!x;x=x||this._format;var E=!1,F=this._a<1&&this._a>=0,Y=!R&&F&&(x==="hex"||x==="hex6"||x==="hex3"||x==="hex4"||x==="hex8"||x==="name");return Y?x==="name"&&this._a===0?this.toName():this.toRgbString():(x==="rgb"&&(E=this.toRgbString()),x==="prgb"&&(E=this.toPercentageRgbString()),(x==="hex"||x==="hex6")&&(E=this.toHexString()),x==="hex3"&&(E=this.toHexString(!0)),x==="hex4"&&(E=this.toHex8String(!0)),x==="hex8"&&(E=this.toHex8String()),x==="name"&&(E=this.toName()),x==="hsl"&&(E=this.toHslString()),x==="hsv"&&(E=this.toHsvString()),E||this.toHexString())},clone:function(){return u(this.toString())},_applyModification:function(x,R){var E=x.apply(null,[this].concat([].slice.call(R)));return this._r=E._r,this._g=E._g,this._b=E._b,this.setAlpha(E._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(O,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(w,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(B,arguments)},_applyCombination:function(x,R){return x.apply(null,[this].concat([].slice.call(R)))},analogous:function(){return this._applyCombination(U,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(V,arguments)},splitcomplement:function(){return this._applyCombination(W,arguments)},triad:function(){return this._applyCombination(D,arguments)},tetrad:function(){return this._applyCombination(z,arguments)}},u.fromRatio=function(x,R){if(typeof x=="object"){var E={};for(var F in x)x.hasOwnProperty(F)&&(F==="a"?E[F]=x[F]:E[F]=$e(x[F]));x=E}return u(x,R)};function f(x){var R={r:0,g:0,b:0},E=1,F=null,Y=null,G=null,Se=!1,Ge=!1;return typeof x=="string"&&(x=ts(x)),typeof x=="object"&&(cr(x.r)&&cr(x.g)&&cr(x.b)?(R=c(x.r,x.g,x.b),Se=!0,Ge=String(x.r).substr(-1)==="%"?"prgb":"rgb"):cr(x.h)&&cr(x.s)&&cr(x.v)?(F=$e(x.s),Y=$e(x.v),R=p(x.h,F,Y),Se=!0,Ge="hsv"):cr(x.h)&&cr(x.s)&&cr(x.l)&&(F=$e(x.s),G=$e(x.l),R=d(x.h,F,G),Se=!0,Ge="hsl"),x.hasOwnProperty("a")&&(E=x.a)),E=Me(E),{ok:Se,format:x.format||Ge,r:a(255,l(R.r,0)),g:a(255,l(R.g,0)),b:a(255,l(R.b,0)),a:E}}function c(x,R,E){return{r:ne(x,255)*255,g:ne(R,255)*255,b:ne(E,255)*255}}function h(x,R,E){x=ne(x,255),R=ne(R,255),E=ne(E,255);var F=l(x,R,E),Y=a(x,R,E),G,Se,Ge=(F+Y)/2;if(F==Y)G=Se=0;else{var Ve=F-Y;switch(Se=Ge>.5?Ve/(2-F-Y):Ve/(F+Y),F){case x:G=(R-E)/Ve+(R<E?6:0);break;case R:G=(E-x)/Ve+2;break;case E:G=(x-R)/Ve+4;break}G/=6}return{h:G,s:Se,l:Ge}}function d(x,R,E){var F,Y,G;x=ne(x,360),R=ne(R,100),E=ne(E,100);function Se(Jt,ro,hr){return hr<0&&(hr+=1),hr>1&&(hr-=1),hr<1/6?Jt+(ro-Jt)*6*hr:hr<1/2?ro:hr<2/3?Jt+(ro-Jt)*(2/3-hr)*6:Jt}if(R===0)F=Y=G=E;else{var Ge=E<.5?E*(1+R):E+R-E*R,Ve=2*E-Ge;F=Se(Ve,Ge,x+1/3),Y=Se(Ve,Ge,x),G=Se(Ve,Ge,x-1/3)}return{r:F*255,g:Y*255,b:G*255}}function v(x,R,E){x=ne(x,255),R=ne(R,255),E=ne(E,255);var F=l(x,R,E),Y=a(x,R,E),G,Se,Ge=F,Ve=F-Y;if(Se=F===0?0:Ve/F,F==Y)G=0;else{switch(F){case x:G=(R-E)/Ve+(R<E?6:0);break;case R:G=(E-x)/Ve+2;break;case E:G=(x-R)/Ve+4;break}G/=6}return{h:G,s:Se,v:Ge}}function p(x,R,E){x=ne(x,360)*6,R=ne(R,100),E=ne(E,100);var F=r.floor(x),Y=x-F,G=E*(1-R),Se=E*(1-Y*R),Ge=E*(1-(1-Y)*R),Ve=F%6,Jt=[E,Se,G,G,Ge,E][Ve],ro=[Ge,E,E,Se,G,G][Ve],hr=[G,G,Ge,E,E,Se][Ve];return{r:Jt*255,g:ro*255,b:hr*255}}function g(x,R,E,F){var Y=[_e(o(x).toString(16)),_e(o(R).toString(16)),_e(o(E).toString(16))];return F&&Y[0].charAt(0)==Y[0].charAt(1)&&Y[1].charAt(0)==Y[1].charAt(1)&&Y[2].charAt(0)==Y[2].charAt(1)?Y[0].charAt(0)+Y[1].charAt(0)+Y[2].charAt(0):Y.join("")}function C(x,R,E,F,Y){var G=[_e(o(x).toString(16)),_e(o(R).toString(16)),_e(o(E).toString(16)),_e(fr(F))];return Y&&G[0].charAt(0)==G[0].charAt(1)&&G[1].charAt(0)==G[1].charAt(1)&&G[2].charAt(0)==G[2].charAt(1)&&G[3].charAt(0)==G[3].charAt(1)?G[0].charAt(0)+G[1].charAt(0)+G[2].charAt(0)+G[3].charAt(0):G.join("")}function y(x,R,E,F){var Y=[_e(fr(F)),_e(o(x).toString(16)),_e(o(R).toString(16)),_e(o(E).toString(16))];return Y.join("")}u.equals=function(x,R){return!x||!R?!1:u(x).toRgbString()==u(R).toRgbString()},u.random=function(){return u.fromRatio({r:s(),g:s(),b:s()})};function m(x,R){R=R===0?0:R||10;var E=u(x).toHsl();return E.s-=R/100,E.s=Fe(E.s),u(E)}function w(x,R){R=R===0?0:R||10;var E=u(x).toHsl();return E.s+=R/100,E.s=Fe(E.s),u(E)}function S(x){return u(x).desaturate(100)}function b(x,R){R=R===0?0:R||10;var E=u(x).toHsl();return E.l+=R/100,E.l=Fe(E.l),u(E)}function A(x,R){R=R===0?0:R||10;var E=u(x).toRgb();return E.r=l(0,a(255,E.r-o(255*-(R/100)))),E.g=l(0,a(255,E.g-o(255*-(R/100)))),E.b=l(0,a(255,E.b-o(255*-(R/100)))),u(E)}function O(x,R){R=R===0?0:R||10;var E=u(x).toHsl();return E.l-=R/100,E.l=Fe(E.l),u(E)}function B(x,R){var E=u(x).toHsl(),F=(E.h+R)%360;return E.h=F<0?360+F:F,u(E)}function P(x){var R=u(x).toHsl();return R.h=(R.h+180)%360,u(R)}function D(x){var R=u(x).toHsl(),E=R.h;return[u(x),u({h:(E+120)%360,s:R.s,l:R.l}),u({h:(E+240)%360,s:R.s,l:R.l})]}function z(x){var R=u(x).toHsl(),E=R.h;return[u(x),u({h:(E+90)%360,s:R.s,l:R.l}),u({h:(E+180)%360,s:R.s,l:R.l}),u({h:(E+270)%360,s:R.s,l:R.l})]}function W(x){var R=u(x).toHsl(),E=R.h;return[u(x),u({h:(E+72)%360,s:R.s,l:R.l}),u({h:(E+216)%360,s:R.s,l:R.l})]}function U(x,R,E){R=R||6,E=E||30;var F=u(x).toHsl(),Y=360/E,G=[u(x)];for(F.h=(F.h-(Y*R>>1)+720)%360;--R;)F.h=(F.h+Y)%360,G.push(u(F));return G}function V(x,R){R=R||6;for(var E=u(x).toHsv(),F=E.h,Y=E.s,G=E.v,Se=[],Ge=1/R;R--;)Se.push(u({h:F,s:Y,v:G})),G=(G+Ge)%1;return Se}u.mix=function(x,R,E){E=E===0?0:E||50;var F=u(x).toRgb(),Y=u(R).toRgb(),G=E/100,Se={r:(Y.r-F.r)*G+F.r,g:(Y.g-F.g)*G+F.g,b:(Y.b-F.b)*G+F.b,a:(Y.a-F.a)*G+F.a};return u(Se)},u.readability=function(x,R){var E=u(x),F=u(R);return(r.max(E.getLuminance(),F.getLuminance())+.05)/(r.min(E.getLuminance(),F.getLuminance())+.05)},u.isReadable=function(x,R,E){var F=u.readability(x,R),Y,G;switch(G=!1,Y=Dm(E),Y.level+Y.size){case"AAsmall":case"AAAlarge":G=F>=4.5;break;case"AAlarge":G=F>=3;break;case"AAAsmall":G=F>=7;break}return G},u.mostReadable=function(x,R,E){var F=null,Y=0,G,Se,Ge,Ve;E=E||{},Se=E.includeFallbackColors,Ge=E.level,Ve=E.size;for(var Jt=0;Jt<R.length;Jt++)G=u.readability(x,R[Jt]),G>Y&&(Y=G,F=u(R[Jt]));return u.isReadable(x,F,{level:Ge,size:Ve})||!Se?F:(E.includeFallbackColors=!1,u.mostReadable(x,["#fff","#000"],E))};var k=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pe=u.hexNames=he(k);function he(x){var R={};for(var E in x)x.hasOwnProperty(E)&&(R[x[E]]=E);return R}function Me(x){return x=parseFloat(x),(isNaN(x)||x<0||x>1)&&(x=1),x}function ne(x,R){Wt(x)&&(x="100%");var E=Qe(x);return x=a(R,l(0,parseFloat(x))),E&&(x=parseInt(x*R,10)/100),r.abs(x-R)<1e-6?1:x%R/parseFloat(R)}function Fe(x){return a(1,l(0,x))}function we(x){return parseInt(x,16)}function Wt(x){return typeof x=="string"&&x.indexOf(".")!=-1&&parseFloat(x)===1}function Qe(x){return typeof x=="string"&&x.indexOf("%")!=-1}function _e(x){return x.length==1?"0"+x:""+x}function $e(x){return x<=1&&(x=x*100+"%"),x}function fr(x){return r.round(parseFloat(x)*255).toString(16)}function Qt(x){return we(x)/255}var dt=function(){var x="[-\\+]?\\d+%?",R="[-\\+]?\\d*\\.\\d+%?",E="(?:"+R+")|(?:"+x+")",F="[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?",Y="[\\s|\\(]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")[,|\\s]+("+E+")\\s*\\)?";return{CSS_UNIT:new RegExp(E),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+Y),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+Y),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+Y),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function cr(x){return!!dt.CSS_UNIT.exec(x)}function ts(x){x=x.replace(t,"").replace(n,"").toLowerCase();var R=!1;if(k[x])x=k[x],R=!0;else if(x=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var E;return(E=dt.rgb.exec(x))?{r:E[1],g:E[2],b:E[3]}:(E=dt.rgba.exec(x))?{r:E[1],g:E[2],b:E[3],a:E[4]}:(E=dt.hsl.exec(x))?{h:E[1],s:E[2],l:E[3]}:(E=dt.hsla.exec(x))?{h:E[1],s:E[2],l:E[3],a:E[4]}:(E=dt.hsv.exec(x))?{h:E[1],s:E[2],v:E[3]}:(E=dt.hsva.exec(x))?{h:E[1],s:E[2],v:E[3],a:E[4]}:(E=dt.hex8.exec(x))?{r:we(E[1]),g:we(E[2]),b:we(E[3]),a:Qt(E[4]),format:R?"name":"hex8"}:(E=dt.hex6.exec(x))?{r:we(E[1]),g:we(E[2]),b:we(E[3]),format:R?"name":"hex"}:(E=dt.hex4.exec(x))?{r:we(E[1]+""+E[1]),g:we(E[2]+""+E[2]),b:we(E[3]+""+E[3]),a:Qt(E[4]+""+E[4]),format:R?"name":"hex8"}:(E=dt.hex3.exec(x))?{r:we(E[1]+""+E[1]),g:we(E[2]+""+E[2]),b:we(E[3]+""+E[3]),format:R?"name":"hex"}:!1}function Dm(x){var R,E;return x=x||{level:"AA",size:"small"},R=(x.level||"AA").toUpperCase(),E=(x.size||"small").toLowerCase(),R!=="AA"&&R!=="AAA"&&(R="AA"),E!=="small"&&E!=="large"&&(E="small"),{level:R,size:E}}e.exports?e.exports=u:window.tinycolor=u})(Math)})(BC);var DC=BC.exports,pD="#FFFFFF",gD="#000000",CD=[95,85,75,30,15,0,15,30,45,60,80],yD=15,$C=function(e){return DC(e).getLuminance()<=.5},mD=[{fontColorIndex:0,bgColorIndex:3},{fontColorIndex:13,bgColorIndex:8},{fontColorIndex:14,bgColorIndex:1}],wD=function(e){for(var r=[],t=0;t<11;t++){var n=CD[t];r.push(Ho(n===0?e:DC.mix(e,t<5?pD:gD,n).toHexString()))}return r},Tc=function(e){e===void 0&&(e={});var r=Array.from(Array(yD)).fill(ou),t=e.basicColorRelations,n=t===void 0?[]:t,i=e.brandColor,o=wD(i);return n.forEach(function(a){r[a.basicColorIndex]=o[a.standardColorIndex]}),mD.forEach(function(a){var l=a.fontColorIndex,s=a.bgColorIndex;r[l]=$C(r[s])?ou:eg}),L(L({},e),{basicColors:r})},_D={brandColor:"#3471F9",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:5},{basicColorIndex:4,standardColorIndex:6},{basicColorIndex:5,standardColorIndex:6},{basicColorIndex:6,standardColorIndex:6},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:4},{basicColorIndex:11,standardColorIndex:4},{basicColorIndex:12,standardColorIndex:5}]},SD=Tc(_D),xD={brandColor:"#326EF4",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:5},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:5},{basicColorIndex:12,standardColorIndex:5}]},TD=Tc(xD),ED={brandColor:"#9DA7B6",semanticColors:{red:"#FF4D4F",green:"#29A294",yellow:"#FAAD14"},others:{highlight:"#87B5FF",results:"#F0F7FF"},basicColorRelations:[{basicColorIndex:1,standardColorIndex:0},{basicColorIndex:2,standardColorIndex:1},{basicColorIndex:3,standardColorIndex:1},{basicColorIndex:4,standardColorIndex:2},{basicColorIndex:5,standardColorIndex:7},{basicColorIndex:6,standardColorIndex:8},{basicColorIndex:7,standardColorIndex:5},{basicColorIndex:9,standardColorIndex:1},{basicColorIndex:10,standardColorIndex:2},{basicColorIndex:11,standardColorIndex:3},{basicColorIndex:12,standardColorIndex:3}]},bD=Tc(ED),LD={default:TD,colorful:SD,gray:bD},dr="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif",AD=12,RD={小计:"小计",总计:"总计",总和:"总和",项:"项",已选择:"已选择",序号:"序号",度量:"度量",数值:"数值",共计:"共计",条:"条",趋势:"趋势",隐藏:"隐藏",组内升序:"组内升序",升序:"升序",降序:"降序",组内降序:"组内降序",不排序:"不排序"},OD={小计:"Total",总计:"Total",总和:"SUM",项:"items",已选择:"selected",序号:"Index",度量:"Measure",数值:"Measure",共计:"Total",条:"",隐藏:"Hide",趋势:"Trend",组内升序:"Group ASC",组内降序:"Group DESC",升序:"ASC",降序:"DESC",不排序:"No order"},ID="zh_CN",MD=ID,bu={zh_CN:RD,en_US:OD},BD=function(e){bu=$l({},bu,e)},ke=function(e,r){return r===void 0&&(r=e),j(bu,[MD,e],r)},pn="".concat(yf,"-tooltip"),Ec="".concat(pn,"-container"),DD="".concat(Ec,"-show"),$D="".concat(Ec,"-hide"),Dv={x:15,y:10},PD=function(){return{key:"hiddenColumns",text:ke("隐藏"),icon:"EyeOutlined"}},ND=function(){return{key:"trend",text:ke("趋势"),icon:"Trend"}},FD=function(){return[{key:"asc",icon:"groupAsc",text:ke("组内升序")},{key:"desc",icon:"groupDesc",text:ke("组内降序")},{key:"none",text:ke("不排序")}]},HD=function(){return[{key:"asc",icon:"groupAsc",text:ke("升序")},{key:"desc",icon:"groupDesc",text:ke("降序")},{key:"none",text:ke("不排序")}]},$v;(function(e){e[e.ALL=0]="ALL",e[e.COL=1]="COL",e[e.ROW=2]="ROW"})($v||($v={}));var Lu=1;function nt(e){return e==="mobile"?!0:/(iPhone|iPad|SymbianOS|Windows Phone|iPod|iOS|Android)/i.test(navigator.userAgent)}function zD(){return/iPhone/gi.test(navigator.userAgent)&&window.screen.height===812&&window.screen.width===375}function PC(){return/windows/i.test(navigator.userAgent)}var kD=function(e){var r=e||"default";return LD[r.toLowerCase()]},WD=function(e){var r,t,n,i,o,a=(e==null?void 0:e.palette)||kD(e==null?void 0:e.name),l=a.basicColors,s=a.semanticColors,u=a.others,f=(r=e==null?void 0:e.spreadsheet)===null||r===void 0?void 0:r.isTableMode(),c=PC()?"bold":700,h=function(){var d,v;return{bolderText:{fontFamily:dr,fontSize:12,fontWeight:c,fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},text:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[13],opacity:1,textAlign:"right",textBaseline:"middle",linkTextFill:l[6]},cell:{crossBackgroundColor:l[1],backgroundColor:l[8],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:8,right:8,bottom:8,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},hoverFocus:{backgroundColor:l[2],backgroundOpacity:.6,borderColor:l[14],borderWidth:1,borderOpacity:1},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},searchResult:{backgroundColor:(d=u==null?void 0:u.results)!==null&&d!==void 0?d:l[2],backgroundOpacity:1},highlight:{backgroundColor:(v=u==null?void 0:u.highlight)!==null&&v!==void 0?v:l[6],backgroundOpacity:1},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1}}},miniChart:{line:{point:{size:2.2,fill:l[6],opacity:1},linkLine:{size:1.5,fill:l[6],opacity:.6}},bar:{intervalPadding:4,fill:l[6],opacity:1},bullet:{progressBar:{widthPercent:.6,height:10,innerHeight:6},comparativeMeasure:{width:1,height:12,fill:l[13],opacity:.25},rangeColors:{good:s==null?void 0:s.green,satisfactory:s.yellow,bad:s.red},backgroundColor:"#E9E9E9"},interval:{height:AD,fill:l[7]}},icon:{fill:l[13],downIconColor:s.red,upIconColor:s.green,size:10,margin:{right:4,left:4}}}};return{cornerCell:{bolderText:{fontFamily:dr,fontSize:12,fontWeight:c,fill:l[0],opacity:1,textAlign:f?"center":"left",textBaseline:"middle"},text:{fontFamily:dr,fontSize:12,fontWeight:c,fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8}},icon:{fill:l[0],size:10,margin:{right:4,left:4}}},rowCell:{seriesText:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"middle",textAlign:"center"},measureText:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textAlign:f?"center":"left",textBaseline:"top"},bolderText:{fontFamily:dr,fontSize:12,fontWeight:c,fill:l[14],linkTextFill:l[6],opacity:1,textAlign:f?"center":"left",textBaseline:"top"},text:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[14],linkTextFill:l[6],opacity:1,textBaseline:"top",textAlign:f?"center":"left"},cell:{backgroundColor:l[1],backgroundColorOpacity:1,horizontalBorderColor:l[9],horizontalBorderColorOpacity:1,verticalBorderColor:l[9],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[2],backgroundOpacity:.6},selected:{backgroundColor:l[2],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(t=u==null?void 0:u.results)!==null&&t!==void 0?t:l[2],backgroundOpacity:1},highlight:{backgroundColor:(n=u==null?void 0:u.highlight)!==null&&n!==void 0?n:l[6],backgroundOpacity:1}}},icon:{fill:l[14],size:10,margin:{right:4,left:4}},seriesNumberWidth:80},colCell:{measureText:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"right",textBaseline:"middle"},bolderText:{fontFamily:dr,fontSize:12,fontWeight:c,fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},text:{fontFamily:dr,fontSize:12,fontWeight:"normal",fill:l[0],opacity:1,textAlign:"center",textBaseline:"middle"},cell:{backgroundColor:l[3],backgroundColorOpacity:1,horizontalBorderColor:l[10],horizontalBorderColorOpacity:1,verticalBorderColor:l[10],verticalBorderColorOpacity:1,horizontalBorderWidth:1,verticalBorderWidth:1,padding:{top:0,right:8,bottom:0,left:8},interactionState:{hover:{backgroundColor:l[4],backgroundOpacity:.6},selected:{backgroundColor:l[4],backgroundOpacity:.6},unselected:{backgroundOpacity:.3,textOpacity:.3,opacity:.3},prepareSelect:{borderColor:l[14],borderOpacity:1,borderWidth:1},searchResult:{backgroundColor:(i=u==null?void 0:u.results)!==null&&i!==void 0?i:l[2],backgroundOpacity:1},highlight:{backgroundColor:(o=u==null?void 0:u.highlight)!==null&&o!==void 0?o:l[6],backgroundOpacity:1}}},icon:{fill:l[0],size:10,margin:{top:6,right:4,bottom:6,left:4}}},dataCell:h(),mergedCell:h(),resizeArea:{size:3,background:l[7],backgroundOpacity:0,guideLineColor:l[7],guideLineDisableColor:"rgba(0,0,0,0.25)",guideLineDash:[3,3],interactionState:{hover:{backgroundColor:l[7],backgroundOpacity:1}}},scrollBar:{trackColor:"rgba(0,0,0,0.01)",thumbHoverColor:"rgba(0,0,0,0.25)",thumbColor:"rgba(0,0,0,0.15)",thumbHorizontalMinSize:32,thumbVerticalMinSize:32,size:nt()?3:6,hoverSize:nt()?4:8,lineCap:"round"},splitLine:{horizontalBorderColor:l[12],horizontalBorderColorOpacity:.2,horizontalBorderWidth:2,verticalBorderColor:l[11],verticalBorderColorOpacity:.25,verticalBorderWidth:2,showShadow:!0,shadowWidth:8,shadowColors:{left:"rgba(0,0,0,0.1)",right:"rgba(0,0,0,0)"}},prepareSelectMask:{backgroundColor:l[5],backgroundOpacity:.3},background:{color:l[8],opacity:1}}},st=function(){function e(r){this.x=0,this.y=0,this.width=0,this.height=0,this.colIndex=-1,this.level=0,this.isLeaf=!1,this.children=[],this.padding=0;var t=r.id,n=r.key,i=r.value,o=r.label,a=r.parent,l=r.level,s=r.rowIndex,u=r.isTotals,f=r.isGrandTotals,c=r.isSubTotals,h=r.isCollapsed,d=r.isTotalRoot,v=r.hierarchy,p=r.isPivotMode,g=r.seriesNumberWidth,C=r.field,y=r.spreadsheet,m=r.query,w=r.belongsCell,S=r.inCollapseNode,b=r.isTotalMeasure,A=r.isLeaf,O=r.extra;this.id=t,this.key=n,this.value=i,this.label=o||i,this.parent=a,this.level=l,this.rowIndex=s,this.isTotals=u,this.isCollapsed=h,this.hierarchy=v,this.isPivotMode=p,this.seriesNumberWidth=g,this.field=C,this.spreadsheet=y,this.query=m,this.belongsCell=w,this.inCollapseNode=S,this.isTotalMeasure=b,this.isLeaf=A,this.isGrandTotals=f,this.isSubTotals=c,this.isTotalRoot=d,this.extra=O}return e.getFieldPath=function(r,t){if(r&&!r.isTotals||r&&t){for(var n=r.parent,i=[r.field];n&&n.id!==gl;)i.push(n.field),n=n.parent;return i.reverse()}return[]},e.getAllLeaveNodes=function(r){var t=[];if(r.isLeaf)return[r];for(var n=$([],I(r.children),!1),i=n.shift();i;)i.isLeaf?t.push(i):n.unshift.apply(n,$([],I(i.children),!1)),i=n.shift();return t},e.getAllChildrenNodes=function(r){var t=[];if(r.isLeaf)return[r];for(var n=$([],I(r.children||[]),!1),i=n.shift();i;)t.push(i),n.unshift.apply(n,$([],I(i.children),!1)),i=n.shift();return t},e.getAllBranch=function(r){for(var t=[],n=this.getAllLeaveNodes(r),i=n.shift(),o=[];i;){o.unshift(i);for(var a=i.parent;a&&!at(a,r);){o.unshift(a);a=a.parent}t.push(o),i=n.shift(),o=[]}return t},e.blankNode=function(){return new e({id:"",key:"",value:""})},e.rootNode=function(){return new e({id:"root",key:"",value:""})},e.prototype.toJSON=function(){return fc(this,["config","hierarchy","parent","spreadsheet"])},e.prototype.getHeadLeafChild=function(){for(var r=this;!H(r.children);)r=Bi(r.children);return r},e}(),NC=function(){function e(){this.width=0,this.height=0,this.maxLevel=-1,this.sampleNodesForAllLevels=[],this.sampleNodeForLastLevel=null,this.allNodesWithoutRoot=[],this.indexNode=[]}return e.prototype.getLeaves=function(){return this.allNodesWithoutRoot.filter(function(r){return r.isLeaf})},e.prototype.getNodes=function(r){return r!==void 0?this.allNodesWithoutRoot.filter(function(t){return t.level===r}):this.allNodesWithoutRoot},e.prototype.getNodesLessThanLevel=function(r){return this.allNodesWithoutRoot.filter(function(t){return t.level<=r})},e.prototype.pushNode=function(r,t){t===void 0&&(t=-1),t===-1?this.allNodesWithoutRoot.push(r):this.allNodesWithoutRoot.splice(t,0,r)},e.prototype.pushIndexNode=function(r){this.indexNode.push(r)},e.prototype.getIndexNodes=function(){return this.indexNode},e}(),$i=function(){function e(r){var t=r.label,n=r.isSubTotals,i=r.isGrandTotals,o=r.isTotalRoot;this.label=t,this.isSubTotals=n,this.isGrandTotals=i,this.isTotalRoot=o}return e}(),GD=function(e){var r,t=e.isFirstField,n=e.currentField,i=e.fieldValues,o=e.spreadsheet,a=e.lastField,l=o.getTotalsConfig(t?n:a),s,u;t?l!=null&&l.showGrandTotals&&(s=l.reverseLayout?"unshift":"push",u=new $i({label:l.label,isSubTotals:!1,isGrandTotals:!0,isTotalRoot:!0})):l!=null&&l.showSubTotals&&(_.size(i)>1||_.get(l,"showSubTotals.always")!==!1)&&n!==fe&&(s=l.reverseSubLayout?"unshift":"push",u=new $i({label:l.subLabel,isSubTotals:!0,isGrandTotals:!1,isTotalRoot:!0})),(r=i[s])===null||r===void 0||r.call(i,u)};function Au(e,r){for(var t={},n=e;n&&n.key;)(!n.isTotalRoot||r)&&(t[n.key]=n.value),n=n.parent;return t}var FC=function(e,r,t,n){return r.layoutArrange?r.layoutArrange(r.spreadsheet,t,n,e):e},bc=function(e,r,t,n){var i,o,a=(o=(i=e.spreadsheet)===null||i===void 0?void 0:i.facet)===null||o===void 0?void 0:o.getHiddenColumnsInfo(t);if(a)return!1;var l=!0,s=function(p,g,C){g===void 0&&(g=-1),C===void 0&&(C=-1),g===-1?(r.children.push(p),n.pushNode(p)):(r.children.splice(g,0,p),n.pushNode(p,C))};if(e.layoutHierarchy){var u=e.layoutHierarchy(e.spreadsheet,t);if(u){var f=Br(u==null?void 0:u.delete)?u==null?void 0:u.delete:!1;l=!f;var c=u.push,h=u.unshift,d=r.children.length,v=n.getNodes().length;H(h)||(te(h,function(p){s(p)}),d=r.children.length,v=n.getNodes().length),H(c)||te(c,function(p){s(p)}),f||s(t,d,v)}else s(t)}else s(t);return l},Ru=function(e,r,t){e!=null&&e.layoutCoordinate&&(r!=null&&r.isLeaf||t!=null&&t.isLeaf)&&(e==null||e.layoutCoordinate(e.spreadsheet,r,t))},UD=function(e,r){var t=e==null?void 0:e.layoutDataPosition;if(t){var n=r.getCellMeta,i=t(e.spreadsheet,n);return L(L({},r),{getCellMeta:i})}return r},HC=function(){function e(r){this.label=r}return e}(),YD="Transform Data",XD="Header Layout",VD="Data Cell Render",en=function(){function e(){var r=this;this.debug=!1,this.debugCallback=function(t,n){if(r.debug){var i=performance.now();n();var o=performance.now();console.log(t,"".concat(o-i," ms"))}else n()},this.logger=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];r.debug&&console.log.apply(console,$([t],I(n),!1))}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setDebug=function(r){this.debug=r},e}(),jD=`
<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↓" fill="#29A294">
        <tspan x="-0.225097656" y="8.5">↓</tspan>
    </text>
</g>
</svg>`,qD=`<svg width="10px" height="10px" viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" font-family="Roboto, PingFangSC, BlinkMacSystemFont, Microsoft YaHei, Arial, sans-serif" font-size="12" font-weight="bold">
    <text id="↑" fill="#FF4D4F">
        <tspan x="-0.225097656" y="8.5">↑</tspan>
    </text>
</g>
</svg>
`,KD=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>down</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="down" fill="#58AE57" transform="translate(3.500000, 4.500000) scale(1, -1) translate(-3.500000, -4.500000) " points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg>`,ZD=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="7px" height="9px" viewBox="0 0 7 9" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 58 (84663) - https://sketch.com -->
    <title>up</title>
    <desc>Created with Sketch.</desc>
    <g id="一期开发" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polygon id="up" fill="#F46649" points="3.5 0 7 9 0 9"></polygon>
    </g>
</svg> `,QD=`<svg t="1557124621626" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17452"
xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
<defs>
  <style type="text/css"></style>
</defs>
<path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 626.944h176c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8h-176A8 8 0 0 1 384 857.984v-56c0-4.416 3.584-8 8-8z m0-424h368c4.416 0 8 3.648 8 8v56a8 8 0 0 1-8 8h-368A8 8 0 0 1 384 433.984v-56c0-4.352 3.584-8 8-8z m528-139.968h-528A8 8 0 0 1 384 222.016v-56c0-4.416 3.584-8 8-8h528c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z m-256 424h-272A8 8 0 0 1 384 646.016v-56c0-4.416 3.584-8 8-8h272c4.416 0 8 3.584 8 8v56a8 8 0 0 1-8 8z" p-id="17453"></path>
</svg>`,JD=`<svg t="1557124685600" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17561"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h176A8 8 0 0 0 576 222.016v-56a8 8 0 0 0-8-8h-176A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h368a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-368A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m-256-424h-272A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h272a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17562"></path>
</svg>`,e9=`<svg t="1557124695786" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17670"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 167.04a8 8 0 0 0-12.544 0L57.728 309.056A8 8 0 0 0 64 321.984h76.032v530.048c0 4.352 3.584 7.936 7.936 7.936h56.064a8 8 0 0 0 7.936-7.936V321.92H288a8 8 0 0 0 6.272-12.992l-112-141.888z m209.728 62.976h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17671"></path>
</svg>`,t9=`<svg t="1557124710652" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" p-id="17779"
  xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path d="M182.272 856.96a8 8 0 0 1-12.544 0l-112-141.952A8 8 0 0 1 64 702.08h76.032V172.032c0-4.416 3.584-8 7.936-8h56.064c4.352 0 7.936 3.584 7.936 8v529.984H288c6.72 0 10.496 7.808 6.272 12.992l-112 141.888z m209.728-626.944h304A8 8 0 0 0 704 222.016v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 166.016v56c0 4.416 3.584 8 8 8z m0 424h304a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8h-304A8 8 0 0 0 384 590.016v56c0 4.416 3.584 8 8 8z m528 139.968h-528a8 8 0 0 0-8 8v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z m0-424h-528A8 8 0 0 0 384 377.984v56c0 4.416 3.584 8 8 8h528a8 8 0 0 0 8-8v-56a8 8 0 0 0-8-8z" p-id="17780"></path>
</svg>`,r9=`<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="设计输出" stroke="none" stroke-width="1" fill-opacity="0.25" fill-rule="evenodd">
    <g id="设计输出-移动端指标详情页-阅读端" transform="translate(-3275.000000, -724.000000)" fill-rule="nonzero">
        <g id="编组-39" transform="translate(3064.500000, 667.000000)">
            <g id="编组-36" transform="translate(80.500000, 44.000000)">
                <g id="不排序" transform="translate(130.000000, 13.000000)">
                    <path d="M12.0009375,12.40625 C12.0696875,12.40625 12.1259375,12.4625 12.1259375,12.53125 L12.1259375,12.53125 L12.1259375,13.40625 C12.1259375,13.475 12.0696875,13.53125 12.0009375,13.53125 L12.0009375,13.53125 L6.25093747,13.53125 C6.18218747,13.53125 6.12593747,13.475 6.12593747,13.40625 L6.12593747,13.40625 L6.12593747,12.53125 C6.12593747,12.4625 6.18218747,12.40625 6.25093747,12.40625 L6.25093747,12.40625 Z M2.93949997,2.5801875 L2.97437497,2.6109375 L4.72437497,4.828125 C4.78062497,4.89776786 4.74503823,4.99725765 4.66779698,5.02426203 L4.62593747,5.03125 L3.438,5.03089062 L3.43843747,10.9691406 L4.62593747,10.9691406 C4.73062497,10.9691406 4.78999997,11.0910156 4.72437497,11.1722656 L2.97437497,13.3894531 C2.92437497,13.4535156 2.82749997,13.4535156 2.77749997,13.3894531 L1.02749997,11.1722656 C0.961874969,11.0894531 1.02124997,10.9691406 1.12593747,10.9691406 L2.31343747,10.9691406 L2.313,5.03089062 L1.12593747,5.03125 C1.03620533,5.03125 0.979764,4.94285714 1.00679571,4.8654519 L1.02749997,4.828125 L2.77749997,2.6109375 C2.81749997,2.5596875 2.88749997,2.5494375 2.93949997,2.5801875 Z M10.5009375,9.09375 C10.5696875,9.09375 10.6259375,9.15 10.6259375,9.21875 L10.6259375,9.21875 L10.6259375,10.09375 C10.6259375,10.1625 10.5696875,10.21875 10.5009375,10.21875 L10.5009375,10.21875 L6.25093747,10.21875 C6.18218747,10.21875 6.12593747,10.1625 6.12593747,10.09375 L6.12593747,10.09375 L6.12593747,9.21875 C6.12593747,9.15 6.18218747,9.09375 6.25093747,9.09375 L6.25093747,9.09375 Z M14.5009375,5.78125 C14.5696875,5.78125 14.6259375,5.8375 14.6259375,5.90625 L14.6259375,5.90625 L14.6259375,6.78125 C14.6259375,6.85 14.5696875,6.90625 14.5009375,6.90625 L14.5009375,6.90625 L6.25093747,6.90625 C6.18218747,6.90625 6.12593747,6.85 6.12593747,6.78125 L6.12593747,6.78125 L6.12593747,5.90625 C6.12593747,5.8375 6.18218747,5.78125 6.25093747,5.78125 L6.25093747,5.78125 Z M9.00093747,2.46875 C9.06968747,2.46875 9.12593747,2.525 9.12593747,2.59375 L9.12593747,2.59375 L9.12593747,3.46875 C9.12593747,3.5375 9.06968747,3.59375 9.00093747,3.59375 L9.00093747,3.59375 L6.25093747,3.59375 C6.18218747,3.59375 6.12593747,3.5375 6.12593747,3.46875 L6.12593747,3.46875 L6.12593747,2.59375 C6.12593747,2.525 6.18218747,2.46875 6.25093747,2.46875 L6.25093747,2.46875 Z" id="形状结合"></path>
                </g>
            </g>
        </g>
    </g>q
</g>
</svg>`,n9='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1590389330617" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19656" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 64c-247.4 0-448 200.6-448 448s200.6 448 448 448 448-200.6 448-448-200.6-448-448-448z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" fill="" p-id="19657"></path><path d="M464 336c0 26.5 21.5 48 48 48s48-21.5 48-48-21.5-48-48-48-48 21.5-48 48zM536 448h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-272c0-4.4-3.6-8-8-8z" fill="" p-id="19658"></path></svg>',i9=`<?xml version="1.0" encoding="UTF-8"?>
<svg width="23px" height="12px" viewBox="0 0 23 12" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>编组 8备份 3</title>
    <g id="----隐藏列标注！" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="隐藏列标注" transform="translate(-275.000000, -824.000000)">
            <rect fill="#FFFFFF" x="0" y="0" width="1333" height="1167"></rect>
            <g id="编组-8备份-3" transform="translate(275.000000, 824.000000)">
                <rect id="矩形" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="0.5" y="0.5" width="11" height="11"></rect>
                <rect id="矩形备份-9" stroke-opacity="0.25" stroke="#000000" fill="#F7F7F7" x="11.5" y="0.5" width="11" height="11"></rect>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(6.000000, 6.000000) rotate(90.000000) translate(-6.000000, -6.000000) " fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
                <g id="7.Icon/arrow/15.down/fill" transform="translate(17.000000, 6.000000) rotate(270.000000) translate(-17.000000, -6.000000) translate(11.000000, 0.000000)" fill="#000000" fill-rule="nonzero" opacity="0.65">
                    <path d="M7.25020811,6.37218077 L4.91348936,8.20968077 C4.82677061,8.27764952 4.69903624,8.21671202 4.69903624,8.10655577 L4.69903624,4.43272764 C4.69903624,4.32257139 4.82677061,4.26046202 4.91348936,4.32960264 L7.25020811,6.16593077 C7.31700499,6.21866514 7.31700499,6.31944639 7.25020811,6.37218077 Z" id="fill" transform="translate(5.999671, 6.269385) rotate(90.000000) translate(-5.999671, -6.269385) "></path>
                </g>
            </g>
            <line x1="286.5" y1="813" x2="286.5" y2="864.5" id="路径-2备份-3" stroke="#000000" opacity="0.25"></line>
        </g>
    </g>
</svg>`,o9=`<svg t="1557140120188" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="16909" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="16910">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="16911">
	</path>
</svg>`,a9=`<svg t="1557140186692" class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
xmlns="http://www.w3.org/2000/svg" p-id="17025" xmlns:xlink="http://www.w3.org/1999/xlink"
width="200" height="200">
	<defs>
		<style type="text/css">
		</style>
	</defs>
	<path d="M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"
	p-id="17026">
	</path>
	<path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"
	p-id="17027">
	</path>
</svg>`,l9=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,s9=`<svg t="1565940955886" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M948 392.992l-403.008 488.99200001Q532 896 512.992 896t-32-14.016L76 392.992q-18.016-20.992-7.008-46.016T108 321.98400001L916 321.98400001q28 0 39.008 24.99199999T948 392.992z"
    p-id="17473" data-spm-anchor-id="a313x.7781069.0.i2" class="selected"></path>
</svg>
`,u9=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
<defs>
<style type="text/css"></style>
</defs>
<path
d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
p-id="17621"></path>
</svg>
`,f9=`<svg t="1565940979768" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
     p-id="17620" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200">
  <defs>
    <style type="text/css"></style>
  </defs>
  <path
    fill-opacity="0.45"
    d="M76 631.008l403.008-488.99200001Q492 128 511.008 128t32 14.016L948 631.008q18.016 20.992 7.008 46.016T916 702.01599999L108 702.01599999q-28 0-39.008-24.99199999T76 631.008z"
    p-id="17621"></path>
</svg>
`,c9='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1596433821690" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20229" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><style type="text/css"></style></defs><path d="M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6c-3.1-3.1-8.2-3.1-11.3 0l-230 229.9L461.4 404c-3.1-3.1-8.2-3.1-11.3 0L266.3 586.7c-3.1 3.1-3.1 8.2 0 11.3l39.5 39.7z" p-id="20230"></path></svg>',h9=`<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1608030723688" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21482" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M547.648 696a32 32 0 0 1 31.488 26.24l0.512 5.76v151.68l145.216-144.512a32 32 0 0 1 40.832-3.648l4.416 3.712a32 32 0 0 1 3.584 40.832l-3.712 4.48-203.072 202.24a32 32 0 0 1-40.768 3.648l-4.416-3.712-202.24-202.24a32 32 0 0 1 40.832-48.96l4.416 3.712 150.912 150.912v-158.144a32 32 0 0 1 32-32z m194.56-529.28l4.928 3.072 233.792 180.224a32 32 0 0 1 1.728 49.28l-4.864 3.52-409.792 245.568a32 32 0 0 1-27.328 2.624l-5.184-2.432-422.4-245.568a32 32 0 0 1-7.552-49.28l4.544-4.032 242.816-180.288a32 32 0 0 1 42.432 47.552l-4.288 3.84-203.84 151.296 364.16 211.648 353.28-211.712-196.608-151.552a32 32 0 0 1-8.896-40l3.136-4.864a32 32 0 0 1 40-8.96zM547.712 28.672a32 32 0 0 1 31.488 26.24l0.512 5.76v396.992a32 32 0 0 1-63.488 5.76l-0.512-5.76V60.736a32 32 0 0 1 32-32z" p-id="21483" fill="currentColor"></path></svg>
`,d9='<svg viewBox="64 64 896 896" focusable="false" data-icon="eye" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"></path></svg>',Pv=Object.freeze({__proto__:null,ArrowDown:jD,ArrowUp:qD,CellDown:KD,CellUp:ZD,GlobalAsc:QD,GlobalDesc:JD,GroupAsc:e9,GroupDesc:t9,GroupNone:r9,Minus:o9,Plus:a9,SortDown:s9,SortUp:f9,SortDownSelected:l9,SortUpSelected:u9,InfoCircle:n9,ExpandColIcon:i9,Trend:c9,DrillDownIcon:h9,EyeOutlined:d9}),zC={},kC=function(e,r){zC[ic(e)]=r},WC=function(e){return zC[ic(e)]};me(Pv).forEach(function(e){kC(e,Pv[e])});var Nv="<svg",Fv="data:image/svg+xml",Hv={},zo=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.isOnlineLink=function(i){return/^(https?:)?(\/\/)/.test(i)},n.render(),n}return r.prototype.getImage=function(t,n,i){var o=this;return new Promise(function(a,l){var s=WC(t);if(s){var u=new Image;u.onload=function(){Hv[n]=u,a(u)},u.onerror=l,s.includes(Fv)||o.isOnlineLink(s)?u.src=s:(i&&(s=s.replace(/fill=[\'\"]#?\w+[\'\"]/g,""),s=s.replace(/fill>/g,">")),s=s.replace(Nv,"".concat(Nv,' fill="').concat(i,'"')),u.src="".concat(Fv,";utf-8,").concat(encodeURIComponent(s)))}})},r.prototype.render=function(){var t=this.cfg,n=t.name,i=t.fill,o=Qo(this.cfg),a=L(L({},fc(o,"fill")),{type:r.type}),l=new pf({attrs:a});this.iconImageShape=l,this.setImageAttrs({name:n,fill:i})},r.prototype.setImageAttrs=function(t){var n=this,i=t.name,o=t.fill,a=this.iconImageShape;i=i||a.attrs.name,o=o||a.attrs.fill;var l="".concat(i,"-").concat(o),s=Hv[l];s?(a.attr("img",s),this.addShape("image",a)):this.getImage(i,l,o).then(function(u){n.destroyed||(a.attr("img",u),n.addShape("image",a))}).catch(function(u){console.error("GuiIcon ".concat(i," load failed"),u)})},r.type="__GUI_ICON__",r}(Ur),je;(function(e){e.TOP="TOP",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.RIGHT="RIGHT"})(je||(je={}));var yi;(function(e){e.SUM="SUM",e.MIN="MIN",e.MAX="MAX",e.AVG="AVG"})(yi||(yi={}));var gr;(function(e){e.Row="row",e.Col="col",e.Series="series"})(gr||(gr={}));var v9=function(){function e(){this.store=new Map}return e.prototype.set=function(r,t){return this.store.set(r,t)},e.prototype.get=function(r,t){var n,i=this.store.get(r);return(n=i)!==null&&n!==void 0?n:t},e.prototype.clear=function(){this.store.clear()},e.prototype.size=function(){return this.store.size},e}(),Ba=function(e){var r,t,n=e.facetCfg,i=e.level,o=e.fields,a=n.colCfg,l=n.spreadsheet,s=n.dataSet,u=s.moreThanOneValue(),f=(t=(r=l.dataCfg.fields)===null||r===void 0?void 0:r.valueInCols)!==null&&t!==void 0?t:!0,c=(a==null?void 0:a.hideMeasureColumn)&&f&&!u&&Tt(o,fe),h=c?2:1;return i===o.length-h},GC=function(e){var r=e.addTotalMeasureInTotal,t=e.parentNode,n=e.currentField,i=e.fields,o=e.facetCfg,a=e.hierarchy,l=i.indexOf(n),s=o.dataSet,u=o.values,f=o.spreadsheet,c=[],h=s.getFieldName(n),d={},v=f.getTotalsConfig(n),p=t.isGrandTotals?v.totalsGroupDimensions:v.subTotalsGroupDimensions;if(p!=null&&p.includes(n)){d=Au(t);var g=s.getTotalDimensionValues(n,d);c.push.apply(c,$([],I((g||[]).map(function(y){return new $i({label:y,isSubTotals:t.isSubTotals,isGrandTotals:t.isGrandTotals,isTotalRoot:!1})})),!1)),H(c)&&c.push(h)}else if(r&&n===fe)d=Au(t),c.push.apply(c,$([],I(u.map(function(y){return new HC(y)})),!1));else if(Ba({facetCfg:o,level:l,fields:i})){t.isLeaf=!0,a.pushIndexNode(t),t.rowIndex=a.getIndexNodes().length-1;return}else{GC(L(L({},e),{currentField:i[l+1]}));return}var C=c.filter(function(y){return!Pr(y)});Lc(L(L({},e),{fieldValues:C,level:l,parentNode:t,query:d}))},p9=function(e){var r,t=e.parentNode,n=e.currentField,i=e.fields,o=e.facetCfg,a=i.indexOf(n),l=o.dataSet,s=o.spreadsheet,u=[],f=l.getFieldName(n),c={};c=Au(t,!0);var h=l.getDimensionValues(n,c),d=FC(h,o,t,n);u.push.apply(u,$([],I(d||[]),!1)),H(u)&&(n===fe?u.push.apply(u,$([],I((r=l.fields)===null||r===void 0?void 0:r.values),!1)):u.push(f)),GD({currentField:n,lastField:i[a-1],isFirstField:a===0,fieldValues:u,spreadsheet:s});var v=u.filter(function(p){return!Pr(p)});Lc(L(L({},e),{fieldValues:v,level:a,parentNode:t,query:c}))},UC=function(e){e.parentNode.isTotals?GC(e):p9(e)},Pi=function(e,r){return"".concat(e).concat(tt).concat(r)},Lc=function(e){var r,t,n,i,o,a,l,s,u,f,c=e.currentField,h=e.fields,d=e.fieldValues,v=e.facetCfg,p=e.hierarchy,g=e.parentNode,C=e.level,y=e.query,m=e.addMeasureInTotalQuery,w=e.addTotalMeasureInTotal,S=v.spreadsheet,b=v.collapsedCols;try{for(var A=tr(d.entries()),O=A.next();!O.done;O=A.next()){var B=I(O.value,2),P=B[0],D=B[1],z=D instanceof $i,W=D instanceof HC,U=void 0,V=void 0,k=!1,pe=!1,he=!1,Me=!1,ne=c;if(z){var Fe=D;pe=Fe.isGrandTotals,he=Fe.isSubTotals,Me=Fe.isTotalRoot,U=ke(D.label),Me?V=y:V=L(L({},y),(n={},n[c]=U,n)),m&&(V[fe]=(l=S==null?void 0:S.dataSet)===null||l===void 0?void 0:l.fields.values[0]),k=Ba({facetCfg:v,level:C,fields:h})}else W?(U=ke(D.label),V=L(L({},y),(i={},i[fe]=U,i)),ne=fe,pe=g.isGrandTotals,he=g.isSubTotals,k=Ba({facetCfg:v,level:C,fields:h})):S.isTableMode()?(U=D,ne=h[P],V=L(L({},y),(o={},o[ne]=U,o)),k=!0):(U=D,V=L(L({},y),(a={},a[c]=U,a)),k=Ba({facetCfg:v,level:C,fields:h}));var we=Pi(g.id,U);if(!we)return;var Wt=Br(b==null?void 0:b[we])?b==null?void 0:b[we]:!1,Qe=new st({id:we,key:ne,value:U,level:C,field:ne,parent:g,isTotals:z||W,isGrandTotals:pe,isSubTotals:he,isTotalMeasure:W,isCollapsed:Wt,isTotalRoot:Me,hierarchy:p,query:V,spreadsheet:S,isLeaf:k||Wt}),_e=bc(v,g,Qe,p),$e=(s=S==null?void 0:S.facet)===null||s===void 0?void 0:s.getHiddenColumnsInfo(Qe);$e&&g&&(g.hiddenChildNodeInfo=$e),C>p.maxLevel&&!pe&&!g.isGrandTotals&&!g.isSubTotals&&!Qe.isSubTotals&&(p.sampleNodesForAllLevels.push(Qe),p.maxLevel=C,p.sampleNodeForLastLevel=$e?((u=$e==null?void 0:$e.displaySiblingNode)===null||u===void 0?void 0:u.next)||((f=$e==null?void 0:$e.displaySiblingNode)===null||f===void 0?void 0:f.prev):Qe);var fr=k||Wt||!_e;fr?(Qe.isLeaf=!0,p.pushIndexNode(Qe),Qe.rowIndex=p.getIndexNodes().length-1):UC({addTotalMeasureInTotal:w,addMeasureInTotalQuery:m,parentNode:Qe,currentField:h[C+1],fields:h,facetCfg:v,hierarchy:p})}}catch(Qt){r={error:Qt}}finally{try{O&&!O.done&&(t=A.return)&&t.call(A)}finally{if(r)throw r.error}}},YC=function(e,r,t,n){var i=r.facetCfg,o=r.hierarchy,a=r.parentNode,l=i.dataSet;e.forEach(function(s,u){typeof s=="string"&&(s={key:s});var f=s.key,c=f===Qn?ke("序号"):l.getFieldName(f),h=n||a;if(Lc({currentField:f,fields:[f],fieldValues:[c],facetCfg:i,hierarchy:o,parentNode:h,level:t,query:{},addMeasureInTotalQuery:!1,addTotalMeasureInTotal:!1}),s.children&&s.children.length){var d=h.children[u];d.isLeaf=!1,YC(s.children,r,t+1,d)}})},Vn=function(e,r){return r>0&&e<r},jn=function(e,r,t){return r>0&&e>=t-r},Hl=function(e,r,t){return t>0&&e<r+t},aa=function(e,r,t){return t>0&&e>=r+1-t},Ac=function(e,r,t,n,i,o){var a=Mi(t,function(c,h){var d=e-(rt(o)?0:o)+i.x;return d>=c&&d<t[h+1]},0);a=Math.max(a,0);var l=Mi(t,function(c,h){var d=i.width+e+i.x;return d>=c&&d<t[h+1]},a);l=Math.min(l===-1?1/0:l,t.length-2);var s=n.getIndexRange(r+i.y,i.height+r+i.y),u=s.start,f=s.end;return[a,l,u,f]},g9=function(e,r,t){var n=2,i=Math.abs(e/r),o=i<=1/n?0:e,a=i>n?0:r;return[o*t.horizontal,a*t.vertical]},En=function(e,r,t){var n,i,o=e==null?void 0:e.getMatrix(),a=(n=o==null?void 0:o[6])!==null&&n!==void 0?n:0,l=(i=o==null?void 0:o[7])!==null&&i!==void 0?i:0;e==null||e.translate(r-a,t-l)},Rc=function(e,r){var t,n=e==null?void 0:e.getMatrix(),i=(t=n==null?void 0:n[6])!==null&&t!==void 0?t:0;e==null||e.translate(r-i,0)},C9=function(e,r){var t,n=e==null?void 0:e.getMatrix(),i=(t=n==null?void 0:n[7])!==null&&t!==void 0?t:0;e==null||e.translate(0,r-i)},y9=function(e,r,t,n){var i=r.frozenColCount,o=r.frozenRowCount,a=r.frozenTrailingColCount,l=r.frozenTrailingRowCount,s=e.colIndex,u=e.rowIndex;return Hl(u,n.start,o)?Ke.ROW:aa(u,n.end,l)?Ke.TRAILING_ROW:Vn(s,i)?Ke.COL:jn(s,a,t)?Ke.TRAILING_COL:Ke.SCROLL},m9=function(e,r,t){for(var n,i=e.frozenColCount,o=e.frozenRowCount,a=e.frozenTrailingColCount,l=e.frozenTrailingRowCount,s=(n={},n[Ke.TOP]=[],n[Ke.BOTTOM]=[],n),u=0;u<i;u++){for(var f=t.start;f<t.start+o;f++)s[Ke.TOP].push({x:u,y:f});if(l>0)for(var f=0;f<l;f++){var c=t.end-f;s[Ke.BOTTOM].push({x:u,y:c})}}for(var u=0;u<a;u++){for(var h=r-1-u,f=t.start;f<t.start+o;f++)s[Ke.TOP].push({x:h,y:f});if(l>0)for(var f=0;f<l;f++){var c=t.end-f;s[Ke.BOTTOM].push({x:h,y:c})}}return s},w9=function(e,r,t,n){var i=r.frozenColCount,o=r.frozenRowCount,a=r.frozenTrailingColCount,l=r.frozenTrailingRowCount,s=$([],I(e),!1);Vn(s[0],i)&&(s[0]=i),jn(s[1],a,t)&&(s[1]=t-a-1),Hl(s[2],n.start,o)&&(s[2]=n.start+o),aa(s[3],n.end,l)&&(s[3]=n.end-l);var u=$([],I(s),!1);u[2]=n.start,u[3]=n.start+o-1;var f=$([],I(s),!1);f[0]=0,f[1]=i-1;var c=$([],I(s),!1);c[2]=n.end+1-l,c[3]=n.end;var h=$([],I(s),!1);return h[0]=t-a,h[1]=t-1,{center:s,frozenRow:u,frozenCol:f,frozenTrailingCol:h,frozenTrailingRow:c}},_9=function(e,r){var t=e,n=0,i=t.getTotalLength()-1;if(r){var o=r.current,a=o===void 0?Lu:o,l=r.pageSize;n=Math.max((a-1)*l,0),i=Math.min(a*l-1,t.getTotalLength()-1)}return{start:n,end:i}},wo=function(e,r,t){var n=r,i=t,o=function(a){return a.isLeaf?1:a.children?a.children.reduce(function(l,s){return l+=o(s),l},0):0};return r&&(n=e.slice(0,r).reduce(function(a,l){return a+=o(l),a},0)),t&&(i=e.slice(e.length-t).reduce(function(a,l){return a+=o(l),a},0)),{colCount:n,trailingColCount:i}},XC=function(e,r){return e.reduce(function(t,n){typeof n=="string"&&(n={key:n});var i=L({},n);return i.children?(i.children=XC(i.children,r),t.push(i),t):(r[i.key]&&t.push(i),t)},[])},pr=function(e){return e.parent.id==="root"},S9=function(e){for(;!pr(e);)e=e.parent;return e},x9=function(e){var r=[],t=function(n){n.forEach(function(i){typeof i=="string"||!i.children?r.push(i):t(i.children)})};return t(e),r},Ji=function(e){var r=x9(e);return r.map(function(t){return typeof t=="string"?t:t.key})},co=function(e){var r=e.children[0];return r?r.isLeaf?r:co(r):e},T9=function(e){return H(e.rows)&&H(e.columns)&&H(e.values)&&H(e.customTreeItems)},E9=function(e){var r=e.facetCfg,t=r.columns,n=r.spreadsheet,i=n.store.get("hiddenColumnsDetail"),o=r==null?void 0:r.showSeriesNumber,a=Ji(t),l=a.filter(function(c){return i?i.every(function(h){return h.hideColumnNodes.every(function(d){return d.field!==c})}):!0}),s=$([],I(l),!1),u=$([],I(t),!1),f={};o&&(u.unshift({key:Qn}),f[Qn]=!0),s.reduce(function(c,h){return c[h]=!0,c},f),YC(XC(u,f),e,0,null)},Oc=function(e,r,t){return e.sort(function(n,i){t&&(n=t(n),i=t(i));var o=r.indexOf(n),a=r.indexOf(i);return o===-1&&a===-1?0:o===-1?1:a===-1?-1:o-a})},ho=function(e){return qr(e,function(r){return!Pr(r)&&r!=="undefined"})},Ic=function(e){var r;return(r=me(e))===null||r===void 0?void 0:r.reduce(function(t,n){var i=j(e,n);return Array.isArray(i)?t=t.concat(Ic(i)):t==null||t.push(i),t},[])},Ts=function(e){var r=[];if(Array.isArray(e))for(var t=("undefined"in e),n=e.length+(t?1:0),i=0,o=function(){var a=i===e.length?e.undefined:e[i];i++,a&&"undefined"in a?me(a).forEach(function(l){r.push(a[l])}):Array.isArray(a)?r.push.apply(r,$([],I(a),!1)):r.push(a)};i<n;)o();else r.push(e);return r},b9=function(e){return e==null?void 0:e.every(function(r){return Pr(r)})},zv=function(e,r){var t=[];return e==null||e.forEach(function(n,i){n===void 0&&r[i]&&t.push(r[i])}),t},L9=function(e,r){var t;return(t=e==null?void 0:e.filter(function(n){return!(r!=null&&r.includes(n))}))===null||t===void 0?void 0:t.concat(r)},VC=function(e,r){return!ta(e,function(t){return r[t]})};function kv(e,r){var t=r.rows,n=r.columns;return Qi(e,function(i,o){return VC([].concat(t).concat(n),o)&&i.push(o),i},[])}function A9(e,r){var t=e.isRowTotal,n=e.isRowSubTotal,i=e.isColTotal,o=e.isColSubTotal,a=r||{},l=a.row,s=a.col,u=l||{},f=u.calcTotals,c=f===void 0?{}:f,h=u.calcSubTotals,d=h===void 0?{}:h,v=s||{},p=v.calcTotals,g=p===void 0?{}:p,C=v.calcSubTotals,y=C===void 0?{}:C,m=function(w,S){if((w.aggregation||w.calcFunc)&&S)return{aggregation:w.aggregation,calcFunc:w.calcFunc}};return m(g,i)||m(y,o)||m(c,t)||m(d,n)}var mi=function(e){return Number.parseFloat((Xt(e)||0).toPrecision(J0))},xn=function(e,r,t){if(t===void 0&&(t=0),!Object.values(e).find(function(a){return a>0}))return e;var n=L({},e);n.frozenColCount>=r&&(n.frozenColCount=r);var i=r-n.frozenColCount;n.frozenTrailingColCount>i&&(n.frozenTrailingColCount=i),n.frozenRowCount>=t&&(n.frozenRowCount=t);var o=t-n.frozenRowCount;return n.frozenTrailingRowCount>o&&(n.frozenTrailingRowCount=o),n};function Pt(e,r,t){var n;return(n=e==null?void 0:e.addShape)===null||n===void 0?void 0:n.call(e,"rect",L({zIndex:1,attrs:r},t||{}))}function R9(e,r){var t;return(t=e==null?void 0:e.addShape)===null||t===void 0?void 0:t.call(e,"polygon",{attrs:r})}function O9(e,r){var t;return(t=e==null?void 0:e.addShape)===null||t===void 0?void 0:t.call(e,"polyline",{attrs:r})}function jC(e,r){var t;return(t=e==null?void 0:e.addShape)===null||t===void 0?void 0:t.call(e,"circle",{attrs:r})}function ni(e,r,t,n,i,o,a,l){var s;return!H(r)&&e&&te(r,function(u){e.contain(u)&&e.removeChild(u,!0)}),(s=e==null?void 0:e.addShape)===null||s===void 0?void 0:s.call(e,"text",{attrs:L(L({x:t,y:n,text:i,originalText:l},o),a)})}function ot(e,r,t){var n;return(n=e==null?void 0:e.addShape)===null||n===void 0?void 0:n.call(e,"line",{zIndex:100,attrs:L(L({},r),t)})}function er(e,r,t){if(!H(e)){var n=re(e)?e:[e];n.forEach(function(i){Fo(i,"attrs.".concat(r),t)})}}function Mc(e,r){var t=new zo(r);return e==null||e.add(t),t}function qC(e,r,t,n,i){var o=new zo(L(L({name:n?"Plus":"Minus"},r),{fill:t}));return ft(i)&&o.on("click",i),e==null||e.add(o),o}var Ou="s2-offscreen-canvas",I9=function(){var e=document.getElementById(Ou);return e||(e=document.createElement("canvas"),e.id=Ou,e.style.display="none",document.body.appendChild(e),e)},M9=function(){var e;(e=document.getElementById(Ou))===null||e===void 0||e.remove()},B9=function(e){var r;return(r=e==null?void 0:e.position)!==null&&r!==void 0?r:"right"},D9=function(e,r){e===void 0&&(e=0),r===void 0&&(r=0),e=mi(e),r=mi(r);var t=e>=0,n=r>=0&&e<=0,i=t?e:r,o=n?0:i,a=r-e;return function(l){var s=t?0:1,u=n?el(Math.abs(0-e)/a,0,1):s,f=el((l-o)/a,-1,1);return{zeroScale:u,scale:f}}},KC=function(e,r){var t,n,i,o=e.data,a=e.encode,l=e.type,s=r.getMeta(),u=s.x,f=s.y,c=s.height,h=s.width,d=r.getStyle(N.DATA_CELL),v=d.cell,p=d.miniChart,g=[],C=de(o,function(W){return g.push(W==null?void 0:W[a.y]),{x:W[a.x],y:W[a.y]}}),y=Di(g),m=sc(g),w=y-m,S=u+v.padding.left,b=u+h-v.padding.right,A=f+v.padding.top,O=f+c-v.padding.bottom,B=O-A,P=l===Ii.Bar?(b-S-(g.length-1)*((t=p==null?void 0:p.bar)===null||t===void 0?void 0:t.intervalPadding))/g.length+((n=p==null?void 0:p.bar)===null||n===void 0?void 0:n.intervalPadding):(i=(b-S)/(g.length-1))!==null&&i!==void 0?i:0,D=[],z=de(C,function(W,U){var V,k=S+U*P,pe;if(w!==0?pe=O-((W==null?void 0:W.y)-m)/w*B:pe=m>0?A:O,l===Ii.Bar){var he=void 0,Me=void 0;m<0&&y>0&&w!==0?(he=O-(0-m)/w*B,Me=Math.abs(pe-he),(W==null?void 0:W.y)<0&&(pe=he)):(he=m<0?A:O,w=Di([Math.abs(y),Math.abs(m)]),Me=w===0?B:Math.abs((W==null?void 0:W.y)-0)/w*B,pe=he);var ne=P-((V=p==null?void 0:p.bar)===null||V===void 0?void 0:V.intervalPadding);D.push([ne,Me])}return[k,pe]});return{points:z,box:D}},$9=function(e,r){if(!(H(e==null?void 0:e.data)||H(r))){var t=r.getStyle(N.DATA_CELL),n=t.miniChart,i=n.line,o=i.point,a=i.linkLine,l=KC(e,r).points;O9(r,{points:l,stroke:a.fill,lineWidth:a.size,opacity:a.opacity});for(var s=0;s<l.length;s++)jC(r,{x:l[s][0],y:l[s][1],r:o.size,fill:o.fill,fillOpacity:o.opacity})}},P9=function(e,r){if(!(H(e==null?void 0:e.data)||H(r)))for(var t=r.getStyle(N.DATA_CELL),n=t.miniChart,i=n.bar,o=KC(e,r),a=o.points,l=o.box,s=0;s<a.length;s++)Pt(r,{x:a[s][0],y:a[s][1],width:l[s][0],height:l[s][1],fill:i.fill,fillOpacity:i.opacity})},N9=function(e,r,t){var n=Number(r)-Number(e);return Number.isNaN(n)||Number(e)<0?t.bad:n<=.1?t.good:n>.1&&n<=.2?t.satisfactory:t.bad},F9=function(e,r){var t,n;r===void 0&&(r={min:0,max:0});var i=Number(e);if(Number.isNaN(i))return e;var o=(t=r==null?void 0:r.min)!==null&&t!==void 0?t:r,a=(n=r==null?void 0:r.max)!==null&&n!==void 0?n:r,l=new Intl.NumberFormat("en-US",{minimumFractionDigits:o,maximumFractionDigits:a,useGrouping:!1,style:"percent"});return l.format(i)},H9=function(e){var r,t,n,i,o,a;if(!H(e)){var l=e.getCellArea(),s=l.x,u=l.y,f=l.height,c=l.width,h=e.findFieldCondition((r=e.cellConditions)===null||r===void 0?void 0:r.interval);if(h&&h.mapping){var d=e.mappingValue(h);if(!d)return;var v=d.isCompare?d:e.valueRangeByField,p=mi(v.minValue),g=mi(v.maxValue),C=rt(d==null?void 0:d.fieldValue)?mi(e.getMeta().fieldValue):mi(d==null?void 0:d.fieldValue);if(C<p||C>g)return;var y=(n=(t=e.getStyle().miniChart.interval)===null||t===void 0?void 0:t.height)!==null&&n!==void 0?n:e.getStyle().cell.miniBarChartHeight,m=(o=(i=e.getStyle().miniChart.interval)===null||i===void 0?void 0:i.fill)!==null&&o!==void 0?o:e.getStyle().cell.miniBarChartFillColor,w=D9(p,g),S=w(C),b=S.zeroScale,A=S.scale,O=(a=d.fill)!==null&&a!==void 0?a:m;return Pt(e,{x:s+c*b,y:u+f/2-y/2,width:c*A,height:y,fill:O})}}},z9=function(e,r){var t,n=r.getStyle(N.DATA_CELL),i=r.getMeta(),o=i.x,a=i.y,l=i.height,s=i.width,u=i.spreadsheet;if(H(e)){ni(r,[],o+s-n.cell.padding.right,a+l/2,eo(r,u.options.placeholder),n.text);return}var f=n.miniChart.bullet,c=f.progressBar,h=f.comparativeMeasure,d=f.rangeColors,v=f.backgroundColor,p=e.measure,g=e.target,C=Math.max(Number(p),0),y=Math.max(Number(g),0),m=F9(p,2),w=(c==null?void 0:c.widthPercent)>1?(c==null?void 0:c.widthPercent)/100:c==null?void 0:c.widthPercent,S=n.cell.padding,b=s-S.left-S.right,A=w*b,O=b-A,B=o+s-S.right-A,P=a+l/2-c.height/2;Pt(r,{x:B,y:P,width:A,height:c.height,fill:v,textBaseline:n.text.textBaseline});var D=j(r.getMeta(),"spreadsheet.options.bullet.getRangeColor"),z=Math.max(Math.min(A*C,A),0);Pt(r,{x:B,y:P+(c.height-c.innerHeight)/2,width:z,height:c.innerHeight,fill:(t=D==null?void 0:D(C,y))!==null&&t!==void 0?t:N9(C,y,d)});var W=B+A*y;ot(r,{x1:W,y1:a+(l-h.height)/2,x2:W,y2:a+(l-h.height)/2+h.height},{stroke:(h==null?void 0:h.fill)||(h==null?void 0:h.color),lineWidth:h.width,opacity:h==null?void 0:h.opacity}),ni(r,[],B-S.right,a+l/2,Ni({measureTextWidth:u.measureTextWidth,text:m,maxWidth:O-S.right,fontParam:n.text}),n.text)},k9=function(e,r){switch(r==null?void 0:r.type){case Ii.Line:$9(r,e);break;case Ii.Bar:P9(r,e);break;default:z9(r,e);break}},ZC=function(e,r){var t=e.x,n=e.y,i=e.width,o=e.height,a=i-(r==null?void 0:r.left)-(r==null?void 0:r.right),l=o-(r==null?void 0:r.top)-(r==null?void 0:r.bottom);return{x:t+(r==null?void 0:r.left),y:n+(r==null?void 0:r.top),width:a,height:l}},QC=function(e){return $l({size:0,position:"right",margin:{left:0,right:0}},e)},JC=function(e,r){return r=QC(r),e-r.size-r.margin.right-r.margin.left},nl=function(e,r,t){var n=e.y,i=e.height;t===void 0&&(t=0);var o=0;switch(r){case"top":o=n;break;case"middle":o=n+i/2-t/2;break;default:o=n+i-t;break}return o},la=function(e,r,t,n,i){t===void 0&&(t=0),i===void 0&&(i=1);var o=e.x,a=e.width,l=r.textAlign,s=r.textBaseline,u=QC(n),f=u.size,c=u.margin,h=u.position,d=i*(f+c.left)+(i?c.right:0),v,p;switch(l){case"left":v=o+(h==="left"?d:0),p=o+(h==="left"?c.left:t+c.left);break;case"center":{var g=d-(h==="left"?c.left:c.right)+t,C=o+a/2-g/2;v=C+t/2+(h==="left"?d-c.left:0),p=C+(h==="left"?0:t+c.left);break}default:{v=o+a-(h==="right"?d:0),p=o+a-(h==="right"?d-c.left:t+d-c.left);break}}var y=nl(e,s,0),m=nl(e,s,f);return{text:{x:v,y},icon:{x:p,y:m}}},W9=function(e,r){return la(e,r).text},G9=function(e,r,t){var n=r.start+r.width,i=e.start+e.width,o,a;if(r.start<=e.start&&n>=i)o=e.start+e.width/2,a=e.width;else if(r.start<=e.start){var l=r.width-(e.start-r.start);o=l<t?n-t/2:n-l/2,a=l}else if(n>=i){var l=r.width-(n-i);o=l<t?r.start+t/2:r.start+l/2,a=l}else o=r.start+r.width/2,a=r.width;return{start:o,width:a}},ln=function(e,r,t){var n=r.x,i=r.y,o=r.width,a=r.height,l=t.horizontalBorderWidth,s=t.horizontalBorderColorOpacity,u=t.horizontalBorderColor,f=t.verticalBorderWidth,c=t.verticalBorderColor,h=t.verticalBorderColorOpacity,d,v,p,g,C;if(e===je.TOP||e===je.BOTTOM){var y=i;e===je.TOP?y=i+f/2:y=i+a-f/2,v=y,g=y,d=n,p=n+o,C={lineWidth:l,stroke:u,strokeOpacity:s}}if(e===je.LEFT||e===je.RIGHT){var m=n;e===je.LEFT?m=n+l/2:m=n+o-l/2,d=m,p=m,v=i,g=i+a,C={lineWidth:f,stroke:c,strokeOpacity:h}}return{position:{x1:d,x2:p,y1:v,y2:g},style:C}},U9=function(e,r,t){t===void 0&&(t={left:0,right:0});var n=L({},e);return r==="left"?(n.start+=t.left,n.width-=t.left):r==="right"&&(n.width-=t.right),n},Y9=function(e,r,t,n){var i=r+t,o=e.start;if(n==="center")return o-t/2;var a=e.width-i>0,l=a?e.width/2:i/2;return n==="left"?o-l:o+l-t};si(function(e,r){if(e===void 0&&(e=""),!r)return 0;var t=I9().getContext("2d"),n=r,i=n.fontSize,o=n.fontFamily,a=n.fontWeight,l=n.fontStyle,s=n.fontVariant;return t.font=[l,s,a,"".concat(i,"px"),o].join(" ").trim(),t.measureText("".concat(e)).width},function(e,r){return $([e],I(Kr(r)),!1).join("")});var Wv=function(e,r,t,n){var i=16,o=e(yo,n),a;Ki(r)?a=r:a=xe(r);var l=t,s=[],u,f;if(e(r,n)<=t)return r;for(var c=!0;c;){if(u=a.substr(0,i),f=e(u,n),f+o>l&&f>l){c=!1;break}if(s.push(u),l-=f,a=a.substr(i),!a)return s.join("")}for(var h=!0;h;){if(u=a.substr(0,1),f=e(u,n),f+o>l){h=!1;break}if(s.push(u),l-=f,a=a.substr(1),!a)return s.join("")}return"".concat(s.join(""),"...")},Ni=function(e){var r=e.measureTextWidth,t=e.text,n=e.maxWidth,i=e.fontParam,o=e.priorityParam,a=e.placeholder,l={},s=a??Oi,u=rt(t)||t===""?s:"".concat(t),f=o;if(i&&re(i)?f=i:l=i||{},!f||!f.length)return Wv(r,u,n,l);var c=[],h=[u];f.forEach(function(g){h.forEach(function(C,y){var m=-1,w=C.match(new RegExp(g));if(w){var S=w[0];m=w.index,c.push(S);var b=m+S.length,A=C.slice(0,m),O=C.slice(b),B=[A,O].filter(function(P){return!!P});h.splice.apply(h,$([y,1],I(B),!1))}})}),h=c.concat(h);var d=u,v=r(yo,l),p=n;return h.forEach(function(g){if(p<=0){var C=d.indexOf(g),y=d.slice(C-3,C);if(y&&y!==yo){var m=r(g,l);d=d.replace(g,m>v?yo:g)}else d=d.replace(g,"");p-=v}else{var m=r(g,l);if(p<m&&m>v){var w=Wv(r,g,p,l);d=d.replace(g,w),p=0}else p-=m}}),d},X9=function(e,r,t,n){n===void 0&&(n="left");var i=r.right,o=r.left,a=t||0;return n==="left"?e+i/2+a:n==="right"?e-i/2-a:e+o/2+a},V9=function(e){var r,t,n=e.getMeta().isTotals,i=(t=(r=e).isMeasureField)===null||t===void 0?void 0:t.call(r),o=e.getStyle(e.cellType||N.DATA_CELL),a;return i?a=o.measureText:n?a=o.bolderText:a=o.text,{cellStyle:o,textStyle:a}},j9=function(e){var r=e.rowIndex,t=e.colIndex,n=e.meta,i=e.data,o=e.textStyle,a=e.textCondition,l=o.fill;return a!=null&&a.mapping&&(l=a==null?void 0:a.mapping(i,{rowIndex:r,colIndex:t,meta:n}).fill),L(L({},o),{fill:l})},eo=function(e,r){return ft(r)?r(e):r},q9=function(e,r,t){for(var n=e.x,i=e.y,o=e.width,a=e.height,l=a/Ci(r),s=[],u,f,c,h=0,d=de(t,function(C){return C>1?C/100:C}),v=0;v<Ci(r);v++){f=i+l*v;var p=[];u=n,h=0;for(var g=0;g<Ci(r[v]);g++)c=H(d)?o/Ci(r[0]):o*d[g],u=X9(n,{left:0,right:0},h,"left"),h+=c,p.push({x:u,y:f,width:c,height:l});s.push(p)}return s},K9=function(e,r,t){var n,i,o,a;t===void 0&&(t=!0);var l=e.getContentArea(),s=l.x,u=l.y,f=l.height,c=l.width,h=r||e.getMeta().fieldValue,d=h.values,v=e.getMeta().spreadsheet,p=v.options,g=v.measureTextWidth,C=p.style.cellCfg.valuesCfg,y=(i=(n=p==null?void 0:p.conditions)===null||n===void 0?void 0:n.text)===null||i===void 0?void 0:i[0],m=(a=(o=p==null?void 0:p.conditions)===null||o===void 0?void 0:o.icon)===null||a===void 0?void 0:a[0];if(!re(d)){k9(e,d);return}var w=C==null?void 0:C.widthPercent,S=0;if(h!=null&&h.label){var b=e.getStyle(N.DATA_CELL),A=b.bolderText;S=f/(d.length+1);var O=ni(e,[],s,u+S/2,Ni({measureTextWidth:g,text:h.label,maxWidth:c,fontParam:A}),A);e.addTextShape(O)}for(var B=V9(e),P=B.cellStyle,D=B.textStyle,z=P==null?void 0:P.icon,W=m&&m.mapping&&{size:z==null?void 0:z.size,margin:z==null?void 0:z.margin,position:m==null?void 0:m.position},U,V=q9({x:s,y:u+S,height:f-S,width:c},d,w),k=0;k<d.length;k++)for(var pe=Qo(d[k]),he=0;he<pe.length;he++){U=pe[he];var Me=t?j9({rowIndex:k,colIndex:he,meta:e==null?void 0:e.getMeta(),data:U,textStyle:D,textCondition:y}):D,ne=(e==null?void 0:e.getMeta().spreadsheet.options).placeholder,Fe=eo(e==null?void 0:e.getMeta(),ne),we=JC(V[k][he].width,z),Wt=Ni({measureTextWidth:g,text:U,maxWidth:we,fontParam:Me,placeholder:Fe}),Qe=g(Wt,D),_e=la(V[k][he],D,Qe,W,m?1:0),O=ni(e,[],_e.text.x,_e.text.y,Wt,Me,{},U==null?void 0:U.toString());if(e.addTextShape(O),m&&t){var $e=m==null?void 0:m.mapping(U,{rowIndex:k,colIndex:he,meta:e==null?void 0:e.getMeta()});if($e){var fr=Mc(e,L(L({},_e.icon),{name:$e.icon,width:z==null?void 0:z.size,height:z==null?void 0:z.size,fill:$e.fill}));e.addConditionIconShape(fr)}}}},Es=function(e,r){return r===void 0&&(r=1),(e==null?void 0:e.width)*r},Z9=function(e){try{return JSON.parse(e)}catch{return null}};function Gv(e,r){return r.map(function(t){var n=e[t];return n===void 0?n:"".concat(n)})}function bs(e){return e.map(function(r){var t=r==null?void 0:r.split(tt);return t[(t==null?void 0:t.length)-1]||r})}function Q9(e,r,t){var n,i=r.slice(0,r.indexOf(e)+1);return(n=t.map(function(o){return i.map(function(a){return o[a]}).join("".concat(tt))}))===null||n===void 0?void 0:n.filter(function(o){return o})}function _o(e){var r=e.rowDimensionValues,t=e.colDimensionValues,n=e.careUndefined,i=e.isFirstCreate,o=e.onFirstCreate,a=e.rowFields,l=e.colFields,s=e.rowPivotMeta,u=e.colPivotMeta,f=function(d,v,p,g){v===void 0&&(v=!0);for(var C=v?p:g,y=v?a:l,m=[],w=0;w<d.length;w++){var S=d[w];if(!C.has(S))if(i)C.set(S,{level:C.size,children:new Map}),o==null||o({isRow:v,dimension:y==null?void 0:y[w],dimensionPath:d.slice(0,w+1)});else{var b=C.get(S);if(b&&m.push(b.level),!n)break}var A=C.get(S);Pr(S)&&n?m.push(S):m.push(A==null?void 0:A.level),A&&(i&&(A.childField=y==null?void 0:y[w+1]),C=A==null?void 0:A.children)}return m},c=f(r,!0,s,u),h=f(t,!1,s,u);return c.concat.apply(c,$([],I(h),!1))}function _n(e,r){return Qi(e,function(t,n){return t.push(r[n]),t},[])}function Iu(e){var r=e.rows,t=e.columns,n=e.originData,i=n===void 0?[]:n,o=e.indexesData,a=o===void 0?[]:o,l=e.totalData,s=l===void 0?[]:l,u=e.sortedDimensionValues,f=e.rowPivotMeta,c=e.colPivotMeta,h=[],d=new Set(rc(r,t)),v=function(g){var C=g.isRow,y=g.dimension,m=g.dimensionPath;!C&&d.has(y)||(u[y]||(u[y]=[])).push(m.map(function(w){return"".concat(w)}).join(tt))},p=i.concat(s);return p.forEach(function(g){var C=Gv(g,r),y=Gv(g,t),m=_o({rowDimensionValues:C,colDimensionValues:y,rowPivotMeta:f,colPivotMeta:c,isFirstCreate:!0,onFirstCreate:v,careUndefined:(s==null?void 0:s.length)>0,rowFields:r,colFields:t});h.push(m),Fo(a,m,g)}),{paths:h,indexesData:a,rowPivotMeta:f,colPivotMeta:c,sortedDimensionValues:u}}function Uv(e,r){if(!(!e||!r)){var t=r.split(tt),n=Ie(t),i=e;te(t,function(o,a){var l=i.get(o);return l?(o===n?(l.children=new Map,l.childField=void 0):i=l.children,!0):a===0&&o===gl})}}function J9(e,r,t){var n=function(a){var l=ct(e,function(s){var u=s.field;return u===a});return j(l,"name",a)},i=r||t,o={field:fe,name:i,formatter:function(a){return n(a)}};return o}function So(e,r){return{isRowTotal:e.isGrandTotals,isRowSubTotal:e.isSubTotals,isColTotal:r.isGrandTotals,isColSubTotal:r.isSubTotals}}var ba;function Yv(e,r){return!e||!r?!1:String(e).toLowerCase()===String(r).toLowerCase()}var e$=`\r
`,t$="	",il=function(e,r){var t=e.getColumnNodes().find(function(n){return n.id===r});return e.isPivotMode()?t==null?void 0:t.value:t==null?void 0:t.field},r$=function(e,r){var t=r.getColumnNodes().find(function(n){return n.colIndex===e});return il(r,t.id)},n$=function(e,r){var t=e.rowIndex,n=e.colIndex;return[r.getRowNodes().find(function(i){return i.rowIndex===t}),r.getColumnNodes().find(function(i){return i.colIndex===n})]},ko=function(e,r){var t=r.getColumnNodes().find(function(i){return i.colIndex===e}),n=il(r,t.id);return r.options.interaction.copyWithFormat?r.dataSet.getFieldFormatter(n):function(i){return i}},i$=function(e){var r,t,n,i,o=((i=(n=(t=e.options)===null||t===void 0?void 0:t.style)===null||n===void 0?void 0:n.colCfg)===null||i===void 0?void 0:i.hideMeasureColumn)&&e.isValueInCols();return o?(r={},r[fe]=e.dataCfg.fields.values[0],r):{}},o$=function(e,r,t){var n,i;if(t.isPivotMode()){var o=I(n$(e,t),2),a=o[0],l=o[1],s=i$(t),u=t.dataSet.getCellData({query:L(L(L({},a.query),l.query),s),rowNode:a,isTotals:a.isTotals||a.isTotalMeasure||l.isTotals||l.isTotalMeasure,totalStatus:So(a,l)});return(n=u==null?void 0:u[rr])!==null&&n!==void 0?n:""}var f=r$(e.colIndex,t);return(i=r[e.rowIndex])===null||i===void 0?void 0:i[f]},ey=function(e,r,t){var n=ko(e.colIndex,t);return n(o$(e,r,t))},Bc=function(e){return/\n/.test(e)?'"'+e.replace(/\r\n?/g,`
`)+'"':e},Wo=function(e,r){var t=e.split(tt);return r?t.slice(t.length-r):(t.shift(),t)},We;(function(e){e.PLAIN="text/plain",e.HTML="text/html"})(We||(We={}));var a$=function(e){return{type:We.PLAIN,content:de(e,function(r){return r.join(t$)}).join(e$)}},l$=function(e){function r(n,i){return n.map(function(o){return"<".concat(i,">").concat(Zf(o),"</").concat(i,">")}).join("")}function t(n,i){return n.map(function(o){return"<".concat(i,">").concat(r(o,"td"),"</").concat(i,">")}).join("")}return{type:We.HTML,content:'<meta charset="utf-8"><table><tbody>'.concat(t(e,"tr"),"</tbody></table>")}},s$=(ba={},ba[We.PLAIN]=a$,ba[We.HTML]=l$,ba);function Nt(e){return s$[e]}function u$(e,r){return r===void 0&&(r=We.PLAIN),Array.isArray(r)?[].concat(e).filter(function(t){return r.includes(t.type)}).map(function(t){return t.content}):[].concat(e).filter(function(t){return(t==null?void 0:t.type)===r}).map(function(t){return t.content})[0]||""}var ty=function(e,r,t){var n,i,o,a,l,s,u=(i=(n=e[0])===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,f=(o=r==null?void 0:r.length)!==null&&o!==void 0?o:0,c=(l=(a=t[0])===null||a===void 0?void 0:a.length)!==null&&l!==void 0?l:0,h=(s=t.length)!==null&&s!==void 0?s:0,d=u+c,v=f+h,p=Array.from(Array(v),function(){return new Array(d)});return p=de(p,function(g,C){return de(g,function(y,m){if(m>=0&&m<u&&C>=0&&C<f)return"";if(m>=u&&m<=d&&C>=0&&C<f)return r[C][m-u];if(m>=0&&m<u&&C>=f&&C<v)return e[C-f][m];if(m>=u&&m<=d&&C>=f&&C<v)return t[C-f][m-u]})}),[Nt(We.PLAIN)(p),Nt(We.HTML)(p)]},f$=function(e,r,t){var n=r.map(function(i){return i.map(function(o){return o?Bc(ey(o,e,t)):""})});return[Nt(We.PLAIN)(n),Nt(We.HTML)(n)]},c$=function(e){if(!(e!=null&&e.length))return[];var r=I([{row:1/0,col:1/0},{row:0,col:0}],2),t=r[0],n=r[1];e.forEach(function(s){var u=s.rowIndex,f=s.colIndex;t.col=Math.min(f,t.col),t.row=Math.min(u,t.row),n.col=Math.max(f,n.col),n.row=Math.max(u,n.row)});var i=I([n.row-t.row+1,n.col-t.col+1],2),o=i[0],a=i[1],l=new Array(o).fill("").map(function(){return new Array(a).fill("")});return e.forEach(function(s){var u=s.rowIndex,f=s.colIndex,c=I([u-t.row,f-t.col],2),h=c[0],d=c[1];l[h][d]=s}),l},h$=function(e,r){var t=e.dataSet.getDisplayDataSet(),n=r.length?r.map(function(o){return{field:il(e,o.id),formatter:ko(o.colIndex,e)}}):e.dataCfg.fields.columns.map(function(o){return e.getColumnNodes().find(function(a){return a.field===o})}).map(function(o){return{field:il(e,o.id),formatter:ko(o.colIndex,e)}}),i=t.map(function(o){return n.map(function(a){var l=a.field,s=a.formatter;return Bc(s(o[l]))})});return[Nt(We.PLAIN)(i),Nt(We.HTML)(i)]},ry=function(e,r,t){return de(e,function(n){return r.map(function(i){var o,a=t.dataSet.getCellData({query:L(L({},n.query),i.query),rowNode:n,isTotals:n.isTotals||n.isTotalMeasure||i.isTotals||i.isTotalMeasure,totalStatus:So(n,i)});return ko(i.colIndex,t)((o=a==null?void 0:a[rr])!==null&&o!==void 0?o:"")})})},d$=function(e,r,t){var n=ry(r,t,e);return[Nt(We.PLAIN)(n),Nt(We.HTML)(n)]},v$=function(e,r,t){var n=de(r,function(a){return Wo(a.id)}),i=Fl.apply(void 0,$([],I(de(t,function(a){return Wo(a.id)})),!1)),o=ry(r,t,e);return ty(n,i,o)};function ny(e,r,t){var n=e.options.interaction.copyWithHeader;return n?v$(e,r,t):d$(e,r,t)}var p$=function(e,r){var t=e.getRowNodes().filter(function(o){return o.isLeaf||e.isHierarchyTreeType()}),n=e.getColumnNodes().filter(function(o){return o.isLeaf}),i=r.length?r.reduce(function(o,a){return o.push.apply(o,$([],I(n.filter(function(l){return l.id.startsWith(a.id)})),!1)),o},[]):n;return ny(e,t,i)},Xv=function(e,r,t){return r.isPivotMode()?p$(r,t):h$(r,t)},g$=function(e,r){var t=e.dataSet.getDisplayDataSet(),n=t.filter(function(i,o){return r.map(function(a){return a.rowIndex}).includes(o)}).map(function(i){var o=e.getColumnNodes().reduce(function(a,l,s){return a[l.field]=s,a},{});return Object.keys(i).sort(function(a,l){return o[a]-o[l]}).map(function(a){return e.getColumnNodes().find(function(l){return l.field===a})}).filter(Boolean).map(function(a){return Bc(ko(a.colIndex,e)(i[a.field]))})});return[Nt(We.PLAIN)(n),Nt(We.HTML)(n)]},C$=function(e,r){var t=e.getRowNodes().filter(function(o){return o.isLeaf||e.isHierarchyTreeType()}),n=e.getColumnNodes().filter(function(o){return o.isLeaf}),i=r.reduce(function(o,a){return o.push.apply(o,$([],I(t.filter(function(l){return l.id.startsWith(a.id)})),!1)),o},[]);return ny(e,i,n)},y$=function(e,r,t){return r.isPivotMode()?C$(r,t):g$(r,t)},m$=function(e,r,t){var n=Fl.apply(void 0,$([],I(de(e[0],function(a){var l,s,u=(s=(l=a.id.split(Oi))===null||l===void 0?void 0:l[1])!==null&&s!==void 0?s:"";return Wo(u)})),!1)),i=de(e,function(a){var l,s,u=(s=(l=a[0].id.split(Oi))===null||l===void 0?void 0:l[0])!==null&&s!==void 0?s:"";return Wo(u)}),o=de(e,function(a){return de(a,function(l){return ey(l,r,t)})});return ty(i,n,o)};function w$(e){var r=new Set;return te(e,function(t){var n=t.getMeta().level;r.has(n)||r.add(n)}),r}function _$(e,r){return qr(e,function(t){var n=t.getMeta(),i=n.level===r,o=n.isTotals&&H(n.children);return i||o})}function S$(e,r){for(var t=e,n={level:r},i=t.label;t.level>=0;){for(var o=n.level-t.level;o>0;)i="".concat(t.label).concat(tt).concat(i),o--;n=t,t=t.parent}return i}function x$(e,r,t){return de(e,function(n){var i=n.getMeta(),o=i.id,a=i.label,l=i.isTotals,s=o;l&&(s=S$(i,r));var u=n.getActualText(),f=Wo(s,t.size);return de(f,function(c){return at(c,a)?u:c})})}function T$(e){var r,t=w$(e),n=(r=Di(Array.from(t)))!==null&&r!==void 0?r:0,i=_$(e,n),o=e[0].cellType===N.COL_CELL,a=x$(i,n,t);return o&&(a=Fl.apply(void 0,$([],I(a),!1))),[Nt(We.PLAIN)(a),Nt(We.HTML)(a)]}var E$=function(e,r,t){return de(r,function(n){var i;return(i=e[n])!==null&&i!==void 0?i:t})},b$=function(e,r){var t=e.options.placeholder,n=e.dataCfg.fields,i=n.rows,o=n.columns,a=n.values,l=eo(e,t),s=e.getColumnLeafNodes(),u=[];if(e.isTableMode()){var f=qr(s,function(v){return v.field!==Qn});u=de(r,function(v){return de(f,function(p){var g;return(g=v==null?void 0:v[p.field])!==null&&g!==void 0?g:l})})}else if(e.isPivotMode()){var c=$($($([],I(i),!1),I(o),!1),I(a),!1),h=Ic(r),d=h.filter(function(v){return $($([],I(i),!1),I(o),!1).every(function(p){return!rt(v[p])})});u=Qi(d,function(v,p){return $($([],I(v),!1),[E$(p,c,l)],!1)},[])}return[Nt(We.PLAIN)(u),Nt(We.HTML)(u)]};function L$(e,r){var t,n,i=r.filter(function(f){var c=f.type;return c===N.COL_CELL}),o=r.filter(function(f){var c=f.type;return c===N.ROW_CELL}),a=e.dataSet.getDisplayDataSet();if(e.interaction.getCurrentStateName()===q.ALL_SELECTED)n=Xv(a,e,[]);else if(i.length)n=Xv(a,e,i);else if(o.length)n=y$(a,e,o);else{if(!r.length)return;var l=c$(r),s=e.interaction.getSelectedCellHighlight().currentRow;if(s){var u=hc(r,"rowIndex","asc").map(function(f){return e.dataSet.getRowData(f)});n=b$(e,u)}else!((t=e.options.interaction)===null||t===void 0)&&t.copyWithHeader?n=m$(l,a,e):n=f$(a,l,e)}return n}var A$=function(e){var r,t=e.interaction,n=t.getState().cells||[],i,o=(r=t.getInteractedCells())!==null&&r!==void 0?r:[],a=H(o)?!1:ta(o,function(l){return l.cellType===N.ROW_CELL||l.cellType===N.COL_CELL});return a?i=T$(o):i=L$(e,n),i&&O$(i),u$(i,We.PLAIN)},iy=function(e){return new Promise(function(r,t){var n;Array.isArray(e)?n=j(e.filter(function(a){return a.type===We.PLAIN}),"[0].content",""):n=e.content||"";var i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.focus({preventScroll:!0}),i.select();var o=document.execCommand("copy");document.body.removeChild(i),o?r():t()})},R$=function(e){return navigator.clipboard.write([new ClipboardItem([].concat(e).reduce(function(r,t){var n,i=t.type,o=t.content,a=o.replace(/\x00/g,"");return L(L({},r),(n={},n[i]=new Blob([a],{type:i}),n))},{}))]).catch(function(){return iy(e)})},O$=function(e,r){r===void 0&&(r=!1);var t;return typeof e=="string"?t={content:e,type:We.PLAIN}:t=e,!navigator.clipboard||!window.ClipboardItem||r?iy(t):R$(t)},I$=function(e){var r,t,n,i,o,a,l=(n=(t=(r=e.target)===null||r===void 0?void 0:r.attrs)===null||t===void 0?void 0:t.appendInfo)===null||n===void 0?void 0:n.cellData,s=(o=(i=e.target).get)===null||o===void 0?void 0:o.call(i,"parent"),u=((a=s==null?void 0:s.getMeta)===null||a===void 0?void 0:a.call(s))||l;return{target:s,viewMeta:u,event:e}},Dc=function(e,r,t){var n,i=e.split(tt);if(t)n=[e];else{n=[Pi(i[0],i[1])];for(var o=2;o<i.length;o+=1)n.push(Pi(n[o-2],i[o]))}var a=qr(r,function(l){var s;return n.includes((s=l.getMeta())===null||s===void 0?void 0:s.id)});return a},oy=function(e,r,t){if(e){var n=Dc(e,r);te(n,function(i){i.updateByState(t)})}},M$=function(e,r){return typeof e=="function"?e(r):e.some(function(t){return t===r.key||t===r.id||t===r.valueField})},$c=function(e){Q(r,e);function r(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=e.call(this,{})||this;return a.textShapes=[],a.actualTextWidth=0,a.conditionIconShapes=[],a.stateShapes=new Map,a.meta=t,a.spreadsheet=n,a.theme=n.theme,a.conditions=a.spreadsheet.options.conditions,a.handleRestOptions.apply(a,$([],I(i),!1)),a.shouldInit()&&a.initCell(),a}return r.prototype.getMeta=function(){return this.meta},r.prototype.setMeta=function(t){this.meta=t},r.prototype.getIconStyle=function(){return this.theme[this.cellType].icon},r.prototype.getTextAndIconPosition=function(t){t===void 0&&(t=1);var n=this.getTextStyle(),i=this.getIconStyle();return la(this.getContentArea(),n,this.actualTextWidth,i,t)},r.prototype.getActualText=function(){return this.actualText},r.prototype.getFieldValue=function(){return this.getFormattedFieldValue().formattedValue},r.prototype.handleRestOptions=function(){},r.prototype.shouldInit=function(){var t=this.meta,n=t.width,i=t.height;return n>0&&i>0},r.prototype.getStyle=function(t){return j(this.theme,t||this.cellType)},r.prototype.getResizeAreaStyle=function(){return this.getStyle("resizeArea")},r.prototype.shouldDrawResizeAreaByType=function(t,n){var i=this.spreadsheet.options.interaction.resize;return Br(i)?i:ft(i.visible)?i.visible(n):i[t]},r.prototype.getCellArea=function(){var t=this.meta,n=t.x,i=t.y,o=t.height,a=t.width;return{x:n,y:i,height:o,width:a}},r.prototype.getContentArea=function(){var t=this.getStyle()||this.theme.dataCell,n=(t==null?void 0:t.cell).padding;return ZC(this.getCellArea(),n)},r.prototype.getIconPosition=function(t){return t===void 0&&(t=1),this.getTextAndIconPosition(t).icon},r.prototype.drawTextShape=function(){var t=this.getFormattedFieldValue().formattedValue,n=this.getMaxTextWidth(),i=this.getTextStyle(),o=this.spreadsheet,a=o.options.placeholder,l=o.measureTextWidth,s=eo(this,a),u=Ni({measureTextWidth:l,text:t,maxWidth:n,fontParam:i,placeholder:s});this.actualText=u,this.actualTextWidth=l(u,i);var f=this.getTextPosition();this.textShape=ni(this,[this.textShape],f.x,f.y,u,i),this.textShapes.push(this.textShape)},r.prototype.drawLinkFieldShape=function(t,n){if(t){var i=this.spreadsheet.options.style.device;if(!nt(i)){var o=this.getTextStyle(),a=this.getTextPosition(),l=a.x;o.textAlign==="center"?l-=this.actualTextWidth/2:o.textAlign==="right"&&(l-=this.actualTextWidth);var s=this.textShape.getBBox().maxY;this.linkFieldShape=ot(this,{x1:l,y1:s+1,x2:l+this.actualTextWidth,y2:s+1},{stroke:n,lineWidth:1})}this.textShape.attr({fill:n,cursor:"pointer",appendInfo:{isLinkFieldText:!0,cellData:this.meta}})}},r.prototype.getLinkFieldStyle=function(){return this.getTextStyle().linkTextFill},r.prototype.drawLinkField=function(t){var n=this.spreadsheet.options.interaction.linkFields,i=n===void 0?[]:n,o=this.getLinkFieldStyle(),a=M$(i,t);this.drawLinkFieldShape(a,o)},r.prototype.updateByState=function(t,n){var i=this;this.spreadsheet.interaction.setInteractedCells(n);var o=j(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t));te(o,function(a,l){var s=me(cc(c2,function(u){return Tt(u,l)}));s.forEach(function(u){var f=i.stateShapes.has(u),c=f?i.stateShapes.get(u):i[u],h=re(c)?c:[c];if(f&&h.forEach(function(v){v.set("visible",!0)}),u==="interactiveBorderShape"&&l==="borderWidth"&&Yt(a)){var d=i.getInteractiveBorderShapeStyle(a);te(d,function(v,p){er(h,p,v)})}er(h,Gt[l],a)})})},r.prototype.getInteractiveBorderShapeStyle=function(t){var n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width,s=this.theme.dataCell.cell,u=s.horizontalBorderWidth,f=s.verticalBorderWidth;return{x:i+f/2+t/2,y:o+u/2+t/2,width:l-f-t,height:a-u-t}},r.prototype.hideInteractionShape=function(){this.stateShapes.forEach(function(t){er(t,Gt.backgroundOpacity,0),er(t,Gt.backgroundColor,"transparent"),er(t,Gt.borderOpacity,0),er(t,Gt.borderWidth,1),er(t,Gt.borderColor,"transparent")})},r.prototype.clearUnselectedState=function(){er(this.backgroundShape,Gt.backgroundOpacity,1),er(this.textShapes,Gt.textOpacity,1),er(this.linkFieldShape,Gt.opacity,1)},r.prototype.getTextShape=function(){return this.textShape},r.prototype.getTextShapes=function(){return this.textShapes||[this.textShape]},r.prototype.addTextShape=function(t){t&&this.textShapes.push(t)},r.prototype.getConditionIconShape=function(){return this.conditionIconShape},r.prototype.getConditionIconShapes=function(){return this.conditionIconShapes||[this.conditionIconShape]},r.prototype.addConditionIconShape=function(t){t&&this.conditionIconShapes.push(t)},r.prototype.resetTextAndConditionIconShapes=function(){this.textShapes=[],this.conditionIconShapes=[]},Object.defineProperty(r.prototype,"cellConditions",{get:function(){return this.conditions},enumerable:!1,configurable:!0}),r.prototype.drawConditionIconShapes=function(){var t,n=this.findFieldCondition((t=this.conditions)===null||t===void 0?void 0:t.icon);if(n&&n.mapping){var i=this.mappingValue(n),o=this.getIconPosition(),a=this.theme.dataCell.icon.size;H(i==null?void 0:i.icon)||(this.conditionIconShape=Mc(this,L(L({},o),{name:i.icon,width:a,height:a,fill:i.fill})),this.addConditionIconShape(this.conditionIconShape))}},r.prototype.getTextConditionFill=function(t){var n,i,o=t.fill,a=this.findFieldCondition((n=this.conditions)===null||n===void 0?void 0:n.text);return a!=null&&a.mapping&&(o=((i=this.mappingValue(a))===null||i===void 0?void 0:i.fill)||t.fill),o},r.prototype.getCrossBackgroundColor=function(t){var n=this.getStyle().cell,i=n.crossBackgroundColor,o=n.backgroundColorOpacity;return i&&t%2===0?{backgroundColorOpacity:o,backgroundColor:i}:{backgroundColorOpacity:o,backgroundColor:this.getStyle().cell.backgroundColor}},r}(Ur),ay=function(e,r){return r?r(e[fe],e[rr]):e[rr]},Yn=function(e,r){var t=r.getMeta().id;return e.some(function(n){return at(n.id,t)})},zl=function(e,r){return"".concat(e).concat(Oi).concat(r)},B$=function(e){var r=e.interaction.getSelectedCellHighlight(),t=r.currentRow,n=r.currentCol,i=r.rowHeader,o=r.colHeader;return t||n||i||o},Pc=function(e){return e.type===N.DATA_CELL},D$=function(e,r){te(e,function(t){Pc(t)&&t.rowIndex===r.getMeta().rowIndex&&r.updateByState(q.SELECTED)})},$$=function(e,r){te(e,function(t){Pc(t)&&t.colIndex===r.getMeta().colIndex&&r.updateByState(q.SELECTED)})},P$=function(e,r){te(e,function(t){Pc(t)&&t.rowIndex===r.getMeta().rowIndex&&t.colIndex===r.getMeta().colIndex&&r.updateByState(q.SELECTED)})},N$=function(e,r,t){var n=t.interaction.getSelectedCellHighlight(),i=n.rowHeader,o=n.colHeader,a=n.currentRow,l=n.currentCol,s=r.cellType===N.ROW_CELL,u=t.isTableMode()&&t.options.showSeriesNumber&&i&&s;(a||u)&&D$(e,r),l&&$$(e,r),(i||o)&&P$(e,r)},Fn=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.DATA_CELL},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"valueRangeByField",{get:function(){return this.spreadsheet.dataSet.getValueRangeByField(this.meta.valueField)},enumerable:!1,configurable:!0}),r.prototype.handleByStateName=function(t,n){Yn(t,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(t){if(Yn(t,this)){var n=ct(t,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(q.HIGHLIGHT):this.updateByState(q.SEARCH_RESULT)}},r.prototype.handleSelect=function(t){var n,i=(n=t==null?void 0:t[0])===null||n===void 0?void 0:n.type;switch(i){case N.COL_CELL:this.changeRowColSelectState("colIndex");break;case N.ROW_CELL:this.changeRowColSelectState("rowIndex");break;case N.DATA_CELL:B$(this.spreadsheet)?N$(t,this,this.spreadsheet):Yn(t,this)?this.updateByState(q.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight&&this.updateByState(q.UNSELECTED);break}},r.prototype.handleHover=function(t){var n=Bi(t);if(n.type!==N.DATA_CELL){this.hideInteractionShape();return}var i=this.spreadsheet.interaction.getHoverHighlight(),o=i.currentRow,a=i.currentCol;if(o||a){var l=this.meta.colIndex,s=this.meta.rowIndex;a&&l===(n==null?void 0:n.colIndex)||o&&s===(n==null?void 0:n.rowIndex)?this.updateByState(q.HOVER):this.hideInteractionShape()}var u=this.getMeta(),f=u.id,c=u.rowIndex,h=u.colIndex;at(n.id,f)&&at(n.rowIndex,c)&&at(n.colIndex,h)&&this.updateByState(q.HOVER_FOCUS)},r.prototype.update=function(){var t=this.spreadsheet.interaction.getCurrentStateName(),n=this.spreadsheet.interaction.getCells();if(t===q.ALL_SELECTED){this.updateByState(q.SELECTED);return}if(!(H(n)||!t))switch(t){case q.SELECTED:this.handleSelect(n);break;case q.HOVER_FOCUS:case q.HOVER:this.handleHover(n);break;case q.SEARCH_RESULT:this.handleSearchResult(n);break;default:this.handleByStateName(n,t);break}},r.prototype.setMeta=function(t){e.prototype.setMeta.call(this,t),this.initCell()},r.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.shouldHideRowSubtotalData()||(this.drawConditionIntervalShape(),this.drawTextShape(),this.drawConditionIconShapes()),this.drawInteractiveBorderShape(),this.meta.isFrozenCorner&&this.drawBorderShape(),this.update()},r.prototype.getDefaultTextFill=function(t){var n=t.fill,i=this.getBackgroundColor(),o=i.backgroundColor,a=i.intelligentReverseTextColor;return $C(o)&&t.fill===eg&&a&&(n=ou),n},r.prototype.getTextStyle=function(){var t=this.meta.isTotals,n=t?this.theme.dataCell.bolderText:this.theme.dataCell.text,i=this.getTextConditionFill(L(L({},n),{fill:this.getDefaultTextFill(n)}));return L(L({},n),{fill:i})},r.prototype.getIconStyle=function(){var t,n=this.theme.dataCell.icon,i=n.size,o=n.margin,a=this.findFieldCondition((t=this.conditions)===null||t===void 0?void 0:t.icon),l=a&&a.mapping&&{size:i,margin:o,position:B9(a)};return l},r.prototype.drawConditionIntervalShape=function(){this.conditionIntervalShape=H9(this)},r.prototype.shouldHideRowSubtotalData=function(){var t,n=((t=this.spreadsheet.options.totals)!==null&&t!==void 0?t:{}).row,i=n===void 0?{}:n,o=this.meta.rowIndex,a=this.spreadsheet.facet.layoutResult.rowLeafNodes[o],l=!(a!=null&&a.isGrandTotals)&&(a==null?void 0:a.isTotals);return this.spreadsheet.options.hierarchyType==="tree"&&!i.showSubTotals&&l},r.prototype.getFormattedFieldValue=function(){if(this.shouldHideRowSubtotalData())return{value:null,formattedValue:Oi};var t=this.meta,n=t.rowId,i=t.valueField,o=t.fieldValue,a=t.data,l=this.spreadsheet.dataSet.getFieldMeta(n),s=l?n:i,u=this.spreadsheet.dataSet.getFieldFormatter(s),f=u(o,a,this.meta);return{value:o,formattedValue:f}},r.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return JC(t,this.getIconStyle())},r.prototype.getTextPosition=function(){return this.getTextAndIconPosition().text},r.prototype.getBackgroundColor=function(){var t,n=this.getCrossBackgroundColor(this.meta.rowIndex),i=n.backgroundColor,o=n.backgroundColorOpacity;if(this.shouldHideRowSubtotalData())return{backgroundColor:i,backgroundColorOpacity:o};var a=this.findFieldCondition((t=this.conditions)===null||t===void 0?void 0:t.background),l=!1;if(a&&a.mapping){var s=this.mappingValue(a);s&&(i=s.fill,l=s.intelligentReverseTextColor)}return{backgroundColor:i,backgroundColorOpacity:o,intelligentReverseTextColor:l}},r.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),n=t.backgroundColor,i=t.backgroundColorOpacity;this.backgroundShape=Pt(this,L(L({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.drawInteractiveBorderShape=function(){var t=1,n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width;this.stateShapes.set("interactiveBorderShape",Pt(this,{x:i+t,y:o+t,width:l-t*2,height:a-t*2},{capture:!1,visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",Pt(this,L({},this.getCellArea()),{visible:!1}))},r.prototype.changeRowColSelectState=function(t){var n=this.spreadsheet.interaction,i=j(this.meta,t),o=n.getState(),a=o.nodes,l=a===void 0?[]:a,s=o.cells,u=s===void 0?[]:s,f=!1;if(this.spreadsheet.isTableMode()&&l.length){var c=l[0].hierarchy.getLeaves();f=c.some(function(h,d){return l.some(function(v){return v===h})?d===i:!1})}else f=$($([],I(l),!1),I(u),!1).some(function(h){return j(h,t)===i});f?this.updateByState(q.SELECTED):this.spreadsheet.options.interaction.selectedCellsSpotlight?this.updateByState(q.UNSELECTED):this.hideInteractionShape()},r.prototype.drawBorderShape=function(){var t=this;[je.BOTTOM,je.RIGHT].forEach(function(n){var i=ln(n,t.getCellArea(),t.getStyle().cell),o=i.position,a=i.style;ot(t,o,a)})},r.prototype.findFieldCondition=function(t){var n=this;return Il(t,function(i){return i.field instanceof RegExp?i.field.test(n.meta.valueField):i.field===n.meta.valueField})},r.prototype.mappingValue=function(t){var n=this.meta.fieldValue,i=this.spreadsheet.isTableMode()?this.spreadsheet.dataSet.getCellData({query:{rowIndex:this.meta.rowIndex}}):this.meta.data;return t==null?void 0:t.mapping(n,i)},r.prototype.updateByState=function(t){if(e.prototype.updateByState.call(this,t,this),t===q.UNSELECTED){var n=j(this.theme,"".concat(this.cellType,".cell.interactionState.").concat(t));n&&this.toggleConditionIntervalShapeOpacity(n.opacity)}},r.prototype.clearUnselectedState=function(){e.prototype.clearUnselectedState.call(this),this.toggleConditionIntervalShapeOpacity(1)},r.prototype.toggleConditionIntervalShapeOpacity=function(t){er(this.conditionIntervalShape,Gt.backgroundOpacity,t),er(this.conditionIconShapes,Gt.opacity,t)},r.prototype.drawLeftBorder=function(){var t=ln(je.LEFT,this.getCellArea(),this.getStyle().cell),n=t.position,i=t.style;ot(this,n,i)},r}($c),F$=function(e){Q(r,e);function r(t,n,i){return e.call(this,i,t,n)||this}return r.prototype.handleRestOptions=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=I(t,1),o=i[0];this.cells=o},Object.defineProperty(r.prototype,"cellType",{get:function(){return N.MERGED_CELL},enumerable:!1,configurable:!0}),r.prototype.update=function(){},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.conditions=this.spreadsheet.options.conditions,this.drawBackgroundShape(),this.drawTextShape()},r.prototype.drawBackgroundShape=function(){var t=W$(this.cells),n=this.theme.dataCell.cell;this.backgroundShape=R9(this,{points:t,stroke:n.horizontalBorderColor,fill:n.backgroundColor,lineHeight:n.horizontalBorderWidth})},r.prototype.drawTextShape=function(){H(this.meta)||(Ae(this.meta.fieldValue)?K9(this):e.prototype.drawTextShape.call(this))},r}(Fn),H$=function(e,r,t,n){var i=[e,r],o=[e+t,r],a=[e+t,r+n],l=[e,r+n];return[[i,o],[o,a],[a,l],[l,i]]},z$=function(e){var r=[];return te(e,function(t){var n=[t[1],t[0]];JSON.stringify(e).includes(JSON.stringify(n))||r.push(t)}),r},k$=function(e,r){return ct(r,function(t){return at(t[0],e[1])})},W$=function(e){var r=[];e.forEach(function(a){var l=a.getMeta(),s=l.x,u=l.y,f=l.width,c=l.height;r=r.concat(H$(s,u,f,c))}),r=z$(r);for(var t=[],n=r[0],i=n,o=[];!at(n,o);)t=t.concat(i),o=k$(i,r),i=o;return t},G$=function(e,r){var t=[],n;return te(e,function(i){var o,a,l,s=(a=(o=r==null?void 0:r.facet)===null||o===void 0?void 0:o.layoutResult)===null||a===void 0?void 0:a.getCellMeta(i.rowIndex,i.colIndex);if(s){var u=(l=r==null?void 0:r.facet)===null||l===void 0?void 0:l.cfg.dataCell(s);n=i!=null&&i.showText?s:n,t.push(u)}}),{cells:t,cellsMeta:n}},U$=function(e,r){var t=[],n=[],i;return te(e,function(o){var a=ct(r,function(l){var s,u=(s=l==null?void 0:l.getMeta)===null||s===void 0?void 0:s.call(l);if((u==null?void 0:u.colIndex)===(o==null?void 0:o.colIndex)&&(u==null?void 0:u.rowIndex)===(o==null?void 0:o.rowIndex))return l});a?(t.push(a),i=o!=null&&o.showText?a==null?void 0:a.getMeta():i):n.push(o)}),{cells:t,invisibleCellInfo:n,cellsMeta:i}},ly=function(e,r,t){var n;t===void 0&&(t=[]);var i=U$(t,e),o=i.cellsMeta,a=i.cells,l=i.invisibleCellInfo,s=o,u=a,f=(l==null?void 0:l.length)>0&&l.length<t.length;if(f){var c=G$(l,r),h=c.cells,d=c.cellsMeta;s=s||d,u=a.concat(h)}return!H(a)&&!s&&(s=(n=u[0])===null||n===void 0?void 0:n.getMeta()),{cells:u,viewMeta:s}},Y$=function(e){var r=e.interaction,t=r.getActiveCells(),n=[];return te(t,function(i,o){var a=i.getMeta(),l=o===0?{showText:!0}:{};n.push(L(L({},l),{colIndex:a==null?void 0:a.colIndex,rowIndex:a==null?void 0:a.rowIndex}))}),n},sy=function(e,r,t){return e.options.mergedCell?e.options.mergedCell(e,r,t):new F$(e,r,t)},X$=function(e,r,t){var n,i=r||Y$(e);if((i==null?void 0:i.length)<=1){console.error("then merged cells must be more than one");return}var o=e.interaction.getPanelGroupAllDataCells(),a=ly(o,e,i),l=a.cells,s=a.viewMeta;if(!H(l)){var u=((n=e.options)===null||n===void 0?void 0:n.mergedCellsInfo)||[];u.push(i),e.setOptions({mergedCellsInfo:u});var f=t?void 0:s;e.panelScrollGroup.addMergeCell(sy(e,l,f))}},V$=function(e,r){var t=de(e.cells,function(n){return{colIndex:n.getMeta().colIndex,rowIndex:n.getMeta().rowIndex}});return qr(r,function(n){var i=n.map(function(o){return o.showText?{colIndex:o.colIndex,rowIndex:o.rowIndex}:o});return!at(i,t)})},j$=function(e,r){var t,n,i;if(!r||r.cellType!==N.MERGED_CELL){console.error("unmergeCell: the ".concat(r," is not a MergedCell"));return}var o=V$(r,(t=e.options)===null||t===void 0?void 0:t.mergedCellsInfo);(o==null?void 0:o.length)!==((i=(n=e.options)===null||n===void 0?void 0:n.mergedCellsInfo)===null||i===void 0?void 0:i.length)&&(e.setOptions({mergedCellsInfo:o}),r.remove(!0))},q$=function(e){return de(e,function(r){return{cells:r.cells,viewMeta:r.getMeta()}})},Vv=function(e,r){return A1(e,r,function(t,n){return at(t.viewMeta.id,n.viewMeta.id)})},K$=function(e,r){var t,n=(t=e.options)===null||t===void 0?void 0:t.mergedCellsInfo;if(!H(n)){var i=e.interaction.getPanelGroupAllDataCells();if(!H(i)){var o=[];n.forEach(function(f){var c=ly(i,e,f);c.cells.length>0&&o.push(c)});var a=r.getChildren(),l=q$(a),s=Vv(l,o),u=Vv(o,l);te(s,function(f){var c=ct(a,function(h){return at(h.getMeta().id,f.viewMeta.id)});c==null||c.remove(!0)}),te(u,function(f){var c=f.cells,h=f.viewMeta;r.add(sy(e,c,h))})}}},uy=function(e){var r=e.includes(tt)?"id":"field";return r},Mu=function(e,r){r===void 0&&(r=[]);var t=e.getInitColumnLeafNodes();return on(r.map(function(n){var i=uy(n);return t.find(function(o){return o[i]===n})}))},Z$=function(e,r){if(r===void 0&&(r=[]),H(r))return{prev:null,next:null};var t=e.getInitColumnLeafNodes(),n=Mu(e,r).map(function(s){return s==null?void 0:s.colIndex}),i=Math.max.apply(Math,$([],I(n),!1)),o=Math.min.apply(Math,$([],I(n),!1)),a=t.find(function(s){return s.colIndex===i+1}),l=t.find(function(s){return s.colIndex===o-1});return{prev:l||null,next:a||null}},Q$=function(e,r){if(H(r))return[];var t=Number.NEGATIVE_INFINITY;return e.reduce(function(n,i,o){if(!r.includes(i))return n;if(o===t+1){var a=Ie(n);a.push(i)}else{var l=[i];n.push(l)}return t=o,n},[])},jv=function(e,r,t){r===void 0&&(r=[]),t===void 0&&(t=!1);var n=function(c,h){c===void 0&&(c=[]),h===void 0&&(h=[]),e.setOptions({interaction:{hiddenColumnFields:c}}),e.interaction.reset(),e.store.set("hiddenColumnsDetail",h),e.render(!1,{reBuildHiddenColumnsDetail:!1})};if(H(r)&&t){n();return}var i=e.store.get("hiddenColumnsDetail",[]),o=e.options.interaction.hiddenColumnFields;if(!(at(r,o)&&!t)){var a=Rr($($([],I(r),!1),I(o),!1)),l=Mu(e,a).every(function(c,h,d){var v=d[h+1];return!v||Math.abs(c.colIndex-v.colIndex)===1}),s=Z$(e,l?a:r),u={hideColumnNodes:Mu(e,r),displaySiblingNode:s},f=$($([],I(i),!1),[u],!1);e.emit(T.LAYOUT_COLS_HIDDEN,u,f),n(a,f)}},J$=function(e){var r=e.dataCfg.fields.columns,t=r===void 0?[]:r;return e.isTableMode()?t:e.getInitColumnLeafNodes().map(function(n){var i=n.id;return i})},Nc=function(e,r,t){r===void 0&&(r=[]),t===void 0&&(t=!1),H(r)&&t&&jv(e,r,!0);var n=J$(e),i=Ji(n),o=Q$(i,r);o.forEach(function(a){jv(e,a,t)})},eP=function(e,r){var t=e.getColumnLeafNodes(),n=e.getInitColumnLeafNodes(),i=uy(r);return j(Ie(t),i)===r&&j(Ie(n),i)!==r},tP=function(e){return(e==null?void 0:e.next)||(e==null?void 0:e.prev)},rP=function(e){var r=tP(e);return r==null?void 0:r.id},Bu=function(e,r){return rP(e)===r},Go=function(e){var r=e.type,t=e.id,n=e.theme,i=e.width,o=e.height,a=wf(e,["type","id","theme","width","height"]),l=r===nr.Horizontal?n.size:null,s=r===nr.Vertical?n.size:null;return{fill:n.background,fillOpacity:n.backgroundOpacity,cursor:"".concat(r,"-resize"),width:l,height:s,appendInfo:L(L({},a),{isResizeArea:!0,type:r,id:t,width:i,height:o,size:n.size})}},sa=function(e,r){if(e.foregroundGroup){var t=e.foregroundGroup.findById(r);return t||e.foregroundGroup.addGroup({id:r,zIndex:Yx})}},Fc=function(e,r,t){var n=t??{},i=n.scrollX,o=i===void 0?0:i,a=n.scrollY,l=a===void 0?0:a,s=!(e.x-o>r.x+r.width||e.x+e.width-o<r.x),u=!(e.y-l>r.y+r.height||e.y+e.height-l<r.y);return s&&u},nP=function(e,r,t){if(!e)return!1;var n=e.iconNames,i=e.displayCondition,o=e.belongsCell;return H(n)||o!==t?!1:i?n.some(function(a){return i(r,a)}):!0},Hc=function(e,r,t){var n=ct(e,function(o){return nP(o,r,t)});if(n){var i=n.iconNames;return n.displayCondition&&(i=i.filter(function(o){return n.displayCondition(r,o)})),L(L({},n),{iconNames:i})}},fy=function(e,r){var t=e.label,n=e.field;return at(n,fe)?{formattedValue:r||t,value:t}:{formattedValue:t,value:t}},to=function(e){return Ho(e)==="ASC"},zc=function(e){return Ho(e)==="DESC"},qv=function(e){return!q1(Number(e))},Kv=function(e,r,t){var n=to(r)?1:-1,i=["-",void 0];return e==null?void 0:e.sort(function(o,a){var l=o,s=a;if(t){if(l=o[t],s=a[t],qv(l)&&qv(s))return(Number(l)-Number(s))*n;if(l&&(i!=null&&i.includes(l==null?void 0:l.toString())))return-n;if(Number(l)&&(i!=null&&i.includes(s==null?void 0:s.toString())))return n}return!rt(l)&&!rt(s)?l.toString().localeCompare(s.toString(),"zh")*n:l?n:-n})},cy=function(e,r,t){return t?L9(r,Rr(e)):$([],I(new Set($($([],I(e),!1),I(r),!1))),!1)},hy=function(e){var r=e.sortByValues,t=e.originValues,n=t.filter(function(l){return r.find(function(s){return I1(l,s)})}),i=n.map(function(l){var s=l.split(tt);if(s.length>1){var u=s.slice(0,s.length-1).join(tt);return[u,s[s.length-1]]}return s}),o=Array.from(new Set(i.map(function(l){return l[0]})));i.sort(function(l,s){var u=l.slice(0,l.length-1),f=s.slice(0,s.length-1);if(u.join()!==f.join()){var c=o.indexOf(u[0]),h=o.indexOf(f[0]);return c-h}var d=r.indexOf(l[l.length-1]),v=r.indexOf(s[s.length-1]);return d-v});var a=i.map(function(l){return l.join(tt)});return Oc(t,a)},iP=function(e){var r=e.originValues,t=e.measureValues,n=e.sortParam,i=e.dataSet,o=n.sortFunc,a=n.sortFieldId,l=n.sortMethod,s=o(L({data:t},n));return s!=null&&s.length?(i.fields.rows.indexOf(a)>0||i.fields.columns.indexOf(a)>0)&&!Tt(s[0],tt)?hy({sortByValues:s,originValues:r}):cy(s,r,to(l)):r},oP=function(e){var r=e.sortParam,t=e.measureValues,n=e.originValues,i=e.dataSet,o=r.sortByMeasure,a=r.query,l=r.sortFieldId,s=r.sortMethod,u=i.fields,f=u.rows,c=u.columns,h=f.includes(l),d;if(o){var v=Kv(t,s,o===Cf?a[fe]:o);d=Q9(l,h?f:Ji(c),v)}else d=de(Kv(t,s));return cy(d,n,to(s))},aP=function(e){var r=e.sortParam,t=e.originValues,n=e.measureValues,i=e.dataSet,o=r.sortFunc,a=r.sortMethod,l=r.sortBy,s=t,u={originValues:t,measureValues:n,sortParam:r,dataSet:i};return o?s=iP(u):l?s=hy({sortByValues:l,originValues:t}):(to(a)||zc(a))&&(s=oP(u)),s},lP=function(e,r,t){var n,i={},o=Tt(e,tt);if(o)for(var a=mC(e,tt),l=!((n=r==null?void 0:r.rows)===null||n===void 0)&&n.includes(t)?r.rows:Ji(r.columns),s=0;s<=U1(l,t);s++)i[l[s]]=a[s];else i[t]=e;return i},Zv=function(e){return e.filter(function(r){return r!==fe})},sP=function(e){var r=e.dataSet,t=e.sortParam,n=e.originValues,i=r.fields,o=t.sortByMeasure,a=t.query,l=t.sortFieldId,s=r.getMultiData(a,void 0,void 0,void 0,!0),u=Ji(i.columns);if(o!==Cf){var f=Mr(i.rows,u);return s.filter(function(y){var m=new Set(me(y));return f.every(function(w){return m.has(w)})})}var c=Tt(i.rows,l),h=Zv(c?i.rows:u),d=Zv(c?u:i.rows),v=h[h.indexOf(l)+1],p=me(a),g=d.filter(function(y){return!p.includes(y)}),C=s.filter(function(y){var m=new Set(me(y));if(!m.has(l)||m.has(v))return!1;var w=g.every(function(S){return!m.has(S)});return w});return H(C)?on(de(n,function(y){var m=lP(y,i,l);return r.getTotalValue(L(L({},a),m))})):C},uP=function(e){var r=e.dataSet,t=e.sortParam,n=e.originValues,i=e.isSortByMeasure,o;return i?o=sP(e):o=n,aP({sortParam:t,originValues:n,measureValues:o,dataSet:r})},dy=function(e,r){if(e!=null&&e.sortMethod){if(to(e==null?void 0:e.sortMethod))return"groupAsc";if(zc(e==null?void 0:e.sortMethod))return"groupDesc"}if(r)return"SortDown"},kc=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=I(t,1),o=i[0];this.headerConfig=L({},o);var a=this.meta,l=a.value,s=a.query,u=this.spreadsheet.dataCfg.sortParams,f=this.isSortCell(),c=ct($([],I(u),!1).reverse(),function(d){return f&&(d==null?void 0:d.sortByMeasure)===l&&at(j(d,"query"),s)}),h=dy(c,f);this.headerConfig.sortParam=L(L(L({},this.headerConfig.sortParam),c||{query:s}),{type:h})},r.prototype.initCell=function(){this.resetTextAndConditionIconShapes(),this.actionIcons=[],this.hasDefaultHiddenIcon=!1},r.prototype.getInteractiveBorderShapeStyle=function(t){var n=this.getCellArea(),i=n.x,o=n.y,a=n.height,l=n.width;return{x:i+t,y:o+t,width:l-t*2,height:a-t*2}},r.prototype.getFormattedFieldValue=function(){var t=this.meta,n=t.label,i=t.isTotalRoot,o=t.isGrandTotals,a=this.spreadsheet.dataSet.getFieldFormatter(this.meta.field),l=!0;this.spreadsheet.isTableMode()?l=!1:this.spreadsheet.isHierarchyTreeType()?l=!(o&&i):l=!i;var s=l&&a?a(n,void 0,this.meta):n;return{formattedValue:s,value:n}},r.prototype.getActionIconCfg=function(){return Hc(this.spreadsheet.options.headerActionIcons,this.meta,this.cellType)},r.prototype.showSortIcon=function(){var t=this.spreadsheet,n=t.options,i=t.dataCfg,o=H(i.fields.values);if(n.showDefaultHeaderActionIcon&&!o){var a=this.headerConfig.sortParam,l=this.meta.query;return l&&at(a==null?void 0:a.query,l)&&(a==null?void 0:a.type)&&(a==null?void 0:a.type)!=="none"}return!1},r.prototype.getActionIconsCount=function(){if(this.showSortIcon())return 1;var t=this.getActionIconCfg();if(t){var n=t.iconNames;return n.length}return 0},r.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon,n=t.size,i=t.margin;return(n+i.left)*this.getActionIconsCount()},r.prototype.drawSortIcons=function(){var t=this;if(this.showSortIcon()){var n=this.getStyle(),i=n.icon,o=n.text,a=this.getTextConditionFill(o),l=this.headerConfig.sortParam,s=this.getIconPosition(),u=new zo(L(L({name:j(l,"type","none")},s),{width:i.size,height:i.size,fill:a}));u.on("click",function(f){t.spreadsheet.emit(T.GLOBAL_ACTION_ICON_CLICK,f),t.spreadsheet.handleGroupSort(f,t.meta)}),this.add(u),this.actionIcons.push(u)}},r.prototype.hasDefaultHideActionIcon=function(){return this.hasDefaultHiddenIcon},r.prototype.addActionIcon=function(t){var n=this,i=t.x,o=t.y,a=t.iconName,l=t.defaultHide,s=t.action,u=t.onClick,f=t.onHover,c=this.getStyle(),h=c.icon,d=c.text,v=this.getTextConditionFill(d),p=(h==null?void 0:h.fill)||v,g=new zo({name:a,x:i,y:o,width:h==null?void 0:h.size,height:h==null?void 0:h.size,fill:p});g.set("visible",!l),g.on("mouseover",function(C){n.spreadsheet.emit(T.GLOBAL_ACTION_ICON_HOVER,C),f==null||f({hovering:!0,iconName:a,meta:n.meta,event:C})}),g.on("mouseleave",function(C){n.spreadsheet.emit(T.GLOBAL_ACTION_ICON_HOVER_OFF,C),f==null||f({hovering:!1,iconName:a,meta:n.meta,event:C})}),g.on("click",function(C){var y;n.spreadsheet.emit(T.GLOBAL_ACTION_ICON_CLICK,C),(y=u||s)===null||y===void 0||y({iconName:a,meta:n.meta,event:C})}),this.actionIcons.push(g),this.add(g)},r.prototype.drawActionIcons=function(){var t=this;if(this.showSortIcon()){this.drawSortIcons();return}var n=this.getActionIconCfg();if(n){var i=n.iconNames,o=n.action,a=n.onClick,l=n.onHover,s=n.defaultHide,u=this.getIconPosition(i.length),f=this.getStyle().icon,c=f.size,h=f.margin;te(i,function(d,v){var p=u.x+v*c+v*h.left,g=u.y,C=typeof s=="function"?s(t.meta,d):s;C&&(t.hasDefaultHiddenIcon=!0),t.addActionIcon({iconName:d,x:p,y:g,defaultHide:C,action:o,onClick:a,onHover:l})})}},r.prototype.drawBackgroundShape=function(){var t=this.getBackgroundColor(),n=t.backgroundColor,i=t.backgroundColorOpacity;this.backgroundShape=Pt(this,L(L({},this.getCellArea()),{fill:n,fillOpacity:i}))},r.prototype.isSortCell=function(){var t,n,i,o=(n=(t=this.meta.spreadsheet)===null||t===void 0?void 0:t.isValueInCols)===null||n===void 0?void 0:n.call(t),a=this.meta.level===((i=this.meta.hierarchy)===null||i===void 0?void 0:i.maxLevel);return o?a&&this.cellType===N.COL_CELL:a&&this.cellType===N.ROW_CELL},r.prototype.handleByStateName=function(t,n){Yn(t,this)&&this.updateByState(n)},r.prototype.handleSearchResult=function(t){if(Yn(t,this)){var n=ct(t,function(i){return i==null?void 0:i.isTarget});n.id===this.getMeta().id?this.updateByState(q.HIGHLIGHT):this.updateByState(q.SEARCH_RESULT)}},r.prototype.handleHover=function(t){var n;Yn(t,this)&&(this.updateByState(q.HOVER),this.hasDefaultHideActionIcon()&&this.toggleActionIcon((n=t==null?void 0:t[0])===null||n===void 0?void 0:n.id))},r.prototype.handleSelect=function(t,n){Yn(t,this)&&this.updateByState(q.SELECTED);var i=de(n,"id");Tt(i,this.meta.id)&&this.updateByState(q.SELECTED)},r.prototype.getTextStyle=function(){var t=this.getStyle(),n=t.text,i=t.bolderText,o=t.measureText,a;this.isMeasureField()?a=o||n:this.isBolderText()?a=i:a=n;var l=this.getTextConditionFill(a);return L(L({},a),{fill:l})},r.prototype.getBackgroundColor=function(){var t,n=((t=this.getStyle())===null||t===void 0?void 0:t.cell)||{},i=n.backgroundColor,o=n.backgroundColorOpacity;return this.getBackgroundColorByCondition(i,o)},r.prototype.getBackgroundColorByCondition=function(t,n){var i,o=t,a=this.findFieldCondition((i=this.conditions)===null||i===void 0?void 0:i.background);if(a&&a.mapping){var l=this.mappingValue(a);l&&(o=l.fill)}return{backgroundColor:o,backgroundColorOpacity:n}},r.prototype.toggleActionIcon=function(t){if(this.getMeta().id===t){var n=[];te(this.actionIcons,function(i){i.get("visible")||(i.set("visible",!0),n.push(i))}),this.spreadsheet.store.set("visibleActionIcons",n)}},r.prototype.update=function(){var t=this.spreadsheet.interaction,n=t==null?void 0:t.getState(),i=t==null?void 0:t.getCells([N.CORNER_CELL,N.COL_CELL,N.ROW_CELL]);if(Bi(i))switch(n==null?void 0:n.stateName){case q.SELECTED:this.handleSelect(i,n==null?void 0:n.nodes);break;case q.HOVER_FOCUS:case q.HOVER:this.handleHover(i);break;case q.SEARCH_RESULT:this.handleSearchResult(i);break;default:this.handleByStateName(i,n==null?void 0:n.stateName);break}},r.prototype.updateByState=function(t){e.prototype.updateByState.call(this,t,this)},r.prototype.hideInteractionShape=function(){e.prototype.hideInteractionShape.call(this)},r.prototype.isMeasureField=function(){return[fe,kx].includes(this.meta.field)},r.prototype.mappingValue=function(t){var n=this.getMeta().label;return t==null?void 0:t.mapping(n,this.meta)},r.prototype.findFieldCondition=function(t){var n=this;return Il(t,function(i){return i.field instanceof RegExp?i.field.test(n.meta.field):i.field===n.meta.field})},r}($c),kl=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.COL_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorders(),this.drawResizeArea(),this.addExpandColumnIconShapes(),this.update()},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",Pt(this,L({},this.getCellArea()),{visible:!1}))},r.prototype.drawInteractiveBorderShape=function(){var t=2;this.stateShapes.set("interactiveBorderShape",Pt(this,this.getInteractiveBorderShapeStyle(t),{visible:!1}))},r.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return t-this.getActionIconsWidth()},r.prototype.getIconPosition=function(){if(this.meta.isLeaf)return e.prototype.getIconPosition.call(this,this.getActionIconsCount());var t=this.getIconStyle(),n=t.margin.left,i=this.getTextStyle(),o=this.textPosition,a=o.x,l=o.y-t.size/2;return i.textAlign==="left"?{x:a+this.actualTextWidth+n,y:l}:i.textAlign==="right"?{x:a+n,y:l}:{x:a+this.actualTextWidth/2+n,y:l}},r.prototype.isBolderText=function(){var t=this.meta,n=t.isLeaf,i=t.isTotals;return!!(i||!n)},r.prototype.getTextPosition=function(){var t,n=this.meta.isLeaf,i=this.headerConfig,o=i.width,a=i.scrollContainsRowHeader,l=i.cornerWidth,s=i.scrollX,u=this.getTextStyle(),f=this.getContentArea(),c=this.getIconStyle();if(n)return la(f,u,this.actualTextWidth,c,this.getActionIconsCount()).text;var h={start:s-(a?l:0),width:o+(a?l:0)},d=this.getTextStyle().textAlign,v=U9(h,d,(t=this.getStyle().cell)===null||t===void 0?void 0:t.padding),p=this.getActionIconsWidth(),g=this.actualTextWidth+p,C=G9(v,{start:f.x,width:f.width},g),y=Y9(C,this.actualTextWidth,p,d),m=f.y+f.height/2;return this.textPosition={x:y,y:m},this.textPosition},r.prototype.getActionIconsWidth=function(){var t=this.getStyle().icon,n=t.size,i=t.margin,o=this.getActionIconsCount();return(n+i.left)*o+(o>0?i.right:0)},r.prototype.getColResizeAreaKey=function(){return this.meta.key},r.prototype.getColResizeArea=function(){return sa(this.spreadsheet,K0)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(Q0).concat(this.meta.key)},r.prototype.drawHorizontalResizeArea=function(){var t,n,i=((n=(t=this.spreadsheet.options.style)===null||t===void 0?void 0:t.colCfg)===null||n===void 0?void 0:n.height)===0;if(!(i||!this.shouldDrawResizeAreaByType("colCellVertical",this))){var o=this.headerConfig,a=o.cornerWidth,l=o.viewportWidth,s=this.meta,u=s.y,f=s.height,c=this.getResizeAreaStyle(),h=this.getColResizeArea(),d=this.getHorizontalResizeAreaName(),v=h.find(function(g){return g.attrs.name===d});if(!v){var p=a+l;h.addShape("rect",{attrs:L(L({},Go({theme:c,type:nr.Vertical,id:this.getColResizeAreaKey(),effect:xt.Field,offsetX:0,offsetY:u,width:p,height:f,meta:this.meta})),{name:d,x:0,y:u+f-c.size/2,width:p})})}}},r.prototype.shouldAddVerticalResizeArea=function(){var t=this.meta,n=t.x,i=t.y,o=t.width,a=t.height,l=this.headerConfig,s=l.scrollX,u=l.scrollY,f=l.scrollContainsRowHeader,c=l.cornerWidth,h=l.height,d=l.width,v=this.getResizeAreaStyle(),p={x:n+o-v.size/2,y:i,width:v.size,height:a},g={x:f?-c:0,y:0,width:f?c+d:d,height:h};return Fc(p,g,{scrollX:s,scrollY:u})},r.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,n=t.x,i=t.y,o=this.headerConfig,a=o.scrollX,l=o.position;return{x:l.x+n-a,y:l.y+i}},r.prototype.drawVerticalResizeArea=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("colCellHorizontal",this))){var t=this.meta,n=t.label,i=t.width,o=t.height,a=this.getResizeAreaStyle(),l=this.getColResizeArea();if(this.shouldAddVerticalResizeArea()){var s=this.getVerticalResizeAreaOffset(),u=s.x,f=s.y;l.addShape("rect",{attrs:L(L({},Go({theme:a,type:nr.Horizontal,effect:xt.Cell,id:n,offsetX:u,offsetY:f,width:i,height:o,meta:this.meta})),{x:u+i-a.size/2,y:f,height:o})})}}},r.prototype.drawResizeArea=function(){this.drawHorizontalResizeArea(),this.drawVerticalResizeArea()},r.prototype.drawHorizontalBorder=function(){var t=ln(je.TOP,this.meta,this.theme.colCell.cell),n=t.position,i=t.style;ot(this,n,i)},r.prototype.drawVerticalBorder=function(t){var n=ln(t,this.meta,this.theme.colCell.cell),i=n.position,o=n.style;ot(this,i,o)},r.prototype.drawBorders=function(){var t=this.spreadsheet,n=t.options,i=t.isTableMode;this.meta.colIndex===0&&i()&&!n.showSeriesNumber&&this.drawVerticalBorder(je.LEFT),this.drawHorizontalBorder(),this.drawVerticalBorder(je.RIGHT)},r.prototype.hasHiddenColumnCell=function(){var t=this,n=this.spreadsheet.options,i=n.interaction.hiddenColumnFields,o=i===void 0?[]:i,a=n.tooltip.operation,l=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return H(l)||H(o)||!a.hiddenColumns?!1:!!l.find(function(s){return Bu(s==null?void 0:s.displaySiblingNode,t.meta.id)})},r.prototype.getExpandIconTheme=function(){var t=this.getStyle();return t.icon},r.prototype.addExpandColumnSplitLine=function(){var t=this.meta,n=t.x,i=t.y,o=t.width,a=t.height,l=this.theme.splitLine,s=l.horizontalBorderColor,u=l.horizontalBorderWidth,f=l.horizontalBorderColorOpacity,c=this.isLastColumn()?n+o-u:n;ot(this,{x1:c,y1:i,x2:c,y2:i+a},{stroke:s,lineWidth:u,strokeOpacity:f})},r.prototype.addExpandColumnIconShapes=function(){this.hasHiddenColumnCell()&&(this.addExpandColumnSplitLine(),this.addExpandColumnIcons())},r.prototype.addExpandColumnIcons=function(){var t=this.isLastColumn();this.addExpandColumnIcon(t),this.isAllDisplaySiblingNodeHidden()&&t&&this.addExpandColumnIcon(!1)},r.prototype.addExpandColumnIcon=function(t){var n=this,i=this.getExpandColumnIconConfig(t),o=Mc(this,L(L({},i),{name:"ExpandColIcon",cursor:"pointer"}));o.on("click",function(){n.spreadsheet.emit(T.LAYOUT_COLS_EXPANDED,n.meta)})},r.prototype.getExpandColumnIconConfig=function(t){var n=this.getExpandIconTheme().size,i=this.getCellArea(),o=i.x,a=i.y,l=i.width,s=i.height,u=o-n,f=t?u+l:u,c=a+s/2-n/2;return{x:f,y:c,width:n*2,height:n}},r.prototype.isLastColumn=function(){return eP(this.spreadsheet,this.meta.id)},r.prototype.isAllDisplaySiblingNodeHidden=function(){var t=this.meta.id,n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=n.find(function(a){var l,s=a.displaySiblingNode;return((l=s==null?void 0:s.next)===null||l===void 0?void 0:l.id)===t}),o=n.find(function(a){var l,s=a.displaySiblingNode;return((l=s==null?void 0:s.prev)===null||l===void 0?void 0:l.id)===t});return o&&i},r}(kc),fP=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.isBolderText=function(){var t=this.meta.cornerType;return t===gr.Col},Object.defineProperty(r.prototype,"cellType",{get:function(){return N.CORNER_CELL},enumerable:!1,configurable:!0}),r.prototype.initCell=function(){e.prototype.initCell.call(this),this.resetTextAndConditionIconShapes(),this.drawBackgroundShape(),this.drawTreeIcon(),this.drawCellText(),this.drawConditionIconShapes(),this.drawActionIcons(),this.drawBorderShape(),this.drawResizeArea(),this.update()},r.prototype.drawCellText=function(){this.drawTextShape()},r.prototype.drawTextShape=function(){var t=this.getContentArea().x,n=this.getCellArea(),i=n.y,o=n.height,a=this.getTextStyle(),l=this.getCornerText(),s=this.getMaxTextWidth(),u=eo(this.meta,this.spreadsheet.options.placeholder),f=this.spreadsheet.measureTextWidth,c=Ni({measureTextWidth:f,text:l,maxWidth:s,fontParam:a,placeholder:u});this.actualText=c;var h=c.indexOf(yo),d=c,v="";if(h!==-1&&this.spreadsheet.isHierarchyTreeType()){var p=h+(zD()?1:0);d=l.substr(0,p),v=l.slice(p),v=Ni({measureTextWidth:f,text:v,maxWidth:s,fontParam:a})}var g=W9({x:t+this.getTreeIconWidth(),y:i,width:s,height:o},a).x,C=i+(H(v)?o/2:o/4);this.addTextShape(ni(this,[this.textShapes[0]],g,C,d,a)),H(v)||this.addTextShape(ni(this,[this.textShapes[1]],g,i+o*.75,v,a)),this.actualTextWidth=Di([f(d,a),f(v,a)])},r.prototype.drawTreeIcon=function(){var t=this;if(!(!this.showTreeIcon()||this.meta.cornerType===gr.Col)){var n=this.headerConfig.hierarchyCollapse,i=this.getStyle().icon.size,o=this.getTextStyle(),a=o.textBaseline,l=o.fill,s=this.getContentArea();this.treeIcon=qC(this,{x:s.x,y:nl(s,a,i),width:i,height:i},l,n,function(){t.headerConfig.spreadsheet.store.set("scrollY",0),t.headerConfig.spreadsheet.emit(T.LAYOUT_TREE_ROWS_COLLAPSE_ALL,n)})}},r.prototype.drawBorderShape=function(){var t=this;[je.TOP,je.LEFT].forEach(function(n){var i=ln(n,t.getCellArea(),t.getStyle().cell),o=i.position,a=i.style;ot(t,o,a)})},r.prototype.isLastRowCornerCell=function(){var t=this.meta,n=t.cornerType,i=t.field,o=this.headerConfig.rows;return n===gr.Row&&(this.spreadsheet.isHierarchyTreeType()||Ie(o)===i)},r.prototype.getResizeAreaEffect=function(){var t=this.meta.cornerType;return t===gr.Series?xt.Series:this.isLastRowCornerCell()&&this.spreadsheet.isHierarchyTreeType()?xt.Tree:xt.Field},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeAreaByType("cornerCellHorizontal",this)){var t=this.getResizeAreaStyle(),n=sa(this.spreadsheet,iu),i=this.headerConfig,o=i.position,a=i.scrollX,l=i.scrollY,s=i.width,u=i.height,f=this.meta,c=f.x,h=f.y,d=f.width,v=f.height,p=f.field,g=f.cornerType,C={x:c+d-t.size/2,y:h,width:t.size,height:v},y={x:0,y:0,width:s,height:u};if(!(g===gr.Col||!Fc(C,y,{scrollX:a,scrollY:l}))){var m=o.x+c-a,w=o.y+(this.isLastRowCornerCell()?0:h);n.addShape("rect",{attrs:L(L({},Go({theme:t,id:p,type:nr.Horizontal,effect:this.getResizeAreaEffect(),offsetX:m,offsetY:w,width:d,height:v,meta:this.meta})),{x:m+d-t.size/2,y:w,height:this.isLastRowCornerCell()?u:v})})}}},r.prototype.showTreeIcon=function(){var t;return this.spreadsheet.isHierarchyTreeType()&&((t=this.meta)===null||t===void 0?void 0:t.x)===0},r.prototype.getIconPosition=function(){var t,n,i=(n=(t=this.textShapes)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.cfg.attrs,o=this.getTextStyle(),a=o.textBaseline,l=o.textAlign,s=this.getStyle().icon,u=s.size,f=s.margin,c=(i==null?void 0:i.x)+w1([[mu("center"),xi(this.actualTextWidth/2)],[mu("right"),xi(0)],[wC,xi(this.actualTextWidth)]])(l)+f.left,h=nl(this.getContentArea(),a,u);return{x:c,y:h}},r.prototype.getTreeIconWidth=function(){var t=this.getStyle().icon,n=t.size,i=t.margin;return this.showTreeIcon()?n+i.right:0},r.prototype.getTextStyle=function(){var t=this.getStyle(),n=t.text,i=t.bolderText,o=this.isBolderText()?n:i,a=this.getTextConditionFill(o);return L(L({},o),{fill:a})},r.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return t-this.getTreeIconWidth()-this.getActionIconsWidth()},r.prototype.getTextPosition=function(){return{x:0,y:0}},r.prototype.getFormattedFieldValue=function(){return fy(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.getCornerText=function(){var t=this.getFormattedFieldValue().formattedValue;return t},r}(kc),Wl=function(){function e(r){this.EVENT="gesture",this.gm=r}return e.prototype.do=function(r){var t=r.type;switch(t){case"touchstart":this.onTouchStart(r);break;case"touchmove":this.onTouchMove(r);break;case"touchend":this.onTouchEnd(r);break;case"touchcancel":this.onTouchCancel(r);break;default:return}},e.prototype.emit=function(r){this.gm.emit(this.EVENT,r)},e}(),cP=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.EVENT="pan",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){},r.prototype.onTouchMove=function(t){var n=t.x,i=t.y,o=n-this.preX,a=i-this.preY;this.preX=n,this.preY=i,this.emit({x:n,y:i,deltaX:o,deltaY:a,event:t})},r.prototype.onTouchStart=function(t){var n=t.x,i=t.y;this.preX=n,this.preY=i},r}(Wl),Ln=typeof performance=="object"&&performance.now?performance:Date,hP=300,Qv=10,dP=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.EVENT="press",t}return r.prototype.onTouchCancel=function(t){this.clearTimeout()},r.prototype.onTouchEnd=function(t){this.clearTimeout()},r.prototype.onTouchMove=function(t){var n=t.x,i=t.y;(n-this.touchStartX>Qv||i-this.touchStartY>Qv)&&this.clearTimeout()},r.prototype.onTouchStart=function(t){var n=this;this.clearTimeout();var i=t.x,o=t.y;this.touchStartTime=Ln.now(),this.touchStartX=i,this.touchStartY=o,this.pressTimeout=window.setTimeout(function(){n.emit({x:i,y:o,event:t})},hP)},r.prototype.clearTimeout=function(){window.clearTimeout(this.pressTimeout)},r}(Wl),vP=100,pP=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.EVENT="swipe",t.latestMoveTime=0,t.ms=0,t.speedX=0,t.speedY=0,t.preX=0,t.preY=0,t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var n=this.speedX,i=this.speedY;if(Ln.now()-this.latestMoveTime<vP){var o=t.x,a=t.y;this.emit({x:o,y:a,speedX:n,speedY:i,event:t})}},r.prototype.onTouchMove=function(t){var n=t.x,i=t.y,o=Ln.now(),a=n-this.preX,l=i-this.preY,s=o-this.ms;this.speedX=a/s,this.speedY=l/s,this.latestMoveTime=o},r.prototype.onTouchStart=function(t){var n=t.x,i=t.y;this.speedX=this.speedY=0,this.preX=n,this.preY=i,this.ms=Ln.now()},r}(Wl),gP=300,Jv=2,CP=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.EVENT="tap",t}return r.prototype.onTouchCancel=function(t){},r.prototype.onTouchEnd=function(t){var n=t.x,i=t.y;n-this.touchStartX<Jv&&i-this.touchStartY<Jv&&Ln.now()-this.touchStartTime<gP&&this.emit({x:n,y:i,event:t})},r.prototype.onTouchMove=function(t){},r.prototype.onTouchStart=function(t){var n=t.x,i=t.y;this.touchStartTime=Ln.now(),this.touchStartX=n,this.touchStartY=i},r}(Wl),yP={Pan:cP,Press:dP,Swipe:pP,Tap:CP},mP=function(e){return yP[e]},vy=function(e){Q(r,e);function r(t,n){n===void 0&&(n={});var i=e.call(this)||this;return i.onTouchStart=function(o){i.preventEvent(o),i.element.on("touchmove",i.onTouchMove),i.element.on("touchend",i.onTouchEnd),i.element.on("touchcancel",i.onTouchCancel),i.emit("touchdown",o),i.doGestures(o)},i.onTouchMove=function(o){i.preventEvent(o),i.emit("touchmove",o),i.doGestures(o)},i.onTouchEnd=function(o){i.preventEvent(o),i.emit("touchend",o),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(o)},i.onTouchCancel=function(o){i.preventEvent(o),i.emit("touchcancel",o),i.element.off("touchmove",i.onTouchMove),i.element.off("touchend",i.onTouchEnd),i.element.off("touchcancel",i.onTouchCancel),i.doGestures(o)},i.element=t,i.options=n,i.initialGestures(),i.bindTouchStart(),i}return r.prototype.destroy=function(){this.element.off("touchstart",this.onTouchStart),this.off()},r.prototype.initialGestures=function(){var t=this,n=this.options.gestures||["Pan","Press","Swipe","Tap"];this.gestures=n.map(function(i){var o=mP(i);return new o(t)})},r.prototype.bindTouchStart=function(){this.element.on("touchstart",this.onTouchStart)},r.prototype.preventEvent=function(t){var n=t.type,i=this.options.prevents||[];i.includes(n)&&t.preventDefault()},r.prototype.doGestures=function(t){this.gestures.forEach(function(n){n.do(t)})},r}(hl),wP=m0,_P=800,SP="swipe",xP="pan",ep="wheel",TP=function(e){Q(r,e);function r(t){var n=e.call(this)||this;return n.rafMs=0,n.onPan=function(i){n.raf&&cancelAnimationFrame(n.raf);var o=i.deltaX,a=i.deltaY,l=n.getWrapperEvent(i,o,a);n.emit(ep,l)},n.onSwipe=function(i){var o=i.speedX,a=i.speedY;n.rafMs=Ln.now(),n.ms=n.rafMs,(o!==0||a!==0)&&n.rafInertia(i)},n.element=t,n.gm=new vy(t,{gestures:["Pan","Swipe"]}),n.gm.on(SP,n.onSwipe),n.gm.on(xP,n.onPan),n}return r.prototype.destroy=function(){window.cancelAnimationFrame(this.raf),this.gm.destroy(),this.off()},r.prototype.rafInertia=function(t){var n=this,i=t.speedX,o=t.speedY;this.raf=window.requestAnimationFrame(function(){var a=Ln.now(),l=(a-n.ms)/_P;if(l<1){l=wP(1-l);var s=a-n.rafMs,u=i*l*s,f=o*l*s,c=n.getWrapperEvent(t,u,f);n.emit(ep,c),n.rafMs=a,n.rafInertia(t)}})},r.prototype.getWrapperEvent=function(t,n,i){return L(L({},t),{deltaX:-n,deltaY:-i})},r}(hl),EP=function(e){var r=0,t=e.children;return t==null||t.forEach(function(n){r+=n.height||0}),r},py=function(e,r,t,n,i){var o=0,a=e+(r-i)/2,l=e+(r+i)/2,s=t+n;return e+i>=s?o=e:s<l?o=t+n-i:t>a?e+r-t>i?o=t:o=e+r-i:o=e+(r-i)/2,o},Gl=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var t;e.prototype.destroy.call(this),(t=this.gm)===null||t===void 0||t.destroy()},r.prototype.initCell=function(){e.prototype.initCell.call(this),this.drawBackgroundShape(),this.drawInteractiveBgShape(),this.drawInteractiveBorderShape(),this.drawTextShape(),this.drawConditionIconShapes(),this.drawTreeIcon(),this.drawTreeLeafNodeAlignDot(),this.drawRectBorder(),this.drawResizeAreaInLeaf(),this.drawActionIcons(),this.update()},r.prototype.getBackgroundColor=function(){var t=this.getCrossBackgroundColor(this.meta.rowIndex),n=t.backgroundColor,i=t.backgroundColorOpacity;return this.getBackgroundColorByCondition(n,i)},r.prototype.drawInteractiveBorderShape=function(){var t=2;this.stateShapes.set("interactiveBorderShape",Pt(this,this.getInteractiveBorderShapeStyle(t),{visible:!1}))},r.prototype.drawInteractiveBgShape=function(){this.stateShapes.set("interactiveBgShape",Pt(this,L({},this.getCellArea()),{visible:!1}))},r.prototype.showTreeIcon=function(){return this.spreadsheet.isHierarchyTreeType()&&!this.meta.isLeaf},r.prototype.showTreeLeafNodeAlignDot=function(){var t;return((t=this.spreadsheet.options.style)===null||t===void 0?void 0:t.showTreeLeafNodeAlignDot)&&this.spreadsheet.isHierarchyTreeType()},r.prototype.getParentTreeIconCfg=function(){if(!(!this.showTreeLeafNodeAlignDot()||!this.spreadsheet.isHierarchyTreeType()||!this.meta.isLeaf))return j(this.meta,"parent.belongsCell.treeIcon.cfg")},r.prototype.drawTreeIcon=function(){var t=this;if(this.showTreeIcon()){var n=this.meta,i=n.isCollapsed,o=n.id,a=n.hierarchy,l=this.getContentArea().x,s=this.getTextStyle().fill,u=this.getStyle().icon.size,f=this.getContentIndent(),c=l+f,h=this.getIconYPosition();this.treeIcon=qC(this,{x:c,y:h,width:u,height:u},s,i,function(){if(!nt()){if(!i){var d=t.spreadsheet.store.get("scrollY"),v=t.spreadsheet.facet.panelBBox.viewportHeight||0,p=EP(t.meta),g=a.height-p;if(d>0&&d+v>g){var C=g-v;t.spreadsheet.store.set("scrollY",C>0?C:0)}}t.spreadsheet.emit(T.ROW_CELL_COLLAPSE_TREE_ROWS,{id:o,isCollapsed:!i,node:t.meta})}}),nt()&&(this.gm=new vy(this,{gestures:["Tap"]}),this.gm.on("tap",function(){t.spreadsheet.emit(T.ROW_CELL_COLLAPSE_TREE_ROWS,{id:o,isCollapsed:!i,node:t.meta})}))}},r.prototype.drawTreeLeafNodeAlignDot=function(){var t=this.getParentTreeIconCfg();if(t){var n=this.getStyle().icon,i=n.size,o=n.margin,a=t.x+i+o.right,l=this.getTextPosition().y,s=this.getTextStyle(),u=s.fill,f=s.fontSize,c=i/5;this.treeLeafNodeAlignDot=jC(this,{x:a+i/2,y:l+(f-c)/2,r:c,fill:u,fillOpacity:.3})}},r.prototype.isBolderText=function(){var t=this.meta,n=t.isLeaf,i=t.isTotals,o=t.level;return!n&&o===0||i},r.prototype.drawTextShape=function(){e.prototype.drawTextShape.call(this),this.drawLinkField(this.meta)},r.prototype.drawRectBorder=function(){var t=this,n=this.getCellArea().x,i=this.getContentIndent(),o=this.spreadsheet.isHierarchyTreeType()?n:n+i;[je.BOTTOM,je.LEFT].forEach(function(a){var l=ln(a,L(L({},t.getCellArea()),{x:o}),t.getStyle().cell),s=l.position,u=l.style;ot(t,s,u)})},r.prototype.drawResizeAreaInLeaf=function(){if(!(!this.meta.isLeaf||!this.shouldDrawResizeAreaByType("rowCellVertical",this))){var t=this.getCellArea(),n=t.x,i=t.y,o=t.width,a=t.height,l=this.getResizeAreaStyle(),s=sa(this.spreadsheet,Ri),u=this.headerConfig,f=u.position,c=u.seriesNumberWidth,h=u.width,d=u.viewportHeight,v=u.scrollX,p=u.scrollY,g={x:n,y:i+a-l.size/2,width:o,height:l.size},C={x:0,y:0,width:h,height:d};if(Fc(g,C,{scrollX:v,scrollY:p})){var y=(f==null?void 0:f.x)+n-v+c,m=(f==null?void 0:f.y)+i-p,w=this.spreadsheet.isFrozenRowHeader()?h-c-(n-v):o;s.addShape("rect",{attrs:L(L({},Go({id:this.meta.id,theme:l,type:nr.Vertical,effect:xt.Cell,offsetX:y,offsetY:m,width:o,height:a,meta:this.meta})),{x:y,y:m+a-l.size/2,width:w})})}}},r.prototype.getContentIndent=function(){if(!this.spreadsheet.isHierarchyTreeType())return 0;for(var t=this.getStyle(),n=t.icon,i=t.cell,o=n.size+n.margin.right,a=this.meta.parent,l=0;a;)a.height!==0&&(l+=o),a=a.parent;return this.showTreeLeafNodeAlignDot()&&(l+=this.isTreeLevel()?0:i.padding.right+n.margin.right),l},r.prototype.getTextIndent=function(){var t=this.getStyle().icon,n=t.size,i=t.margin,o=this.getContentIndent(),a=this.showTreeIcon()||this.isTreeLevel()&&this.showTreeLeafNodeAlignDot()?n+i.right:0;return o+a},r.prototype.isTreeLevel=function(){return ct(j(this.meta,"parent.children"),function(t){return!t.isLeaf})},r.prototype.getIconPosition=function(){var t=this.textShape.cfg.attrs,n=t.x,i=t.y,o=t.textAlign,a=this.getStyle().icon.margin.left;return o==="left"?{x:n+this.actualTextWidth+a,y:i}:o==="right"?{x:n+a,y:i}:{x:n+this.actualTextWidth/2+a,y:i}},r.prototype.getMaxTextWidth=function(){var t=this.getContentArea().width;return t-this.getTextIndent()-this.getActionIconsWidth()},r.prototype.getTextArea=function(){var t=this.getContentArea(),n=this.getTextIndent();return L(L({},t),{x:t.x+n,width:t.width-n})},r.prototype.getAdjustTextAreaHeight=function(t,n,i){var o=t.height;return!this.spreadsheet.facet.vScrollBar&&t.y+t.height>n+i&&(o=n+i-t.y),o},r.prototype.getTextPosition=function(){var t=this.getTextArea(),n=this.headerConfig,i=n.scrollY,o=n.viewportHeight,a=this.getAdjustTextAreaHeight(t,i,o),l=this.getTextStyle().fontSize,s=py(t.y,a,i,o,l),u=la(t,this.getTextStyle(),0,this.getIconStyle(),this.getActionIconsCount()).text.x;return{x:u,y:s}},r.prototype.getIconYPosition=function(){var t=this.getTextPosition().y,n=this.getStyle().icon.size,i=this.getTextStyle().fontSize;return t+(i-n)/2},r}(kc),bP=function(e,r,t,n){var i,o,a=j(n,"size"),l=j(n,"margin"),s=0;return e.options.showDefaultHeaderActionIcon?s=1:s=(o=(i=Hc(e.options.headerActionIcons,r,t))===null||i===void 0?void 0:i.iconNames.length)!==null&&o!==void 0?o:0,s*(a+l.left)+(s>0?l.right:0)},gy=function(e,r,t){var n,i,o=((n=t.icon.margin)===null||n===void 0?void 0:n.left)||0,a=((i=t.icon.margin)===null||i===void 0?void 0:i.right)||0,l=e.store.get("hiddenColumnsDetail",[]),s=!1,u=!1;l.forEach(function(c){var h,d,v,p;((d=(h=c==null?void 0:c.displaySiblingNode)===null||h===void 0?void 0:h.prev)===null||d===void 0?void 0:d.field)===r&&(s=!0),((p=(v=c==null?void 0:c.displaySiblingNode)===null||v===void 0?void 0:v.next)===null||p===void 0?void 0:p.field)===r&&(u=!0)});var f=j(t,"icon.size");return{left:u?f+a:0,right:s?f+o:0}},LP=function(e,r,t){var n=j(t,"cell.padding"),i=gy(e,r.field,t);return n.left+n.right+bP(e,r,N.COL_CELL,j(t,"icon"))+i.left+i.right},Cy=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.handleRestOptions=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=I(t,1),o=i[0];this.headerConfig=L({},o);var a=this.meta.field,l=this.spreadsheet.dataCfg.sortParams,s=ct(l,function(f){return(f==null?void 0:f.sortFieldId)===a}),u=dy(s,!0);this.headerConfig.sortParam=L(L(L({},this.headerConfig.sortParam),s||{}),{type:u})},r.prototype.isFrozenCell=function(){var t=this.spreadsheet.options,n=t.frozenColCount,i=t.frozenTrailingColCount,o=this.spreadsheet.facet.layoutResult.colNodes.filter(function(l){return pr(l)}),a=S9(this.meta).colIndex;return Vn(a,n)||jn(a,i,o.length)},r.prototype.getFormattedFieldValue=function(){return fy(this.meta,this.spreadsheet.dataSet.getFieldName(this.meta.label))},r.prototype.shouldAddVerticalResizeArea=function(){return this.isFrozenCell()?!0:e.prototype.shouldAddVerticalResizeArea.call(this)},r.prototype.getVerticalResizeAreaOffset=function(){var t=this.meta,n=t.x,i=t.y,o=this.headerConfig,a=o.scrollX,l=o.position;return this.isFrozenCell()?{x:n,y:i}:{x:l.x+n-a,y:l.y+i}},r.prototype.getColResizeArea=function(){var t=this.isFrozenCell();return t?sa(this.spreadsheet,Z0):e.prototype.getColResizeArea.call(this)},r.prototype.isSortCell=function(){return!0},r.prototype.showSortIcon=function(){return this.spreadsheet.options.showDefaultHeaderActionIcon},r.prototype.getTextStyle=function(){var t=this.getStyle();return t==null?void 0:t.bolderText},r.prototype.getContentArea=function(){var t,n=(((t=this.getStyle())===null||t===void 0?void 0:t.cell)||this.theme.dataCell.cell).padding,i=L({},n),o=gy(this.spreadsheet,this.meta.field,this.getStyle());return o.left&&(i.left=(i.left||0)+o.left),o.right&&(i.right=(i.right||0)+o.right),ZC(this.getCellArea(),i)},r.prototype.getHorizontalResizeAreaName=function(){return"".concat(Q0).concat("table-col-cell")},r.prototype.drawBackgroundShape=function(){var t=this.getStyle().cell.backgroundColor;this.backgroundShape=Pt(this,L(L({},this.getCellArea()),{fill:t}))},r}(kl),AP=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getStyle=function(t){return t?this.theme[t]:j(this,"theme.cornerCell")},r.prototype.showSortIcon=function(){return!1},r.prototype.drawLeftBorder=function(){var t=ln(je.LEFT,this.getCellArea(),this.getStyle().cell),n=t.position,i=t.style;ot(this,n,i)},r.prototype.drawBorders=function(){e.prototype.drawBorders.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r}(Cy),Ul=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getLinkFieldStyle=function(){return this.theme.rowCell.text.linkTextFill},r.prototype.drawBorderShape=function(){e.prototype.drawBorderShape.call(this),this.meta.colIndex===0&&this.drawLeftBorder()},r.prototype.shouldDrawResizeArea=function(){return this.meta.colIndex===0},r.prototype.drawResizeArea=function(){if(this.shouldDrawResizeArea()){var t=this.getCellArea(),n=t.x,i=t.y,o=t.width,a=t.height,l=this.meta.rowIndex,s=this.getResizeAreaStyle(),u=this.spreadsheet.options,f=u.frozenRowCount,c=u.frozenTrailingRowCount,h=this.spreadsheet.facet.getCellRange(),d=Hl(l,h.start,f),v=aa(l,h.end,c),p=d||v,g=p?q0:Ri,C=sa(this.spreadsheet,g),y=this.spreadsheet.facet.layoutResult.colsHierarchy.height,m=this.spreadsheet.facet.getScrollOffset().scrollY,w=this.spreadsheet.facet.getPaginationScrollY(),S=m+w,b=i+(v?0:y);v||(b-=d?w:S),C.addShape("rect",{attrs:L(L({},Go({id:String(this.meta.rowIndex),theme:s,type:nr.Vertical,effect:xt.Cell,offsetX:n,offsetY:b,width:o,height:a,meta:this.meta})),{x:n,y:b+a-s.size/2,width:o})})}},r}(Fn),yy=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"cellType",{get:function(){return N.ROW_CELL},enumerable:!1,configurable:!0}),r.prototype.getTextStyle=function(){return this.theme.rowCell.seriesText},r}(Ul),ol=function(e){return[pt.META,pt.CONTROL].includes(e.key)},my=function(e){return e.ctrlKey||e.metaKey},Nr=function(e){var r=e.getMeta(),t=r||{},n=t.id,i=t.colIndex,o=t.rowIndex,a=t.rowQuery;return{id:n,colIndex:i,rowIndex:o,type:e.cellType,rowQuery:a}},RP=function(e,r){var t=e.interaction;t.changeState({stateName:q.SELECTED,cells:r}),e.emit(T.GLOBAL_SELECTED,t.getActiveCells())};function Du(e,r){var t=Math.min(e.rowIndex,r.rowIndex),n=Math.max(e.rowIndex,r.rowIndex),i=Math.min(e.colIndex,r.colIndex),o=Math.max(e.colIndex,r.colIndex);return{start:{rowIndex:t,colIndex:i},end:{rowIndex:n,colIndex:o}}}function OP(e,r){var t=r.interaction,n=r.facet,i=r.options;if(r.isTableMode()){if(!i.showSeriesNumber)return[];var o=n.layoutResult.colLeafNodes[0].id,a=zl(String(e.rowIndex),o),l=[],s=t.getAllCells().find(function(u){return u.getMeta().id===a});return s&&s instanceof yy&&l.push(s),l}return Dc(e.rowId,t.getAllRowHeaderCells(),r.isHierarchyTreeType())}var Wc=function(e,r){var t=e.getSelectedCellHighlight(),n=t.colHeader,i=t.rowHeader;n&&e.updateCells(e.getAllColHeaderCells()),i&&e.updateCells(e.getAllRowHeaderCells()),r()},wy=function(e){var r=e.store.get("visibleActionIcons"),t=e.interaction.getInteractedCells(),n=e.interaction.getState().cells;if(H(t)&&H(n)&&H(r))return!1;if(te(r,function(o){o.set("visible",!1)}),e.store.set("visibleActionIcons",[]),te(t,function(o){o.hideInteractionShape()}),e.interaction.resetState(),e.options.interaction.selectedCellsSpotlight){var i=e.interaction.getPanelGroupAllUnSelectedDataCells()||[];te(i,function(o){o.clearUnselectedState()})}return!0},IP=function(e,r){var t=r==null?void 0:r.stateName;e.interaction.isEqualStateName(t)||(wy(e),e.hideTooltip(),e.store.set(lu,r))},MP=function(e,r,t){var n,i,o=t.facet,a=o.panelBBox.width,l=o==null?void 0:o.frozenGroupInfo,s=(n=l==null?void 0:l.frozenCol.width)!==null&&n!==void 0?n:0,u=(i=l==null?void 0:l.frozenTrailingCol.width)!==null&&i!==void 0?i:0,f=o.layoutResult.colLeafNodes[e];return r===Mt.SCROLL_UP?f.x-s:f.x+f.width-(a-u)},BP=function(e,r,t){var n,i,o=t.facet,a=o.viewCellHeights.getCellOffsetY,l=o.panelBBox.height,s=a(e+1);if(rt(s))return 0;var u=o==null?void 0:o.frozenGroupInfo,f=(n=u==null?void 0:u.frozenRow.height)!==null&&n!==void 0?n:0,c=(i=u==null?void 0:u.frozenTrailingRow.height)!==null&&i!==void 0?i:0;return r===Mt.SCROLL_UP?a(e)-f:s-(l-c)},Lr=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=function(i,o){if(re(i)&&re(o))return o},n=$($([],I(e),!1),[t],!1);return Vf.apply(void 0,$([{}],I(n),!1))},DP=function(e){var r=["rows","columns","values"],t=r.reduce(function(n,i){var o=e[i],a=Rr(o);return at(a,o)||console.warn("fields.".concat(i,":[").concat(o,"] should be unique")),n[i]=a,n},{});return L(L({},e),t)},Ls=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var t=Lr.apply(void 0,$([f2],I(e),!1));return t.fields=DP(t.fields),(!H(t.fields.customTreeItems)||H(t.fields.values))&&(t.fields.valueInCols=!1),t},tp=function(e){return Lr(rg,e)},wi=9e15,Hn=1e9,$u="0123456789abcdef",al="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",ll="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Pu={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-wi,maxE:wi,crypto:!1},_y,tn,oe=!0,Yl="[DecimalError] ",Mn=Yl+"Invalid argument: ",Sy=Yl+"Precision limit exceeded",xy=Yl+"crypto unavailable",Ty="[object Decimal]",yt=Math.floor,Je=Math.pow,$P=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,PP=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,NP=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ey=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mr=1e7,ee=7,FP=9007199254740991,HP=al.length-1,Nu=ll.length-1,M={toStringTag:Ty};M.absoluteValue=M.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),Z(e)};M.ceil=function(){return Z(new this.constructor(this),this.e+1,2)};M.clampedTo=M.clamp=function(e,r){var t,n=this,i=n.constructor;if(e=new i(e),r=new i(r),!e.s||!r.s)return new i(NaN);if(e.gt(r))throw Error(Mn+r);return t=n.cmp(e),t<0?e:n.cmp(r)>0?r:new i(n)};M.comparedTo=M.cmp=function(e){var r,t,n,i,o=this,a=o.d,l=(e=new o.constructor(e)).d,s=o.s,u=e.s;if(!a||!l)return!s||!u?NaN:s!==u?s:a===l?0:!a^s<0?1:-1;if(!a[0]||!l[0])return a[0]?s:l[0]?-u:0;if(s!==u)return s;if(o.e!==e.e)return o.e>e.e^s<0?1:-1;for(n=a.length,i=l.length,r=0,t=n<i?n:i;r<t;++r)if(a[r]!==l[r])return a[r]>l[r]^s<0?1:-1;return n===i?0:n>i^s<0?1:-1};M.cosine=M.cos=function(){var e,r,t=this,n=t.constructor;return t.d?t.d[0]?(e=n.precision,r=n.rounding,n.precision=e+Math.max(t.e,t.sd())+ee,n.rounding=1,t=zP(n,Oy(n,t)),n.precision=e,n.rounding=r,Z(tn==2||tn==3?t.neg():t,e,r,!0)):new n(1):new n(NaN)};M.cubeRoot=M.cbrt=function(){var e,r,t,n,i,o,a,l,s,u,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(oe=!1,o=f.s*Je(f.s*f,1/3),!o||Math.abs(o)==1/0?(t=ut(f.d),e=f.e,(o=(e-t.length+1)%3)&&(t+=o==1||o==-2?"0":"00"),o=Je(t,1/3),e=yt((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?t="5e"+e:(t=o.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t),n.s=f.s):n=new c(o.toString()),a=(e=c.precision)+3;;)if(l=n,s=l.times(l).times(l),u=s.plus(f),n=Oe(u.plus(f).times(l),u.plus(s),a+2,1),ut(l.d).slice(0,a)===(t=ut(n.d)).slice(0,a))if(t=t.slice(a-3,a+1),t=="9999"||!i&&t=="4999"){if(!i&&(Z(l,e+1,0),l.times(l).times(l).eq(f))){n=l;break}a+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Z(n,e+1,1),r=!n.times(n).times(n).eq(f));break}return oe=!0,Z(n,e,c.rounding,r)};M.decimalPlaces=M.dp=function(){var e,r=this.d,t=NaN;if(r){if(e=r.length-1,t=(e-yt(this.e/ee))*ee,e=r[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};M.dividedBy=M.div=function(e){return Oe(this,new this.constructor(e))};M.dividedToIntegerBy=M.divToInt=function(e){var r=this,t=r.constructor;return Z(Oe(r,new t(e),0,1,1),t.precision,t.rounding)};M.equals=M.eq=function(e){return this.cmp(e)===0};M.floor=function(){return Z(new this.constructor(this),this.e+1,3)};M.greaterThan=M.gt=function(e){return this.cmp(e)>0};M.greaterThanOrEqualTo=M.gte=function(e){var r=this.cmp(e);return r==1||r===0};M.hyperbolicCosine=M.cosh=function(){var e,r,t,n,i,o=this,a=o.constructor,l=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return l;t=a.precision,n=a.rounding,a.precision=t+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),r=(1/Vl(4,e)).toString()):(e=16,r="2.3283064365386962890625e-10"),o=Fi(a,1,o.times(r),new a(1),!0);for(var s,u=e,f=new a(8);u--;)s=o.times(o),o=l.minus(s.times(f.minus(s.times(f))));return Z(o,a.precision=t,a.rounding=n,!0)};M.hyperbolicSine=M.sinh=function(){var e,r,t,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(r=o.precision,t=o.rounding,o.precision=r+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=Fi(o,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/Vl(5,e)),i=Fi(o,2,i,i,!0);for(var a,l=new o(5),s=new o(16),u=new o(20);e--;)a=i.times(i),i=i.times(l.plus(a.times(s.times(a).plus(u))))}return o.precision=r,o.rounding=t,Z(i,r,t,!0)};M.hyperbolicTangent=M.tanh=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+7,n.rounding=1,Oe(t.sinh(),t.cosh(),n.precision=e,n.rounding=r)):new n(t.s)};M.inverseCosine=M.acos=function(){var e,r=this,t=r.constructor,n=r.abs().cmp(1),i=t.precision,o=t.rounding;return n!==-1?n===0?r.isNeg()?Cr(t,i,o):new t(0):new t(NaN):r.isZero()?Cr(t,i+4,o).times(.5):(t.precision=i+6,t.rounding=1,r=r.asin(),e=Cr(t,i+4,o).times(.5),t.precision=i,t.rounding=o,e.minus(r))};M.inverseHyperbolicCosine=M.acosh=function(){var e,r,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(e=n.precision,r=n.rounding,n.precision=e+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,oe=!1,t=t.times(t).minus(1).sqrt().plus(t),oe=!0,n.precision=e,n.rounding=r,t.ln()):new n(t)};M.inverseHyperbolicSine=M.asinh=function(){var e,r,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,oe=!1,t=t.times(t).plus(1).sqrt().plus(t),oe=!0,n.precision=e,n.rounding=r,t.ln())};M.inverseHyperbolicTangent=M.atanh=function(){var e,r,t,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,r=o.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?Z(new o(i),e,r,!0):(o.precision=t=n-i.e,i=Oe(i.plus(1),new o(1).minus(i),t+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=r,i.times(.5))):new o(NaN)};M.inverseSine=M.asin=function(){var e,r,t,n,i=this,o=i.constructor;return i.isZero()?new o(i):(r=i.abs().cmp(1),t=o.precision,n=o.rounding,r!==-1?r===0?(e=Cr(o,t+4,n).times(.5),e.s=i.s,e):new o(NaN):(o.precision=t+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=t,o.rounding=n,i.times(2)))};M.inverseTangent=M.atan=function(){var e,r,t,n,i,o,a,l,s,u=this,f=u.constructor,c=f.precision,h=f.rounding;if(u.isFinite()){if(u.isZero())return new f(u);if(u.abs().eq(1)&&c+4<=Nu)return a=Cr(f,c+4,h).times(.25),a.s=u.s,a}else{if(!u.s)return new f(NaN);if(c+4<=Nu)return a=Cr(f,c+4,h).times(.5),a.s=u.s,a}for(f.precision=l=c+10,f.rounding=1,t=Math.min(28,l/ee+2|0),e=t;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(oe=!1,r=Math.ceil(l/ee),n=1,s=u.times(u),a=new f(u),i=u;e!==-1;)if(i=i.times(s),o=a.minus(i.div(n+=2)),i=i.times(s),a=o.plus(i.div(n+=2)),a.d[r]!==void 0)for(e=r;a.d[e]===o.d[e]&&e--;);return t&&(a=a.times(2<<t-1)),oe=!0,Z(a,f.precision=c,f.rounding=h,!0)};M.isFinite=function(){return!!this.d};M.isInteger=M.isInt=function(){return!!this.d&&yt(this.e/ee)>this.d.length-2};M.isNaN=function(){return!this.s};M.isNegative=M.isNeg=function(){return this.s<0};M.isPositive=M.isPos=function(){return this.s>0};M.isZero=function(){return!!this.d&&this.d[0]===0};M.lessThan=M.lt=function(e){return this.cmp(e)<0};M.lessThanOrEqualTo=M.lte=function(e){return this.cmp(e)<1};M.logarithm=M.log=function(e){var r,t,n,i,o,a,l,s,u=this,f=u.constructor,c=f.precision,h=f.rounding,d=5;if(e==null)e=new f(10),r=!0;else{if(e=new f(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new f(NaN);r=e.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new f(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(r)if(t.length>1)o=!0;else{for(i=t[0];i%10===0;)i/=10;o=i!==1}if(oe=!1,l=c+d,a=bn(u,l),n=r?sl(f,l+10):bn(e,l),s=Oe(a,n,l,1),Uo(s.d,i=c,h))do if(l+=10,a=bn(u,l),n=r?sl(f,l+10):bn(e,l),s=Oe(a,n,l,1),!o){+ut(s.d).slice(i+1,i+15)+1==1e14&&(s=Z(s,c+1,0));break}while(Uo(s.d,i+=10,h));return oe=!0,Z(s,c,h)};M.minus=M.sub=function(e){var r,t,n,i,o,a,l,s,u,f,c,h,d=this,v=d.constructor;if(e=new v(e),!d.d||!e.d)return!d.s||!e.s?e=new v(NaN):d.d?e.s=-e.s:e=new v(e.d||d.s!==e.s?d:NaN),e;if(d.s!=e.s)return e.s=-e.s,d.plus(e);if(u=d.d,h=e.d,l=v.precision,s=v.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else if(u[0])e=new v(d);else return new v(s===3?-0:0);return oe?Z(e,l,s):e}if(t=yt(e.e/ee),f=yt(d.e/ee),u=u.slice(),o=f-t,o){for(c=o<0,c?(r=u,o=-o,a=h.length):(r=h,t=f,a=u.length),n=Math.max(Math.ceil(l/ee),a)+2,o>n&&(o=n,r.length=1),r.reverse(),n=o;n--;)r.push(0);r.reverse()}else{for(n=u.length,a=h.length,c=n<a,c&&(a=n),n=0;n<a;n++)if(u[n]!=h[n]){c=u[n]<h[n];break}o=0}for(c&&(r=u,u=h,h=r,e.s=-e.s),a=u.length,n=h.length-a;n>0;--n)u[a++]=0;for(n=h.length;n>o;){if(u[--n]<h[n]){for(i=n;i&&u[--i]===0;)u[i]=mr-1;--u[i],u[n]+=mr}u[n]-=h[n]}for(;u[--a]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(e.d=u,e.e=Xl(u,t),oe?Z(e,l,s):e):new v(s===3?-0:0)};M.modulo=M.mod=function(e){var r,t=this,n=t.constructor;return e=new n(e),!t.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||t.d&&!t.d[0]?Z(new n(t),n.precision,n.rounding):(oe=!1,n.modulo==9?(r=Oe(t,e.abs(),0,3,1),r.s*=e.s):r=Oe(t,e,0,n.modulo,1),r=r.times(e),oe=!0,t.minus(r))};M.naturalExponential=M.exp=function(){return Fu(this)};M.naturalLogarithm=M.ln=function(){return bn(this)};M.negated=M.neg=function(){var e=new this.constructor(this);return e.s=-e.s,Z(e)};M.plus=M.add=function(e){var r,t,n,i,o,a,l,s,u,f,c=this,h=c.constructor;if(e=new h(e),!c.d||!e.d)return!c.s||!e.s?e=new h(NaN):c.d||(e=new h(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(u=c.d,f=e.d,l=h.precision,s=h.rounding,!u[0]||!f[0])return f[0]||(e=new h(c)),oe?Z(e,l,s):e;if(o=yt(c.e/ee),n=yt(e.e/ee),u=u.slice(),i=o-n,i){for(i<0?(t=u,i=-i,a=f.length):(t=f,n=o,a=u.length),o=Math.ceil(l/ee),a=o>a?o+1:a+1,i>a&&(i=a,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(a=u.length,i=f.length,a-i<0&&(i=a,t=f,f=u,u=t),r=0;i;)r=(u[--i]=u[i]+f[i]+r)/mr|0,u[i]%=mr;for(r&&(u.unshift(r),++n),a=u.length;u[--a]==0;)u.pop();return e.d=u,e.e=Xl(u,n),oe?Z(e,l,s):e};M.precision=M.sd=function(e){var r,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Mn+e);return t.d?(r=by(t.d),e&&t.e+1>r&&(r=t.e+1)):r=NaN,r};M.round=function(){var e=this,r=e.constructor;return Z(new r(e),e.e+1,r.rounding)};M.sine=M.sin=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+Math.max(t.e,t.sd())+ee,n.rounding=1,t=WP(n,Oy(n,t)),n.precision=e,n.rounding=r,Z(tn>2?t.neg():t,e,r,!0)):new n(NaN)};M.squareRoot=M.sqrt=function(){var e,r,t,n,i,o,a=this,l=a.d,s=a.e,u=a.s,f=a.constructor;if(u!==1||!l||!l[0])return new f(!u||u<0&&(!l||l[0])?NaN:l?a:1/0);for(oe=!1,u=Math.sqrt(+a),u==0||u==1/0?(r=ut(l),(r.length+s)%2==0&&(r+="0"),u=Math.sqrt(r),s=yt((s+1)/2)-(s<0||s%2),u==1/0?r="5e"+s:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+s),n=new f(r)):n=new f(u.toString()),t=(s=f.precision)+3;;)if(o=n,n=o.plus(Oe(a,o,t+2,1)).times(.5),ut(o.d).slice(0,t)===(r=ut(n.d)).slice(0,t))if(r=r.slice(t-3,t+1),r=="9999"||!i&&r=="4999"){if(!i&&(Z(o,s+1,0),o.times(o).eq(a))){n=o;break}t+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(Z(n,s+1,1),e=!n.times(n).eq(a));break}return oe=!0,Z(n,s,f.rounding,e)};M.tangent=M.tan=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+10,n.rounding=1,t=t.sin(),t.s=1,t=Oe(t,new n(1).minus(t.times(t)).sqrt(),e+10,0),n.precision=e,n.rounding=r,Z(tn==2||tn==4?t.neg():t,e,r,!0)):new n(NaN)};M.times=M.mul=function(e){var r,t,n,i,o,a,l,s,u,f=this,c=f.constructor,h=f.d,d=(e=new c(e)).d;if(e.s*=f.s,!h||!h[0]||!d||!d[0])return new c(!e.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?e.s/0:e.s*0);for(t=yt(f.e/ee)+yt(e.e/ee),s=h.length,u=d.length,s<u&&(o=h,h=d,d=o,a=s,s=u,u=a),o=[],a=s+u,n=a;n--;)o.push(0);for(n=u;--n>=0;){for(r=0,i=s+n;i>n;)l=o[i]+d[n]*h[i-n-1]+r,o[i--]=l%mr|0,r=l/mr|0;o[i]=(o[i]+r)%mr|0}for(;!o[--a];)o.pop();return r?++t:o.shift(),e.d=o,e.e=Xl(o,t),oe?Z(e,c.precision,c.rounding):e};M.toBinary=function(e,r){return Gc(this,2,e,r)};M.toDecimalPlaces=M.toDP=function(e,r){var t=this,n=t.constructor;return t=new n(t),e===void 0?t:(Ft(e,0,Hn),r===void 0?r=n.rounding:Ft(r,0,8),Z(t,e+t.e+1,r))};M.toExponential=function(e,r){var t,n=this,i=n.constructor;return e===void 0?t=zr(n,!0):(Ft(e,0,Hn),r===void 0?r=i.rounding:Ft(r,0,8),n=Z(new i(n),e+1,r),t=zr(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+t:t};M.toFixed=function(e,r){var t,n,i=this,o=i.constructor;return e===void 0?t=zr(i):(Ft(e,0,Hn),r===void 0?r=o.rounding:Ft(r,0,8),n=Z(new o(i),e+i.e+1,r),t=zr(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};M.toFraction=function(e){var r,t,n,i,o,a,l,s,u,f,c,h,d=this,v=d.d,p=d.constructor;if(!v)return new p(d);if(u=t=new p(1),n=s=new p(0),r=new p(n),o=r.e=by(v)-d.e-1,a=o%ee,r.d[0]=Je(10,a<0?ee+a:a),e==null)e=o>0?r:u;else{if(l=new p(e),!l.isInt()||l.lt(u))throw Error(Mn+l);e=l.gt(r)?o>0?r:u:l}for(oe=!1,l=new p(ut(v)),f=p.precision,p.precision=o=v.length*ee*2;c=Oe(l,r,0,1,1),i=t.plus(c.times(n)),i.cmp(e)!=1;)t=n,n=i,i=u,u=s.plus(c.times(i)),s=i,i=r,r=l.minus(c.times(i)),l=i;return i=Oe(e.minus(t),n,0,1,1),s=s.plus(i.times(u)),t=t.plus(i.times(n)),s.s=u.s=d.s,h=Oe(u,n,o,1).minus(d).abs().cmp(Oe(s,t,o,1).minus(d).abs())<1?[u,n]:[s,t],p.precision=f,oe=!0,h};M.toHexadecimal=M.toHex=function(e,r){return Gc(this,16,e,r)};M.toNearest=function(e,r){var t=this,n=t.constructor;if(t=new n(t),e==null){if(!t.d)return t;e=new n(1),r=n.rounding}else{if(e=new n(e),r===void 0?r=n.rounding:Ft(r,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(oe=!1,t=Oe(t,e,0,r,1).times(e),oe=!0,Z(t)):(e.s=t.s,t=e),t};M.toNumber=function(){return+this};M.toOctal=function(e,r){return Gc(this,8,e,r)};M.toPower=M.pow=function(e){var r,t,n,i,o,a,l=this,s=l.constructor,u=+(e=new s(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new s(Je(+l,u));if(l=new s(l),l.eq(1))return l;if(n=s.precision,o=s.rounding,e.eq(1))return Z(l,n,o);if(r=yt(e.e/ee),r>=e.d.length-1&&(t=u<0?-u:u)<=FP)return i=Ly(s,l,t,n),e.s<0?new s(1).div(i):Z(i,n,o);if(a=l.s,a<0){if(r<e.d.length-1)return new s(NaN);if(e.d[r]&1||(a=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=a,l}return t=Je(+l,u),r=t==0||!isFinite(t)?yt(u*(Math.log("0."+ut(l.d))/Math.LN10+l.e+1)):new s(t+"").e,r>s.maxE+1||r<s.minE-1?new s(r>0?a/0:0):(oe=!1,s.rounding=l.s=1,t=Math.min(12,(r+"").length),i=Fu(e.times(bn(l,n+t)),n),i.d&&(i=Z(i,n+5,1),Uo(i.d,n,o)&&(r=n+10,i=Z(Fu(e.times(bn(l,r+t)),r),r+5,1),+ut(i.d).slice(n+1,n+15)+1==1e14&&(i=Z(i,n+1,0)))),i.s=a,oe=!0,s.rounding=o,Z(i,n,o))};M.toPrecision=function(e,r){var t,n=this,i=n.constructor;return e===void 0?t=zr(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(Ft(e,1,Hn),r===void 0?r=i.rounding:Ft(r,0,8),n=Z(new i(n),e,r),t=zr(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+t:t};M.toSignificantDigits=M.toSD=function(e,r){var t=this,n=t.constructor;return e===void 0?(e=n.precision,r=n.rounding):(Ft(e,1,Hn),r===void 0?r=n.rounding:Ft(r,0,8)),Z(new n(t),e,r)};M.toString=function(){var e=this,r=e.constructor,t=zr(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};M.truncated=M.trunc=function(){return Z(new this.constructor(this),this.e+1,1)};M.valueOf=M.toJSON=function(){var e=this,r=e.constructor,t=zr(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()?"-"+t:t};function ut(e){var r,t,n,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,r=1;r<i;r++)n=e[r]+"",t=ee-n.length,t&&(o+=Sn(t)),o+=n;a=e[r],n=a+"",t=ee-n.length,t&&(o+=Sn(t))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function Ft(e,r,t){if(e!==~~e||e<r||e>t)throw Error(Mn+e)}function Uo(e,r,t,n){var i,o,a,l;for(o=e[0];o>=10;o/=10)--r;return--r<0?(r+=ee,i=0):(i=Math.ceil((r+1)/ee),r%=ee),o=Je(10,ee-r),l=e[i]%o|0,n==null?r<3?(r==0?l=l/100|0:r==1&&(l=l/10|0),a=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):a=(t<4&&l+1==o||t>3&&l+1==o/2)&&(e[i+1]/o/100|0)==Je(10,r-2)-1||(l==o/2||l==0)&&(e[i+1]/o/100|0)==0:r<4?(r==0?l=l/1e3|0:r==1?l=l/100|0:r==2&&(l=l/10|0),a=(n||t<4)&&l==9999||!n&&t>3&&l==4999):a=((n||t<4)&&l+1==o||!n&&t>3&&l+1==o/2)&&(e[i+1]/o/1e3|0)==Je(10,r-3)-1,a}function Da(e,r,t){for(var n,i=[0],o,a=0,l=e.length;a<l;){for(o=i.length;o--;)i[o]*=r;for(i[0]+=$u.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function zP(e,r){var t,n,i;if(r.isZero())return r;n=r.d.length,n<32?(t=Math.ceil(n/3),i=(1/Vl(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),e.precision+=t,r=Fi(e,1,r.times(i),new e(1));for(var o=t;o--;){var a=r.times(r);r=a.times(a).minus(a).times(8).plus(1)}return e.precision-=t,r}var Oe=function(){function e(n,i,o){var a,l=0,s=n.length;for(n=n.slice();s--;)a=n[s]*i+l,n[s]=a%o|0,l=a/o|0;return l&&n.unshift(l),n}function r(n,i,o,a){var l,s;if(o!=a)s=o>a?1:-1;else for(l=s=0;l<o;l++)if(n[l]!=i[l]){s=n[l]>i[l]?1:-1;break}return s}function t(n,i,o,a){for(var l=0;o--;)n[o]-=l,l=n[o]<i[o]?1:0,n[o]=l*a+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a,l,s){var u,f,c,h,d,v,p,g,C,y,m,w,S,b,A,O,B,P,D,z,W=n.constructor,U=n.s==i.s?1:-1,V=n.d,k=i.d;if(!V||!V[0]||!k||!k[0])return new W(!n.s||!i.s||(V?k&&V[0]==k[0]:!k)?NaN:V&&V[0]==0||!k?U*0:U/0);for(s?(d=1,f=n.e-i.e):(s=mr,d=ee,f=yt(n.e/d)-yt(i.e/d)),D=k.length,B=V.length,C=new W(U),y=C.d=[],c=0;k[c]==(V[c]||0);c++);if(k[c]>(V[c]||0)&&f--,o==null?(b=o=W.precision,a=W.rounding):l?b=o+(n.e-i.e)+1:b=o,b<0)y.push(1),v=!0;else{if(b=b/d+2|0,c=0,D==1){for(h=0,k=k[0],b++;(c<B||h)&&b--;c++)A=h*s+(V[c]||0),y[c]=A/k|0,h=A%k|0;v=h||c<B}else{for(h=s/(k[0]+1)|0,h>1&&(k=e(k,h,s),V=e(V,h,s),D=k.length,B=V.length),O=D,m=V.slice(0,D),w=m.length;w<D;)m[w++]=0;z=k.slice(),z.unshift(0),P=k[0],k[1]>=s/2&&++P;do h=0,u=r(k,m,D,w),u<0?(S=m[0],D!=w&&(S=S*s+(m[1]||0)),h=S/P|0,h>1?(h>=s&&(h=s-1),p=e(k,h,s),g=p.length,w=m.length,u=r(p,m,g,w),u==1&&(h--,t(p,D<g?z:k,g,s))):(h==0&&(u=h=1),p=k.slice()),g=p.length,g<w&&p.unshift(0),t(m,p,w,s),u==-1&&(w=m.length,u=r(k,m,D,w),u<1&&(h++,t(m,D<w?z:k,w,s))),w=m.length):u===0&&(h++,m=[0]),y[c++]=h,u&&m[0]?m[w++]=V[O]||0:(m=[V[O]],w=1);while((O++<B||m[0]!==void 0)&&b--);v=m[0]!==void 0}y[0]||y.shift()}if(d==1)C.e=f,_y=v;else{for(c=1,h=y[0];h>=10;h/=10)c++;C.e=c+f*d-1,Z(C,l?o+C.e+1:o,a,v)}return C}}();function Z(e,r,t,n){var i,o,a,l,s,u,f,c,h,d=e.constructor;e:if(r!=null){if(c=e.d,!c)return e;for(i=1,l=c[0];l>=10;l/=10)i++;if(o=r-i,o<0)o+=ee,a=r,f=c[h=0],s=f/Je(10,i-a-1)%10|0;else if(h=Math.ceil((o+1)/ee),l=c.length,h>=l)if(n){for(;l++<=h;)c.push(0);f=s=0,i=1,o%=ee,a=o-ee+1}else break e;else{for(f=l=c[h],i=1;l>=10;l/=10)i++;o%=ee,a=o-ee+i,s=a<0?0:f/Je(10,i-a-1)%10|0}if(n=n||r<0||c[h+1]!==void 0||(a<0?f:f%Je(10,i-a-1)),u=t<4?(s||n)&&(t==0||t==(e.s<0?3:2)):s>5||s==5&&(t==4||n||t==6&&(o>0?a>0?f/Je(10,i-a):0:c[h-1])%10&1||t==(e.s<0?8:7)),r<1||!c[0])return c.length=0,u?(r-=e.e+1,c[0]=Je(10,(ee-r%ee)%ee),e.e=-r||0):c[0]=e.e=0,e;if(o==0?(c.length=h,l=1,h--):(c.length=h+1,l=Je(10,ee-o),c[h]=a>0?(f/Je(10,i-a)%Je(10,a)|0)*l:0),u)for(;;)if(h==0){for(o=1,a=c[0];a>=10;a/=10)o++;for(a=c[0]+=l,l=1;a>=10;a/=10)l++;o!=l&&(e.e++,c[0]==mr&&(c[0]=1));break}else{if(c[h]+=l,c[h]!=mr)break;c[h--]=0,l=1}for(o=c.length;c[--o]===0;)c.pop()}return oe&&(e.e>d.maxE?(e.d=null,e.e=NaN):e.e<d.minE&&(e.e=0,e.d=[0])),e}function zr(e,r,t){if(!e.isFinite())return Ry(e);var n,i=e.e,o=ut(e.d),a=o.length;return r?(t&&(n=t-a)>0?o=o.charAt(0)+"."+o.slice(1)+Sn(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+Sn(-i-1)+o,t&&(n=t-a)>0&&(o+=Sn(n))):i>=a?(o+=Sn(i+1-a),t&&(n=t-i-1)>0&&(o=o+"."+Sn(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),t&&(n=t-a)>0&&(i+1===a&&(o+="."),o+=Sn(n))),o}function Xl(e,r){var t=e[0];for(r*=ee;t>=10;t/=10)r++;return r}function sl(e,r,t){if(r>HP)throw oe=!0,t&&(e.precision=t),Error(Sy);return Z(new e(al),r,1,!0)}function Cr(e,r,t){if(r>Nu)throw Error(Sy);return Z(new e(ll),r,t,!0)}function by(e){var r=e.length-1,t=r*ee+1;if(r=e[r],r){for(;r%10==0;r/=10)t--;for(r=e[0];r>=10;r/=10)t++}return t}function Sn(e){for(var r="";e--;)r+="0";return r}function Ly(e,r,t,n){var i,o=new e(1),a=Math.ceil(n/ee+4);for(oe=!1;;){if(t%2&&(o=o.times(r),np(o.d,a)&&(i=!0)),t=yt(t/2),t===0){t=o.d.length-1,i&&o.d[t]===0&&++o.d[t];break}r=r.times(r),np(r.d,a)}return oe=!0,o}function rp(e){return e.d[e.d.length-1]&1}function Ay(e,r,t){for(var n,i=new e(r[0]),o=0;++o<r.length;)if(n=new e(r[o]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function Fu(e,r){var t,n,i,o,a,l,s,u=0,f=0,c=0,h=e.constructor,d=h.rounding,v=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(r==null?(oe=!1,s=v):s=r,l=new h(.03125);e.e>-2;)e=e.times(l),c+=5;for(n=Math.log(Je(2,c))/Math.LN10*2+5|0,s+=n,t=o=a=new h(1),h.precision=s;;){if(o=Z(o.times(e),s,1),t=t.times(++f),l=a.plus(Oe(o,t,s,1)),ut(l.d).slice(0,s)===ut(a.d).slice(0,s)){for(i=c;i--;)a=Z(a.times(a),s,1);if(r==null)if(u<3&&Uo(a.d,s-n,d,u))h.precision=s+=10,t=o=l=new h(1),f=0,u++;else return Z(a,h.precision=v,d,oe=!0);else return h.precision=v,a}a=l}}function bn(e,r){var t,n,i,o,a,l,s,u,f,c,h,d=1,v=10,p=e,g=p.d,C=p.constructor,y=C.rounding,m=C.precision;if(p.s<0||!g||!g[0]||!p.e&&g[0]==1&&g.length==1)return new C(g&&!g[0]?-1/0:p.s!=1?NaN:g?0:p);if(r==null?(oe=!1,f=m):f=r,C.precision=f+=v,t=ut(g),n=t.charAt(0),Math.abs(o=p.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)p=p.times(e),t=ut(p.d),n=t.charAt(0),d++;o=p.e,n>1?(p=new C("0."+t),o++):p=new C(n+"."+t.slice(1))}else return u=sl(C,f+2,m).times(o+""),p=bn(new C(n+"."+t.slice(1)),f-v).plus(u),C.precision=m,r==null?Z(p,m,y,oe=!0):p;for(c=p,s=a=p=Oe(p.minus(1),p.plus(1),f,1),h=Z(p.times(p),f,1),i=3;;){if(a=Z(a.times(h),f,1),u=s.plus(Oe(a,new C(i),f,1)),ut(u.d).slice(0,f)===ut(s.d).slice(0,f))if(s=s.times(2),o!==0&&(s=s.plus(sl(C,f+2,m).times(o+""))),s=Oe(s,new C(d),f,1),r==null)if(Uo(s.d,f-v,y,l))C.precision=f+=v,u=a=p=Oe(c.minus(1),c.plus(1),f,1),h=Z(p.times(p),f,1),i=l=1;else return Z(s,C.precision=m,y,oe=!0);else return C.precision=m,s;s=u,i+=2}}function Ry(e){return String(e.s*e.s/0)}function Hu(e,r){var t,n,i;for((t=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(t<0&&(t=n),t+=+r.slice(n+1),r=r.substring(0,n)):t<0&&(t=r.length),n=0;r.charCodeAt(n)===48;n++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(n,i),r){if(i-=n,e.e=t=t-n-1,e.d=[],n=(t+1)%ee,t<0&&(n+=ee),n<i){for(n&&e.d.push(+r.slice(0,n)),i-=ee;n<i;)e.d.push(+r.slice(n,n+=ee));r=r.slice(n),n=ee-r.length}else n-=i;for(;n--;)r+="0";e.d.push(+r),oe&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function kP(e,r){var t,n,i,o,a,l,s,u,f;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),Ey.test(r))return Hu(e,r)}else if(r==="Infinity"||r==="NaN")return+r||(e.s=NaN),e.e=NaN,e.d=null,e;if(PP.test(r))t=16,r=r.toLowerCase();else if($P.test(r))t=2;else if(NP.test(r))t=8;else throw Error(Mn+r);for(o=r.search(/p/i),o>0?(s=+r.slice(o+1),r=r.substring(2,o)):r=r.slice(2),o=r.indexOf("."),a=o>=0,n=e.constructor,a&&(r=r.replace(".",""),l=r.length,o=l-o,i=Ly(n,new n(t),o,o*2)),u=Da(r,t,mr),f=u.length-1,o=f;u[o]===0;--o)u.pop();return o<0?new n(e.s*0):(e.e=Xl(u,f),e.d=u,oe=!1,a&&(e=Oe(e,i,l*4)),s&&(e=e.times(Math.abs(s)<54?Je(2,s):Sr.pow(2,s))),oe=!0,e)}function WP(e,r){var t,n=r.d.length;if(n<3)return r.isZero()?r:Fi(e,2,r,r);t=1.4*Math.sqrt(n),t=t>16?16:t|0,r=r.times(1/Vl(5,t)),r=Fi(e,2,r,r);for(var i,o=new e(5),a=new e(16),l=new e(20);t--;)i=r.times(r),r=r.times(o.plus(i.times(a.times(i).minus(l))));return r}function Fi(e,r,t,n,i){var o,a,l,s,u=e.precision,f=Math.ceil(u/ee);for(oe=!1,s=t.times(t),l=new e(n);;){if(a=Oe(l.times(s),new e(r++*r++),u,1),l=i?n.plus(a):n.minus(a),n=Oe(a.times(s),new e(r++*r++),u,1),a=l.plus(n),a.d[f]!==void 0){for(o=f;a.d[o]===l.d[o]&&o--;);if(o==-1)break}o=l,l=n,n=a,a=o}return oe=!0,a.d.length=f+1,a}function Vl(e,r){for(var t=e;--r;)t*=e;return t}function Oy(e,r){var t,n=r.s<0,i=Cr(e,e.precision,1),o=i.times(.5);if(r=r.abs(),r.lte(o))return tn=n?4:1,r;if(t=r.divToInt(i),t.isZero())tn=n?3:2;else{if(r=r.minus(t.times(i)),r.lte(o))return tn=rp(t)?n?2:3:n?4:1,r;tn=rp(t)?n?1:4:n?3:2}return r.minus(i).abs()}function Gc(e,r,t,n){var i,o,a,l,s,u,f,c,h,d=e.constructor,v=t!==void 0;if(v?(Ft(t,1,Hn),n===void 0?n=d.rounding:Ft(n,0,8)):(t=d.precision,n=d.rounding),!e.isFinite())f=Ry(e);else{for(f=zr(e),a=f.indexOf("."),v?(i=2,r==16?t=t*4-3:r==8&&(t=t*3-2)):i=r,a>=0&&(f=f.replace(".",""),h=new d(1),h.e=f.length-a,h.d=Da(zr(h),10,i),h.e=h.d.length),c=Da(f,10,i),o=s=c.length;c[--s]==0;)c.pop();if(!c[0])f=v?"0p+0":"0";else{if(a<0?o--:(e=new d(e),e.d=c,e.e=o,e=Oe(e,h,t,n,0,i),c=e.d,o=e.e,u=_y),a=c[t],l=i/2,u=u||c[t+1]!==void 0,u=n<4?(a!==void 0||u)&&(n===0||n===(e.s<0?3:2)):a>l||a===l&&(n===4||u||n===6&&c[t-1]&1||n===(e.s<0?8:7)),c.length=t,u)for(;++c[--t]>i-1;)c[t]=0,t||(++o,c.unshift(1));for(s=c.length;!c[s-1];--s);for(a=0,f="";a<s;a++)f+=$u.charAt(c[a]);if(v){if(s>1)if(r==16||r==8){for(a=r==16?4:3,--s;s%a;s++)f+="0";for(c=Da(f,i,r),s=c.length;!c[s-1];--s);for(a=1,f="1.";a<s;a++)f+=$u.charAt(c[a])}else f=f.charAt(0)+"."+f.slice(1);f=f+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)f="0"+f;f="0."+f}else if(++o>s)for(o-=s;o--;)f+="0";else o<s&&(f=f.slice(0,o)+"."+f.slice(o))}f=(r==16?"0x":r==2?"0b":r==8?"0o":"")+f}return e.s<0?"-"+f:f}function np(e,r){if(e.length>r)return e.length=r,!0}function GP(e){return new this(e).abs()}function UP(e){return new this(e).acos()}function YP(e){return new this(e).acosh()}function XP(e,r){return new this(e).plus(r)}function VP(e){return new this(e).asin()}function jP(e){return new this(e).asinh()}function qP(e){return new this(e).atan()}function KP(e){return new this(e).atanh()}function ZP(e,r){e=new this(e),r=new this(r);var t,n=this.precision,i=this.rounding,o=n+4;return!e.s||!r.s?t=new this(NaN):!e.d&&!r.d?(t=Cr(this,o,1).times(r.s>0?.25:.75),t.s=e.s):!r.d||e.isZero()?(t=r.s<0?Cr(this,n,i):new this(0),t.s=e.s):!e.d||r.isZero()?(t=Cr(this,o,1).times(.5),t.s=e.s):r.s<0?(this.precision=o,this.rounding=1,t=this.atan(Oe(e,r,o,1)),r=Cr(this,o,1),this.precision=n,this.rounding=i,t=e.s<0?t.minus(r):t.plus(r)):t=this.atan(Oe(e,r,o,1)),t}function QP(e){return new this(e).cbrt()}function JP(e){return Z(e=new this(e),e.e+1,2)}function e7(e,r,t){return new this(e).clamp(r,t)}function t7(e){if(!e||typeof e!="object")throw Error(Yl+"Object expected");var r,t,n,i=e.defaults===!0,o=["precision",1,Hn,"rounding",0,8,"toExpNeg",-wi,0,"toExpPos",0,wi,"maxE",0,wi,"minE",-wi,0,"modulo",0,9];for(r=0;r<o.length;r+=3)if(t=o[r],i&&(this[t]=Pu[t]),(n=e[t])!==void 0)if(yt(n)===n&&n>=o[r+1]&&n<=o[r+2])this[t]=n;else throw Error(Mn+t+": "+n);if(t="crypto",i&&(this[t]=Pu[t]),(n=e[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(xy);else this[t]=!1;else throw Error(Mn+t+": "+n);return this}function r7(e){return new this(e).cos()}function n7(e){return new this(e).cosh()}function Iy(e){var r,t,n;function i(o){var a,l,s,u=this;if(!(u instanceof i))return new i(o);if(u.constructor=i,ip(o)){u.s=o.s,oe?!o.d||o.e>i.maxE?(u.e=NaN,u.d=null):o.e<i.minE?(u.e=0,u.d=[0]):(u.e=o.e,u.d=o.d.slice()):(u.e=o.e,u.d=o.d?o.d.slice():o.d);return}if(s=typeof o,s==="number"){if(o===0){u.s=1/o<0?-1:1,u.e=0,u.d=[0];return}if(o<0?(o=-o,u.s=-1):u.s=1,o===~~o&&o<1e7){for(a=0,l=o;l>=10;l/=10)a++;oe?a>i.maxE?(u.e=NaN,u.d=null):a<i.minE?(u.e=0,u.d=[0]):(u.e=a,u.d=[o]):(u.e=a,u.d=[o]);return}else if(o*0!==0){o||(u.s=NaN),u.e=NaN,u.d=null;return}return Hu(u,o.toString())}else if(s!=="string")throw Error(Mn+o);return(l=o.charCodeAt(0))===45?(o=o.slice(1),u.s=-1):(l===43&&(o=o.slice(1)),u.s=1),Ey.test(o)?Hu(u,o):kP(u,o)}if(i.prototype=M,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=t7,i.clone=Iy,i.isDecimal=ip,i.abs=GP,i.acos=UP,i.acosh=YP,i.add=XP,i.asin=VP,i.asinh=jP,i.atan=qP,i.atanh=KP,i.atan2=ZP,i.cbrt=QP,i.ceil=JP,i.clamp=e7,i.cos=r7,i.cosh=n7,i.div=i7,i.exp=o7,i.floor=a7,i.hypot=l7,i.ln=s7,i.log=u7,i.log10=c7,i.log2=f7,i.max=h7,i.min=d7,i.mod=v7,i.mul=p7,i.pow=g7,i.random=C7,i.round=y7,i.sign=m7,i.sin=w7,i.sinh=_7,i.sqrt=S7,i.sub=x7,i.sum=T7,i.tan=E7,i.tanh=b7,i.trunc=L7,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)e.hasOwnProperty(t=n[r++])||(e[t]=this[t]);return i.config(e),i}function i7(e,r){return new this(e).div(r)}function o7(e){return new this(e).exp()}function a7(e){return Z(e=new this(e),e.e+1,3)}function l7(){var e,r,t=new this(0);for(oe=!1,e=0;e<arguments.length;)if(r=new this(arguments[e++]),r.d)t.d&&(t=t.plus(r.times(r)));else{if(r.s)return oe=!0,new this(1/0);t=r}return oe=!0,t.sqrt()}function ip(e){return e instanceof Sr||e&&e.toStringTag===Ty||!1}function s7(e){return new this(e).ln()}function u7(e,r){return new this(e).log(r)}function f7(e){return new this(e).log(2)}function c7(e){return new this(e).log(10)}function h7(){return Ay(this,arguments,"lt")}function d7(){return Ay(this,arguments,"gt")}function v7(e,r){return new this(e).mod(r)}function p7(e,r){return new this(e).mul(r)}function g7(e,r){return new this(e).pow(r)}function C7(e){var r,t,n,i,o=0,a=new this(1),l=[];if(e===void 0?e=this.precision:Ft(e,1,Hn),n=Math.ceil(e/ee),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));o<n;)i=r[o],i>=429e7?r[o]=crypto.getRandomValues(new Uint32Array(1))[0]:l[o++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);o<n;)i=r[o]+(r[o+1]<<8)+(r[o+2]<<16)+((r[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,o):(l.push(i%1e7),o+=4);o=n/4}else throw Error(xy);else for(;o<n;)l[o++]=Math.random()*1e7|0;for(n=l[--o],e%=ee,n&&e&&(i=Je(10,ee-e),l[o]=(n/i|0)*i);l[o]===0;o--)l.pop();if(o<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=ee)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<ee&&(t-=ee-n)}return a.e=t,a.d=l,a}function y7(e){return Z(e=new this(e),e.e+1,this.rounding)}function m7(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function w7(e){return new this(e).sin()}function _7(e){return new this(e).sinh()}function S7(e){return new this(e).sqrt()}function x7(e,r){return new this(e).sub(r)}function T7(){var e=0,r=arguments,t=new this(r[e]);for(oe=!1;t.s&&++e<r.length;)t=t.plus(r[e]);return oe=!0,Z(t,this.precision,this.rounding)}function E7(e){return new this(e).tan()}function b7(e){return new this(e).tanh()}function L7(e){return Z(e=new this(e),e.e+1,1)}M[Symbol.for("nodejs.util.inspect.custom")]=M.toString;M[Symbol.toStringTag]="Decimal";var Sr=M.constructor=Iy(Pu);al=new Sr(al);ll=new Sr(ll);var di,My=function(e){return typeof e=="number"?Number.isNaN(e):e&&typeof e=="string"?Number.isNaN(Number(e)):!0},Uc=function(e,r,t){return t===void 0&&(t=!1),e!=null&&e.length?e.reduce(function(n,i){var o=j(i,r),a=My(o);if(t&&a)return n;var l=a?0:o;return n.push(new Sr(l)),n},[]):[]},By=function(e,r){var t=Uc(e,r);return t.length?Sr.sum.apply(Sr,$([],I(t),!1)).toNumber():0},op=function(e,r,t){var n=Uc(r,t,!0);if(n!=null&&n.length)return Sr[e].apply(Sr,$([],I(n),!1)).toNumber()},A7=function(e,r){var t=Uc(e,r);return t!=null&&t.length?Sr.sum.apply(Sr,$([],I(t),!1)).dividedBy(t.length).toNumber():0},R7=(di={},di[yi.SUM]=By,di[yi.MIN]=function(e,r){return op("min",e,r)},di[yi.MAX]=function(e,r){return op("max",e,r)},di[yi.AVG]=A7,di),O7=function(e){return Ae(e)&&"values"in e},I7=function(e){var r=e.spreadsheet,t=e.position,n=e.tooltipContainer,i=e.autoAdjustBoundary,o=r.getCanvasElement(),a=t.x+Dv.x,l=t.y+Dv.y;if(!i||!o)return{x:a,y:l};var s=i==="body",u=r.facet.panelBBox,f=u.maxX,c=u.maxY,h=r.options,d=h.width,v=h.height,p=o.getBoundingClientRect(),g=p.top,C=p.left,y=n.getBoundingClientRect(),m=y.width,w=y.height,S=document.body.getBoundingClientRect(),b=S.width,A=S.height,O=s?b:Math.min(d,f)+C,B=s?A:Math.min(v,c)+g;return a+m>=O&&(a=O-m),l+w>=B&&(l=B-w),{x:a,y:l}},Dy=function(e){return L({operator:{onClick:ml,menus:[]},enterable:!0,enableFormat:!0},e)},zu=function(e){return L(L({},e==null?void 0:e.colQuery),e==null?void 0:e.rowQuery)},La=function(e,r){var t;if(e){var n=r.style,i=r.className,o=i===void 0?[]:i,a=r.visible;if(n&&Object.assign(e.style,n),o.length){var l=o.filter(Boolean);(t=e.classList).add.apply(t,$([],I(l),!1))}e.classList.toggle(DD,a),e.classList.toggle($D,!a)}},M7=function(e){var r=Yt(e)&&Number.isNaN(e),t=e==="";return rt(e)||r||t?"-":e},Yc=function(e,r){var t,n=(t=e==null?void 0:e.dataSet)===null||t===void 0?void 0:t.getFieldFormatter(r);return function(i,o){return M7(n(i,o))}},$a=function(e,r){var t,n=r.data,i=r.field,o=r.valueField,a=r.useCompleteDataForFormatter,l=a===void 0?!0:a,s=(t=e==null?void 0:e.dataSet)===null||t===void 0?void 0:t.getFieldName(i),u=Yc(e,i),f=Ae(n[i])?JSON.stringify(n[i]):n[i],c=u(o||f,l?n:void 0);return{name:s,value:c}},ap=function(e,r,t){var n=qr(Mr([],r),function(o){return o!==fe&&t[o]}),i=de(n,function(o){return $a(e,{data:t,field:o,useCompleteDataForFormatter:!1})});return i},B7=function(e,r,t){var n,i,o,a,l=(t||{}).isTotals,s=[],u=[];if(r){var f=(i=(n=e==null?void 0:e.dataSet)===null||n===void 0?void 0:n.fields)===null||i===void 0?void 0:i.columns,c=(a=(o=e==null?void 0:e.dataSet)===null||o===void 0?void 0:o.fields)===null||a===void 0?void 0:a.rows;s=ap(e,Ji(f||[]),r),u=ap(e,c,r)}return H(s)&&H(u)&&l&&(s=[{value:ke("总计")}]),{cols:s,rows:u}},D7=function(e,r,t){if(r){var n=t.isTotals,i=r[fe],o=r[i],a=[];if(n)a.push($a(e,{data:r,field:i,valueField:j(r,rr)}));else if(O7(o)&&e.getTooltipDataItemMappingCallback()){var l=ay(r,e.getTooltipDataItemMappingCallback());te(l,function(s,u){a.push($a(e,{data:l,field:u}))})}else a.push($a(e,{data:r,field:i}));return a}},$7=function(e,r,t){var n;if(t)return ke("总计");var i=(n=e==null?void 0:e.dataSet)===null||n===void 0?void 0:n.getFieldName(r);return i&&i!=="undefined"?i:""},lp=function(e,r,t){t===void 0&&(t=!0);var n=[];return te(r,function(i,o){te(e,function(a){!t&&a.colIndex!==-1?n.push([o,a.colIndex]):t&&a.rowIndex!==-1&&n.push([a.rowIndex,o])})}),n},P7=function(e,r){var t,n=r.rowLeafNodes,i=r.colLeafNodes,o=e.interaction.getState(),a=o.nodes,l=a===void 0?[]:a,s=o.cells,u=s===void 0?[]:s,f=(t=u==null?void 0:u[0])===null||t===void 0?void 0:t.type;return f===N.COL_CELL?lp(l,n,!1):f===N.ROW_CELL?lp(l,i):[]},N7=function(e,r,t){var n,i=(n=e.facet)===null||n===void 0?void 0:n.layoutResult,o=function(s){var u=r==null?void 0:r.getMeta(),f=u==null?void 0:u.isTotals,c=(r==null?void 0:r.cellType)===N.COL_CELL,h=(r==null?void 0:r.cellType)===N.ROW_CELL;if(!c&&!h)return!1;var d=i.colNodes.find(function(g){return g.colIndex===s.colIndex}),v=i.rowNodes.find(function(g){return g.rowIndex===s.rowIndex}),p=c?v==null?void 0:v.isTotals:d==null?void 0:d.isTotals;return!f&&(s==null?void 0:s.isTotals)||f&&p};if(t){var a=P7(e,i);return on(de(a,function(s){var u=I(s,2),f=u[0],c=u[1],h=i.getCellMeta(f,c);if(!o(h))return(h==null?void 0:h.data)||zu(h)}))}var l=e.interaction.getCells();return l.filter(function(s){var u=i.getCellMeta(s.rowIndex,s.colIndex);return!o(u)}).map(function(s){var u=i.getCellMeta(s.rowIndex,s.colIndex);return(u==null?void 0:u.data)||zu(u)})},F7=function(e){var r=e.spreadsheet,t=e.targetCell,n=e.options,i=n===void 0?{}:n,o=[],a={},l=r.isTableMode();if(l&&(i!=null&&i.showSingleTips)){var s=r.dataSet.getMultiData({});return[{selectedData:s,name:"",value:""}]}var u=N7(r,t,i.showSingleTips);return te(u,function(f){var c;a[f==null?void 0:f[fe]]?(c=a[f==null?void 0:f[fe]])===null||c===void 0||c.push(f):a[f==null?void 0:f[fe]]=[f]}),K1(a,function(f,c){var h,d=$7(r,c,i==null?void 0:i.isTotals),v="",p="";if(ta(f,function(w){return My(j(w,rr))})){var g=r.options.placeholder,C=eo(a,g);v=C,p=C}else{var y=Yc(r,c),m=By(f,rr);p=m,v=(h=y==null?void 0:y(m,f))!==null&&h!==void 0?h:parseFloat(m.toPrecision(J0))}o.push({selectedData:f,name:d,value:v,originValue:p})}),o},H7=function(e){if(e){var r=e.getMeta();if(!r.isTotals){var t=ct(r.spreadsheet.dataCfg.meta,{field:r.field||r.value||r.valueField}),n=t==null?void 0:t.field;return r.spreadsheet.dataSet.getFieldDescription(n)}}},z7=function(e){var r=e.spreadsheet,t=e.cellInfos,n=t===void 0?[]:t,i=e.options,o=i===void 0?{}:i,a=e.targetCell,l=null,s=null,u=null,f=H7(a),c=n[0]||{};if(!(o!=null&&o.hideSummary))l=F7({spreadsheet:r,options:o,targetCell:a});else if(o.showSingleTips){var h=Yc(r,c.valueField),d=h(c.value),v=o.enableFormat?r.dataSet.getFieldName(c.value)||d:r.dataSet.getFieldName(c.valueField);c.name=v||""}else s=B7(r,c,o),u=D7(r,c,o);var p=c||{},g=p.interpretation,C=p.infos,y=p.tips,m=p.name;return{summaries:l,interpretation:g,infos:C,tips:y,name:m,headInfo:s,details:u,description:f}},k7=function(e){return de(e,function(r){var t=r.getMeta();return Tg({},t.query||{},cC(t,["colIndex","rowIndex"]))})},Xc=function(e){if(!e.interaction.isSelectedState())return[];var r=e.dataCfg.fields.valueInCols;return e.interaction.getCells().reduce(function(t,n){var i=e.facet.layoutResult.getCellMeta(n==null?void 0:n.rowIndex,n==null?void 0:n.colIndex),o=zu(i);if(H(i)||H(o))return[];var a=L(L({},o),{colIndex:r?i.colIndex:null,rowIndex:r?null:i.rowIndex}),l=t.find(function(s){return at(a,s)});return l||t.push(a),t},[])},W7=function(e,r){e===void 0&&(e={});var t=function(l){return Lr(e,l)},n=e.col,i=e.row,o=e.data,a=e.corner;return r===N.COL_CELL?t(n):r===N.ROW_CELL?t(i):r===N.DATA_CELL?t(o):r===N.CORNER_CELL?t(a):L({},e)},Vc=function(e,r){var t;if(!(!r||!e)){var n=(t=e.getCellType)===null||t===void 0?void 0:t.call(e,r==null?void 0:r.target);return W7(e.options.tooltip,n)}},$y=function(e,r){var t=r.defaultMenus,n=t===void 0?[]:t,i=r.cell,o=function(l){return l===void 0&&(l=[]),l.filter(function(s){var u;return ft(s.visible)?s.visible(i):(u=s.visible)!==null&&u!==void 0?u:!0}).map(function(s){return s.children&&(s.children=o(s.children)),s})},a=o(e.menus);return{onClick:e.onClick,menus:on($($([],I(n),!1),I(a),!1))}},G7=function(e,r){for(var t=!1,n=r;n&&n!==document.body;){if(e===n){t=!0;break}n=n.parentElement}return t},U7=function(e){e.store.set(Va,mf)},Y7=function(e,r){var t=e.store.get(Va,mf);e.store.set(Va,L(L({},t),r))},X7=function(e,r){var t=e.store.get(Va,mf);return t[r]},Py=function(){function e(r){var t=this;this.getFieldMeta=si(function(n,i){return ct(t.meta||i,function(o){return o.field===n})}),this.spreadsheet=r}return e.prototype.getFieldName=function(r){return j(this.getFieldMeta(r,this.meta),"name",r)},e.prototype.getFieldFormatter=function(r){return j(this.getFieldMeta(r,this.meta),"formatter",wt)},e.prototype.getFieldDescription=function(r){return j(this.getFieldMeta(r,this.meta),"description")},e.prototype.setDataCfg=function(r){this.getFieldMeta.cache.clear();var t=this.processDataCfg(r),n=t.fields,i=t.meta,o=t.data,a=t.totalData,l=t.sortParams,s=t.filterParams;this.fields=n,this.meta=i,this.originData=o,this.totalData=a,this.sortParams=l,this.filterParams=s,this.displayData=this.originData,this.indexesData=[]},e.prototype.processMeta=function(r,t){var n,i;return r===void 0&&(r=[]),$($([],I(r),!1),[J9(r,(i=(n=this.spreadsheet)===null||n===void 0?void 0:n.options)===null||i===void 0?void 0:i.cornerExtraFieldText,t)],!1)},e.prototype.getDisplayDataSet=function(){return this.displayData},e.prototype.isEmpty=function(){return H(this.getDisplayDataSet())},e.prototype.getValueRangeByField=function(r){var t,n=X7(this.spreadsheet,r);if(n)return n;var i=on(de(this.originData,function(a){var l=a[r];return rt(l)?null:Number.parseFloat(l)})),o={maxValue:Di(i),minValue:sc(i)};return Y7(this.spreadsheet,(t={},t[r]=o,t)),o},e.prototype.moreThanOneValue=function(){var r,t;return((t=(r=this.fields)===null||r===void 0?void 0:r.values)===null||t===void 0?void 0:t.length)>1},e}(),ku=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.handleDimensionValuesSort=function(){te(t.sortParams,function(n){var i=n.sortFieldId,o=n.sortByMeasure;if(i){var a=$([],I(t.sortedDimensionValues[i]||[]),!1),l=uP({dataSet:t,sortParam:n,originValues:a,isSortByMeasure:!H(o)});t.sortedDimensionValues[i]=l}})},t.getCustomData=function(n){for(var i,o=!1,a=t.indexesData,l=function(u){var f=n[u];o?Pr(f)?a=Ts(a):a=(i=Kr(a))===null||i===void 0?void 0:i.map(function(c){return c&&j(c,f)}):Pr(f)?o=!0:a=a==null?void 0:a[f]},s=0;s<n.length;s++)l(s);return a},t.getTotalStatus=function(n){var i=t.fields,o=i.columns,a=i.rows,l=function(u,f){if(f){var c=ct(u,function(h){return!gi(n,h)});return c&&c!==Bi(u)}return ta(u,function(h){return!gi(n,h)})},s=function(u,f){return f?u.filter(function(c){return c!==fe}):u};return{isRowTotal:l(s(a,!t.spreadsheet.isValueInCols())),isRowSubTotal:l(a,!0),isColTotal:l(s(o,t.spreadsheet.isValueInCols())),isColSubTotal:l(o,!0)}},t}return r.prototype.setDataCfg=function(t){var n=this;e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map,this.totalData=[].concat(kv(t.data,t.fields)).concat(this.totalData),en.getInstance().debugCallback(YD,function(){var i=n.fields,o=i.rows,a=i.columns,l=Iu({rows:o,columns:a,originData:n.originData,totalData:n.totalData,indexesData:n.indexesData,sortedDimensionValues:n.sortedDimensionValues,rowPivotMeta:n.rowPivotMeta,colPivotMeta:n.colPivotMeta}).indexesData;n.indexesData=l}),this.handleDimensionValuesSort()},r.prototype.transformDrillDownData=function(t,n,i){var o=this,a,l=this.fields,s=l.columns,u=l.values,f=st.getFieldPath(i,!0),c=$($([],I(f),!1),[t],!1),h=this.spreadsheet.store,d=this.standardTransform(n,u),v=kv(d,{columns:this.fields.columns,rows:c}),p=qf(d,v),g=i==null?void 0:i.id,C=(a=h.get("drillDownIdPathMap"))!==null&&a!==void 0?a:new Map;C.has(g)&&(te(C.get(g),function(O){Eu(o.indexesData,O)}),Uv(this.rowPivotMeta,g));var y=Iu({rows:c,columns:s,originData:p,totalData:v,indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),m=y.paths,w=y.indexesData,S=y.rowPivotMeta,b=y.colPivotMeta,A=y.sortedDimensionValues;this.indexesData=w,this.rowPivotMeta=S,this.colPivotMeta=b,this.sortedDimensionValues=A,C.set(g,m),h.set("drillDownIdPathMap",C)},r.prototype.clearDrillDownData=function(t){var n=this,i=this.spreadsheet.store,o=i.get("drillDownIdPathMap");if(o){var a=i.get("drillDownDataCache",[]);if(t){var l=o.get(t);l&&te(l,function(d){Eu(n.indexesData,d)}),Uv(this.rowPivotMeta,t),o.delete(t);var s=qr(a,function(d){return o.has(d==null?void 0:d.rowId)});i.set("drillDownDataCache",s);var u=s.map(function(d){return d==null?void 0:d.drillLevel}),f=i.get("drillDownFieldInLevel",[]),c=f.filter(function(d){return Tt(u,d==null?void 0:d.drillLevel)});i.set("drillDownFieldInLevel",c)}else{o.clear();var h=this.spreadsheet.store.get("originalDataCfg");H(h)||this.spreadsheet.setDataCfg(h),this.spreadsheet.store.set("drillItemsNum",-1),this.spreadsheet.store.set("drillDownDataCache",[]),this.spreadsheet.store.set("drillDownFieldInLevel",[])}i.set("drillDownIdPathMap",o)}},r.prototype.standardTransform=function(t,n){if(H(n))return t;var i=[];return te(n,function(o){te(t,function(a){var l;gi(a,o)&&i.push(L(L({},a),(l={},l[fe]=o,l[rr]=a[o],l)))})}),i},r.prototype.processDataCfg=function(t){var n=t.data,i=t.meta,o=i===void 0?[]:i,a=t.fields,l=t.sortParams,s=l===void 0?[]:l,u=t.totalData,f=a.columns,c=a.rows,h=a.values,d=a.valueInCols,v=a.customValueOrder,p=f,g=c;d?p=this.isCustomMeasuresPosition(v)?this.handleCustomMeasuresOrder(v,p):Rr($($([],I(f),!1),[fe],!1)):g=this.isCustomMeasuresPosition(v)?this.handleCustomMeasuresOrder(v,g):Rr($($([],I(c),!1),[fe],!1));var C=this.processMeta(o,ke("数值")),y=this.standardTransform(n,h),m=this.standardTransform(u,h);return{data:y,meta:C,fields:L(L({},a),{rows:g,columns:p,values:h}),totalData:m,sortParams:s}},r.prototype.getDimensionsByField=function(t){var n=this.fields||{},i=n.rows,o=i===void 0?[]:i,a=n.columns,l=a===void 0?[]:a;return Tt(o,t)?o:Tt(l,t)?l:[]},r.prototype.getTotalDimensionValues=function(t,n){var i=this,o=this.getDimensionsByField(t),a=(this.sortedDimensionValues[t]||[]).filter(function(l){return i.checkAccordQueryWithDimensionValue({dimensionValues:l,query:n,dimensions:o,field:t})});return ho(Rr(bs($([],I(a),!1))))},r.prototype.getDimensionValues=function(t,n){var i,o,a,l,s=this.fields||{},u=s.rows,f=u===void 0?[]:u,c=s.columns,h=c===void 0?[]:c,d=new Map,v=[];if(Tt(f,t)?(d=this.rowPivotMeta,v=f):Tt(h,t)&&(d=this.colPivotMeta,v=h),!H(n)){var p=[],g=[],C=function(b){var A=j(n,b);g.push("".concat(A));var O=g.join("".concat(tt));if(d.has(A)&&!Pr(A)){var B=(a=d.get(A))===null||a===void 0?void 0:a.childField;if(d=d.get(A).children,ct(y.sortParams,function(D){return D.sortFieldId===B})&&y.sortedDimensionValues[B]){var P=(l=y.sortedDimensionValues[B])===null||l===void 0?void 0:l.filter(function(D){return D==null?void 0:D.startsWith(O)});p=bs($([],I(P),!1))}else p=$([],I(d.keys()),!1)}},y=this;try{for(var m=tr(v),w=m.next();!w.done;w=m.next()){var S=w.value;C(S)}}catch(b){i={error:b}}finally{try{w&&!w.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return H(p)?[]:ho(Oc($([],I(d.keys()),!1),p))}return this.sortedDimensionValues[t]?ho(bs($([],I(this.sortedDimensionValues[t]),!1))):ho($([],I(d.keys()),!1))},r.prototype.getTotalValue=function(t,n){var i,o,a=CC(n),l=a?n:this.getTotalStatus(t),s=A9(l,(o=this.spreadsheet.options)===null||o===void 0?void 0:o.totals)||{},u=s.aggregation,f=s.calcFunc,c=R7[u];if(c||f){var h=this.getMultiData(t),d=void 0;return f?d=f(t,h):c&&(d=c(h,rr)),L(L({},t),(i={},i[rr]=d,i[t[fe]]=d,i))}},r.prototype.getCellData=function(t){var n,i,o,a=t||{},l=a.query,s=a.rowNode,u=a.isTotals,f=u===void 0?!1:u,c=a.totalStatus,h=this.fields,d=h.columns,v=h.rows,p=v,g=(n=this.spreadsheet)===null||n===void 0?void 0:n.store.get("drillDownIdPathMap"),C=Array.from((i=g==null?void 0:g.keys())!==null&&i!==void 0?i:[]).some(function(b){return s.id.startsWith(b)});(!f||C)&&(p=(o=st.getFieldPath(s,C))!==null&&o!==void 0?o:v);var y=_n(p,l),m=_n(d,l),w=_o({rowDimensionValues:y,colDimensionValues:m,careUndefined:f||VC([].concat(v).concat(d),l),rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),S=j(this.indexesData,w);return S||(f?this.getTotalValue(l,c):S)},r.prototype.checkExistDimensionGroup=function(t){var n=this.fields,i=n.rows,o=n.columns,a=function(l){for(var s=!1,u=l.length;u>0;u--){var f=l[u-1];if(me(t).includes(f))f!==fe&&(s=!0);else if(s)return!0}return!1};return a(i)||a(o)},r.prototype.checkAccordQueryWithDimensionValue=function(t){var n,i,o=t.dimensionValues,a=t.query,l=t.dimensions,s=t.field;try{for(var u=tr(l.entries()),f=u.next();!f.done;f=u.next()){var c=I(f.value,2),h=c[0],d=c[1],v=j(a,d);if(v){var p=o.split(tt),g=p[h];if(g!==v)return!1}if(s===d)break}}catch(C){n={error:C}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return!0},r.prototype.getTotalGroupQueries=function(t,n){for(var i=[n],o=null,a=function(u){var f,c,h=t[u];if(me(n).includes(h))h!==fe&&(o=h);else if(o){var d=l.sortedDimensionValues[o],v=[],p=function(m){var w,S,b=[];try{for(var A=(w=void 0,tr(d)),O=A.next();!O.done;O=A.next()){var B=O.value;if(l.checkAccordQueryWithDimensionValue({dimensionValues:B,query:m,dimensions:t,field:o})){var P=B.split(tt),D=P[u];D!=="undefined"&&b.push(D)}}}catch(W){w={error:W}}finally{try{O&&!O.done&&(S=A.return)&&S.call(A)}finally{if(w)throw w.error}}var z=Rr(b).map(function(W){var U;return L(L({},m),(U={},U[h]=W,U))});v=Mr(v,z)};try{for(var g=(f=void 0,tr(i)),C=g.next();!C.done;C=g.next()){var y=C.value;p(y)}}catch(m){f={error:m}}finally{try{C&&!C.done&&(c=g.return)&&c.call(g)}finally{if(f)throw f.error}}i=v,o=h}},l=this,s=t.length-1;s>=0;s--)a(s);return i},r.prototype.getGroupTotalMultiData=function(t,n){var i,o,a,l,s=this.fields,u=s.rows,f=s.columns,c=[],h=this.getTotalGroupQueries(t,n),d=[];try{for(var v=tr(h),p=v.next();!p.done;p=v.next()){var g=p.value;d=Mr(d,this.getTotalGroupQueries(f,g))}}catch(A){i={error:A}}finally{try{p&&!p.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var C=tr(d),y=C.next();!y.done;y=C.next()){var g=y.value,m=_n(t,g),w=_n(f,g),S=_o({rowDimensionValues:m,colDimensionValues:w,careUndefined:!0,isFirstCreate:!0,rowFields:u,colFields:f,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),b=this.getCustomData(S);c=Mr(c,on(Ts(b)))}}catch(A){a={error:A}}finally{try{y&&!y.done&&(l=C.return)&&l.call(C)}finally{if(a)throw a.error}}return c},r.prototype.getMultiData=function(t,n,i,o,a){var l;if(H(t))return on(Ic(this.indexesData));var s=this.fields,u=s.rows,f=s.columns,c=s.values,h=H(o)?u:u.concat(o),d=!a&&this.checkExistDimensionGroup(t),v=[];if(d)v=this.getGroupTotalMultiData(h,t);else{var p=_n(h,t),g=_n(f,t),C=_o({rowDimensionValues:p,colDimensionValues:g,careUndefined:!0,isFirstCreate:!0,rowFields:u,colFields:f,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}),y=this.getCustomData(C);if(v=on(Ts(y)),n){var m=[],w=zv(p,u),S=zv(g,f);if(i)m=w;else{var b=((l=me(t))===null||l===void 0?void 0:l.length)===1&&gi(t,fe);if(b)m=S;else{var A=function(P){return b9(P==null?void 0:P.filter(function(D){return!(c!=null&&c.includes(D))}))},O=A(g),B=A(p);O?m=w:B?m=S:m=$($([],I(w),!1),I(S),!1)}}v=v.filter(function(P){return!(m!=null&&m.find(function(D){var z;return D!==fe&&((z=me(P))===null||z===void 0?void 0:z.includes(D))}))})}}return v||[]},r.prototype.getFieldFormatter=function(t,n){return t===Cf?this.getFieldFormatterForTotalValue(n):e.prototype.getFieldFormatter.call(this,t)},r.prototype.getFieldFormatterForTotalValue=function(t){var n;return!this.spreadsheet.isValueInCols()&&t&&(n=j(t.rowQuery,fe)),n=n??j(this.fields.values,0),e.prototype.getFieldFormatter.call(this,n)},r.prototype.handleCustomMeasuresOrder=function(t,n){var i=Rr($([],I(n),!1));return n.length>=t?(i.splice(t,0,fe),i):$($([],I(i),!1),[fe],!1)},r.prototype.isCustomMeasuresPosition=function(t){return Yt(t)},r.prototype.getRowData=function(t){return this.getMultiData(t.rowQuery)},r}(Py),V7=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.handleDimensionValueFilter=function(){te(t.filterParams,function(n){var i=n.filterKey,o=n.filteredValues,a=n.customFilter,l=new Set(o),s=function(u){return!l.has(u[i])};t.displayData=$($($([],I(t.getStartRows()),!1),I(qr(t.getMovableRows(),function(u){return a?a(u)&&s(u):s(u)})),!1),I(t.getEndRows()),!1)})},t.handleDimensionValuesSort=function(){te(t.sortParams,function(n){var i=n.sortFieldId,o=n.sortBy,a=n.sortFunc,l=n.sortMethod,s=n.query;if(i){var u=t.getMovableRows(),f=[];if(s){var c=[];u.forEach(function(p){for(var g=Object.keys(s),C=!0,y=0;y<g.length;y++){var m=g[y];if(p[m]!==s[m]){C=!1,f.push(p);break}}C&&c.push(p)}),u=c}var h=u;if(a)h=a(L(L({},n),{data:u}));else if(o&&!ft(o)){var d=$([],I(o),!1).reverse();h=u.sort(function(p,g){var C=d.indexOf(p[i]),y=d.indexOf(g[i]);return y-C})}else if(to(l)||zc(l)){var v=ft(o)?o:null;h=hc(u,[v||i],[l.toLocaleLowerCase()])}f.length&&(h=$($([],I(h),!1),I(f),!1)),t.displayData=$($($([],I(t.getStartRows()),!1),I(h),!1),I(t.getEndRows()),!1)}})},t}return r.prototype.processDataCfg=function(t){return t},r.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.handleDimensionValueFilter(),this.handleDimensionValuesSort()},r.prototype.getStartRows=function(){var t=(this.spreadsheet.options||{}).frozenRowCount;if(!t)return[];var n=this.displayData;return n.slice(0,t)},r.prototype.getEndRows=function(){var t=(this.spreadsheet.options||{}).frozenTrailingRowCount;if(!t)return[];var n=this.displayData;return n.slice(-t)},r.prototype.getMovableRows=function(){var t=this.displayData,n=this.spreadsheet.options||{},i=n.frozenTrailingRowCount,o=n.frozenRowCount;return t.slice(o||0,-i||void 0)},r.prototype.getTotalDimensionValues=function(t,n){return[]},r.prototype.getDimensionValues=function(t,n){return[]},r.prototype.getCellData=function(t){var n=t.query;if(!(this.displayData.length===0&&n.rowIndex===0)){var i=this.displayData[n.rowIndex];return!("col"in n)||!Ae(i)?i:i[n.col]}},r.prototype.getMultiData=function(t,n){return this.displayData},r.prototype.getRowData=function(t){return this.getCellData({query:{rowIndex:t.rowIndex}})},r}(Py),j7=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getCellData=function(t){var n=t.query,i=this.fields,o=i.columns,a=i.rows,l=_n(a,n),s=_n(o,n),u=_o({rowDimensionValues:l,colDimensionValues:s,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta,isFirstCreate:!0,careUndefined:!0,rowFields:a,colFields:o}),f=j(this.indexesData,u);return f},r.prototype.setDataCfg=function(t){e.prototype.setDataCfg.call(this,t),this.sortedDimensionValues={},this.rowPivotMeta=new Map,this.colPivotMeta=new Map;var n=this.fields,i=n.rows,o=n.columns,a=Iu({rows:i,columns:o,originData:this.originData,totalData:[],indexesData:this.indexesData,sortedDimensionValues:this.sortedDimensionValues,rowPivotMeta:this.rowPivotMeta,colPivotMeta:this.colPivotMeta}).indexesData;this.indexesData=a,this.handleDimensionValuesSort()},r.prototype.processDataCfg=function(t){t.fields.valueInCols=!1;var n=t.data,i=t.meta,o=wf(t,["data","meta"]),a=t.fields.values,l=[];te(n,function(u){H(rc(me(u),a))?l.push(u):te(a,function(f){var c;gi(u,f)&&l.push(L(L({},u),(c={},c[fe]=f,c[rr]=u[f],c)))})});var s=this.processMeta(i,ke("指标"));return L(L({},o),{meta:s,data:Rr(l),fields:L(L({},t.fields),{rows:[fe]})})},r}(ku),qn;(function(e){e.ScrollChange="scroll-change",e.ScrollEnd="scroll-end"})(qn||(qn={}));var As=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;n.isMobile=!1,n.eventHandlers=[],n.scrollFrameId=null,n.getCoordinatesName=function(){var d=n.isHorizontal?"x1":"y1",v=n.isHorizontal?"x2":"y2";return{from:d,to:v}},n.getCoordinatesWithBBoxExtraPadding=function(){var d=n.theme.size,v=n.isHorizontal?0:d/2,p=n.isHorizontal?d:d/2;return{start:n.thumbOffset+v,end:n.thumbOffset+n.thumbLen-p}},n.current=function(){var d=n.thumbLen/n.trackLen,v=n.thumbOffset/n.trackLen;return v/(1-d)},n.updateThumbLen=function(d){if(n.thumbLen!==d){n.thumbLen=d;var v=n.getCoordinatesName();n.thumbShape.attr(v.to,n.thumbOffset+d),n.emitScrollChange(n.thumbOffset/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.updateThumbOffset=function(d,v){var p;v===void 0&&(v=!0);var g=n.validateRange(d),C=n.thumbOffset===g&&g!==0;if(!C){n.thumbOffset=g;var y=n.getCoordinatesName(),m=y.from,w=y.to,S=n.getCoordinatesWithBBoxExtraPadding(),b=S.start,A=S.end;n.thumbShape.attr((p={},p[m]=b,p[w]=A,p)),v&&n.emitScrollChange(g/(n.trackLen-n.thumbLen)*n.scrollTargetMaxOffset,!1)}},n.onlyUpdateThumbOffset=function(d){var v;n.updateThumbOffset(d,!1),(v=n.get("canvas"))===null||v===void 0||v.draw()},n.emitScrollChange=function(d,v){v===void 0&&(v=!0),cancelAnimationFrame(n.scrollFrameId),n.scrollFrameId=requestAnimationFrame(function(){n.emit(qn.ScrollChange,{offset:d,updateThumbOffset:v})})},n.addEventListener=function(d,v,p){return d==null||d.addEventListener(v,p,!1),{remove:function(){d==null||d.removeEventListener(v,p,!1)}}},n.addEvent=function(d,v,p){d.on(v,p),n.eventHandlers.push({target:d,type:v,handler:p})},n.initScrollBar=function(){n.scrollBarGroup=n.createScrollBarGroup(),n.scrollBarGroup.move(n.position.x,n.position.y),n.bindEvents()},n.createScrollBarGroup=function(){var d=n.addGroup({className:n.isHorizontal?"horizontalBar":"verticalBar"});return n.trackShape=n.createTrackShape(d),n.thumbShape=n.createThumbShape(d),d},n.createTrackShape=function(d){var v=n.theme,p=v.lineCap,g=p===void 0?"round":p,C=v.trackColor,y=v.size,m={lineWidth:y,stroke:C,lineCap:g};return n.isHorizontal?d.addShape("line",{attrs:L(L({},m),{x1:0,y1:y/2,x2:n.trackLen,y2:y/2})}):d.addShape("line",{attrs:L(L({},m),{x1:y/2,y1:0,x2:y/2,y2:n.trackLen})})},n.createThumbShape=function(d){var v=n.theme,p=v.size,g=v.lineCap,C=g===void 0?"round":g,y=v.thumbColor,m={lineWidth:p,stroke:y,lineCap:C,cursor:"default"},w=n.getCoordinatesWithBBoxExtraPadding(),S=w.start,b=w.end;return n.isHorizontal?d.addShape("line",{attrs:L(L({},m),{x1:S,y1:p/2,x2:b,y2:p/2})}):d.addShape("line",{attrs:L(L({},m),{x1:p/2,y1:S,x2:p/2,y2:b})})},n.bindEvents=function(){n.on("mousedown",n.onStartEvent(!1)),n.on("mouseup",n.onMouseUp),n.on("touchstart",n.onStartEvent(!0)),n.on("touchend",n.onMouseUp),n.trackShape.on("click",n.onTrackClick),n.thumbShape.on("mouseover",n.onTrackMouseOver),n.thumbShape.on("mouseout",n.onTrackMouseOut)},n.onStartEvent=function(d){return function(v){v.preventDefault(),n.isMobile=d;var p=n.isMobile?j(v,"touches.0",v):v,g=p.clientX,C=p.clientY;n.startPos=n.isHorizontal?g:C,n.bindLaterEvent()}},n.bindLaterEvent=function(){var d=n.get("canvas"),v=document.body,p=[];n.isMobile?(p=[n.addEventListener(v,"touchmove",n.onMouseMove),n.addEventListener(v,"touchend",n.onMouseUp),n.addEventListener(v,"touchcancel",n.onMouseUp)],n.addEvent(d,"touchend",n.onMouseUp),n.addEvent(d,"touchcancel",n.onMouseUp)):(p=[n.addEventListener(v,"mousemove",n.onMouseMove),n.addEventListener(v,"mouseup",n.onMouseUp),n.addEventListener(v,"mouseleave",n.onMouseUp)],n.addEvent(d,"mouseup",n.onMouseUp)),n.clearEvents=function(){p.forEach(function(g){g==null||g.remove()}),te(n.eventHandlers,function(g){var C;(C=g.target)===null||C===void 0||C.off(g.type,g.handler)}),n.eventHandlers.length=0}},n.onTrackClick=function(d){var v=n.isHorizontal?d.x-n.position.x-n.thumbLen/2:d.y-n.position.y-n.thumbLen/2,p=n.validateRange(v);n.updateThumbOffset(p)},n.onMouseMove=function(d){d.preventDefault();var v=n.isMobile?j(d,"touches.0",d):d,p=v.clientX,g=v.clientY,C=n.isHorizontal?p:g,y=C-n.startPos;n.startPos=C,n.updateThumbOffset(n.thumbOffset+y)},n.onMouseUp=function(d){var v;n.emit(qn.ScrollEnd,{}),d.preventDefault(),(v=n.clearEvents)===null||v===void 0||v.call(n)},n.onTrackMouseOver=function(){var d=n.theme,v=d.thumbHoverColor,p=d.hoverSize;n.thumbShape.attr("stroke",v),n.thumbShape.attr("lineWidth",p)},n.onTrackMouseOut=function(){var d=n.theme,v=d.thumbColor,p=d.size;n.thumbShape.attr("stroke",v),n.thumbShape.attr("lineWidth",p)},n.validateRange=function(d){var v=d;return d+n.thumbLen>n.trackLen?v=n.trackLen-n.thumbLen:d+n.thumbLen<n.thumbLen&&(v=0),v};var i=t.isHorizontal,o=i===void 0?!1:i,a=t.trackLen,l=t.thumbLen,s=t.position,u=t.thumbOffset,f=u===void 0?0:u,c=t.theme,h=t.scrollTargetMaxOffset;return n.isHorizontal=o,n.thumbOffset=f,n.trackLen=a,n.thumbLen=l,n.position=s,n.theme=c,n.scrollTargetMaxOffset=h,n.initScrollBar(),n}return r}(Ur),Ny=function(e,r,t){if(t<=0)return{start:0,end:0};var n=Mi(e,function(o,a){var l=r;return l>=o&&l<e[a+1]},0);n=Math.max(n,0);var i=t===r?n:Mi(e,function(o,a){var l=t;return l>o&&l<=e[a+1]},n);return i=Math.min(i===-1?1/0:i,e.length-2),{start:n,end:i}},q7=function(e,r){var t=r.width,n=r.originalWidth,i=Math.min(n-t,e);return i<0?0:i},Rs=function(e,r,t){var n=Math.min(r-t,e);return n<0?0:n},xo=function(e,r){if(e===void 0&&(e=[]),H(e))return[];var t=[];return e.forEach(function(n){if(n instanceof r&&t.push(n),n instanceof Ur){var i=n.getChildren();i.forEach(function(o){o instanceof r&&t.push(o)})}}),t},Fy=function(e,r,t){return t.slice(e,r+1).map(function(n){return n.x+n.width})},jc=function(e,r,t){for(var n=[],i=e;i<r+1;i++)n.push(t.getCellOffsetY(i+1));return n},K7=function(e,r,t,n){var i=jc(e,r,n),o=n.getCellOffsetY(e);return i.map(function(a){return a-o+t})},sp=function(e,r,t){var n=I(t,4),i=n[0],o=n[1],a=n[2],l=n[3];return e>=i&&e<=o&&r>=a&&r<=l},up=function(e){for(var r=I(e,4),t=r[0],n=r[1],i=r[2],o=r[3],a=[],l=t;l<=n;l+=1)for(var s=i;s<=o;s+=1)a.push([l,s]);return a},Z7=function(e,r){var t=[],n=[];if(H(e))return H(r)?{add:t,remove:n}:{add:up(r),remove:n};if(H(r))return{add:t,remove:up(e)};for(var i=I(e,4),o=i[0],a=i[1],l=i[2],s=i[3],u=I(r,4),f=u[0],c=u[1],h=u[2],d=u[3],v=o;v<=a;v++)for(var p=l;p<=s;p++)sp(v,p,r)||n.push([v,p]);for(var v=f;v<=c;v+=1)for(var p=h;p<=d;p+=1)sp(v,p,e)||t.push([v,p]);return{add:t,remove:n}},Q7=function(e,r){var t=[],n=[];return Object.keys(r).forEach(function(i){var o=Z7((e==null?void 0:e[i])||[],r[i]),a=o.add,l=o.remove;t.push.apply(t,$([],I(a),!1)),n.push.apply(n,$([],I(l),!1))}),{add:t,remove:n}},Hy=function(){function e(r,t){t===void 0&&(t=!1),this.x=0,this.y=0,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.originalWidth=0,this.originalHeight=0,this.viewportHeight=0,this.viewportWidth=0,this.facet=r,this.spreadsheet=r.spreadsheet,this.layoutResult=r.layoutResult,t&&this.calculateBBox()}return e}(),zy=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){var t=this.getCornerBBoxWidth(),n=this.getCornerBBoxHeight();this.width=t,this.height=n,this.maxX=t,this.maxY=n},r.prototype.getCornerBBoxOriginalHeight=function(){var t=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.style.colCfg;return t.sampleNodeForLastLevel?Math.floor(t.height):n==null?void 0:n.height},r.prototype.getCornerBBoxHeight=function(){return this.originalHeight=this.getCornerBBoxOriginalHeight(),this.originalHeight},r.prototype.getCornerBBoxWidth=function(){var t=this.layoutResult.rowsHierarchy;return this.originalWidth=Math.floor(t.width+this.facet.getSeriesNumberWidth()),this.spreadsheet.isScrollContainsRowHeader()?this.originalWidth:this.adjustCornerBBoxWidth()},r.prototype.adjustCornerBBoxWidth=function(){var t=this.layoutResult.colsHierarchy,n=this.spreadsheet.options.width,i=n*u2,o=t==null?void 0:t.width,a=n-this.originalWidth;if(this.originalWidth<=i||o<=a)return this.originalWidth;var l=0,s=n-i;return o<=s?l=this.originalWidth-(o-a):l=i,Math.floor(l)},r}(Hy),J7=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.calculateBBox=function(){this.originalWidth=this.facet.getRealWidth(),this.originalHeight=this.facet.getRealHeight();var t=this.facet.cornerBBox,n={x:Math.floor(t.maxX),y:Math.floor(t.maxY)},i=this.spreadsheet.theme.scrollBar.size,o=this.spreadsheet.options,a=o.width,l=o.height,s=Math.max(0,a-n.x),u=Math.max(0,l-n.y-i);this.x=n.x,this.y=n.y,this.width=s,this.height=u,this.viewportHeight=Math.abs(Math.floor(Math.min(u,this.originalHeight))),this.viewportWidth=Math.abs(Math.floor(Math.min(s,this.originalWidth))),this.maxX=n.x+this.viewportWidth,this.maxY=n.y+this.viewportHeight,this.minX=n.x,this.minY=n.y;var f=this.spreadsheet.options,c=f.frozenTrailingColCount,h=f.frozenTrailingRowCount;c>0&&(this.viewportWidth=this.width,this.maxX=n.x+this.width),h>0&&(this.viewportHeight=this.height,this.maxY=n.y+this.height)},r}(Hy),jl=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.isHeaderCellInViewport=function(i,o,a,l){return i+o>=a&&a+l>=i},n.headerConfig=t,n}return r.prototype.getConfig=function(){return this.headerConfig},r.prototype.clearResizeAreaGroup=function(t){var n=this.get("parent"),i=n==null?void 0:n.findById(t);i==null||i.clear()},r.prototype.render=function(t){this.clearResizeAreaGroup(t),this.clear(),this.layout(),this.offset(),this.clip()},r.prototype.onScrollXY=function(t,n,i){this.headerConfig.scrollX=t,this.headerConfig.scrollY=n,this.render(i)},r.prototype.onRowScrollX=function(t,n){this.headerConfig.scrollX=t,this.render(n)},r.prototype.clear=function(){e.prototype.clear.call(this)},r}(Ur),qc=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.scrollGroup=n.addGroup({name:o2,zIndex:Ux}),n}return r.prototype.onColScroll=function(t,n){this.headerConfig.scrollX!==t&&(this.headerConfig.scrollX=t,this.render(n))},r.prototype.clip=function(){var t=this.headerConfig,n=t.width,i=t.height,o=t.scrollX,a=t.spreadsheet,l=a.isFrozenRowHeader();this.scrollGroup.setClip({type:"rect",attrs:{x:l?o:0,y:0,width:l?n:n+o,height:i}})},r.prototype.clear=function(){var t,n;(t=this.scrollGroup)===null||t===void 0||t.clear(),(n=this.background)===null||n===void 0||n.remove(!0)},r.prototype.getCellInstance=function(t,n,i){return new kl(t,n,i)},r.prototype.getCellGroup=function(t){return this.scrollGroup},r.prototype.isColCellInRect=function(t){var n=this.headerConfig,i=n.spreadsheet,o=n.cornerWidth,a=n.width,l=n.scrollX;return a+l>t.x&&l-(i.isFrozenRowHeader()?0:o)<t.x+t.width},r.prototype.layout=function(){var t=this,n=this.headerConfig,i=n.data,o=n.spreadsheet,a=o.options.colCell;te(i,function(l){var s=l;if(t.isColCellInRect(s)){var u=(a==null?void 0:a(s,o,t.headerConfig))||t.getCellInstance(s,o,t.headerConfig);s.belongsCell=u;var f=t.getCellGroup(s);f.add(u)}})},r.prototype.offset=function(){var t=this.headerConfig,n=t.position,i=t.scrollX;Rc(this.scrollGroup,n.x-i)},r}(jl),eN=function(e){Q(r,e);function r(t){return e.call(this,t)||this}return r.getCornerHeader=function(t,n,i,o,a,l){var s=t.width,u=t.height,f=n.originalWidth,c=n.originalHeight,h=n.width,d=n.height,v=this.getCornerNodes({x:n.x,y:n.y},f,c,o.rows,o.columns,a.rowsHierarchy,a.colsHierarchy,o.dataSet,i,l);return new r({data:v,position:{x:n.x,y:n.y},width:h,height:d,originalHeight:c,originalWidth:f,viewportWidth:s,viewportHeight:u,hierarchyType:o.hierarchyType,hierarchyCollapse:o.hierarchyCollapse,rows:o.rows,columns:o.columns,seriesNumberWidth:i,spreadsheet:l})},r.getCornerNodes=function(t,n,i,o,a,l,s,u,f,c){var h,d,v,p=[],g=c.options.style.colCfg,C=s==null?void 0:s.sampleNodeForLastLevel,y=(h=C==null?void 0:C.y)!==null&&h!==void 0?h:0,m=(v=(d=C==null?void 0:C.height)!==null&&d!==void 0?d:g==null?void 0:g.height)!==null&&v!==void 0?v:0;if(f){var w=new st({id:"",key:s2,value:ke("序号")});w.x=t==null?void 0:t.x,w.y=y,w.width=f,w.height=m,w.isPivotMode=!0,w.spreadsheet=c,w.cornerType=gr.Series,p.push(w)}if(c.isHierarchyTreeType()){var S=this.getTreeCornerText(c),b=new st({key:"",id:S,value:S});b.x=t.x+f,b.y=y,b.width=n-f,b.height=m,b.seriesNumberWidth=f,b.isPivotMode=!0,b.spreadsheet=c,b.cornerType=gr.Row,p.push(b)}else l.sampleNodesForAllLevels.forEach(function(A){var O=o[A.level],B=new st({key:O,id:O,value:u.getFieldName(O)});B.x=A.x+f,B.y=y,B.width=A.width,B.height=m,B.field=O,B.isPivotMode=!0,B.cornerType=gr.Row,B.spreadsheet=c,p.push(B)});return s.sampleNodesForAllLevels.forEach(function(A){if(A.level<s.maxLevel){var O=a[A.level],B=new st({key:O,id:O,value:u.getFieldName(O)});B.x=t.x,B.y=A.y,B.width=n,B.height=A.height,B.field=O,B.isPivotMode=!0,B.cornerType=gr.Col,B.spreadsheet=c,p.push(B)}}),p},r.getTreeCornerText=function(t){var n=t.dataSet.fields.rows,i=n===void 0?[]:n,o=t.options.cornerText;if(o)return o;var a=t.store.get("drillDownFieldInLevel",[]),l=a.map(function(u){return u.drillField}),s=i.filter(function(u){return!Tt(l,u)}).map(function(u){return t.dataSet.getFieldName(u)}).join("/");return s},r.prototype.onCorScroll=function(t,n){this.headerConfig.scrollX=t,this.render(n)},r.prototype.destroy=function(){e.prototype.destroy.call(this)},r.prototype.layout=function(){this.renderCells()},r.prototype.renderCells=function(){var t=this,n,i,o,a,l=this.headerConfig,s=l.data,u=l.spreadsheet,f=(i=(n=u==null?void 0:u.facet)===null||n===void 0?void 0:n.cfg)===null||i===void 0?void 0:i.cornerHeader,c=(a=(o=u==null?void 0:u.facet)===null||o===void 0?void 0:o.cfg)===null||a===void 0?void 0:a.cornerCell;if(f){f(this,u,this.headerConfig);return}s.forEach(function(h){var d;c&&(d=c(h,t.headerConfig.spreadsheet,t.headerConfig)),H(d)&&(d=new fP(h,t.headerConfig.spreadsheet,t.headerConfig)),t.add(d)})},r.prototype.offset=function(){var t=this.headerConfig.scrollX;Rc(this,-t)},r.prototype.clip=function(){var t=this.headerConfig,n=t.width,i=t.height,o=t.scrollX;this.setClip({type:"rect",attrs:{x:o,y:0,width:n,height:i}})},r.prototype.getNodes=function(){return this.headerConfig.data||[]},r}(jl),tN=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.render(),n}return r.prototype.layout=function(){this.addCornerBottomBorder(),this.addCornerRightBorder(),this.addSplitLineShadow()},r.prototype.render=function(){this.clear(),this.layout()},r.prototype.onBorderScroll=function(t){this.cfg.scrollX=t;var n=this.cfg.position;En(this,n.x-t,0),this.render()},r.prototype.onChangeShadowVisibility=function(t,n){this.cfg.showViewportLeftShadow=t>0,this.cfg.showViewportRightShadow=Math.floor(t)<Math.floor(n),this.render()},r.prototype.addCornerRightBorder=function(){var t,n=this.cfg,i=n.isPivotMode;if(i){var o=n.width,a=n.height,l=n.viewportHeight,s=n.position,u=n.spreadsheet,f=(t=u.theme)===null||t===void 0?void 0:t.splitLine,c=s.x+o,h=s.y,d=s.y+a+l;this.addShape("line",{attrs:{x1:c,y1:h,x2:c,y2:d,stroke:f.verticalBorderColor,lineWidth:f.verticalBorderWidth,opacity:f.verticalBorderColorOpacity}})}},r.prototype.addCornerBottomBorder=function(){var t,n=this.cfg,i=n.width,o=n.height,a=n.viewportWidth,l=n.position,s=n.scrollX,u=n.scrollContainsRowHeader,f=n.spreadsheet,c=(t=f.theme)===null||t===void 0?void 0:t.splitLine,h=l.x,d=h+i+a+(u?s:0),v=l.y+o-1;this.addShape("line",{attrs:{x1:h,y1:v,x2:d,y2:v,stroke:c.horizontalBorderColor,lineWidth:c.horizontalBorderWidth,opacity:c.horizontalBorderColorOpacity}})},r.prototype.addSplitLineShadow=function(){var t,n=this.cfg,i=n.isPivotMode,o=n.spreadsheet,a=(t=o.theme)===null||t===void 0?void 0:t.splitLine;!i||!a.showShadow||!o.isFrozenRowHeader()||(this.addSplitLineLeftShadow(),this.addSplitLineRightShadow())},r.prototype.addSplitLineLeftShadow=function(){var t,n,i;if(this.cfg.showViewportLeftShadow){var o=this.cfg,a=o.width,l=o.height,s=o.viewportHeight,u=o.position,f=o.spreadsheet,c=(t=f.theme)===null||t===void 0?void 0:t.splitLine,h=u.x+a,d=u.y;this.addShape("rect",{attrs:{x:h,y:d,width:c.shadowWidth,height:s+l,fill:"l (0) 0:".concat((n=c.shadowColors)===null||n===void 0?void 0:n.left," 1:").concat((i=c.shadowColors)===null||i===void 0?void 0:i.right)}})}},r.prototype.addSplitLineRightShadow=function(){var t,n,i;if(this.cfg.showViewportRightShadow){var o=this.cfg,a=o.width,l=o.height,s=o.viewportHeight,u=o.viewportWidth,f=o.position,c=o.spreadsheet,h=(t=c.theme)===null||t===void 0?void 0:t.splitLine,d=f.x+a+u-h.shadowWidth,v=f.y;this.addShape("rect",{attrs:{x:d,y:v,width:h.shadowWidth,height:s+l,fill:"l (0) 0:".concat((n=h.shadowColors)===null||n===void 0?void 0:n.right," 1:").concat((i=h.shadowColors)===null||i===void 0?void 0:i.left)}})}},r}(Ur),ky=function(e){Q(r,e);function r(t){return e.call(this,t)||this}return r.prototype.destroy=function(){e.prototype.destroy.call(this),this.gm&&this.gm.destroy()},r.prototype.layout=function(){var t=this,n,i,o=this.headerConfig,a=o.data,l=o.spreadsheet,s=o.width,u=o.viewportHeight,f=o.seriesNumberWidth,c=o.scrollY,h=o.scrollX,d=(i=(n=l==null?void 0:l.facet)===null||n===void 0?void 0:n.cfg)===null||i===void 0?void 0:i.rowCell,v=function(p){return u+c>p.y&&c<p.y+p.height&&s-f+h>p.x&&h-f<p.x+p.width};te(a,function(p){if(v(p)&&p.height!==0){var g=void 0;d&&(g=d(p,l,t.headerConfig)),H(g)&&l.isPivotMode()&&(g=new Gl(p,l,t.headerConfig)),p.belongsCell=g,t.add(g)}})},r.prototype.offset=function(){var t=this.headerConfig,n=t.scrollX,i=t.scrollY,o=t.position,a=t.seriesNumberWidth;En(this,o.x-n+a,o.y-i)},r.prototype.clip=function(){var t=this.headerConfig,n=t.width,i=t.viewportHeight,o=t.scrollX,a=t.scrollY,l=t.seriesNumberWidth;this.setClip({type:"rect",attrs:{x:o-l,y:a,width:n,height:i}})},r}(jl),rN=function(e){Q(r,e);function r(t){return e.call(this,t)||this}return r.getSeriesNumberHeader=function(t,n,i,o,a){var l=t.height,s=t.viewportHeight,u=[],f=o.isHierarchyTreeType();return i.forEach(function(c){if(!c.isTotals||f){var h=new st({id:"",key:"",value:"".concat(u.length+1)});h.x=c.x,h.y=c.y,h.height=c.height,h.width=n,u.push(h)}}),new r({width:a,height:l,viewportWidth:a,viewportHeight:s,position:{x:0,y:t.y},data:u,spreadsheet:o})},r.prototype.clip=function(){var t=this.headerConfig,n=t.width,i=t.viewportHeight,o=t.scrollY;this.setClip({type:"rect",attrs:{x:0,y:o,width:n,height:i}})},r.prototype.layout=function(){var t=this,n=this.headerConfig,i=n.data,o=n.scrollY,a=n.viewportHeight,l=n.spreadsheet;l.isPivotMode&&this.addBackGround();var s=this.addGroup();te(i,function(u){var f=u.y,c=u.height,h=u.isLeaf,d=t.isHeaderCellInViewport(f,c,o,a);if(d){var v=t.addGroup();t.addText(v,u),t.add(v),h||t.addBorder(s,u)}})},r.prototype.offset=function(){var t=this.headerConfig,n=t.scrollY,i=t.scrollX,o=t.position;En(this,o.x-i,o.y-n),this.backgroundShape&&this.backgroundShape.translate(o.x,o.y+n),this.leftBorderShape&&this.leftBorderShape.translate(o.x,o.y+n)},r.prototype.addBackGround=function(){var t=this.getStyle().cell,n=this.headerConfig,i=n.position,o=n.width,a=n.viewportHeight;this.backgroundShape=Pt(this,{x:i.x,y:-i.y,width:o,height:a,fill:t.backgroundColor,stroke:"transparent",opacity:t.backgroundColorOpacity});var l=ln(je.LEFT,{x:i.x,y:-i.y,width:o,height:a},t),s=l.position,u=l.style;this.leftBorderShape=ot(this,s,u)},r.prototype.addBorder=function(t,n){var i=this.getStyle().cell,o=ln(je.BOTTOM,n,i),a=o.position,l=o.style;ot(t,a,l)},r.prototype.getStyle=function(){return this.headerConfig.spreadsheet.theme.rowCell},r.prototype.addText=function(t,n){var i=this.headerConfig,o=i.scrollY,a=i.viewportHeight,l=L(L({},this.getStyle().seriesText),{textBaseline:"top"}),s=n.label,u=n.x,f=n.y,c=n.width,h=n.height,d=this.getTextPadding(s,c),v=py(f+d.top,h-d.top-d.bottom,o,a,l.fontSize);t.addShape("text",{attrs:L(L({x:u+d.left,y:v,text:s},l),{cursor:"pointer"})})},r.prototype.getTextPadding=function(t,n){var i=this.getStyle(),o=this.headerConfig.spreadsheet.measureTextWidth(t,i.seriesText),a=Math.max(Math.abs((n-o)/2),4);return L(L({},i.cell.padding),{left:a,right:a})},r}(jl),Wy=function(){function e(r){var t=this;this.scrollFrameId=null,this.hideScrollBar=function(){var n,i,o;(n=t.hRowScrollBar)===null||n===void 0||n.hide(),(i=t.hScrollBar)===null||i===void 0||i.hide(),(o=t.vScrollBar)===null||o===void 0||o.hide()},this.delayHideScrollBar=No(this.hideScrollBar,1e3),this.delayHideScrollbarOnMobile=function(){nt()&&t.delayHideScrollBar()},this.showVerticalScrollBar=function(){var n;(n=t.vScrollBar)===null||n===void 0||n.show()},this.showHorizontalScrollBar=function(){var n,i;(n=t.hRowScrollBar)===null||n===void 0||n.show(),(i=t.hScrollBar)===null||i===void 0||i.show()},this.onContainerWheel=function(){t.onContainerWheelForPc(),t.onContainerWheelForMobile()},this.onContainerWheelForPc=function(){var n=t.spreadsheet.getCanvasElement();n==null||n.addEventListener("wheel",t.onWheel)},this.onContainerWheelForMobile=function(){t.mobileWheel=new TP(t.spreadsheet.container),t.mobileWheel.on("wheel",function(n){t.spreadsheet.hideTooltip();var i=n.event,o=n.deltaX,a=n.deltaY,l=n.x,s=n.y;t.onWheel(L(L({},i),{deltaX:o,deltaY:a,offsetX:l,offsetY:s}))})},this.bindEvents=function(){t.onContainerWheel(),t.emitPaginationEvent()},this.setScrollOffset=function(n){Object.keys(n).forEach(function(i){var o=n[i];Pr(o)||t.spreadsheet.store.set(i,Math.floor(o))})},this.getScrollOffset=function(){var n=t.spreadsheet.store;return{scrollX:n.get("scrollX",0),scrollY:n.get("scrollY",0),rowHeaderScrollX:n.get("rowHeaderScrollX",0)}},this.emitPaginationEvent=function(){var n=t.cfg.pagination;if(n){var i=n.current,o=i===void 0?Lu:i,a=n.pageSize,l=t.viewCellHeights.getTotalLength(),s=Math.floor((l-1)/a)+1;t.cfg.spreadsheet.emit(T.LAYOUT_PAGINATION,{pageSize:a,pageCount:s,total:l,current:o})}},this.unbindEvents=function(){var n=t.spreadsheet.getCanvasElement();n==null||n.removeEventListener("wheel",t.onWheel),t.mobileWheel.destroy()},this.clipPanelGroup=function(){var n;t.foregroundGroup=t.spreadsheet.foregroundGroup,t.backgroundGroup=t.spreadsheet.backgroundGroup,t.panelGroup=t.spreadsheet.panelGroup;var i=t.panelBBox,o=i.width,a=i.height;(n=t.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:0,y:t.cornerBBox.height,width:o,height:a}})},this.calculateCellWidthHeight=function(){var n=t.layoutResult.colLeafNodes,i=Qi(n,function(o,a){return o.push(Ie(o)+a.width),o},[0]);t.viewCellWidths=i,t.viewCellHeights=t.getViewCellHeights(t.layoutResult)},this.getRealScrollX=function(n,i){return i===void 0&&(i=0),t.cfg.spreadsheet.isScrollContainsRowHeader()?n:i},this.calculatePanelBBox=function(){t.panelBBox=new J7(t,!0)},this.getRealWidth=function(){return Ie(t.viewCellWidths)},this.getRealHeight=function(){var n=t.cfg.pagination,i=t.viewCellHeights;if(n){var o=t.getCellRange(),a=o.start,l=o.end;return i.getCellOffsetY(l+1)-i.getCellOffsetY(a)}return i.getTotalHeight()},this.clearAllGroup=function(){for(var n=t.panelGroup.getChildren()||[],i=n.length-1;i>=0;i--){var o=n[i];o instanceof Ur?o.set("children",[]):n[i].remove()}t.foregroundGroup.set("children",[]),t.backgroundGroup.set("children",[])},this.scrollWithAnimation=function(n,i,o){var a,l,s,u;n===void 0&&(n={}),i===void 0&&(i=200);var f=t.getAdjustedScrollOffset({scrollX:((a=n.offsetX)===null||a===void 0?void 0:a.value)||0,scrollY:((l=n.offsetY)===null||l===void 0?void 0:l.value)||0,rowHeaderScrollX:((s=n.rowHeaderOffsetX)===null||s===void 0?void 0:s.value)||0}),c=f.scrollX,h=f.scrollY,d=f.rowHeaderScrollX;(u=t.timer)===null||u===void 0||u.stop();var v=t.getScrollOffset(),p=[c??v.scrollX,h??v.scrollY,d??v.rowHeaderScrollX],g=C0(Object.values(v),p);t.timer=rf(function(C){try{var y=Math.min(C/i,1),m=I(g(y),3),w=m[0],S=m[1],b=m[2];t.setScrollOffset({rowHeaderScrollX:b,scrollX:w,scrollY:S}),t.startScroll(),C>i&&(t.timer.stop(),o==null||o())}catch(A){console.error(A),t.timer.stop()}})},this.scrollImmediately=function(n){var i,o,a;n===void 0&&(n={});var l=t.getAdjustedScrollOffset({scrollX:((i=n.offsetX)===null||i===void 0?void 0:i.value)||0,scrollY:((o=n.offsetY)===null||o===void 0?void 0:o.value)||0,rowHeaderScrollX:((a=n.rowHeaderOffsetX)===null||a===void 0?void 0:a.value)||0}),s=l.scrollX,u=l.scrollY,f=l.rowHeaderScrollX;t.setScrollOffset({scrollX:s,scrollY:u,rowHeaderScrollX:f}),t.startScroll()},this.startScroll=function(n){var i,o,a;n===void 0&&(n=!1);var l=t.getScrollOffset(),s=l.rowHeaderScrollX,u=l.scrollX,f=l.scrollY;(i=t.hRowScrollBar)===null||i===void 0||i.onlyUpdateThumbOffset(t.getScrollBarOffset(s,t.hRowScrollBar)),(o=t.hScrollBar)===null||o===void 0||o.onlyUpdateThumbOffset(t.getScrollBarOffset(u,t.hScrollBar)),(a=t.vScrollBar)===null||a===void 0||a.onlyUpdateThumbOffset(t.getScrollBarOffset(f,t.vScrollBar)),t.dynamicRenderCell(n)},this.getRendererHeight=function(){var n=t.getCellRange(),i=n.start,o=n.end;return t.viewCellHeights.getCellOffsetY(o+1)-t.viewCellHeights.getCellOffsetY(i)},this.getAdjustedScrollOffset=function(n){var i=n.scrollX,o=n.scrollY,a=n.rowHeaderScrollX;return{scrollX:Rs(i,t.layoutResult.colsHierarchy.width,t.panelBBox.width),scrollY:Rs(o,t.getRendererHeight(),t.panelBBox.height),rowHeaderScrollX:q7(a,t.cornerBBox)}},this.renderRowScrollBar=function(n){if(!t.cfg.spreadsheet.isScrollContainsRowHeader()&&t.cornerBBox.width<t.cornerBBox.originalWidth){var i=t.cornerBBox.originalWidth-t.cornerBBox.width,o=t.getScrollbarPosition().maxY,a=t.spreadsheet.theme,l=a.splitLine,s=a.scrollBar,u=Math.max(t.cornerBBox.width*t.cornerBBox.width/t.cornerBBox.originalWidth,s==null?void 0:s.thumbHorizontalMinSize),f=u-(l==null?void 0:l.verticalBorderWidth);t.hRowScrollBar=new As({isHorizontal:!0,trackLen:t.cornerBBox.width,thumbLen:f,position:{x:t.cornerBBox.minX+t.scrollBarSize/2,y:o},thumbOffset:n*(t.cornerBBox.width-u)/i,theme:t.scrollBarTheme,scrollTargetMaxOffset:i}),t.hRowScrollBar.on(qn.ScrollChange,function(c){var h,d,v=c.offset,p=t.getValidScrollBarOffset(v,i),g=Math.floor(p);t.setScrollOffset({rowHeaderScrollX:g}),(h=t.rowHeader)===null||h===void 0||h.onRowScrollX(g,Ri),(d=t.rowIndexHeader)===null||d===void 0||d.onRowScrollX(g,_d),t.cornerHeader.onRowScrollX(g,iu);var C=t.getScrollBarOffset(g,t.hRowScrollBar),y=t.getScrollOffset(),m=y.scrollX,w=y.scrollY,S={scrollX:m,scrollY:w,rowHeaderScrollX:C};t.hRowScrollBar.updateThumbOffset(C,!1),t.spreadsheet.emit(T.ROW_CELL_SCROLL,S),t.spreadsheet.emit(T.GLOBAL_SCROLL,S)}),t.foregroundGroup.add(t.hRowScrollBar)}},this.getValidScrollBarOffset=function(n,i){return el(n,0,i)},this.renderHScrollBar=function(n,i,o){if(Math.floor(n)<Math.floor(i)){var a=t.scrollBarSize/2,l=t.getScrollbarPosition().maxY,s=n+(t.cfg.spreadsheet.isScrollContainsRowHeader()?Math.min(t.cornerBBox.width,t.getCanvasHW().width):0),u={x:t.panelBBox.minX+(t.cfg.spreadsheet.isScrollContainsRowHeader()?-t.cornerBBox.width+a:a),y:l},f=i+(t.cfg.spreadsheet.isScrollContainsRowHeader()?t.cornerBBox.width:0),c=t.spreadsheet.theme.scrollBar,h=f-s,d=Math.max(s/f*s,c==null?void 0:c.thumbHorizontalMinSize);t.hScrollBar=new As({isHorizontal:!0,trackLen:s,thumbLen:d,position:u,thumbOffset:o*(s-d)/h,theme:t.scrollBarTheme,scrollTargetMaxOffset:h}),t.hScrollBar.on(qn.ScrollChange,function(v){var p=v.offset,g=v.updateThumbOffset,C=t.getValidScrollBarOffset(p,h);g&&t.hScrollBar.updateThumbOffset(t.getScrollBarOffset(C,t.hScrollBar),!1),t.setScrollOffset({scrollX:C}),t.dynamicRenderCell()}),t.foregroundGroup.add(t.hScrollBar)}},this.getScrollbarPosition=function(){var n=t.panelBBox,i=n.maxX,o=n.maxY,a=t.getCanvasHW(),l=a.width,s=a.height,u=t.spreadsheet.options.interaction.scrollbarPosition===ja.CONTENT;return{maxX:(u?i:l)-t.scrollBarSize,maxY:u?o:s-t.scrollBarSize}},this.renderVScrollBar=function(n,i,o){if(n<i){var a=t.spreadsheet.theme.scrollBar,l=Math.max(n/i*n,a==null?void 0:a.thumbVerticalMinSize),s=i-n,u=t.getScrollbarPosition().maxX;t.vScrollBar=new As({isHorizontal:!1,trackLen:n,thumbLen:l,thumbOffset:o*(n-l)/s,position:{x:u,y:t.panelBBox.minY},theme:t.scrollBarTheme,scrollTargetMaxOffset:s}),t.vScrollBar.on(qn.ScrollChange,function(f){var c=f.offset,h=f.updateThumbOffset,d=t.getValidScrollBarOffset(c,s);h&&t.vScrollBar.updateThumbOffset(t.getScrollBarOffset(d,t.vScrollBar),!1),t.setScrollOffset({scrollY:d}),t.dynamicRenderCell()}),t.foregroundGroup.add(t.vScrollBar)}},this.getScrollBarOffset=function(n,i){var o=i.trackLen,a=i.thumbLen,l=i.scrollTargetMaxOffset;return n*(o-a)/l},this.isScrollOverThePanelArea=function(n){var i=n.offsetX,o=n.offsetY;return i>t.panelBBox.minX&&i<t.panelBBox.maxX&&o>t.panelBBox.minY&&o<t.panelBBox.maxY},this.isScrollOverTheCornerArea=function(n){var i=n.offsetX,o=n.offsetY;return i>t.cornerBBox.minX&&i<t.cornerBBox.maxX&&o>t.cornerBBox.minY&&o<t.cornerBBox.maxY+t.panelBBox.height},this.updateHorizontalRowScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,l=n.offsetY;t.isScrollOverTheCornerArea({offsetX:a,offsetY:l})&&((i=t.hRowScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.updateHorizontalScrollOffset=function(n){var i,o=n.offset,a=n.offsetX,l=n.offsetY;(!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetX:a,offsetY:l}))&&((i=t.hScrollBar)===null||i===void 0||i.emitScrollChange(o))},this.isScrollToLeft=function(n){var i=n.deltaX,o=n.offsetX,a=n.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var l=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:a,offsetX:o})||t.hRowScrollBar.thumbOffset<=0,s=!t.hScrollBar||t.hScrollBar.thumbOffset<=0;return i<=0&&s&&l},this.isScrollToRight=function(n){var i,o,a,l,s,u,f=n.deltaX,c=n.offsetX,h=n.offsetY;if(!t.hScrollBar&&!t.hRowScrollBar)return!0;var d=t.spreadsheet.isFrozenRowHeader()?(i=t.panelBBox)===null||i===void 0?void 0:i.width:(o=t.panelBBox)===null||o===void 0?void 0:o.maxX,v=!t.hRowScrollBar||t.isScrollOverThePanelArea({offsetY:h,offsetX:c})||((a=t.hRowScrollBar)===null||a===void 0?void 0:a.thumbOffset)+((l=t.hRowScrollBar)===null||l===void 0?void 0:l.thumbLen)>=t.cornerBBox.width,p=t.hRowScrollBar&&t.isScrollOverTheCornerArea({offsetX:c,offsetY:h})||((s=t.hScrollBar)===null||s===void 0?void 0:s.thumbOffset)+((u=t.hScrollBar)===null||u===void 0?void 0:u.thumbLen)>=d;return f>=0&&p&&v},this.isScrollToTop=function(n){var i;return t.vScrollBar?n<=0&&((i=t.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)<=0:!0},this.isScrollToBottom=function(n){var i,o,a;return t.vScrollBar?n>=0&&((i=t.vScrollBar)===null||i===void 0?void 0:i.thumbOffset)+((o=t.vScrollBar)===null||o===void 0?void 0:o.thumbLen)>=((a=t.panelBBox)===null||a===void 0?void 0:a.height):!0},this.isVerticalScrollOverTheViewport=function(n){return!t.isScrollToTop(n)&&!t.isScrollToBottom(n)},this.isHorizontalScrollOverTheViewport=function(n){return!t.isScrollToLeft(n)&&!t.isScrollToRight(n)},this.isScrollOverTheViewport=function(n){var i=n.deltaY,o=n.deltaX,a=n.offsetY,l=a<=t.cornerBBox.maxY;return l?!1:i!==0?t.isVerticalScrollOverTheViewport(i):o!==0?t.isHorizontalScrollOverTheViewport(n):!1},this.cancelScrollFrame=function(){return nt()&&t.scrollFrameId?!1:(cancelAnimationFrame(t.scrollFrameId),!0)},this.clearScrollFrameIdOnMobile=function(){nt()&&(t.scrollFrameId=null)},this.stopScrollChainingIfNeeded=function(n){var i=t.spreadsheet.options.interaction;i.overscrollBehavior!=="auto"&&t.stopScrollChaining(n)},this.stopScrollChaining=function(n){var i,o;n!=null&&n.cancelable&&((i=n==null?void 0:n.preventDefault)===null||i===void 0||i.call(n));var a=n==null?void 0:n.originalEvent;a!=null&&a.cancelable&&((o=a==null?void 0:a.preventDefault)===null||o===void 0||o.call(a))},this.onWheel=function(n){var i=t.spreadsheet.options.interaction,o=n.deltaX,a=n.deltaY,l=n.offsetX,s=n.offsetY,u=n.shiftKey;u&&PC()&&(l=l-o+a,o=a,s-=a,a=0);var f=I(g9(o,a,i.scrollSpeedRatio),2),c=f[0],h=f[1];if(t.spreadsheet.hideTooltip(),t.spreadsheet.interaction.clearHoverTimer(),!t.isScrollOverTheViewport({deltaX:c,deltaY:h,offsetX:l,offsetY:s})){t.stopScrollChainingIfNeeded(n);return}t.stopScrollChaining(n),t.spreadsheet.interaction.addIntercepts([le.HOVER]),t.cancelScrollFrame()&&(t.scrollFrameId=requestAnimationFrame(function(){var d,v=t.getScrollOffset(),p=v.scrollX,g=v.scrollY,C=v.rowHeaderScrollX;c!==0&&(t.showHorizontalScrollBar(),t.updateHorizontalRowScrollOffset({offsetX:l,offsetY:s,offset:c+C}),t.updateHorizontalScrollOffset({offsetX:l,offsetY:s,offset:c+p})),h!==0&&(t.showVerticalScrollBar(),(d=t.vScrollBar)===null||d===void 0||d.emitScrollChange(h+g)),t.delayHideScrollbarOnMobile(),t.clearScrollFrameIdOnMobile()}))},this.addCell=function(n){var i=t.spreadsheet.panelScrollGroup;i==null||i.add(n)},this.realCellRender=function(n,i){var o=t.calculateXYIndexes(n,i);en.getInstance().logger("renderIndex:",t.preCellIndexes,o);var a=Q7(t.preCellIndexes,o),l=a.add,s=a.remove;en.getInstance().debugCallback(VD,function(){te(l,function(f){var c=I(f,2),h=c[0],d=c[1],v=t.layoutResult.getCellMeta(d,h);if(v){var p=t.cfg.dataCell(v);p.set("name","".concat(h,"-").concat(d)),t.addCell(p)}});var u=xo(t.panelGroup.getChildren(),Fn);te(s,function(f){var c=I(f,2),h=c[0],d=c[1],v=ct(u,function(p){return p.get("name")==="".concat(h,"-").concat(d)});v==null||v.remove(!0)}),en.getInstance().logger("Render Cell Panel: ".concat(u==null?void 0:u.length,", Add: ").concat(l==null?void 0:l.length,", Remove: ").concat(s==null?void 0:s.length))}),t.preCellIndexes=o,t.spreadsheet.emit(T.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,{add:l,remove:s,spreadsheet:t.spreadsheet})},this.getGridInfo=function(){var n=I(t.preCellIndexes.center,4),i=n[0],o=n[1],a=n[2],l=n[3],s=Fy(i,o,t.layoutResult.colLeafNodes),u=jc(a,l,t.viewCellHeights);return{cols:s,rows:u}},this.onAfterScroll=No(function(){var n=t.spreadsheet,i=n.interaction,o=n.container;if(!i.isSelectedState()&&(i.removeIntercepts([le.HOVER]),i.getHoverAfterScroll())){var a=i.eventController.canvasMousemoveEvent;if(a){var l=a.x,s=a.y,u=o.getShape(l,s);u&&o.emit(St.MOUSE_MOVE,L(L({},a),{shape:u,target:u,timestamp:performance.now()}))}}},300),this.cfg=r,this.spreadsheet=r.spreadsheet,this.init()}return Object.defineProperty(e.prototype,"scrollBarTheme",{get:function(){return this.spreadsheet.theme.scrollBar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarSize",{get:function(){return this.scrollBarTheme.size},enumerable:!1,configurable:!0}),e.prototype.getCellCustomWidth=function(r,t){return ft(t)?t==null?void 0:t(r):t},e.prototype.getCellDraggedWidth=function(r){var t=this.cfg.colCfg;return j(t==null?void 0:t.widthByFieldValue,"".concat(r.value))},e.prototype.render=function(){T9(this.spreadsheet.dataCfg.fields)||(this.adjustScrollOffset(),this.renderHeaders(),this.renderScrollBars(),this.renderBackground(),this.dynamicRenderCell())},e.prototype.adjustScrollOffset=function(){var r=this.getAdjustedScrollOffset(this.getScrollOffset());this.setScrollOffset(r)},e.prototype.getSeriesNumberWidth=function(){var r=this.cfg.showSeriesNumber;return r?this.spreadsheet.theme.rowCell.seriesNumberWidth:0},e.prototype.getCanvasHW=function(){return{width:this.cfg.width,height:this.cfg.height}},e.prototype.updateScrollOffset=function(r){var t,n,i,o,a,l;if(((t=r.rowHeaderOffsetX)===null||t===void 0?void 0:t.value)!==void 0){!((n=r.rowHeaderOffsetX)===null||n===void 0)&&n.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}if(((i=r.offsetX)===null||i===void 0?void 0:i.value)!==void 0){!((o=r.offsetX)===null||o===void 0)&&o.animate?this.scrollWithAnimation(r):this.scrollImmediately(r);return}((a=r.offsetY)===null||a===void 0?void 0:a.value)!==void 0&&(!((l=r.offsetY)===null||l===void 0)&&l.animate?this.scrollWithAnimation(r):this.scrollImmediately(r))},e.prototype.getPaginationScrollY=function(){var r=this.cfg.pagination;if(r){var t=r.current,n=t===void 0?Lu:t,i=r.pageSize,o=this.viewCellHeights,a=Math.max((n-1)*i,0);return o.getCellOffsetY(a)}return 0},e.prototype.destroy=function(){this.unbindEvents(),this.clearAllGroup(),this.preCellIndexes=null,cancelAnimationFrame(this.scrollFrameId)},e.prototype.calculateXYIndexes=function(r,t){var n=this.panelBBox,i=n.viewportHeight,o=n.viewportWidth,a=Ac(r,t,this.viewCellWidths,this.viewCellHeights,{width:o,height:i,x:0,y:0},this.getRealScrollX(this.cornerBBox.width));return{center:a}},e.prototype.calculateCornerBBox=function(){this.cornerBBox=new zy(this,!0)},e.prototype.getCellRange=function(){var r=this.cfg.pagination;return _9(this.viewCellHeights,r)},e.prototype.clip=function(r,t){var n,i=this.spreadsheet.isFrozenRowHeader();(n=this.spreadsheet.panelScrollGroup)===null||n===void 0||n.setClip({type:"rect",attrs:{x:i?r:0,y:t,width:this.panelBBox.width+(i?0:r),height:this.panelBBox.height}})},e.prototype.translateRelatedGroups=function(r,t,n){var i,o,a,l,s,u;En(this.spreadsheet.panelScrollGroup,this.cornerBBox.width-r,this.cornerBBox.height-t),(i=this.rowHeader)===null||i===void 0||i.onScrollXY(this.getRealScrollX(r,n),t,Ri),(o=this.rowIndexHeader)===null||o===void 0||o.onScrollXY(this.getRealScrollX(r,n),t,_d),(a=this.cornerHeader)===null||a===void 0||a.onCorScroll(this.getRealScrollX(r,n),iu),(l=this.centerFrame)===null||l===void 0||l.onChangeShadowVisibility(r,this.getRealWidth()-this.panelBBox.width),(s=this.centerFrame)===null||s===void 0||s.onBorderScroll(this.getRealScrollX(r)),(u=this.columnHeader)===null||u===void 0||u.onColScroll(r,K0)},e.prototype.init=function(){var r=this;en.getInstance().debugCallback(XD,function(){r.layoutResult=r.doLayout(),r.saveInitColumnLeafNodes(r.layoutResult.colLeafNodes),r.spreadsheet.emit(T.LAYOUT_AFTER_HEADER_LAYOUT,r.layoutResult)}),this.calculateCellWidthHeight(),this.calculateCornerBBox(),this.calculatePanelBBox(),this.clipPanelGroup(),this.bindEvents()},e.prototype.renderBackground=function(){var r=this.getCanvasHW(),t=r.width,n=r.height,i=this.spreadsheet.theme.background,o=i.color,a=i.opacity;this.backgroundGroup.addShape("rect",{attrs:{fill:o,opacity:a,x:0,y:0,width:t,height:n}})},e.prototype.renderScrollBars=function(){var r=this.getScrollOffset(),t=r.scrollX,n=r.scrollY,i=r.rowHeaderScrollX,o=this.panelBBox,a=o.width,l=o.height,s=this.layoutResult.colsHierarchy.width,u=this.getRealHeight();this.renderRowScrollBar(i),this.renderHScrollBar(a,s,t),this.renderVScrollBar(l,u,n)},e.prototype.renderHeaders=function(){var r=this.getSeriesNumberWidth();this.rowHeader=this.getRowHeader(),this.columnHeader=this.getColHeader(),r>0&&!this.rowIndexHeader&&(this.rowIndexHeader=this.getSeriesNumberHeader()),this.cornerHeader=this.getCornerHeader(),this.centerFrame=this.getCenterFrame(),this.rowIndexHeader&&this.foregroundGroup.add(this.rowIndexHeader),this.rowHeader&&this.foregroundGroup.add(this.rowHeader),this.foregroundGroup.add(this.columnHeader),this.foregroundGroup.add(this.cornerHeader),this.foregroundGroup.add(this.centerFrame)},e.prototype.getRowHeader=function(){var r,t,n;if(!this.rowHeader){var i=this.panelBBox,o=i.y,a=i.viewportHeight,l=i.viewportWidth,s=i.height,u=this.getSeriesNumberWidth();return new ky({width:this.cornerBBox.width,height:s,viewportWidth:l,viewportHeight:a,position:{x:0,y:o},data:this.layoutResult.rowNodes,hierarchyType:this.cfg.hierarchyType,linkFields:(n=(t=(r=this.cfg.spreadsheet.options)===null||r===void 0?void 0:r.interaction)===null||t===void 0?void 0:t.linkFields)!==null&&n!==void 0?n:[],seriesNumberWidth:u,spreadsheet:this.spreadsheet})}return this.rowHeader},e.prototype.getColHeader=function(){if(!this.columnHeader){var r=this.panelBBox,t=r.x,n=r.width,i=r.viewportHeight,o=r.viewportWidth;return new qc({width:n,cornerWidth:this.cornerBBox.width,height:this.cornerBBox.height,viewportWidth:o,viewportHeight:i,position:{x:t,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},e.prototype.getCornerHeader=function(){return this.cornerHeader?this.cornerHeader:eN.getCornerHeader(this.panelBBox,this.cornerBBox,this.getSeriesNumberWidth(),this.cfg,this.layoutResult,this.spreadsheet)},e.prototype.getSeriesNumberHeader=function(){return rN.getSeriesNumberHeader(this.panelBBox,this.getSeriesNumberWidth(),this.layoutResult.rowsHierarchy.getNodes(0),this.spreadsheet,this.cornerBBox.width)},e.prototype.getCenterFrame=function(){var r;if(!this.centerFrame){var t=this.panelBBox,n=t.viewportWidth,i=t.viewportHeight,o=this.cornerBBox.width,a=this.cornerBBox.height,l=(r=this.cfg)===null||r===void 0?void 0:r.frame,s={position:{x:this.cornerBBox.x,y:this.cornerBBox.y},width:o,height:a,viewportWidth:n,viewportHeight:i,showViewportLeftShadow:!1,showViewportRightShadow:!1,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),isPivotMode:this.cfg.spreadsheet.isPivotMode(),spreadsheet:this.cfg.spreadsheet};return l?l(s):new tN(s)}return this.centerFrame},e.prototype.updatePanelScrollGroup=function(){this.gridInfo=this.getGridInfo(),this.spreadsheet.panelScrollGroup.update(this.gridInfo)},e.prototype.dynamicRenderCell=function(r){var t=this.getScrollOffset(),n=t.scrollX,i=t.scrollY,o=t.rowHeaderScrollX,a=i+this.getPaginationScrollY(),l=Rs(a,this.viewCellHeights.getTotalHeight(),this.panelBBox.viewportHeight);this.spreadsheet.hideTooltip(),this.spreadsheet.interaction.clearHoverTimer(),this.realCellRender(n,l),this.updatePanelScrollGroup(),this.translateRelatedGroups(n,l,o),this.clip(n,l),r||this.emitScrollEvent({scrollX:n,scrollY:l,rowHeaderScrollX:o}),this.onAfterScroll()},e.prototype.emitScrollEvent=function(r){this.spreadsheet.emit(T.LAYOUT_CELL_SCROLL,r),this.spreadsheet.emit(T.GLOBAL_SCROLL,r)},e.prototype.saveInitColumnLeafNodes=function(r){r===void 0&&(r=[]);var t=this.spreadsheet,n=t.store,i=t.options,o=i.interaction.hiddenColumnFields,a=r.length+o.length,l=n.get("initColumnLeafNodes",[]);a!==l.length&&n.set("initColumnLeafNodes",r)},e.prototype.getHiddenColumnsInfo=function(r){var t=this.spreadsheet.store.get("hiddenColumnsDetail",[]);return H(t)?null:t.find(function(n){var i;return(i=n==null?void 0:n.hideColumnNodes)===null||i===void 0?void 0:i.some(function(o){return o.id===r.id})})},e.prototype.getCornerNodes=function(){var r;return((r=this.cornerHeader)===null||r===void 0?void 0:r.getNodes())||[]},e}(),Gy=function(e){var r,t,n,i=e.facetCfg,o=e.customTreeItems,a=o===void 0?[]:o,l=e.level,s=e.parentNode,u=e.hierarchy,f=i.spreadsheet,c=i.collapsedRows,h=i.hierarchyCollapse;try{for(var d=tr(a),v=d.next();!v.done;v=d.next()){var p=v.value,g=p.key,C=p.title,y=p.collapsed,m=p.children,w=wf(p,["key","title","collapsed","children"]),S=(n={},n[fe]=g,n),b=Pi(s.id,C),A=y??!1,O=j(c,b),B=O??(h||A),P=new st({id:b,key:g,label:C,value:C,level:l,parent:s,field:g,isTotals:!1,isCollapsed:B,hierarchy:u,query:S,spreadsheet:f,extra:w});l>u.maxLevel&&(u.maxLevel=l),H(m)&&(P.isLeaf=!0);var D=bc(i,s,P,u);!H(m)&&!B&&D&&Gy({facetCfg:i,parentNode:P,level:l+1,hierarchy:u,customTreeItems:m})}}catch(z){r={error:z}}finally{try{v&&!v.done&&(t=d.return)&&t.call(d)}finally{if(r)throw r.error}}},nN=function(e,r,t){var n=e.getTotalsConfig(r);if(n.showGrandTotals){var i=n.reverseLayout?"unshift":"push";t[i](new $i({label:n.label,isSubTotals:!1,isGrandTotals:!0}))}},iN=(gl+tt).length,Uy=function(e){var r,t,n,i,o,a,l,s=e.parentNode,u=e.currentField,f=e.level,c=e.facetCfg,h=e.hierarchy,d=e.pivotMeta,v=c.spreadsheet,p=c.dataSet,g=c.collapsedRows,C=c.hierarchyCollapse,y=c.rowExpandDepth,m=s.query,w=s.id,S=((i=v.dataCfg.fields.rows)===null||i===void 0?void 0:i.length)<=f,b=((o=p==null?void 0:p.sortedDimensionValues)===null||o===void 0?void 0:o[u])||[],A=ho(Array.from(d.keys())),O=Oc(A,b,function(Qt){return gl===w?Qt:Pi(w,Qt).slice(iN)}),B=FC(O,c,s,u),P=v.store.get("drillItemsNum");S&&P>0&&(B=B.slice(0,P)),f===0&&nN(v,u,B);try{for(var D=tr(B),z=D.next();!z.done;z=D.next()){var W=z.value,U=W instanceof $i,V=U?null:d.get(W),k=void 0,pe=m,he=!1,Me=!1;if(U){var ne=W;he=ne.isGrandTotals,Me=ne.isSubTotals,k=ke(W.label),pe=m}else k=W,pe=L(L({},m),(n={},n[u]=k,n));var Fe=Pi(w,k),we=g==null?void 0:g[Fe],Wt=Yt(y)?f>y:null,Qe=(a=we??Wt)!==null&&a!==void 0?a:C,_e=new st({id:Fe,key:u,label:k,value:k,level:f,parent:s,field:u,isTotals:U,isGrandTotals:he,isSubTotals:Me,isCollapsed:Qe,hierarchy:h,query:pe,spreadsheet:v});f>h.maxLevel&&(h.maxLevel=f);var $e=!(!((l=V==null?void 0:V.children)===null||l===void 0)&&l.size);($e||U)&&(_e.isLeaf=!0),$e||(_e.isTotals=!0);var fr=bc(c,s,_e,h);!$e&&!Qe&&!U&&fr&&Uy({level:f+1,currentField:V.childField,pivotMeta:V.children,facetCfg:c,parentNode:_e,hierarchy:h})}}catch(Qt){r={error:Qt}}finally{try{z&&!z.done&&(t=D.return)&&t.call(D)}finally{if(r)throw r.error}}},Yy=function(e){var r=e.isValueInCols,t=e.moreThanOneValue,n=e.rootNode,i=e.facetCfg,o=e.hierarchy,a=e.fields,l=e.isRowHeader,s,u;l?(s=!r&&t,u=!r&&!t):(s=r&&t,u=r&&!t),UC({addTotalMeasureInTotal:s,addMeasureInTotalQuery:u,parentNode:n,currentField:a[0],fields:a,facetCfg:i,hierarchy:o})},oN=function(e){var r=e.facetCfg,t=e.rootNode,n=e.hierarchy,i=r.dataSet.fields.customTreeItems;Gy({customTreeItems:i,facetCfg:r,level:0,parentNode:t,hierarchy:n})},aN=function(e){var r=e.facetCfg,t=e.rootNode,n=e.hierarchy,i=r.hierarchyType,o=r.rows,a=r.dataSet;i==="tree"?Uy({level:0,currentField:o[0],pivotMeta:a.rowPivotMeta,facetCfg:r,parentNode:t,hierarchy:n}):oN(e)},lN=function(e){var r=e.spreadsheet;r.isHierarchyTreeType()?aN(e):Yy(e)},sN=function(e){var r=e.isPivotMode,t=e.hierarchy,n=e.rootNode,i=e.facetCfg;r?Yy(e):E9({parentNode:n,hierarchy:t,facetCfg:i})},Wu=function(e){var r=e.isRowHeader,t=e.facetCfg,n=t.spreadsheet,i=t.rows,o=i===void 0?[]:i,a=t.columns,l=a===void 0?[]:a,s=n.dataCfg.fields.valueInCols,u=n.isPivotMode(),f=t.dataSet.moreThanOneValue(),c=st.rootNode(),h=new NC,d={isValueInCols:s,isPivotMode:u,moreThanOneValue:f,rootNode:c,hierarchy:h,spreadsheet:n,facetCfg:t,fields:r?o:l,isRowHeader:r};r?lN(d):sN(d);var v=function(){return r&&n.isHierarchyTreeType()?h.getNodes():h.getLeaves()};return{hierarchy:h,leafNodes:v()}},uN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"rowCellTheme",{get:function(){return this.spreadsheet.theme.rowCell.cell},enumerable:!1,configurable:!0}),r.prototype.getContentHeight=function(){var t=this.layoutResult,n=t.rowsHierarchy,i=t.colsHierarchy;return n.height+i.height},r.prototype.doLayout=function(){var t=Wu({isRowHeader:!0,facetCfg:this.cfg}),n=t.leafNodes,i=t.hierarchy,o=Wu({isRowHeader:!1,facetCfg:this.cfg}),a=o.leafNodes,l=o.hierarchy;this.calculateNodesCoordinate(n,i,a,l);var s=this.cfg,u=s.dataSet,f=s.spreadsheet,c=function(d,v){var p,g,C,y=d||0,m=v||0,w=n[y],S=a[m];if(!w||!S)return null;var b=w.query,A=S.query,O=w.isTotals||w.isTotalMeasure||S.isTotals||S.isTotalMeasure,B=f.options.hierarchyType,P=(g=j(f,"facet.cfg.colCfg.hideMeasureColumn"))!==null&&g!==void 0?g:!1,D=P&&B!=="customTree"?(p={},p[fe]=(C=u.fields.values)===null||C===void 0?void 0:C[0],p):{},z=$l({},b,A,D),W=So(w,S),U=u.getCellData({query:z,rowNode:w,isTotals:O,totalStatus:W}),V,k=null;return H(U)?V=j(z,[fe],""):(V=j(U,[fe],""),k=j(U,[rr],null),O&&(V=j(z,[fe],""),k=j(U,V,null))),{spreadsheet:f,x:S.x,y:w.y,width:S.width,height:w.height,data:U,rowIndex:y,colIndex:m,isTotals:O,valueField:V,fieldValue:k,rowQuery:b,colQuery:A,rowId:w.id,colId:S.id,id:zl(w.id,S.id)}},h={colNodes:l.getNodes(),colsHierarchy:l,rowNodes:i.getNodes(),rowsHierarchy:i,rowLeafNodes:n,colLeafNodes:a,getCellMeta:c,spreadsheet:f};return UD(this.cfg,h)},r.prototype.calculateNodesCoordinate=function(t,n,i,o){this.calculateRowNodesCoordinate(t,n,i),this.calculateColNodesCoordinate(i,o,t,n.width)},r.prototype.calculateColNodesCoordinate=function(t,n,i,o){for(var a,l,s,u=st.blankNode(),f=n.getNodes(),c=n.sampleNodesForAllLevels,h=0;h<c.length;h++){var d=c[h];if(d.height=this.getColNodeHeight(d),n.height+=d.height,d.level===0)d.y=0;else{var v=c[h-1];d.y=(a=(v==null?void 0:v.y)+(v==null?void 0:v.height))!==null&&a!==void 0?a:0}}for(var p=0,g=function(m){var w=f[m];if(w.isLeaf&&(w.colIndex=p,p+=1,w.x=u.x+u.width,w.width=C.calculateColLeafNodesWidth(w,t,i,o),n.width+=w.width,u=w),w.level===0)w.y=0;else{var S=n.sampleNodesForAllLevels.find(function(b){return b.level===w.level-1});w.y=(l=(S==null?void 0:S.y)+(S==null?void 0:S.height))!==null&&l!==void 0?l:0}w.height=C.getColNodeHeight(w),Ru(C.cfg,null,w)},C=this,y=0;y<f.length;y++)g(y);this.autoCalculateColNodeWidthAndX(t),H((s=this.spreadsheet.options.totals)===null||s===void 0?void 0:s.col)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!0}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!1,isSubTotal:!1}))},r.prototype.autoCalculateColNodeWidthAndX=function(t){for(var n,i=null,o=t.slice(0);o.length;){var a=o.shift(),l=a.parent;if(i!==l&&l){o.push(l);var s=(n=l.children)===null||n===void 0?void 0:n.find(function(c){return c.width}),u=s==null?void 0:s.x,f=_C(l.children,"width");l.x=u,l.width=f,i=l}}},r.prototype.calculateColLeafNodesWidth=function(t,n,i,o){var a,l,s,u,f,c=this.cfg,h=c.colCfg,d=c.dataSet,v=c.filterDisplayDataItem,p=this.getCellDraggedWidth(t);if(Yt(p))return p;var g=this.getCellCustomWidth(t,h==null?void 0:h.width);if(Yt(g))return g;if(this.spreadsheet.getLayoutWidthType()===Jn.Compact){for(var C=this.spreadsheet.theme.colCell,y=C.bolderText,m=C.cell,w=C.icon,S=this.spreadsheet.theme.dataCell.text,b=this.spreadsheet.dataSet.getFieldFormatter(t.field),A=(a=b==null?void 0:b(t.value))!==null&&a!==void 0?a:t.label,O=this.getExpectedCellIconWidth(N.COL_CELL,this.spreadsheet.isValueInCols()&&this.spreadsheet.options.showDefaultHeaderActionIcon,w),B=this.spreadsheet.measureTextWidthRoughly(A,y)+O,P=void 0,D=0,z=0;z<vs;z++){var W=i[z];if(W){var U=d.getCellData({query:L(L({},t.query),W.query),rowNode:W,isTotals:t.isTotals||t.isTotalMeasure||W.isTotals||W.isTotalMeasure,totalStatus:So(W,t)});if(U){var V=ay(U,v),k=(s=(l=this.spreadsheet.dataSet.getFieldFormatter(U[fe]))===null||l===void 0?void 0:l(V))!==null&&s!==void 0?s:V,pe="".concat(k),he=this.spreadsheet.measureTextWidthRoughly(pe,S);he>D&&(P=pe,D=he)}}}var Me=B>D,ne=Me?A:P,Fe=Me?O:0;en.getInstance().logger("Max Label In Col:",t.field,ne,D);var we=this.spreadsheet.measureTextWidth(ne,L(L({},y),{fontSize:Math.max(S.fontSize,y.fontSize)}));return we+((u=m.padding)===null||u===void 0?void 0:u.left)+((f=m.padding)===null||f===void 0?void 0:f.right)+Fe}return this.spreadsheet.isHierarchyTreeType()?this.getAdaptTreeColWidth(t,n,i):this.getAdaptGridColWidth(n,o)},r.prototype.getColNodeHeight=function(t){var n=this.cfg.colCfg,i=j(n,["heightByField",t.key]);return i??(n==null?void 0:n.height)},r.prototype.getExpectedCellIconWidth=function(t,n,i){var o,a=0;if(n)a=1;else{var l=Hc(de(this.spreadsheet.options.headerActionIcons,function(s){return L(L({},s),{displayCondition:function(){return!0}})}),null,t);a=(o=l==null?void 0:l.iconNames.length)!==null&&o!==void 0?o:0}return a?a*(i.size+i.margin.left)+i.margin.right:0},r.prototype.calculateRowNodesCoordinate=function(t,n,i){var o,a,l,s,u,f,c,h,d,v,p=this.cfg,g=p.cellCfg,C=p.spreadsheet,y=C.isHierarchyTreeType(),m=j(C,"options.style.rowCfg.heightByField",{}),w=(l=n.sampleNodesForAllLevels)!==null&&l!==void 0?l:[];if(y)n.width=this.getTreeRowHeaderWidth();else try{for(var S=tr(n.sampleNodesForAllLevels),b=S.next();!b.done;b=S.next()){var A=b.value;A.width=this.calculateGridRowNodesWidth(A,i),n.width+=A.width;var O=(s=w[A.level-1])!==null&&s!==void 0?s:{x:0,width:0};A.x=(O==null?void 0:O.x)+(O==null?void 0:O.width)}}catch(V){o={error:V}}finally{try{b&&!b.done&&(a=S.return)&&a.call(S)}finally{if(o)throw o.error}}for(var B=st.blankNode(),P=n.getNodes(),D=0;D<P.length;D++){var z=P[D],W=y||!y&&z.isLeaf;if(W&&((u=z.rowIndex)!==null&&u!==void 0||(z.rowIndex=D),(f=z.colIndex)!==null&&f!==void 0||(z.colIndex=D),z.y=B.y+B.height,z.height=((c=m==null?void 0:m[z.id])!==null&&c!==void 0?c:g==null?void 0:g.height)+((h=this.rowCellTheme.padding)===null||h===void 0?void 0:h.top)+((d=this.rowCellTheme.padding)===null||d===void 0?void 0:d.bottom),B=z,n.height+=z.height),y||z.level===0)z.x=0;else{var O=w[z.level-1];z.x=(O==null?void 0:O.x)+(O==null?void 0:O.width)}if(y)z.width=this.getTreeRowHeaderWidth();else{var U=w[z.level];z.width=U==null?void 0:U.width}Ru(this.cfg,z,null)}y||(this.autoCalculateRowNodeHeightAndY(t),H((v=C.options.totals)===null||v===void 0?void 0:v.row)||(this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!1}),this.adjustTotalNodesCoordinate({hierarchy:n,isRowHeader:!0,isSubTotal:!0})))},r.prototype.autoCalculateRowNodeHeightAndY=function(t){for(var n=null,i=t.slice(0);i.length;){var o=i.shift(),a=o.parent;n!==a&&a&&(i.push(a),a.y=a.children[0].y,a.height=a.children.map(function(l){return l.height}).reduce(function(l,s){return l+s},0),n=a)}},r.prototype.getMultipleMap=function(t,n,i){for(var o=t.maxLevel,a=this.cfg,l=a.totals,s=a.dataSet,u=s.moreThanOneValue(),f=s.fields,c=f.rows,h=f.columns,d=n?c:h,v=n?l.row:l.col,p=i?v.subTotalsGroupDimensions||[]:v.totalsGroupDimensions||[],g=Array.from({length:o+1},function(){return 1}),C=o;C>0;C--){var y=d[C],m=y===fe&&u;p.includes(y)||m||(g[C-1]+=g[C],g[C]=0)}return g},r.prototype.adjustTotalNodesCoordinate=function(t){var n=t.hierarchy,i=t.isRowHeader,o=t.isSubTotal,a=this.getMultipleMap(n,i,o),l=qr(n.getNodes(),function(u){return o?u.isSubTotals:u.isGrandTotals}),s=i?"width":"height";te(l,function(u){var f=a[u.level];if(!f&&o)for(var c=1;f<1;)f=a[u.level-c]-c,c++;for(var h=0,d=function(p){h+=n.sampleNodesForAllLevels.find(function(g){return g.level===u.level+p})[s]},v=0;v<f;v++)d(v);u[s]=h})},r.prototype.calculateGridRowNodesWidth=function(t,n){var i=this.cfg,o=i.rowCfg,a=i.spreadsheet,l=j(o,["widthByField",t.key]);if(Yt(l))return l;var s=this.getCellCustomWidth(t,o==null?void 0:o.width);return Yt(s)?s:a.getLayoutWidthType()!==Jn.Adaptive?this.getCompactGridRowWidth(t):this.getAdaptGridColWidth(n)},r.prototype.getAdaptTreeColWidth=function(t,n,i){var o=this.getCanvasHW().width,a=o-this.getSeriesNumberWidth(),l=Math.min(a/2,this.getTreeRowHeaderWidth()),s=Math.max(1,n.length),u=this.cfg.cellCfg;return Math.max(Es(u,this.getColLabelLength(t,i)),(a-l)/s)},r.prototype.getColLabelLength=function(t,n){var i,o=Z9(t==null?void 0:t.value);if(re(o))return o.length;for(var a=1,l=0;l<vs;l++){var s=n[l];if(!s)return a;for(var u=this.cfg.dataSet.getCellData({query:L(L({},t.query),s.query),rowNode:s,isTotals:t.isTotals||t.isTotalMeasure||s.isTotals||s.isTotalMeasure,totalStatus:So(s,t)}),f=me(u),c=0;c<f.length;c++){var h=u[f[c]],d=Ci((i=h==null?void 0:h.values)===null||i===void 0?void 0:i[0]);d>a&&(a=d)}}return a},r.prototype.getAdaptGridColWidth=function(t,n){var i=this.cfg,o=i.rows,a=i.cellCfg,l=o.length,s=t.length,u=this.getCanvasHW().width,f=u-this.getSeriesNumberWidth(),c=Math.max(1,l+s);return n?Math.max(Es(a),(f-n)/s):Math.max(Es(a),f/c)},r.prototype.getTreeRowHeaderWidth=function(){var t,n,i,o,a=this.cfg,l=a.rows,s=a.dataSet,u=a.rowCfg,f=a.treeRowsWidth,c=f??(u==null?void 0:u.treeRowsWidth);if(c)return c;var h=this.getCellCustomWidth(null,u==null?void 0:u.width);if(h)return h;var d=l.map(function(y){return s.getFieldName(y)}).join("/"),v=this.spreadsheet.theme.cornerCell,p=v.bolderText,g=v.icon,C=1+this.spreadsheet.measureTextWidth(d,p)+g.size*2+((t=g.margin)===null||t===void 0?void 0:t.left)+((n=g.margin)===null||n===void 0?void 0:n.right)+((i=this.rowCellTheme.padding)===null||i===void 0?void 0:i.left)+((o=this.rowCellTheme.padding)===null||o===void 0?void 0:o.right);return Math.max(c??p2,C)},r.prototype.getCompactGridRowWidth=function(t){var n=this,i,o=this.cfg,a=o.dataSet,l=o.spreadsheet,s=l.theme.rowCell,u=s.bolderText,f=s.icon,c=s.cell,h=l.theme.cornerCell,d=h.bolderText,v=h.icon,p=h.cell,g=t.field,C=t.isLeaf,y=this.getExpectedCellIconWidth(N.ROW_CELL,!l.isValueInCols()&&C&&l.options.showDefaultHeaderActionIcon,f),m=(i=a.getDimensionValues(g))===null||i===void 0?void 0:i.slice(0,vs).map(function(B){var P,D;return(D=(P=n.spreadsheet.dataSet.getFieldFormatter(g))===null||P===void 0?void 0:P(B))!==null&&D!==void 0?D:B}),w=ac(m,function(B){return"".concat(B).length}),S=l.measureTextWidth(w,u)+y+c.padding.left+c.padding.right,b=a.getFieldName(g),A=this.getExpectedCellIconWidth(N.CORNER_CELL,!1,v),O=l.measureTextWidth(b,d)+A+p.padding.left+p.padding.right;return en.getInstance().logger("Max Label In Row:",g,S>O?w:b),Math.max(S,O)},r.prototype.getViewCellHeights=function(t){var n=t.rowLeafNodes,i=Qi(n,function(o,a){return o.push(Ie(o)+a.height),o},[0]);return{getTotalHeight:function(){return Ie(i)},getCellOffsetY:function(o){return i[o]},getTotalLength:function(){return i.length-1},getIndexRange:function(o,a){return Ny(i,o,a)}}},r}(Wy),fN=function(e){Q(r,e);function r(t){var n=this,i;n=e.call(this,t)||this,n.getScrollGroupClipBBox=function(){var s,u=n.headerConfig,f=u.width,c=u.height,h=u.scrollX,d=u.spreadsheet,v=d.options;if(!v.frozenColCount&&!v.frozenTrailingColCount)return{x:h,y:0,width:f,height:c};for(var p=(s=d.facet)===null||s===void 0?void 0:s.layoutResult.colLeafNodes,g=xn(d.options,p.length),C=g.frozenColCount,y=g.frozenTrailingColCount,m=0,w=0,S=0;S<C;S++)m+=p[S].width;for(var S=0;S<y;S++)w+=p[p.length-1-S].width;var b=f-m-w;return{x:h+m,y:0,width:b,height:c}};var o=(i=n.headerConfig.spreadsheet)===null||i===void 0?void 0:i.options,a=o.frozenColCount,l=o.frozenTrailingColCount;return a&&(n.frozenColGroup=n.addGroup({name:a2,zIndex:nu})),l&&(n.frozenTrailingColGroup=n.addGroup({name:l2,zIndex:nu})),n}return r.prototype.isFrozenCell=function(t){var n=this.headerConfig.spreadsheet,i=n==null?void 0:n.options,o=i.frozenColCount,a=i.frozenTrailingColCount,l=t.colIndex,s=n==null?void 0:n.facet.layoutResult.colLeafNodes;return Vn(l,o)||jn(l,a,s.length)},r.prototype.clear=function(){var t,n,i=this.headerConfig.spreadsheet;e.prototype.clear.call(this),(t=this.frozenTrailingColGroup)===null||t===void 0||t.clear(),(n=this.frozenColGroup)===null||n===void 0||n.clear();var o=i==null?void 0:i.foregroundGroup.findById(Z0);o==null||o.clear()},r.prototype.getCellInstance=function(t,n,i){return t.field===Qn?new AP(t,n,i):new Cy(t,n,i)},r.prototype.getCellGroup=function(t){var n,i,o=this.headerConfig.spreadsheet,a=o==null?void 0:o.options,l=a.frozenColCount,s=a.frozenTrailingColCount,u=(n=o==null?void 0:o.facet)===null||n===void 0?void 0:n.layoutResult.colNodes.filter(function(d){return pr(d)}),f=wo(u,l,s),c=f.colCount,h=f.trailingColCount;return Vn(co(t).colIndex,c)?this.frozenColGroup:jn(co(t).colIndex,h,(i=o==null?void 0:o.facet)===null||i===void 0?void 0:i.layoutResult.colLeafNodes.length)?this.frozenTrailingColGroup:this.scrollGroup},r.prototype.isColCellInRect=function(t){var n,i,o=this.headerConfig.spreadsheet,a=o==null?void 0:o.options,l=a.frozenColCount,s=a.frozenTrailingColCount,u=(n=o==null?void 0:o.facet)===null||n===void 0?void 0:n.layoutResult.colLeafNodes.length,f=(i=o==null?void 0:o.facet)===null||i===void 0?void 0:i.layoutResult.colNodes.filter(function(v){return pr(v)}),c=wo(f,l,s),h=c.colCount,d=c.trailingColCount;return Vn(co(t).colIndex,h)||jn(co(t).colIndex,d,u)?!0:e.prototype.isColCellInRect.call(this,t)},r.prototype.clip=function(){this.scrollGroup.setClip({type:"rect",attrs:this.getScrollGroupClipBBox()})},r}(qc),cN=function(e){Q(r,e);function r(t){var n,i=e.call(this,t)||this;i.frozenGroupInfo=(n={},n[vr.FROZEN_COL]={width:0},n[vr.FROZEN_ROW]={height:0},n[vr.FROZEN_TRAILING_ROW]={height:0},n[vr.FROZEN_TRAILING_COL]={width:0},n),i.panelScrollGroupIndexes=[],i.onSortHandler=function(a){var l=i.spreadsheet,s=a;Array.isArray(a)||(s=[a]);var u=l.dataCfg.sortParams||[];s=s.map(function(c){var h,d,v=L(L({},c),{sortFieldId:(h=c.sortKey)!==null&&h!==void 0?h:c.sortFieldId}),p=(d=u.find(function(g){return g.sortFieldId===v.sortFieldId}))!==null&&d!==void 0?d:{};return L(L({},p),v)});var f=u.filter(function(c){var h=s.find(function(d){return d.sortFieldId===c.sortFieldId});return!h});Fo(l.dataCfg,"sortParams",$($([],I(f),!1),I(s),!1)),l.setDataCfg(l.dataCfg),l.render(!0),l.emit(T.RANGE_SORTED,l.dataSet.getDisplayDataSet())},i.onFilterHandler=function(a){var l=i.spreadsheet,s=!a.filteredValues||a.filteredValues.length===0,u=l.dataCfg.filterParams||[],f=u.findIndex(function(c){return c.filterKey===a.filterKey});f!==-1?s?u.splice(f,1):u[f]=a:u.push(a),Fo(l.dataCfg,"filterParams",u),l.render(!0),l.emit(T.RANGE_FILTERED,l.dataSet.getDisplayDataSet())},i.initFrozenGroupPosition=function(){var a=i.getScrollOffset(),l=a.scrollY,s=a.scrollX,u=i.getPaginationScrollY();En(i.spreadsheet.frozenRowGroup,i.cornerBBox.width-s,i.cornerBBox.height-u),En(i.spreadsheet.frozenColGroup,i.cornerBBox.width,i.cornerBBox.height-l-u),En(i.spreadsheet.frozenTrailingColGroup,i.cornerBBox.width,i.cornerBBox.height-l-u),En(i.spreadsheet.frozenTopGroup,i.cornerBBox.width,i.cornerBBox.height-u)},i.getTotalHeightForRange=function(a,l){if(a<0||l<0)return 0;if(i.rowOffsets)return i.rowOffsets[l+1]-i.rowOffsets[a];for(var s=0,u=a;u<l+1;u++){var f=i.getDefaultCellHeight();s+=f}return s},i.getShadowFill=function(a){var l,s,u=j(i.cfg,"spreadsheet.theme.splitLine");return"l (".concat(a,") 0:").concat((l=u.shadowColors)===null||l===void 0?void 0:l.left," 1:").concat((s=u.shadowColors)===null||s===void 0?void 0:s.right)},i.renderFrozenGroupSplitLine=function(a,l){var s,u=i.panelBBox,f=u.width,c=u.height,h=u.viewportWidth,d=u.viewportHeight,v=i.cornerBBox.height,p=i.layoutResult.colNodes.filter(function(he){return pr(he)}),g=i.getCellRange(),C=g.end-g.start,y=xn(i.spreadsheet.options,p.length,C),m=y.frozenRowCount,w=y.frozenColCount,S=y.frozenTrailingColCount,b=y.frozenTrailingRowCount,A=Math.floor(l-i.getPaginationScrollY()),O=Math.max(0,Ie(i.viewCellWidths)-h),B=Math.max(0,i.viewCellHeights.getCellOffsetY(g.end+1)-i.viewCellHeights.getCellOffsetY(g.start)-d);(s=i.foregroundGroup.findById(wd))===null||s===void 0||s.remove();var P=j(i.cfg,"spreadsheet.theme.splitLine"),D=i.foregroundGroup.addGroup({id:wd,zIndex:nu}),z={lineWidth:P==null?void 0:P.verticalBorderWidth,stroke:P==null?void 0:P.verticalBorderColor,opacity:P==null?void 0:P.verticalBorderColorOpacity},W={lineWidth:P==null?void 0:P.horizontalBorderWidth,stroke:P==null?void 0:P.horizontalBorderColor,opacity:P==null?void 0:P.horizontalBorderColorOpacity};if(w>0){var U=p.reduce(function(he,Me,ne){return ne<w?he+Me.width:he},0),V=b>0?c:d;ot(D,{x1:U,x2:U,y1:v,y2:v+V},L({},z)),P.showShadow&&a>0&&D.addShape("rect",{attrs:{x:U,y:v,width:P.shadowWidth,height:V,fill:i.getShadowFill(0)}})}if(m>0){var k=v+i.getTotalHeightForRange(g.start,g.start+m-1),pe=S>0?f:h;ot(D,{x1:0,x2:pe,y1:k,y2:k},L({},W)),P.showShadow&&A>0&&D.addShape("rect",{attrs:{x:0,y:k,width:pe,height:P.shadowWidth,fill:i.getShadowFill(90)}})}if(S>0){var U=p[p.length-S].x,V=b?c:d;ot(D,{x1:U,x2:U,y1:v,y2:v+V},L({},z)),P.showShadow&&Math.floor(a)<Math.floor(O)&&D.addShape("rect",{attrs:{x:U-P.shadowWidth,y:v,width:P.shadowWidth,height:V,fill:i.getShadowFill(180)}})}if(b>0){var k=i.panelBBox.maxY-i.getTotalHeightForRange(g.end-b+1,g.end),pe=S>0?f:h;ot(D,{x1:0,x2:pe,y1:k,y2:k},L({},W)),P.showShadow&&A<Math.floor(B)&&D.addShape("rect",{attrs:{x:0,y:k-P.shadowWidth,width:pe,height:P.shadowWidth,fill:i.getShadowFill(270)}})}i.foregroundGroup.sort()},i.renderFrozenPanelCornerGroup=function(){var a=i.layoutResult.colNodes.filter(function(C){return pr(C)}),l=i.getCellRange(),s=xn(i.spreadsheet.options,a.length,l.end-l.start+1),u=s.frozenRowCount,f=s.frozenColCount,c=s.frozenTrailingRowCount,h=s.frozenTrailingColCount,d=wo(a,f,h),v=d.colCount,p=d.trailingColCount,g=m9({frozenRowCount:u,frozenColCount:v,frozenTrailingRowCount:c,frozenTrailingColCount:p},i.layoutResult.colLeafNodes.length,l);Object.keys(g).forEach(function(C){var y=g[C],m=i.spreadsheet[bd[C]];m&&y.forEach(function(w){i.addFrozenCell(w.x,w.y,m)})})},i.addFrozenCell=function(a,l,s){var u=i.layoutResult.getCellMeta(l,a);if(u.isFrozenCorner=!0,u){var f=i.cfg.dataCell(u);s.add(f)}},i.getRealFrozenColumns=function(a,l){var s,u=a,f=l;if(a||l){var c=i.layoutResult.colsHierarchy.getNodes();c=c.filter(function(h){return pr(h)}),s=wo(c,a,l),u=s.colCount,f=s.trailingColCount}return{colCount:u,trailingColCount:f}},i.addCell=function(a){var l=i.spreadsheet.options,s=l.frozenRowCount,u=l.frozenColCount,f=l.frozenTrailingRowCount,c=l.frozenTrailingColCount,h=i.layoutResult.colsHierarchy.getLeaves().length,d=i.getCellRange(),v=i.getRealFrozenColumns(u,c),p=v.colCount,g=v.trailingColCount,C=y9(a.getMeta(),{frozenRowCount:s,frozenColCount:p,frozenTrailingRowCount:f,frozenTrailingColCount:g},h,d),y=bd[C];y&&i.spreadsheet[y].add(a)},i.getFrozenOptions=function(){var a=i.layoutResult.colLeafNodes.length,l=i.getCellRange();return xn(i.cfg,a,l.end-l.start+1)};var o=i.spreadsheet;return o.on(T.RANGE_SORT,i.onSortHandler),o.on(T.RANGE_FILTER,i.onFilterHandler),i}return r.prototype.getContentHeight=function(){var t=this.getViewCellHeights().getTotalHeight,n=this.layoutResult.colsHierarchy;return t()+n.height},Object.defineProperty(r.prototype,"dataCellTheme",{get:function(){return this.spreadsheet.theme.dataCell.cell},enumerable:!1,configurable:!0}),r.prototype.destroy=function(){var t=this.spreadsheet;t.off(T.RANGE_SORT,this.onSortHandler),t.off(T.RANGE_FILTER,this.onFilterHandler),e.prototype.destroy.call(this)},r.prototype.calculateCornerBBox=function(){var t=this.layoutResult.colsHierarchy,n=Math.floor(t.height);this.cornerBBox=new zy(this),this.cornerBBox.height=n,this.cornerBBox.maxY=n},r.prototype.doLayout=function(){var t=this,n=this.cfg,i=n.dataSet,o=n.spreadsheet,a=new NC,l=Wu({isRowHeader:!1,facetCfg:this.cfg}),s=l.leafNodes,u=l.hierarchy;this.calculateColNodesCoordinate(s,u);var f=function(h,d){var v,p=t.cfg.showSeriesNumber,g=s[d],C=t.getCellHeight(h),y=t.getCellRange(),m=xn(t.cfg,s.length,y.end-y.start+1).frozenTrailingRowCount,w,S=g.x,b=t.viewCellHeights.getCellOffsetY(h);return aa(h,y.end,m)&&(b=t.panelBBox.maxY-t.getTotalHeightForRange(h,y.end)),p&&g.field===Qn?w=h+1:w=i.getCellData({query:{col:g.field,rowIndex:h}}),{spreadsheet:o,x:S,y:b,width:g.width,height:C,data:(v={},v[g.field]=w,v),rowIndex:h,colIndex:d,isTotals:!1,colId:g.id,rowId:String(h),valueField:g.field,fieldValue:w,id:zl(String(h),g.id)}},c={colNodes:u.getNodes(),colsHierarchy:u,rowNodes:a.getNodes(),rowsHierarchy:a,rowLeafNodes:a.getLeaves(),colLeafNodes:s,getCellMeta:f,spreadsheet:o};return c},r.prototype.getAdaptiveColWidth=function(t){var n=this.cfg.cellCfg,i=this.cfg.showSeriesNumber;if(this.spreadsheet.getLayoutWidthType()!==Jn.Compact){var o=this.getSeriesNumberWidth(),a=t.length-(i?1:0),l=this.getCanvasHW().width-o;return Math.max(n==null?void 0:n.width,l/Math.max(1,a))}return n==null?void 0:n.width},r.prototype.getColNodeHeight=function(t,n){var i=this.cfg.colCfg,o=Kr(i==null?void 0:i.heightByField)[0],a=o||(i==null?void 0:i.height);if(!n||t.children&&t.children.length)return a;for(;t.parent;)n-=pr(t)?0:a,t=t.parent;return n},r.prototype.calculateColNodesCoordinate=function(t,n){var i,o,a,l,s,u,f=st.blankNode(),c=n.getNodes();try{for(var h=tr(n.sampleNodesForAllLevels),d=h.next();!d.done;d=h.next()){var v=d.value;v.height=this.getColNodeHeight(v),n.height+=v.height}}catch(O){i={error:O}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var p=this.getAdaptiveColWidth(t),g=0,C=0;C<c.length;C++){var y=c[C];y.isLeaf&&(y.colIndex=g,g+=1,y.x=f.x+f.width,y.width=this.calculateColLeafNodesWidth(y,p),Ru(this.cfg,null,y),n.width+=y.width,f=y),y.level===0?y.y=0:y.y=(s=((a=y.parent)===null||a===void 0?void 0:a.y)+((l=y.parent)===null||l===void 0?void 0:l.height))!==null&&s!==void 0?s:0,y.height=this.getColNodeHeight(y,n.height)}var m=c.filter(function(O){return pr(O)}),w=xn((u=this.spreadsheet)===null||u===void 0?void 0:u.options,m.length).frozenTrailingColCount;f=st.blankNode();var S=this.getCanvasHW().width;if(w>0)for(var b=wo(m,0,w).trailingColCount,A=c.filter(function(O){return O.isLeaf}),C=1;C<=b;C++){var y=A[A.length-C];C===1?y.x=S-y.width:y.x=f.x-y.width,f=y}this.autoCalculateColNodeWidthAndX(t)},r.prototype.autoCalculateColNodeWidthAndX=function(t){for(var n=null,i=t.slice(0);i.length;){var o=i.shift(),a=o.parent;n!==a&&a&&(i.push(a),a.x=a.children[0].x,a.width=a.children.map(function(l){return l.width}).reduce(function(l,s){return l+s},0),n=a)}},r.prototype.calculateColLeafNodesWidth=function(t,n){var i=this.cfg,o=i.colCfg,a=i.dataSet,l=i.spreadsheet,s=this.spreadsheet.getLayoutWidthType(),u=this.getCellDraggedWidth(t);if(Yt(u))return u;var f=this.getCellCustomWidth(t,o==null?void 0:o.width);if(Yt(f))return f;var c;if(s===Jn.Compact){var h=a.getDisplayDataSet(),d=a.getFieldFormatter(t.field),v=ac(h==null?void 0:h.slice(0,50).map(function(b){var A;return"".concat((A=d==null?void 0:d(b[t.field]))!==null&&A!==void 0?A:b[t.field])}),function(b){return l.measureTextWidthRoughly(b)});en.getInstance().logger("Max Label In Col:",t.field,v);var p=l.theme.colCell.bolderText,g=l.theme.dataCell,C=g.text,y=g.cell,m=1,w=l.measureTextWidth(v,C)+y.padding.left+y.padding.right+m,S=l.measureTextWidth(t.label,p)+LP(this.spreadsheet,t,l.theme.colCell);c=Math.max(S,w)}else c=n;return t.field===Qn&&(c=this.getSeriesNumberWidth()),c},r.prototype.getDefaultCellHeight=function(){var t=this.cfg.cellCfg;return t==null?void 0:t.height},r.prototype.getCellHeight=function(t){if(this.rowOffsets){var n=j(this.spreadsheet,"options.style.rowCfg.heightByField",{}),i=n==null?void 0:n[String(t)];if(Yt(i))return i}return this.getDefaultCellHeight()},r.prototype.initRowOffsets=function(){var t=this,n=this.cfg.dataSet,i=j(this.spreadsheet,"options.style.rowCfg.heightByField",{});if(Object.keys(i).length){var o=n.getDisplayDataSet();this.rowOffsets=[0];var a=0;o.forEach(function(l,s){var u,f=(u=i==null?void 0:i[String(s)])!==null&&u!==void 0?u:t.getDefaultCellHeight(),c=a+f;t.rowOffsets.push(c),a=c})}},r.prototype.getViewCellHeights=function(){var t=this,n=this.cfg.dataSet;this.initRowOffsets();var i=this.getDefaultCellHeight();return{getTotalHeight:function(){return t.rowOffsets?Ie(t.rowOffsets):i*n.getDisplayDataSet().length},getCellOffsetY:function(o){if(o<=0)return 0;if(t.rowOffsets)return t.rowOffsets[o];for(var a=0,l=0;l<o;l++)a+=i;return a},getTotalLength:function(){return n.getDisplayDataSet().length},getIndexRange:function(o,a){if(t.rowOffsets)return Ny(t.rowOffsets,o,a);var l=Math.floor(o/i),s=a%i===0?a/i-1:Math.floor(a/i);return{start:Math.max(0,l),end:Math.max(0,s)}}}},r.prototype.init=function(){e.prototype.init.call(this);var t=this.panelBBox,n=t.width,i=t.height;this.spreadsheet.panelGroup.setClip({type:"rect",attrs:{x:0,y:this.cornerBBox.height,width:n,height:i}})},r.prototype.getColHeader=function(){if(!this.columnHeader){var t=this.panelBBox,n=t.x,i=t.width,o=t.viewportHeight,a=t.viewportWidth;return new fN({width:i,height:this.cornerBBox.height,viewportWidth:a,viewportHeight:o,cornerWidth:this.cornerBBox.width,position:{x:n,y:0},data:this.layoutResult.colNodes,scrollContainsRowHeader:this.cfg.spreadsheet.isScrollContainsRowHeader(),sortParam:this.cfg.spreadsheet.store.get("sortParam"),spreadsheet:this.spreadsheet})}return this.columnHeader},r.prototype.updateRowResizeArea=function(){var t=this.spreadsheet,n=t.foregroundGroup,i=t.options,o=j(i,"interaction.resize"),a=Br(o)?o:o==null?void 0:o.rowCellVertical;if(a){var l=n.findById(Ri),s=n.findById(q0);l&&l.set("children",[]),s&&s.set("children",[]);var u=xo(this.panelGroup.getChildren(),Ul).filter(function(f){return f.shouldDrawResizeArea()});u.forEach(function(f){f.drawResizeArea()})}},r.prototype.render=function(){this.calculateFrozenGroupInfo(),this.renderFrozenPanelCornerGroup(),e.prototype.render.call(this),this.initFrozenGroupPosition()},r.prototype.calculateFrozenGroupInfo=function(){var t=this.getFrozenOptions(),n=t.frozenColCount,i=t.frozenRowCount,o=t.frozenTrailingColCount,a=t.frozenTrailingRowCount,l=this.layoutResult.colNodes.filter(function(p){return pr(p)}),s=this.viewCellHeights,u=this.getCellRange(),f=this.frozenGroupInfo,c=f.frozenCol,h=f.frozenTrailingCol,d=f.frozenRow,v=f.frozenTrailingRow;n>0&&(c.width=l[n-1].x+l[n-1].width-0,c.range=[0,n-1]),i>0&&(d.height=s.getCellOffsetY(u.start+i)-s.getCellOffsetY(u.start),d.range=[u.start,u.start+i-1]),o>0&&(h.width=l[l.length-1].x-l[l.length-o].x+l[l.length-1].width,h.range=[l.length-o,l.length-1]),a>0&&(v.height=s.getCellOffsetY(u.end+1)-s.getCellOffsetY(u.end+1-a),v.range=[u.end-a+1,u.end])},r.prototype.getRowHeader=function(){return null},r.prototype.getSeriesNumberHeader=function(){return null},r.prototype.translateRelatedGroups=function(t,n,i){var o=this,a=this.spreadsheet,l=a.frozenColGroup,s=a.frozenTrailingColGroup,u=a.frozenRowGroup,f=a.frozenTrailingRowGroup;[u,f].forEach(function(c){Rc(c,o.cornerBBox.width-t)}),[l,s].forEach(function(c){C9(c,o.cornerBBox.height-n)}),e.prototype.translateRelatedGroups.call(this,t,n,i),this.updateRowResizeArea(),this.renderFrozenGroupSplitLine(t,n)},r.prototype.calculateXYIndexes=function(t,n){var i=this.layoutResult.colLeafNodes.length,o=this.getCellRange(),a=this.panelBBox,l=a.viewportHeight,s=a.viewportWidth,u=this.getFrozenOptions(),f=u.frozenColCount,c=u.frozenRowCount,h=u.frozenTrailingColCount,d=u.frozenTrailingRowCount,v={width:s,height:l,x:0,y:0};if(h>0||f>0){var p=this.frozenGroupInfo,g=p.frozenTrailingCol,C=p.frozenCol;v.width-=g.width+C.width,v.x+=C.width}if(d>0||c>0){var y=this.frozenGroupInfo,m=y.frozenRow,w=y.frozenTrailingRow;v.height<m.height+w.height?(v.height=0,v.y=0):(v.height-=m.height+w.height,v.y+=m.height)}var S=this.spreadsheet.dataSet.isEmpty()?[]:Ac(t,n,this.viewCellWidths,this.viewCellHeights,v,this.getRealScrollX(this.cornerBBox.width));this.panelScrollGroupIndexes=S;var b=this.getRealFrozenColumns(f,h),A=b.colCount,O=b.trailingColCount;return w9(S,{frozenColCount:A,frozenRowCount:c,frozenTrailingColCount:O,frozenTrailingRowCount:d},i,o)},r.prototype.clip=function(t,n){var i,o,a=this.layoutResult.colLeafNodes,l=this.getPaginationScrollY(),s=this.spreadsheet,u=s.frozenRowGroup,f=s.frozenColGroup,c=s.frozenTrailingColGroup,h=s.frozenTrailingRowGroup,d=s.panelScrollGroup,v=f.getBBox().width,p=u.getBBox().height,g=c.getBBox(),C=h.getBBox().height,y=this.panelBBox.width-v-c.getBBox().width,m=this.panelBBox.height-p-C;d.setClip({type:"rect",attrs:{x:t+v,y:n+p,width:y,height:m}}),u.setClip({type:"rect",attrs:{x:t+v,y:l,width:y,height:p}}),h.setClip({type:"rect",attrs:{x:t+v,y:h.getBBox().minY,width:y,height:C}});var w={y:n+p,height:m};f.setClip({type:"rect",attrs:L(L({},w),{x:0,width:v})}),c.setClip({type:"rect",attrs:L(L({},w),{x:g.minX,width:g.width})});var S=this.spreadsheet.foregroundGroup.findById(Ri);S&&S.setClip({type:"rect",attrs:{x:0,y:p+this.cornerBBox.height,width:(o=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i.width)!==null&&o!==void 0?o:0,height:m}})},r.prototype.updatePanelScrollGroup=function(){var t=this;e.prototype.updatePanelScrollGroup.call(this),[vr.FROZEN_COL,vr.FROZEN_ROW,vr.FROZEN_TRAILING_COL,vr.FROZEN_TRAILING_ROW].forEach(function(n){if(t.frozenGroupInfo[n].range){var i=[],o=[];if(n.toLowerCase().includes("row")){var a=I(t.frozenGroupInfo[n].range,2),l=a[0],s=a[1];if(i=t.gridInfo.cols,o=jc(l,s,t.viewCellHeights),n===vr.FROZEN_TRAILING_ROW){var u=t.spreadsheet.frozenTrailingRowGroup.getBBox().minY;o=K7(l,s,Math.ceil(u),t.viewCellHeights)}}else{var f=I(t.frozenGroupInfo[n].range,2),c=f[0],h=f[1],d=t.layoutResult.colNodes.filter(function(v){return pr(v)});i=Fy(c,h,d),o=t.gridInfo.rows}t.spreadsheet["".concat(n,"Group")].updateGrid({cols:i,rows:o},"".concat(n,"Group"))}})},r}(Wy),Xy=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.gridInfo={cols:[],rows:[]},n.updateGrid=function(i,o){o===void 0&&(o=Sd);var a=n.getBBox(),l=n.s2,s=l.theme,u=l.isTableMode,f=s.dataCell.cell,c=u()&&(o===Sd||o===j0);(!n.gridGroup||!n.findById(o))&&(n.gridGroup=n.addGroup({id:o})),n.gridGroup.clear(),n.gridInfo=i,c&&n.gridInfo.cols.unshift(0);var h=f.verticalBorderWidth,d=f.verticalBorderWidth/2;n.gridInfo.cols.forEach(function(g){ot(n.gridGroup,{x1:g,x2:g,y1:Math.ceil(a.minY+d),y2:Math.floor(a.maxY-d)},{stroke:f.verticalBorderColor,strokeOpacity:f.verticalBorderColorOpacity,lineWidth:h,lineCap:Ed})});var v=f.horizontalBorderWidth,p=f.horizontalBorderWidth/2;n.gridInfo.rows.forEach(function(g){ot(n.gridGroup,{x1:Math.ceil(a.minX+p),x2:Math.floor(a.maxX-p),y1:g,y2:g},{stroke:f.horizontalBorderColor,strokeOpacity:f.horizontalBorderColorOpacity,lineWidth:v,lineCap:Ed})}),n.gridGroup.toFront()},n.s2=t.s2,n}return r}(Ur),hN=function(e){Q(r,e);function r(t){var n=e.call(this,t)||this;return n.initMergedCellsGroup(),n}return r.prototype.initMergedCellsGroup=function(){this.mergedCellsGroup&&this.findById(md)||(this.mergedCellsGroup=this.addGroup({id:md}))},r.prototype.updateMergedCells=function(){this.initMergedCellsGroup(),K$(this.s2,this.mergedCellsGroup),this.mergedCellsGroup.toFront()},r.prototype.addMergeCell=function(t){var n;(n=this.mergedCellsGroup)===null||n===void 0||n.add(t)},r.prototype.update=function(t){this.updateGrid(t),this.updateMergedCells()},r}(Xy),Er=function(){function e(r){var t=this;this.isLinkFieldText=function(n){var i=t.getCellAppendInfo(n);return i==null?void 0:i.isLinkFieldText},this.spreadsheet=r,this.bindEvents()}return e.prototype.getCellAppendInfo=function(r){var t,n;return((t=r==null?void 0:r.attr)===null||t===void 0?void 0:t.call(r,"appendInfo"))||((n=r==null?void 0:r.attrs)===null||n===void 0?void 0:n.appendInfo)||{}},e.prototype.reset=function(){},e}(),dN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(T.DATA_CELL_CLICK,function(n){var i;n.stopPropagation();var o=t.spreadsheet.interaction;if(o.clearHoverTimer(),!o.hasIntercepts([le.CLICK])){if(t.isLinkFieldText(n.target)){t.emitLinkFieldClickEvent(n);return}var a=t.spreadsheet.getCell(n.target),l=a.getMeta();if(l){if(o.addIntercepts([le.HOVER]),o.isSelectedCell(a)){((i=n.originalEvent)===null||i===void 0?void 0:i.detail)===1&&o.reset();return}o.changeState({cells:[Nr(a)],stateName:q.SELECTED,onUpdateCells:Wc}),t.spreadsheet.emit(T.GLOBAL_SELECTED,[a]),t.showTooltip(n,l);var s=l.rowId,u=l.colId,f=l.spreadsheet,c=o.getSelectedCellHighlight(),h=c.colHeader,d=c.rowHeader;if(h&&oy(u,o.getAllColHeaderCells(),q.SELECTED),d&&s){var v=OP(l,f);te(v,function(p){p.updateByState(q.SELECTED)})}}}})},r.prototype.getTooltipOperator=function(t,n){var i=this,o=ND(),a=this.spreadsheet.getCell(t.target),l=Vc(this.spreadsheet,t).operation,s=l.trend&&L(L({},o),{onClick:function(){i.spreadsheet.emit(T.DATA_CELL_TREND_ICON_CLICK,L(L({},n),{record:i.spreadsheet.isTableMode()?i.spreadsheet.dataSet.getCellData({query:{rowIndex:n.rowIndex}}):void 0})),i.spreadsheet.hideTooltip()}});return $y(l,{defaultMenus:[s],cell:a})},r.prototype.showTooltip=function(t,n){var i=n.data,o=n.isTotals,a=o===void 0?!1:o,l=n.value,s=n.fieldValue,u=n.field,f=n.valueField,c=i,h=this.spreadsheet.isTableMode(),d=h?L(L({},c),{value:l||s,valueField:u||f}):c,v=[d||L(L({},n.rowQuery),n.colQuery)],p=this.getTooltipOperator(t,n);this.spreadsheet.showTooltipWithInfo(t,v,{isTotals:a,operator:p,enterable:!0,hideSummary:!0,showSingleTips:h})},r.prototype.emitLinkFieldClickEvent=function(t){var n=this.getCellAppendInfo(t.target).cellData,i=n.valueField,o=n.data;this.spreadsheet.emit(T.GLOBAL_LINK_FIELD_JUMP,{key:i,cellData:n,record:Object.assign({rowIndex:n.rowIndex},o)})},r}(Er),vN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindDataCellClick()},r.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(T.MERGED_CELLS_CLICK,function(n){n.stopPropagation();var i=t.spreadsheet.interaction;i.hasIntercepts([le.CLICK])||i.addIntercepts([le.HOVER])})},r}(Er),pN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t.handleRowColClick=function(n){if(n.stopPropagation(),!t.isLinkFieldText(n.target)){var i=t.spreadsheet,o=i.interaction,a=i.options,l=t.spreadsheet.getCell(n.target),s=a.interaction.multiSelection,u=!!(s&&t.isMultiSelection),f=o.selectHeaderCell({cell:l,isMultiSelection:u});f&&t.showTooltip(n)}},t.getHideColumnField=function(n){return t.spreadsheet.isTableMode()?n.field:n.id},t}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindKeyboardUp(),this.bindColCellClick(),this.bindRowCellClick(),this.bindTableColExpand(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([le.CLICK])},r.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_DOWN,function(n){ol(n)&&(t.isMultiSelection=!0)})},r.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_UP,function(n){ol(n)&&t.reset()})},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_MOVE,function(n){t.isMultiSelection&&!my(n)&&t.reset()})},r.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(T.ROW_CELL_CLICK,function(n){t.handleRowColClick(n)})},r.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.on(T.COL_CELL_CLICK,function(n){t.handleRowColClick(n)})},r.prototype.showTooltip=function(t){var n=Vc(this.spreadsheet,t),i=n.operation,o=n.showTooltip;if(o){var a=this.spreadsheet.interaction,l=a.isSelectedState()?k7(a.getActiveCells()):[],s=this.getTooltipOperator(t,i);this.spreadsheet.showTooltipWithInfo(t,l,{showSingleTips:!0,operator:s})}},r.prototype.getTooltipOperator=function(t,n){var i=this,o=this.spreadsheet.getCell(t.target),a=o.getMeta(),l=o.cellType===N.COL_CELL,s=this.spreadsheet.getColumnLeafNodes().length===1,u=PD(),f=l&&!s&&a.isLeaf&&n.hiddenColumns,c=f&&L(L({},u),{onClick:function(){i.hideSelectedColumns()}});return $y(n,{defaultMenus:[c],cell:o})},r.prototype.bindTableColExpand=function(){var t=this;this.spreadsheet.on(T.LAYOUT_COLS_EXPANDED,function(n){t.handleExpandIconClick(n)})},r.prototype.hideSelectedColumns=function(){var t=this.spreadsheet.interaction,n=t.getActiveCells().map(function(o){return o.getMeta()}),i=n.map(this.getHideColumnField);Nc(this.spreadsheet,i,!0)},r.prototype.handleExpandIconClick=function(t){var n=this.spreadsheet.store.get("hiddenColumnsDetail",[]),i=(Il(n,function(f){var c=f.displaySiblingNode;return Bu(c,t.id)})||{}).hideColumnNodes,o=i===void 0?[]:i,a=this.spreadsheet.options.interaction.hiddenColumnFields,l=o.map(this.getHideColumnField),s=qf(a,l),u=n.filter(function(f){var c=f.displaySiblingNode;return!Bu(c,t.id)});this.spreadsheet.setOptions({interaction:{hiddenColumnFields:s}}),this.spreadsheet.store.set("hiddenColumnsDetail",u),this.spreadsheet.interaction.reset(),this.spreadsheet.render(!1)},r}(Er),gN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.getRowData=function(n){var i,o=n.getHeadLeafChild(),a=t.spreadsheet.dataSet.getMultiData(o==null?void 0:o.query,o==null?void 0:o.isTotals,!0)[0];return L(L({},a),{rowIndex:(i=n.rowIndex)!==null&&i!==void 0?i:o.rowIndex})},t}return r.prototype.bindEvents=function(){this.bindRowCellClick()},r.prototype.bindRowCellClick=function(){var t=this;this.spreadsheet.on(T.ROW_CELL_CLICK,function(n){if(!t.spreadsheet.interaction.hasIntercepts([le.CLICK])&&t.isLinkFieldText(n.target)){var i=t.getCellAppendInfo(n.target).cellData,o=i.key,a=t.getRowData(i);t.spreadsheet.emit(T.GLOBAL_LINK_FIELD_JUMP,{key:o,cellData:i,record:a})}})},r}(Er),CN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellClick()},r.prototype.bindCornerCellClick=function(){var t=this;this.spreadsheet.on(T.CORNER_CELL_CLICK,function(n){var i,o=t.spreadsheet.interaction,a=t.spreadsheet.getCell(n.target);if(a){var l=a.getMeta(),s=t.getRowNodesByField(l==null?void 0:l.field),u=(i=s[0])===null||i===void 0?void 0:i.belongsCell,f=t.getRowCells(s);if(u&&o.isSelectedCell(u)){o.reset(),t.spreadsheet.emit(T.GLOBAL_SELECTED,o.getActiveCells());return}H(s)||H(f)||(o.addIntercepts([le.HOVER]),o.changeState({cells:f,stateName:q.SELECTED}),o.highlightNodes(s),t.showTooltip(n),t.spreadsheet.emit(T.GLOBAL_SELECTED,o.getActiveCells()))}})},r.prototype.getRowNodesByField=function(t){return this.spreadsheet.getRowNodes().filter(function(n){return n.field===t})},r.prototype.getRowCells=function(t){return t.map(function(n){return{id:n.id,colIndex:-1,rowIndex:-1,type:N.ROW_CELL}})},r.prototype.showTooltip=function(t){var n=this.spreadsheet.interaction.getActiveCells();this.spreadsheet.showTooltipWithInfo(t,[],{data:{summaries:[{selectedData:n,name:"",value:null}]}})},r}(Er),yN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.bindEvents=function(){this.bindCornerCellHover(),this.bindDataCellHover(),this.bindRowCellHover(),this.bindColCellHover()},r.prototype.updateRowColCells=function(t){var n=t.rowId,i=t.colId,o=this.spreadsheet.interaction,a=o.getHoverHighlight(),l=a.rowHeader,s=a.colHeader;if(s&&oy(i,o.getAllColHeaderCells(),q.HOVER),l&&n){var u=Dc(n,o.getAllRowHeaderCells(),this.spreadsheet.isHierarchyTreeType());te(u,function(f){f.updateByState(q.HOVER)})}},r.prototype.changeStateToHoverFocus=function(t,n,i){var o=this,a,l=this.spreadsheet.interaction,s=this.spreadsheet.options.interaction,u=s.hoverFocus;l.clearHoverTimer();var f=function(){if(!l.hasIntercepts([le.HOVER])){l.changeState({cells:[Nr(t)],stateName:q.HOVER_FOCUS});var d=o.spreadsheet.isTableMode(),v={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:d},p=l.getHoverHighlight(),g=p.rowHeader,C=p.colHeader;(g||C)&&o.updateRowColCells(i);var y=o.getCellData(i,d);o.spreadsheet.showTooltipWithInfo(n,y,v)}},c=au;if(Br(u)||(c=(a=u==null?void 0:u.duration)!==null&&a!==void 0?a:au),c===0)f();else{var h=window.setTimeout(function(){return f()},c);l.setHoverTimer(h)}},r.prototype.handleHeaderHover=function(t){var n=this.spreadsheet.getCell(t.target);if(!H(n)){var i=this.spreadsheet.interaction;i.clearHoverTimer(),!i.isActiveCell(n)&&(i.changeState({cells:[Nr(n)],stateName:q.HOVER}),n.update(),this.showEllipsisTooltip(t,n))}},r.prototype.showEllipsisTooltip=function(t,n){if(!(!n||n.getActualText()===n.getFieldValue())){var i=n.getMeta(),o=!0,a={isTotals:i.isTotals,enterable:!0,hideSummary:!0,showSingleTips:o,enableFormat:this.spreadsheet.isPivotMode()},l=this.getCellData(i,o);this.spreadsheet.showTooltipWithInfo(t,l,a)}},r.prototype.getCellData=function(t,n){t===void 0&&(t={});var i=t.data,o=t.query,a=t.value,l=t.field,s=t.fieldValue,u=t.valueField,f=t.rowQuery,c=t.colQuery,h=i,d=n?[L(L({},o),{value:a||s,valueField:l||u})]:[h||L(L({},f),c)];return d},r.prototype.bindDataCellHover=function(){var t=this;this.spreadsheet.on(T.DATA_CELL_HOVER,function(n){var i=t.spreadsheet.getCell(n.target);if(!H(i)){var o=t.spreadsheet,a=o.interaction,l=o.options,s=l.interaction,u=i==null?void 0:i.getMeta();if(!a.isActiveCell(i)){a.changeState({cells:[Nr(i)],stateName:q.HOVER});var f=a.getHoverHighlight(),c=f.rowHeader,h=f.colHeader;(c||h)&&t.updateRowColCells(u),s.hoverFocus&&t.changeStateToHoverFocus(i,n,u)}}})},r.prototype.bindRowCellHover=function(){var t=this;this.spreadsheet.on(T.ROW_CELL_HOVER,function(n){t.handleHeaderHover(n)})},r.prototype.bindColCellHover=function(){var t=this;this.spreadsheet.on(T.COL_CELL_HOVER,function(n){t.handleHeaderHover(n)})},r.prototype.bindCornerCellHover=function(){var t=this;this.spreadsheet.on(T.CORNER_CELL_HOVER,function(n){t.handleHeaderHover(n)})},r}(Er),Kc=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.brushSelectionStage=vt.UN_DRAGGED,t.brushSelectionMinimumMoveDistance=5,t.scrollAnimationComplete=!0,t.mouseMoveDistanceFromCanvas=0,t.setMoveDistanceFromCanvas=function(n,i,o){var a=0;if(i&&(a=n.x),o){var l=n.y;i?a=Math.max(l,a):a=l}t.mouseMoveDistanceFromCanvas=Math.abs(a)},t.formatBrushPointForScroll=function(n,i){var o,a,l,s;i===void 0&&(i=!1);var u=n.x,f=n.y,c=t.spreadsheet.facet,h=i?c.cornerBBox:c.panelBBox,d=h.minX,v=h.maxX,p=c.panelBBox,g=p.minY,C=p.maxY,y=((o=t.endBrushPoint)===null||o===void 0?void 0:o.x)+u,m=((a=t.endBrushPoint)===null||a===void 0?void 0:a.y)+f,w=!0,S=!0,b=(s=(l=c.vScrollBar)===null||l===void 0?void 0:l.getBBox())===null||s===void 0?void 0:s.width,A=2;return y>v?y=v-b-A:y<d?y=d+A:w=!1,m>C?m=C-A:m<=g?m=g+A:S=!1,{x:{value:y,needScroll:w},y:{value:m,needScroll:S}}},t.rectanglesIntersect=function(n,i){return n.maxX>i.minX&&n.minX<i.maxX&&n.minY<i.maxY&&n.maxY>i.minY},t.autoScrollIntervalId=null,t.autoScrollConfig=pu(Ad),t.validateYIndex=function(n){var i,o,a=t.spreadsheet.facet,l=a.frozenGroupInfo,s=0,u=(i=l==null?void 0:l.frozenRow)===null||i===void 0?void 0:i.range;if(u&&(s=u[1]+1),n<s)return null;var f=a.getCellRange().end,c=(o=l==null?void 0:l.frozenTrailingRow)===null||o===void 0?void 0:o.range;return c&&(f=c[0]-1),n>f?null:n},t.validateXIndex=function(n){var i,o,a=t.spreadsheet.facet,l=a.frozenGroupInfo,s=0,u=(i=l==null?void 0:l.frozenCol)===null||i===void 0?void 0:i.range;if(u&&(s=u[1]+1),n<s)return null;var f=a.layoutResult.colLeafNodes.length-1,c=(o=l==null?void 0:l.frozenTrailingCol)===null||o===void 0?void 0:o.range;return c&&(f=c[0]-1),n>f?null:n},t.adjustNextColIndexWithFrozen=function(n,i){var o=t.spreadsheet,a=o.facet,l=o.dataSet,s=o.options,u=l.getDisplayDataSet().length,f=a.layoutResult.colLeafNodes.length,c=xn(s,f,u),h=c.frozenTrailingColCount,d=c.frozenColCount,v=a.panelScrollGroupIndexes;return h>0&&i===Mt.SCROLL_DOWN&&jn(n,h,f)?v[1]:d>0&&i===Mt.SCROLL_UP&&Vn(n,d)?v[0]:n},t.adjustNextRowIndexWithFrozen=function(n,i){var o=t.spreadsheet,a=o.facet,l=o.dataSet,s=o.options,u=l.getDisplayDataSet().length,f=a.layoutResult.colLeafNodes.length,c=a.getCellRange(),h=xn(s,f,u),d=h.frozenTrailingRowCount,v=h.frozenRowCount,p=a.panelScrollGroupIndexes;return d>0&&i===Mt.SCROLL_DOWN&&aa(n,c.end,d)?p[3]:v>0&&i===Mt.SCROLL_UP&&Hl(n,c.start,v)?p[2]:n},t.getWillScrollRowIndexDiff=function(n){return n===Mt.SCROLL_DOWN?qa.SCROLL_DOWN:qa.SCROLL_UP},t.getDefaultWillScrollToRowIndex=function(n){var i=t.adjustNextRowIndexWithFrozen(t.endBrushPoint.rowIndex,n),o=i+t.getWillScrollRowIndexDiff(n);return t.validateYIndex(o)},t.getWillScrollToRowIndex=function(n){return t.getDefaultWillScrollToRowIndex(n)},t.getNextScrollDelta=function(n){var i=t.spreadsheet.facet.getScrollOffset(),o=i.scrollX,a=i.scrollY,l=0,s=0;if(n.y.scroll){var u=n.y.value>0?Mt.SCROLL_DOWN:Mt.SCROLL_UP,f=t.getWillScrollToRowIndex(u),c=BP(f,u,t.spreadsheet)-a,h=rt(f)||rt(c)||Number.isNaN(c);s=h?0:c}if(n.x.scroll){var u=n.x.value>0?Mt.SCROLL_DOWN:Mt.SCROLL_UP,d=t.adjustNextColIndexWithFrozen(t.endBrushPoint.colIndex,u),v=t.validateXIndex(d+(n.x.value>0?1:-1));l=rt(v)?0:MP(v,u,t.spreadsheet)-o}return{x:l,y:s}},t.onScrollAnimationComplete=function(){t.scrollAnimationComplete=!0,t.brushSelectionStage!==vt.UN_DRAGGED&&t.renderPrepareSelected(t.endBrushPoint)},t.autoScroll=function(n){if(n===void 0&&(n=!1),!(t.brushSelectionStage===vt.UN_DRAGGED||!t.scrollAnimationComplete)){var i=t.autoScrollConfig,o=t.spreadsheet.facet.getScrollOffset(),a=n?"rowHeaderOffsetX":"offsetX",l={rowHeaderOffsetX:{value:o.rowHeaderScrollX,animate:!0},offsetX:{value:o.scrollX,animate:!0},offsetY:{value:o.scrollY,animate:!0}},s=t.getNextScrollDelta(i),u=s.x,f=s.y;if(f===0&&u===0){t.clearAutoScroll();return}if(i.y.scroll&&(l.offsetY.value+=f),i.x.scroll){var c=l[a];c.value+=u,c.value<0&&(c.value=0)}t.scrollAnimationComplete=!1;var h=i.x.scroll?1:3,d=Math.max(16,300-t.mouseMoveDistanceFromCanvas*h);t.spreadsheet.facet.scrollWithAnimation(l,d,t.onScrollAnimationComplete)}},t.handleScroll=mc(function(n,i,o){if(o===void 0&&(o=!1),t.brushSelectionStage!==vt.UN_DRAGGED){var a=t.formatBrushPointForScroll({x:n,y:i},o),l=a.x,s=l.value,u=l.needScroll,f=a.y,c=f.value,h=f.needScroll,d=t.autoScrollConfig;h&&(d.y.value=i,d.y.scroll=!0),u&&(d.x.value=n,d.x.scroll=!0),t.setMoveDistanceFromCanvas({x:n,y:i},u,h),t.renderPrepareSelected({x:s,y:c}),(h||u)&&(t.clearAutoScroll(),t.autoScroll(o),t.autoScrollIntervalId=setInterval(function(){t.autoScroll(o)},16))}},30),t.clearAutoScroll=function(){t.autoScrollIntervalId&&(clearInterval(t.autoScrollIntervalId),t.autoScrollIntervalId=null,t.resetScrollDelta())},t.onUpdateCells=function(n,i){return i()},t.showPrepareSelectedCells=function(){t.brushRangeCells=t.getBrushRangeCells(),t.spreadsheet.interaction.changeState({cells:de(t.brushRangeCells,function(n){return Nr(n)}),stateName:q.PREPARE_SELECT,force:!0,onUpdateCells:t.onUpdateCells})},t.renderPrepareSelected=function(n){var i=n.x,o=n.y,a=t.spreadsheet.container.getShape(i,o),l=t.spreadsheet.getCell(a),s=l instanceof Fn||l instanceof Gl||l instanceof kl;if(!(!l||!s)){var u=l.getMeta(),f=u.rowIndex,c=u.colIndex;t.endBrushPoint={x:i,y:o,rowIndex:f,colIndex:c};var h=t.spreadsheet.interaction;h.addIntercepts([le.HOVER]),h.clearStyleIndependent(),t.isValidBrushSelection()&&(t.showPrepareSelectedCells(),t.updatePrepareSelectMask())}},t}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.getPrepareSelectMaskTheme=function(){var t;return(t=this.spreadsheet.theme)===null||t===void 0?void 0:t.prepareSelectMask},r.prototype.initPrepareSelectMaskShape=function(){var t=this.spreadsheet.foregroundGroup;if(t){t.removeChild(this.prepareSelectMaskShape);var n=this.getPrepareSelectMaskTheme();this.prepareSelectMaskShape=t.addShape("rect",{visible:!1,attrs:{width:0,height:0,x:0,y:0,fill:n==null?void 0:n.backgroundColor,fillOpacity:n==null?void 0:n.backgroundOpacity,zIndex:Xx},capture:!1})}},r.prototype.setBrushSelectionStage=function(t){this.brushSelectionStage=t},r.prototype.isPointInCanvas=function(t){var n=this.spreadsheet.facet.getCanvasHW(),i=n.height,o=n.width,a=this.spreadsheet.facet.panelBBox,l=a.minX,s=a.minY;return t.x>l&&t.x<o&&t.y>s&&t.y<i},r.prototype.resetDrag=function(){this.hidePrepareSelectMaskShape(),this.setBrushSelectionStage(vt.UN_DRAGGED)},r.prototype.isValidBrushSelection=function(){var t=this.getBrushRange(),n=t.start,i=t.end,o=i.x-n.x>this.brushSelectionMinimumMoveDistance||i.y-n.y>this.brushSelectionMinimumMoveDistance;return o},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getPanelGroupAllDataCells()},r.prototype.updatePrepareSelectMask=function(){var t=this.getBrushRange(),n=this.getPrepareSelectMaskPosition(t),i=n.x,o=n.y;this.prepareSelectMaskShape.attr({x:i,y:o,width:t.width,height:t.height}),this.prepareSelectMaskShape.show()},r.prototype.hidePrepareSelectMaskShape=function(){var t;(t=this.prepareSelectMaskShape)===null||t===void 0||t.hide()},r.prototype.resetScrollDelta=function(){this.autoScrollConfig=pu(Ad)},r.prototype.getBrushPoint=function(t){var n=this.spreadsheet.facet.getScrollOffset(),i=n.scrollY,o=n.scrollX,a={x:t==null?void 0:t.x,y:t==null?void 0:t.y},l=this.spreadsheet.getCell(t.target),s=l.getMeta(),u=s.colIndex,f=s.rowIndex;return L(L({},a),{rowIndex:f,colIndex:u,scrollY:i,scrollX:o})},r.prototype.getBrushRange=function(){var t,n,i,o,a,l,s,u,f=this.spreadsheet.facet.getScrollOffset(),c=f.scrollX,h=f.scrollY,d=Math.min(this.startBrushPoint.rowIndex,(t=this.endBrushPoint)===null||t===void 0?void 0:t.rowIndex),v=Math.max(this.startBrushPoint.rowIndex,(n=this.endBrushPoint)===null||n===void 0?void 0:n.rowIndex),p=Math.min(this.startBrushPoint.colIndex,(i=this.endBrushPoint)===null||i===void 0?void 0:i.colIndex),g=Math.max(this.startBrushPoint.colIndex,(o=this.endBrushPoint)===null||o===void 0?void 0:o.colIndex),C=this.startBrushPoint.x+this.startBrushPoint.scrollX-c,y=this.startBrushPoint.y+this.startBrushPoint.scrollY-h,m=Math.min(C,(a=this.endBrushPoint)===null||a===void 0?void 0:a.x),w=Math.max(C,(l=this.endBrushPoint)===null||l===void 0?void 0:l.x),S=Math.min(y,(s=this.endBrushPoint)===null||s===void 0?void 0:s.y),b=Math.max(y,(u=this.endBrushPoint)===null||u===void 0?void 0:u.y);return{start:{rowIndex:d,colIndex:p,x:m,y:S},end:{rowIndex:v,colIndex:g,x:w,y:b},width:w-m,height:b-S}},r.prototype.getBrushRangeCells=function(){var t=this;return this.setDisplayedCells(),this.displayedCells.filter(function(n){var i=n.getMeta();return t.isInBrushRange(i)})},r.prototype.mouseDown=function(t){var n;(n=t==null?void 0:t.preventDefault)===null||n===void 0||n.call(t),!this.spreadsheet.interaction.hasIntercepts([le.CLICK])&&(this.setBrushSelectionStage(vt.CLICK),this.initPrepareSelectMaskShape(),this.setDisplayedCells(),this.startBrushPoint=this.getBrushPoint(t))},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([le.BRUSH_SELECTION])},r.prototype.bindMouseUp=function(t){var n=this;t===void 0&&(t=!1),this.spreadsheet.on(T.GLOBAL_MOUSE_UP,function(i){if(n.brushSelectionStage!==vt.DRAGGED){n.resetDrag();return}if(t&&n.clearAutoScroll(),n.isValidBrushSelection()){n.addBrushIntercepts(),n.updateSelectedCells();var o=Xc(n.spreadsheet);n.spreadsheet.showTooltipWithInfo(i,o)}n.spreadsheet.interaction.getCurrentStateName()===q.PREPARE_SELECT&&n.spreadsheet.interaction.reset(),n.resetDrag()}),this.spreadsheet.on(T.GLOBAL_CONTEXT_MENU,function(){n.brushSelectionStage!==vt.UN_DRAGGED&&(n.spreadsheet.interaction.removeIntercepts([le.HOVER]),n.resetDrag())})},r.prototype.autoBrushScroll=function(t,n){var i,o;if(n===void 0&&(n=!1),this.clearAutoScroll(),!this.isPointInCanvas(t)){var a=(t==null?void 0:t.x)-((i=this.endBrushPoint)===null||i===void 0?void 0:i.x),l=(t==null?void 0:t.y)-((o=this.endBrushPoint)===null||o===void 0?void 0:o.y);return this.handleScroll(a,l,n),!0}return!1},r.prototype.emitBrushSelectionEvent=function(t,n){this.spreadsheet.emit(t,n),this.spreadsheet.emit(T.GLOBAL_SELECTED,n),H(n)&&this.spreadsheet.interaction.removeIntercepts([le.HOVER])},r.prototype.getVisibleBrushRangeCells=function(t){return this.brushRangeCells.find(function(n){var i=n.getMeta();return(i==null?void 0:i.id)===t})},r.prototype.isInBrushRange=function(t){return!1},r.prototype.bindMouseDown=function(){},r.prototype.bindMouseMove=function(){},r.prototype.updateSelectedCells=function(){},r.prototype.getPrepareSelectMaskPosition=function(t){return{x:t.start.x,y:t.start.y}},r}(Er),mN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.onUpdateCells=function(n){return n.updateCells(n.getAllColHeaderCells())},t}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(T.COL_CELL_MOUSE_DOWN,function(n){t.spreadsheet.interaction.getBrushSelection().col&&e.prototype.mouseDown.call(t,n)})},r.prototype.isPointInCanvas=function(t){var n=this.spreadsheet.facet.getCanvasHW().width,i=this.spreadsheet.facet.cornerBBox,o=i.width,a=i.minY,l=i.maxY;return t.x>=o&&t.x<=n&&t.y>=a&&t.y<=l},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.COL_CELL_MOUSE_MOVE,function(n){if(t.brushSelectionStage!==vt.UN_DRAGGED){t.setBrushSelectionStage(vt.DRAGGED);var i=t.spreadsheet.container.getPointByEvent(n.originalEvent);t.isPointInCanvas(i)&&t.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllColHeaderCells()},r.prototype.isInBrushRange=function(t){var n=this.getBrushRange(),i=n.start,o=n.end,a=this.spreadsheet.facet.getScrollOffset().scrollX,l=this.spreadsheet.facet.cornerBBox,s=t.x,u=s===void 0?0:s,f=t.y,c=f===void 0?0:f,h=t.width,d=h===void 0?0:h,v=t.height,p=v===void 0?0:v;return this.rectanglesIntersect({minX:i.x-l.width+a,minY:i.y,maxX:o.x-l.width+a,maxY:o.y},{minX:u,maxX:u+d,minY:c,maxY:c+p})},r.prototype.updateSelectedCells=function(){var t=this.spreadsheet.interaction;t.changeState({cells:de(this.brushRangeCells,Nr),stateName:q.SELECTED,onUpdateCells:function(n){n.updateCells(n.getAllColHeaderCells())}}),this.spreadsheet.emit(T.COL_CELL_BRUSH_SELECTION,this.brushRangeCells),this.spreadsheet.emit(T.GLOBAL_SELECTED,this.brushRangeCells),H(this.brushRangeCells)&&t.removeIntercepts([le.HOVER])},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([le.COL_BRUSH_SELECTION])},r}(Kc),wN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.displayedCells=[],t.brushRangeCells=[],t.getSelectedCellMetas=function(n){var i=[],o=t.spreadsheet.facet.layoutResult,a=o.rowLeafNodes,l=a===void 0?[]:a,s=o.colLeafNodes,u=s===void 0?[]:s,f=Ei(n.start.rowIndex,n.end.rowIndex+1),c=Ei(n.start.colIndex,n.end.colIndex+1);return f.forEach(function(h){c.forEach(function(d){var v=String(u[d].id),p=H(l)?String(h):String(l[h].id);i.push({colIndex:d,rowIndex:h,id:"".concat(p,"-").concat(v),type:N.DATA_CELL,rowId:p,colId:v,spreadsheet:t.spreadsheet})})}),i},t}return r.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(T.DATA_CELL_MOUSE_DOWN,function(n){t.spreadsheet.interaction.getBrushSelection().data&&(e.prototype.mouseDown.call(t,n),t.resetScrollDelta())})},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_MOVE,function(n){if(t.brushSelectionStage!==vt.UN_DRAGGED){t.setBrushSelectionStage(vt.DRAGGED);var i=t.spreadsheet.container.getPointByEvent(n);t.autoBrushScroll(i)||t.renderPrepareSelected(i)}})},r.prototype.isInBrushRange=function(t){var n=this.getBrushRange(),i=n.start,o=n.end,a=t.rowIndex,l=t.colIndex;return a>=i.rowIndex&&a<=o.rowIndex&&l>=i.colIndex&&l<=o.colIndex},r.prototype.updateSelectedCells=function(){var t=this.getBrushRange(),n=this.getSelectedCellMetas(t);this.spreadsheet.interaction.changeState({cells:n,stateName:q.SELECTED,onUpdateCells:Wc});var i=this.getScrollBrushRangeCells(n);this.emitBrushSelectionEvent(T.DATA_CELL_BRUSH_SELECTION,i)},r.prototype.getScrollBrushRangeCells=function(t){var n=this;return t.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);if(o)return o;var a=n.spreadsheet.facet.layoutResult.getCellMeta(i.rowIndex,i.colIndex),l=n.spreadsheet.isTableMode()?Ul:Fn;return new l(a,n.spreadsheet)})},r.prototype.bindMouseUp=function(){e.prototype.bindMouseUp.call(this,!0)},r.prototype.getPrepareSelectMaskPosition=function(t){var n=this.spreadsheet.facet.panelBBox,i=n.minX,o=n.minY,a=Math.max(t.start.x,i),l=Math.max(t.start.y,o);return{x:a,y:l}},r}(Kc),_N=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.isInBrushRange=function(n){var i=t.getBrushRange(),o=i.start,a=i.end,l=t.spreadsheet.facet.getScrollOffset(),s=l.scrollY,u=l.rowHeaderScrollX,f=t.spreadsheet.facet.cornerBBox,c=n.x,h=c===void 0?0:c,d=n.y,v=d===void 0?0:d,p=n.width,g=p===void 0?0:p,C=n.height,y=C===void 0?0:C;return t.rectanglesIntersect({minX:o.x+u,minY:o.y-f.height+s,maxX:a.x+u,maxY:a.y-f.height+s},{minX:h,maxX:h+g,minY:v,maxY:v+y})},t.onUpdateCells=function(n){return n.updateCells(n.getAllRowHeaderCells())},t.getSelectedRowNodes=function(){return t.spreadsheet.getRowNodes().filter(t.isInBrushRange)},t.getVisibleRowLeafCellByScrollDirection=function(n){var i=t.spreadsheet.interaction.getAllRowHeaderCells();return n===Mt.SCROLL_DOWN?Ie(i):i.find(function(o){var a=o.getMeta();return a.isLeaf})},t.getWillScrollToRowIndex=function(n){var i,o;if(!rt(t.endBrushPoint.rowIndex))return t.getDefaultWillScrollToRowIndex(n);var a=t.getVisibleRowLeafCellByScrollDirection(n),l=(o=(i=a==null?void 0:a.getMeta())===null||i===void 0?void 0:i.rowIndex)!==null&&o!==void 0?o:0,s=l+t.getWillScrollRowIndexDiff(n);return t.validateYIndex(s)},t}return r.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(T.ROW_CELL_MOUSE_DOWN,function(n){t.spreadsheet.interaction.getBrushSelection().row&&e.prototype.mouseDown.call(t,n)})},r.prototype.isPointInCanvas=function(t){var n=this.spreadsheet.facet.getCanvasHW().height,i=this.spreadsheet.facet.cornerBBox,o=i.minX,a=i.height,l=i.maxX;return t.x>=o&&t.x<=l&&t.y>=a&&t.y<=n},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_MOVE,function(n){if(t.brushSelectionStage!==vt.UN_DRAGGED){t.setBrushSelectionStage(vt.DRAGGED);var i=t.spreadsheet.container.getPointByEvent(n);t.autoBrushScroll(i,!0)||t.renderPrepareSelected(i)}})},r.prototype.setDisplayedCells=function(){this.displayedCells=this.spreadsheet.interaction.getAllRowHeaderCells()},r.prototype.updateSelectedCells=function(){var t=this.getSelectedRowNodes(),n=this.getScrollBrushRangeCells(t),i=de(n,Nr);this.spreadsheet.interaction.changeState({cells:i,stateName:q.SELECTED,onUpdateCells:this.onUpdateCells}),this.emitBrushSelectionEvent(T.ROW_CELL_BRUSH_SELECTION,n)},r.prototype.addBrushIntercepts=function(){this.spreadsheet.interaction.addIntercepts([le.ROW_BRUSH_SELECTION])},r.prototype.getScrollBrushRangeCells=function(t){var n=this;return t.map(function(i){var o=n.getVisibleBrushRangeCells(i.id);return o||new Gl(i,n.spreadsheet)})},r.prototype.getPrepareSelectMaskPosition=function(t){var n=this.spreadsheet.facet.panelBBox.minY,i=t.start.x,o=Math.max(t.start.y,n);return{x:i,y:o}},r}(Kc),SN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.isMultiSelection=!1,t}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isMultiSelection=!1,this.spreadsheet.interaction.removeIntercepts([le.CLICK])},r.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_DOWN,function(n){ol(n)&&(t.isMultiSelection=!0,t.spreadsheet.interaction.addIntercepts([le.CLICK]))})},r.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_UP,function(n){ol(n)&&t.reset()})},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_MOVE,function(n){t.isMultiSelection&&!my(n)&&t.reset()})},r.prototype.getSelectedCells=function(t){var n=t.getMeta().id,i=this.spreadsheet.interaction,o=i.getCells([N.DATA_CELL]),a=[];return i.getCurrentStateName()!==q.SELECTED&&(o=[]),o.find(function(l){return l.id===n})?a=o.filter(function(l){return l.id!==n}):a=$($([],I(o),!1),[Nr(t)],!1),a},r.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(T.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=t.spreadsheet.getCell(n.target),o=i.getMeta(),a=t.spreadsheet,l=a.interaction;if(a.options,t.isMultiSelection&&o){var s=t.getSelectedCells(i);if(H(s)){l.clearState(),t.spreadsheet.hideTooltip();return}l.addIntercepts([le.CLICK,le.HOVER]),t.spreadsheet.hideTooltip(),l.changeState({cells:s,stateName:q.SELECTED,onUpdateCells:Wc}),t.spreadsheet.emit(T.GLOBAL_SELECTED,l.getActiveCells()),t.spreadsheet.showTooltipWithInfo(n,Xc(t.spreadsheet))}})},r}(Er),xN=function(){function e(r){var t=this;this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[],this.isCanvasEffect=!1,this.isGuiIconShape=function(n){return n instanceof pf&&n.attrs.type===zo.type},this.onCanvasMousedown=function(n){if(t.target=n.target,t.spreadsheet.interaction.clearHoverTimer(),t.isResizeArea(n)){t.spreadsheet.emit(T.LAYOUT_RESIZE_MOUSE_DOWN,n);var i=function(a){if(!t.spreadsheet.getCanvasElement())return!1;t.spreadsheet.getCanvasElement()!==a.target&&(n.clientX=a.clientX,n.clientY=a.clientY,n.originalEvent=a,t.spreadsheet.emit(T.LAYOUT_RESIZE_MOUSE_MOVE,n))};window.addEventListener("mousemove",i),window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",i)},{once:!0});return}var o=t.spreadsheet.getCellType(n.target);switch(o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_MOUSE_DOWN,n);break;case N.ROW_CELL:t.spreadsheet.emit(T.ROW_CELL_MOUSE_DOWN,n);break;case N.COL_CELL:t.spreadsheet.emit(T.COL_CELL_MOUSE_DOWN,n);break;case N.CORNER_CELL:t.spreadsheet.emit(T.CORNER_CELL_MOUSE_DOWN,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_MOUSE_DOWN,n);break}},this.onCanvasMousemove=function(n){if(t.canvasMousemoveEvent=n,t.isResizeArea(n)){t.activeResizeArea(n),t.spreadsheet.emit(T.LAYOUT_RESIZE_MOUSE_MOVE,n);return}t.resetResizeArea();var i=t.spreadsheet.getCell(n.target);if(i){var o=i.cellType;switch(o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_MOUSE_MOVE,n);break;case N.ROW_CELL:t.spreadsheet.emit(T.ROW_CELL_MOUSE_MOVE,n);break;case N.COL_CELL:t.spreadsheet.emit(T.COL_CELL_MOUSE_MOVE,n);break;case N.CORNER_CELL:t.spreadsheet.emit(T.CORNER_CELL_MOUSE_MOVE,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_MOUSE_MOVE,n);break}if(!t.hasBrushSelectionIntercepts())switch(t.spreadsheet.emit(T.GLOBAL_HOVER,n),o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_HOVER,n);break;case N.ROW_CELL:t.spreadsheet.emit(T.ROW_CELL_HOVER,n);break;case N.COL_CELL:t.spreadsheet.emit(T.COL_CELL_HOVER,n);break;case N.CORNER_CELL:t.spreadsheet.emit(T.CORNER_CELL_HOVER,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_HOVER,n);break}}},this.onCanvasMouseup=function(n){if(t.isResizeArea(n)){t.spreadsheet.emit(T.LAYOUT_RESIZE_MOUSE_UP,n);return}var i=t.spreadsheet.getCell(n.target);if(i){var o=i.cellType;if(t.target===n.target){var a=t.isGuiIconShape(n.target);switch(o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_CLICK,n);break;case N.ROW_CELL:if(a)break;t.spreadsheet.emit(T.ROW_CELL_CLICK,n);break;case N.COL_CELL:if(a)break;t.spreadsheet.emit(T.COL_CELL_CLICK,n);break;case N.CORNER_CELL:if(a)break;t.spreadsheet.emit(T.CORNER_CELL_CLICK,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_CLICK,n);break}}switch(o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_MOUSE_UP,n);break;case N.ROW_CELL:t.spreadsheet.emit(T.ROW_CELL_MOUSE_UP,n);break;case N.COL_CELL:t.spreadsheet.emit(T.COL_CELL_MOUSE_UP,n);break;case N.CORNER_CELL:t.spreadsheet.emit(T.CORNER_CELL_MOUSE_UP,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_MOUSE_UP,n);break}}},this.onCanvasClick=function(n){t.spreadsheet.emit(T.GLOBAL_CLICK,n)},this.onCanvasDoubleClick=function(n){var i=t.spreadsheet;if(t.isResizeArea(n)){i.emit(T.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(T.GLOBAL_DOUBLE_CLICK,n);var o=i.getCell(n.target);if(o){var a=o.cellType;if(t.target===n.target)switch(a){case N.DATA_CELL:i.emit(T.DATA_CELL_DOUBLE_CLICK,n);break;case N.ROW_CELL:i.emit(T.ROW_CELL_DOUBLE_CLICK,n);break;case N.COL_CELL:i.emit(T.COL_CELL_DOUBLE_CLICK,n);break;case N.CORNER_CELL:i.emit(T.CORNER_CELL_DOUBLE_CLICK,n);break;case N.MERGED_CELL:i.emit(T.MERGED_CELLS_DOUBLE_CLICK,n);break}}},this.onCanvasMouseout=function(n){if(!(!t.isAutoResetSheetStyle||n!=null&&n.shape)){var i=t.spreadsheet.interaction;!i.isSelectedState()&&!(i.intercepts.size>0)&&i.reset()}},this.onCanvasContextMenu=function(n){var i=t.spreadsheet;if(t.isResizeArea(n)){i.emit(T.LAYOUT_RESIZE_MOUSE_UP,n);return}i.emit(T.GLOBAL_CONTEXT_MENU,n);var o=t.spreadsheet.getCellType(n.target);switch(o){case N.DATA_CELL:t.spreadsheet.emit(T.DATA_CELL_CONTEXT_MENU,n);break;case N.ROW_CELL:t.spreadsheet.emit(T.ROW_CELL_CONTEXT_MENU,n);break;case N.COL_CELL:t.spreadsheet.emit(T.COL_CELL_CONTEXT_MENU,n);break;case N.CORNER_CELL:t.spreadsheet.emit(T.CORNER_CELL_CONTEXT_MENU,n);break;case N.MERGED_CELL:t.spreadsheet.emit(T.MERGED_CELLS_CONTEXT_MENU,n);break}},this.spreadsheet=r,this.bindEvents()}return Object.defineProperty(e.prototype,"canvasContainer",{get:function(){return this.spreadsheet.container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoResetSheetStyle",{get:function(){return this.spreadsheet.options.interaction.autoResetSheetStyle},enumerable:!1,configurable:!0}),e.prototype.bindEvents=function(){var r=this;this.clearAllEvents(),this.addCanvasEvent(St.CLICK,this.onCanvasClick),this.addCanvasEvent(St.MOUSE_DOWN,this.onCanvasMousedown),this.addCanvasEvent(St.MOUSE_MOVE,this.onCanvasMousemove),this.addCanvasEvent(St.MOUSE_OUT,this.onCanvasMouseout),this.addCanvasEvent(St.MOUSE_UP,this.onCanvasMouseup),this.addCanvasEvent(St.DOUBLE_CLICK,this.onCanvasDoubleClick),this.addCanvasEvent(St.CONTEXT_MENU,this.onCanvasContextMenu),this.addS2Event(T.GLOBAL_ACTION_ICON_CLICK,function(){r.spreadsheet.interaction.addIntercepts([le.HOVER]),r.spreadsheet.interaction.clearState()}),this.addDomEventListener(window,St.CLICK,function(t){r.resetSheetStyle(t),r.isCanvasEffect=r.isMouseOnTheCanvasContainer(t)}),this.addDomEventListener(window,St.KEY_DOWN,function(t){r.onKeyboardCopy(t),r.onKeyboardEsc(t),r.spreadsheet.emit(T.GLOBAL_KEYBOARD_DOWN,t)}),this.addDomEventListener(window,St.KEY_UP,function(t){r.spreadsheet.emit(T.GLOBAL_KEYBOARD_UP,t)}),this.addDomEventListener(window,St.MOUSE_UP,function(t){r.spreadsheet.emit(T.GLOBAL_MOUSE_UP,t)}),this.addDomEventListener(window,St.MOUSE_MOVE,function(t){r.spreadsheet.emit(T.GLOBAL_MOUSE_MOVE,t)})},e.prototype.onKeyboardCopy=function(r){if(this.isCanvasEffect&&this.spreadsheet.options.interaction.enableCopy&&Yv(r.key,pt.COPY)&&(r.metaKey||r.ctrlKey)){var t=A$(this.spreadsheet);rt(t)||this.spreadsheet.emit(T.GLOBAL_COPIED,t)}},e.prototype.onKeyboardEsc=function(r){this.isCanvasEffect&&Yv(r.key,pt.ESC)&&this.resetSheetStyle(r)},e.prototype.resetSheetStyle=function(r){if(!(!this.isAutoResetSheetStyle||!this.spreadsheet)){var t=this.spreadsheet.interaction;if(t.hasIntercepts([le.BRUSH_SELECTION,le.COL_BRUSH_SELECTION,le.ROW_BRUSH_SELECTION])){t.removeIntercepts([le.BRUSH_SELECTION,le.ROW_BRUSH_SELECTION,le.COL_BRUSH_SELECTION]);return}this.isMouseOnTheTooltip(r)||this.isMouseOnTheCanvasContainer(r)||(this.spreadsheet.emit(T.GLOBAL_RESET,r),t.reset())}},e.prototype.isMouseEvent=function(r){return Po(r,"clientX")&&Po(r,"clientY")},e.prototype.isMouseOnTheCanvasContainer=function(r){if(this.isMouseEvent(r)){var t=this.spreadsheet.getCanvasElement();if(!t)return!1;var n=t.getBoundingClientRect()||{},i=n.x,o=n.y,a=this.getContainerRect(),l=a.width,s=a.height;return t.contains(r.target)&&r.clientX<=i+l&&r.clientY<=o+s}return!1},e.prototype.getContainerRect=function(){var r,t=this.spreadsheet,n=t.facet,i=t.options,o=n.hRowScrollBar||n.hScrollBar,a=(n==null?void 0:n.panelBBox)||{},l=a.maxX,s=a.maxY,u=i.width,f=i.height,c=((r=o==null?void 0:o.theme)===null||r===void 0?void 0:r.size)||0;return{width:Math.min(u,l),height:Math.min(f,s+c)}},e.prototype.isMouseOnTheTooltip=function(r){var t,n,i,o,a=this.spreadsheet.tooltip;if(!(a!=null&&a.visible))return!1;var l=((i=(n=(t=this.spreadsheet.tooltip)===null||t===void 0?void 0:t.container)===null||n===void 0?void 0:n.getBoundingClientRect)===null||i===void 0?void 0:i.call(n))||{},s=l.x,u=l.y,f=l.width,c=l.height;return r.target instanceof Node?G7((o=this.spreadsheet.tooltip)===null||o===void 0?void 0:o.container,r.target):this.isMouseEvent(r)?r.clientX>=s&&r.clientX<=s+f&&r.clientY>=u&&r.clientY<=u+c:!1},e.prototype.isResizeArea=function(r){var t=j(r.target,"attrs.appendInfo");return t==null?void 0:t.isResizeArea},e.prototype.activeResizeArea=function(r){this.resetResizeArea();var t=r.target;this.spreadsheet.store.set("activeResizeArea",t),t.attr(Gt.backgroundOpacity,this.spreadsheet.theme.resizeArea.interactionState.hover.backgroundOpacity)},e.prototype.resetResizeArea=function(){var r=this.spreadsheet.store.get("activeResizeArea");H(r)||r.attr(Gt.backgroundOpacity,this.spreadsheet.theme.resizeArea.backgroundOpacity),this.spreadsheet.store.set("activeResizeArea",r)},e.prototype.hasBrushSelectionIntercepts=function(){return this.spreadsheet.interaction.hasIntercepts([le.HOVER,le.BRUSH_SELECTION,le.ROW_BRUSH_SELECTION,le.COL_BRUSH_SELECTION])},e.prototype.clear=function(){this.unbindEvents()},e.prototype.unbindEvents=function(){this.clearAllEvents()},e.prototype.addCanvasEvent=function(r,t){var n;(n=this.canvasContainer)===null||n===void 0||n.on(r,t),this.canvasEventHandlers.push({type:r,handler:t})},e.prototype.addS2Event=function(r,t){this.spreadsheet.on(r,t),this.s2EventHandlers.push({type:r,handler:t})},e.prototype.addDomEventListener=function(r,t,n){if(r.addEventListener){var i=this.spreadsheet.options.interaction.eventListenerOptions;r.addEventListener(t,n,i),this.domEventListeners.push({target:r,type:t,handler:n,options:i})}else console.error("Please make sure ".concat(r," has addEventListener function"))},e.prototype.clearAllEvents=function(){var r=this;te(this.canvasEventHandlers,function(t){var n,i=t.type,o=t.handler;(n=r.canvasContainer)===null||n===void 0||n.off(i,o)}),te(this.s2EventHandlers,function(t){var n=t.type,i=t.handler;r.spreadsheet.off(n,i)}),te(this.domEventListeners,function(t){t.target.removeEventListener(t.type,t.handler,t.options)}),this.canvasEventHandlers=[],this.s2EventHandlers=[],this.domEventListeners=[]},e}(),TN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.isRangeSelection=!1,t.handleColClick=function(n){n.stopPropagation();var i=t.spreadsheet.interaction,o=t.spreadsheet.getCell(n.target),a=o==null?void 0:o.getMeta();if(!rt(a==null?void 0:a.x)){i.addIntercepts([le.HOVER]);var l=[Nr(o)],s=t.spreadsheet.store.get("lastClickedCell");if(t.isRangeSelection&&s&&s.cellType===o.cellType&&s.getMeta().level===o.getMeta().level){var u=I([t.spreadsheet.facet.layoutResult.rowsHierarchy.maxLevel,t.spreadsheet.facet.layoutResult.colsHierarchy.maxLevel],2),f=u[0],c=u[1],h=Du(s.getMeta(),o.getMeta()),d=h.start,v=h.end;o instanceof Fn?l=t.handleSeriesNumberRowSelected(d.rowIndex,v.rowIndex,o):o.cellType===N.ROW_CELL&&o.getMeta().level===f?l=t.handleRowSelected(d.rowIndex,v.rowIndex,o):o.cellType===N.COL_CELL&&o.getMeta().level===c&&(l=t.handleColSelected(d.colIndex,v.colIndex,o)),i.changeState({cells:l,stateName:q.SELECTED})}else H(i.getCells())&&i.removeIntercepts([le.HOVER]),t.spreadsheet.store.set("lastClickedCell",o);var p=l.map(function(g){var C=g.id;return C});i.updateCells(i.getRowColActiveCells(p)),t.spreadsheet.emit(T.GLOBAL_SELECTED,i.getActiveCells())}},t}return r.prototype.bindEvents=function(){this.bindKeyboardDown(),this.bindDataCellClick(),this.bindColCellClick(),this.bindKeyboardUp(),this.bindMouseMove()},r.prototype.reset=function(){this.isRangeSelection=!1,this.spreadsheet.interaction.removeIntercepts([le.CLICK])},r.prototype.bindKeyboardDown=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_DOWN,function(n){n.key===pt.SHIFT&&(t.isRangeSelection=!0,t.spreadsheet.interaction.addIntercepts([le.CLICK]))})},r.prototype.bindKeyboardUp=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_UP,function(n){n.key===pt.SHIFT&&t.reset()})},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_MOVE,function(n){t.isRangeSelection&&!n.shiftKey&&t.reset()})},r.prototype.bindColCellClick=function(){var t=this;this.spreadsheet.isTableMode()&&this.spreadsheet.on(T.ROW_CELL_CLICK,function(n){t.handleColClick(n)}),this.spreadsheet.on(T.COL_CELL_CLICK,function(n){t.handleColClick(n)})},r.prototype.bindDataCellClick=function(){var t=this;this.spreadsheet.on(T.DATA_CELL_CLICK,function(n){n.stopPropagation();var i=t.spreadsheet.getCell(n.target),o=i.getMeta(),a=t.spreadsheet.interaction;if(o){var l=t.spreadsheet.store.get("lastClickedCell"),s=t.isRangeSelection&&(l==null?void 0:l.cellType)===i.cellType;if(!s){t.spreadsheet.store.set("lastClickedCell",i);return}var u=Du(l.getMeta(),i.getMeta()),f=u.start,c=u.end,h=Ei(f.colIndex,c.colIndex+1).flatMap(function(d){var v=t.spreadsheet.facet.layoutResult.colLeafNodes[d].id;return Ei(f.rowIndex,c.rowIndex+1).map(function(p){var g=t.spreadsheet.facet.getSeriesNumberWidth()||t.spreadsheet.isTableMode()?String(p):t.spreadsheet.facet.layoutResult.rowLeafNodes[p].id;return{id:g+"-"+v,colIndex:d,rowIndex:p,type:i.cellType}})});a.addIntercepts([le.CLICK,le.HOVER]),a.changeState({cells:h,stateName:q.SELECTED}),t.spreadsheet.showTooltipWithInfo(n,Xc(t.spreadsheet)),t.spreadsheet.emit(T.GLOBAL_SELECTED,a.getActiveCells())}})},r.prototype.handleSeriesNumberRowSelected=function(t,n,i){var o=this.spreadsheet.facet.layoutResult.colLeafNodes[0].id;return Ei(t,n+1).map(function(a){var l=String(a);return{id:l+"-"+o,colIndex:0,rowIndex:a,type:i.cellType}})},r.prototype.handleRowSelected=function(t,n,i){return this.spreadsheet.facet.layoutResult.rowNodes.filter(function(o){var a=o.rowIndex;return yu(a,t,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},r.prototype.handleColSelected=function(t,n,i){return this.spreadsheet.facet.layoutResult.colLeafNodes.filter(function(o){var a=o.colIndex;return yu(a,t,n+1)}).map(function(o){return{id:o.id,colIndex:o.colIndex,rowIndex:o.rowIndex,type:i.cellType}})},r}(Er),EN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.resizeStartPosition={},t.resizeMouseMove=function(n){var i,o;if(!((i=t.resizeReferenceGroup)===null||i===void 0)&&i.get("visible")){(o=n==null?void 0:n.preventDefault)===null||o===void 0||o.call(n);var a=n.originalEvent,l=t.getResizeInfo(),s=t.resizeReferenceGroup.getChildren()||[];if(!H(s)){var u=I(s,2),f=u[1],c=I(Qo(f.attr("path")),2),h=c[0],d=c[1];l.type===nr.Horizontal?t.updateHorizontalResizingEndGuideLinePosition(a,l,h,d):t.updateVerticalResizingEndGuideLinePosition(a,l,h,d),t.updateResizeGuideLineTheme(f),f.attr("path",[h,d])}}},t}return r.prototype.bindEvents=function(){this.bindMouseDown(),this.bindMouseMove(),this.bindMouseUp()},r.prototype.initResizeGroup=function(){if(!this.resizeReferenceGroup){this.resizeReferenceGroup=this.spreadsheet.foregroundGroup.addGroup();var t=this.spreadsheet.options,n=t.width,i=t.height,o=this.getResizeAreaTheme(),a=o.guideLineColor,l=o.guideLineDash,s=o.size,u={path:"",lineDash:l,stroke:a,lineWidth:s};this.resizeReferenceGroup.addShape("path",{id:h2,attrs:u}),this.resizeReferenceGroup.addShape("path",{id:d2,attrs:u}),this.resizeReferenceGroup.addShape("rect",{id:v2,attrs:{appendInfo:{isResizeArea:!0},x:0,y:0,width:n,height:i,fill:"transparent"}})}},r.prototype.getResizeAreaTheme=function(){return this.spreadsheet.theme.resizeArea},r.prototype.setResizeTarget=function(t){this.resizeTarget=t},r.prototype.getGuideLineWidthAndHeight=function(){var t=this.spreadsheet.options,n=t.width,i=t.height,o=this.spreadsheet.facet.panelBBox,a=o.maxY,l=o.maxX,s=Math.min(l,n),u=Math.min(a,i);return{width:s,height:u}},r.prototype.getResizeShapes=function(){var t;return((t=this.resizeReferenceGroup)===null||t===void 0?void 0:t.get("children"))||[]},r.prototype.setResizeMaskCursor=function(t){var n=I(this.getResizeShapes(),3),i=n[2];i==null||i.attr("cursor",t)},r.prototype.updateResizeGuideLinePosition=function(t,n){var i=this.getResizeShapes();if(!H(i)){var o=I(i,2),a=o[0],l=o[1],s=n.type,u=n.offsetX,f=n.offsetY,c=n.width,h=n.height,d=this.getGuideLineWidthAndHeight(),v=d.width,p=d.height;if(this.setResizeMaskCursor("".concat(s,"-resize")),s===nr.Horizontal){a.attr("path",[["M",u,f],["L",u,p]]),l.attr("path",[["M",u+c,f],["L",u+c,p]]),this.resizeStartPosition.offsetX=t.offsetX,this.resizeStartPosition.clientX=t.clientX;return}a.attr("path",[["M",u,f],["L",v,f]]),l.attr("path",[["M",u,f+h],["L",v,f+h]]),this.resizeStartPosition.offsetY=t.offsetY,this.resizeStartPosition.clientY=t.clientY}},r.prototype.bindMouseDown=function(){var t=this;this.spreadsheet.on(T.LAYOUT_RESIZE_MOUSE_DOWN,function(n){var i=n.target,o=n.originalEvent,a=t.getCellAppendInfo(n.target);t.spreadsheet.store.set("resized",!1),a!=null&&a.isResizeArea&&(t.spreadsheet.interaction.reset(),t.spreadsheet.interaction.addIntercepts([le.RESIZE]),t.setResizeTarget(i),t.showResizeGroup(),t.updateResizeGuideLinePosition(o,a))})},r.prototype.bindMouseMove=function(){var t=this;this.spreadsheet.on(T.LAYOUT_RESIZE_MOUSE_MOVE,function(n){mc(t.resizeMouseMove,33)(n)})},r.prototype.getResizeGuideLinePosition=function(){var t=I(this.resizeReferenceGroup.getChildren()||[],2),n=t[0],i=t[1],o=(n==null?void 0:n.attr("path"))||[],a=(i==null?void 0:i.attr("path"))||[],l=I(o[0]||[],3),s=l[1],u=s===void 0?0:s,f=l[2],c=f===void 0?0:f,h=I(a[0]||[],3),d=h[1],v=d===void 0?0:d,p=h[2],g=p===void 0?0:p;return{start:{x:u,y:c},end:{x:v,y:g}}},r.prototype.getDisAllowResizeInfo=function(){var t,n=this.getResizeInfo(),i=this.spreadsheet.options.interaction.resize,o=n.width,a=n.height,l=n.resizedWidth,s=n.resizedHeight,u=(t=i==null?void 0:i.disable)===null||t===void 0?void 0:t.call(i,n),f=u?o:l,c=u?a:s;return{displayWidth:f,displayHeight:c,isDisabled:u}},r.prototype.getResizeWidthDetail=function(){var t,n,i=this.getResizeInfo(),o=this.getDisAllowResizeInfo().displayWidth;switch(i.effect){case xt.Field:return{eventType:T.LAYOUT_RESIZE_ROW_WIDTH,style:{rowCfg:{widthByField:(t={},t[i.id]=o,t)}}};case xt.Tree:return{eventType:T.LAYOUT_RESIZE_TREE_WIDTH,style:{treeRowsWidth:o,rowCfg:{treeRowsWidth:o}}};case xt.Cell:return{eventType:T.LAYOUT_RESIZE_COL_WIDTH,style:{colCfg:{widthByFieldValue:(n={},n[i.id]=o,n)}}};case xt.Series:return{eventType:T.LAYOUT_RESIZE_SERIES_WIDTH,seriesNumberWidth:o};default:return null}},r.prototype.getResizeHeightDetail=function(){var t,n,i=this.spreadsheet.options,o=i.interaction.resize,a=i.style.rowCfg.heightByField,l=this.spreadsheet.theme.rowCell.cell.padding,s=this.getResizeInfo(),u=this.getDisAllowResizeInfo().displayHeight,f=u-l.top-l.bottom,c;switch(s.effect){case xt.Field:return{eventType:T.LAYOUT_RESIZE_COL_HEIGHT,style:{colCfg:{heightByField:(t={},t[s.id]=u,t)}}};case xt.Cell:return a!=null&&a[String(s.id)]||(o==null?void 0:o.rowResizeType)===Ka.CURRENT?c={rowCfg:{heightByField:(n={},n[s.id]=f,n)}}:c={cellCfg:{height:f}},{eventType:T.LAYOUT_RESIZE_ROW_HEIGHT,style:c};default:return null}},r.prototype.getResizeDetail=function(){var t=this.getResizeInfo();return t.type===nr.Horizontal?this.getResizeWidthDetail():this.getResizeHeightDetail()},r.prototype.showResizeGroup=function(){this.initResizeGroup(),this.resizeReferenceGroup.set("visible",!0)},r.prototype.hideResizeGroup=function(){this.resizeReferenceGroup.set("visible",!1)},r.prototype.bindMouseUp=function(){var t=this;this.spreadsheet.on(T.GLOBAL_MOUSE_UP,function(){var n;t.setResizeMaskCursor("default"),!(!t.resizeReferenceGroup||H((n=t.resizeReferenceGroup)===null||n===void 0?void 0:n.getChildren()))&&(t.hideResizeGroup(),t.renderResizedResult())})},r.prototype.updateResizeGuideLineTheme=function(t){var n=this.getResizeAreaTheme(),i=n.guideLineColor,o=n.guideLineDisableColor,a=this.getDisAllowResizeInfo().isDisabled;t.attr("stroke",a?o:i),this.setResizeMaskCursor(a?"no-drop":"default")},r.prototype.updateHorizontalResizingEndGuideLinePosition=function(t,n,i,o){var a=t.clientX-this.resizeStartPosition.clientX;n.width+a<xd&&(a=-(n.width-xd));var l=n.offsetX+n.width+a;i[1]=l,o[1]=l,this.resizeTarget.attr({x:l-n.size/2})},r.prototype.updateVerticalResizingEndGuideLinePosition=function(t,n,i,o){var a=t.clientY-this.resizeStartPosition.clientY;n.height+a<Td&&(a=-(n.height-Td));var l=n.offsetY+n.height+a;i[2]=l,o[2]=l,this.resizeTarget.attr({y:l-n.size/2})},r.prototype.renderResizedResult=function(){var t=this.getResizeInfo(),n=this.getResizeDetail()||{},i=n.style,o=n.seriesNumberWidth,a=n.eventType,l={info:t,style:i};this.spreadsheet.emit(T.LAYOUT_RESIZE,l),this.spreadsheet.emit(a,l),i&&this.spreadsheet.setOptions({style:i}),o&&this.spreadsheet.setTheme({rowCell:{seriesNumberWidth:o}}),this.spreadsheet.store.set("resized",!0),this.render()},r.prototype.getResizeInfo=function(){var t=this.getCellAppendInfo(this.resizeTarget),n=this.getResizeGuideLinePosition(),i=n.start,o=n.end,a=Math.floor(o.x-i.x),l=Math.floor(o.y-i.y);return L(L({},t),{resizedWidth:a,resizedHeight:l})},r.prototype.render=function(){this.resizeStartPosition={},this.resizeTarget=null,this.resizeReferenceGroup=null,this.spreadsheet.render(!1)},r}(Er),bN=[pt.ARROW_LEFT,pt.ARROW_RIGHT,pt.ARROW_UP,pt.ARROW_DOWN],LN=function(e){Q(r,e);function r(t){return e.call(this,t)||this}return r.prototype.isCanvasEffect=function(){return this.spreadsheet.interaction.eventController.isCanvasEffect},r.prototype.bindEvents=function(){var t=this;this.spreadsheet.on(T.GLOBAL_KEYBOARD_DOWN,function(n){if(t.isCanvasEffect()){var i=n.shiftKey,o=n.metaKey,a=bN.includes(n.key),l=!1,s=!1,u=!1;a&&(o&&i?(l=!1,s=!0,u=!1):o?(l=!0,s=!0,u=!0):i?(l=!1,s=!1,u=!1):(l=!0,s=!1,u=!0),t.handleMove({event:n,changeStartCell:l,isJumpMode:s,isSingleSelection:u}))}}),this.spreadsheet.on(T.DATA_CELL_CLICK,function(n){var i=t.spreadsheet.getCell(n.target).getMeta();i&&(t.startCell=t.getCellMetaFromViewMeta(i),t.endCell=t.startCell)})},r.prototype.getCellMetaFromViewMeta=function(t){return{rowIndex:t.rowIndex,colIndex:t.colIndex,id:t.id,type:N.DATA_CELL}},r.prototype.handleMove=function(t){var n=t.event,i=t.changeStartCell,o=t.isJumpMode,a=t.isSingleSelection,l=this,s=l.spreadsheet,u=l.startCell,f=l.endCell,c=i?u:f,h=this.getMoveInfo(n.key,c,o);if(h){var d=I([h.row,h.col],2),v=d[0],p=d[1];this.scrollToActiveCell(s,v,p);var g=this.generateCellMeta(s,v,p),C=a?[g]:this.getRangeCells(s,u,g);RP(s,C),i&&(this.startCell=g),this.endCell=g,this.spreadsheet.emit(T.DATA_CELL_SELECT_MOVE,C)}},r.prototype.generateCellMeta=function(t,n,i){var o=t.isTableMode,a=t.facet.layoutResult,l=a.colLeafNodes,s=a.rowLeafNodes,u=o()?String(n):s[n].id,f=l[i].id;return{rowIndex:n,colIndex:i,id:zl(u,f),type:N.DATA_CELL}},r.prototype.getRangeCells=function(t,n,i){for(var o=Du(n,i),a=o.start,l=a.rowIndex,s=a.colIndex,u=o.end,f=u.rowIndex,c=u.colIndex,h=[],d=l;d<=f;d++)for(var v=s;v<=c;v++)h.push(this.generateCellMeta(t,d,v));return h},r.prototype.getMoveInfo=function(t,n,i){var o=this.spreadsheet,a=o.options,l=a.frozenColCount,s=l===void 0?0:l,u=a.frozenRowCount,f=u===void 0?0:u,c=a.frozenTrailingColCount,h=c===void 0?0:c,d=a.frozenTrailingRowCount,v=d===void 0?0:d,p=o.facet.layoutResult,g=p.rowLeafNodes,C=p.colLeafNodes,y=I([0+s,C.length-h-1],2),m=y[0],w=y[1],S=I([0+f,(o.isTableMode()?o.dataSet.getDisplayDataSet().length:g.length)-v-1],2),b=S[0],A=S[1];if(n)switch(t){case pt.ARROW_RIGHT:return n.colIndex+1>w?void 0:{row:n.rowIndex,col:i?w:n.colIndex+1};case pt.ARROW_LEFT:return n.colIndex-1<m?void 0:{row:n.rowIndex,col:i?m:n.colIndex-1};case pt.ARROW_UP:return n.rowIndex-1<b?void 0:{row:i?b:n.rowIndex-1,col:n.colIndex};case pt.ARROW_DOWN:return n.rowIndex+1>A?void 0:{row:i?A:n.rowIndex+1,col:n.colIndex}}},r.prototype.calculateOffset=function(t,n,i){var o=t.options,a=o.frozenRowCount,l=a===void 0?0:a,s=o.frozenTrailingRowCount,u=s===void 0?0:s,f=t.facet,c=t.frozenColGroup,h=t.frozenTrailingColGroup,d=t.frozenRowGroup,v=t.frozenTrailingRowGroup,p=f.layoutResult.colLeafNodes,g=f.getScrollOffset(),C=g.scrollX,y=g.scrollY,m=f.panelBBox,w=m.viewportHeight,S=m.viewportWidth,b=j(t,"theme.splitLine"),A=c?Math.floor(c.getBBox().width-b.verticalBorderWidth/2):0,O=h?Math.floor(h.getBBox().width):0,B=d?Math.floor(d.getBBox().height-b.horizontalBorderWidth/2):0,P=v?Math.floor(v.getBBox().height):0,D=Ac(C,y,f.viewCellWidths,f.viewCellHeights,{width:S-A-O,height:w-B-P,x:A,y:B},f.getRealScrollX(f.cornerBBox.width)),z=-1,W=-1,U=p.find(function(k){return k.colIndex===i});if(i<=D[0]?z=U.x-A:i>=D[1]&&i<p.length-u&&(z=U.x+U.width-S+O),n<=D[2])W=f.viewCellHeights.getCellOffsetY(n-l);else if(n>=D[3]){var V=f.viewCellHeights.getCellOffsetY(n+1);W=V+P-w}return{offsetX:z,offsetY:W}},r.prototype.scrollToActiveCell=function(t,n,i){var o=this.calculateOffset(t,n,i),a=o.offsetX,l=o.offsetY,s=t.facet,u=t.facet.getScrollOffset(),f=u.scrollX,c=u.scrollY;s.scrollWithAnimation({offsetX:{value:a>-1?a:f},offsetY:{value:l>-1?l:c}})},r}(Er),AN=function(){function e(r){var t=this;this.interactions=new Map,this.intercepts=new Set,this.hoverTimer=null,this.defaultState={cells:[],force:!1},this.onTriggerInteractionsResetEffect=function(){t.interactions.forEach(function(n){n.reset()})},this.selectAll=function(){t.changeState({stateName:q.ALL_SELECTED})},this.getCellChildrenNodes=function(n){var i,o=(i=n==null?void 0:n.getMeta)===null||i===void 0?void 0:i.call(n),a=(n==null?void 0:n.cellType)===N.ROW_CELL,l=t.spreadsheet.isHierarchyTreeType();return l&&a?st.getAllLeaveNodes(o).filter(function(s){return s.rowIndex===o.rowIndex}):st.getAllChildrenNodes(o)},this.selectHeaderCell=function(n){var i;n===void 0&&(n={});var o=n.cell;if(!H(o)){var a=(i=o==null?void 0:o.getMeta)===null||i===void 0?void 0:i.call(o);if(!(!a||rt(a==null?void 0:a.x))){t.addIntercepts([le.HOVER]);var l=t.spreadsheet.isHierarchyTreeType(),s=(o==null?void 0:o.cellType)===N.COL_CELL,u=t.getState(),f=t.isSelectedCell(o),c=(n==null?void 0:n.isMultiSelection)&&t.isSelectedState(),h=f?[]:t.getCellChildrenNodes(o),d=f?[]:[Nr(o)];if(c&&(d=Mr(u==null?void 0:u.cells,d),h=Mr(u==null?void 0:u.nodes,h),f&&(d=d.filter(function(g){var C=g.id;return C!==a.id}),h=h.filter(function(g){return!(g!=null&&g.id.includes(a.id))}))),H(d)){t.reset(),t.spreadsheet.emit(T.GLOBAL_SELECTED,t.getActiveCells());return}var v=h.filter(function(g){return g==null?void 0:g.isLeaf});t.changeState({cells:d,nodes:v,stateName:q.SELECTED});var p=d.map(function(g){var C=g.id;return C});return t.updateCells(t.getRowColActiveCells(p)),(!l||s)&&t.highlightNodes(h),t.spreadsheet.emit(T.GLOBAL_SELECTED,t.getActiveCells()),!0}}},this.highlightNodes=function(n){n===void 0&&(n=[]),n.forEach(function(i){var o;(o=i==null?void 0:i.belongsCell)===null||o===void 0||o.updateByState(q.SELECTED,i.belongsCell)})},this.mergeCells=function(n,i){X$(t.spreadsheet,n,i)},this.unmergeCell=function(n){j$(t.spreadsheet,n)},this.spreadsheet=r,this.registerEventController(),this.registerInteractions(),window.addEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)}return e.prototype.destroy=function(){this.interactions.clear(),this.intercepts.clear(),this.eventController.clear(),this.clearHoverTimer(),this.resetState(),window.removeEventListener("visibilitychange",this.onTriggerInteractionsResetEffect)},e.prototype.reset=function(){this.clearState(),this.clearHoverTimer(),this.intercepts.clear(),this.spreadsheet.hideTooltip()},e.prototype.setState=function(r){IP(this.spreadsheet,r)},e.prototype.getState=function(){return this.spreadsheet.store.get(lu)||this.defaultState},e.prototype.setInteractedCells=function(r){var t=this.getInteractedCells().concat([r]),n=this.getState();n.interactedCells=t,this.setState(n)},e.prototype.getInteractedCells=function(){var r=this.getState();return(r==null?void 0:r.interactedCells)||[]},e.prototype.resetState=function(){this.spreadsheet.store.set(lu,this.defaultState)},e.prototype.getCurrentStateName=function(){return this.getState().stateName},e.prototype.isEqualStateName=function(r){return this.getCurrentStateName()===r},e.prototype.isStateOf=function(r){var t=this.getState();return(t==null?void 0:t.stateName)===r},e.prototype.isSelectedState=function(){return this.isStateOf(q.SELECTED)},e.prototype.isAllSelectedState=function(){return this.isStateOf(q.ALL_SELECTED)},e.prototype.isHoverFocusState=function(){return this.isStateOf(q.HOVER_FOCUS)},e.prototype.isHoverState=function(){return this.isStateOf(q.HOVER)},e.prototype.isActiveCell=function(r){return!!this.getCells().find(function(t){return r.getMeta().id===t.id})},e.prototype.isSelectedCell=function(r){return this.isSelectedState()&&this.isActiveCell(r)},e.prototype.getCells=function(r){var t=this.getState(),n=(t==null?void 0:t.cells)||[];return rt(r)?n:n.filter(function(i){return r.includes(i.type)})},e.prototype.getActiveCells=function(){var r=this.getCells().map(function(n){return n.id}),t=this.getAllCells();return de(r,function(n){return ct(t,function(i){var o;return((o=i==null?void 0:i.getMeta())===null||o===void 0?void 0:o.id)===n})}).filter(function(n){return n})},e.prototype.clearStyleIndependent=function(){!this.isSelectedState()&&!this.isHoverState()&&!this.isAllSelectedState()||this.getPanelGroupAllDataCells().forEach(function(r){r.hideInteractionShape()})},e.prototype.getPanelGroupAllUnSelectedDataCells=function(){var r=this;return this.getPanelGroupAllDataCells().filter(function(t){return!r.isActiveCell(t)})},e.prototype.getPanelGroupAllDataCells=function(){var r;return xo((r=this.spreadsheet.panelGroup)===null||r===void 0?void 0:r.getChildren(),Fn)},e.prototype.getAllRowHeaderCells=function(){var r,t,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(a){return a instanceof ky}),o=((t=i==null?void 0:i.cfg)===null||t===void 0?void 0:t.children)||[];return xo(o,Gl).filter(function(a){return a.cellType===N.ROW_CELL})},e.prototype.getAllColHeaderCells=function(){var r,t,n=((r=this.spreadsheet.foregroundGroup)===null||r===void 0?void 0:r.getChildren())||[],i=n.find(function(a){return a instanceof qc}),o=((t=i==null?void 0:i.cfg)===null||t===void 0?void 0:t.children)||[];return xo(o,kl).filter(function(a){return a.cellType===N.COL_CELL})},e.prototype.getRowColActiveCells=function(r){return Mr(this.getAllRowHeaderCells(),this.getAllColHeaderCells()).filter(function(t){return r.includes(t.getMeta().id)})},e.prototype.getAllCells=function(){return Mr(this.getPanelGroupAllDataCells(),this.getAllRowHeaderCells(),this.getAllColHeaderCells())},e.prototype.hideColumns=function(r,t){r===void 0&&(r=[]),t===void 0&&(t=!0),Nc(this.spreadsheet,r,t)},e.prototype.getBrushSelectionInfo=function(r){var t,n,i;return Br(r)?{dataBrushSelection:r,rowBrushSelection:r,colBrushSelection:r}:{dataBrushSelection:(t=r==null?void 0:r.data)!==null&&t!==void 0?t:!1,rowBrushSelection:(n=r==null?void 0:r.row)!==null&&n!==void 0?n:!1,colBrushSelection:(i=r==null?void 0:r.col)!==null&&i!==void 0?i:!1}},e.prototype.getDefaultInteractions=function(){var r=this.spreadsheet.options.interaction,t=r.resize,n=r.brushSelection,i=r.multiSelection,o=r.rangeSelection,a=r.selectedCellMove,l=this.getBrushSelectionInfo(n),s=l.dataBrushSelection,u=l.rowBrushSelection,f=l.colBrushSelection;return[{key:_t.CORNER_CELL_CLICK,interaction:CN},{key:_t.DATA_CELL_CLICK,interaction:dN},{key:_t.ROW_COLUMN_CLICK,interaction:pN},{key:_t.ROW_TEXT_CLICK,interaction:gN},{key:_t.MERGED_CELLS_CLICK,interaction:vN},{key:_t.HOVER,interaction:yN,enable:!nt()},{key:_t.BRUSH_SELECTION,interaction:wN,enable:!nt()&&s},{key:_t.ROW_BRUSH_SELECTION,interaction:_N,enable:!nt()&&u},{key:_t.COL_BRUSH_SELECTION,interaction:mN,enable:!nt()&&f},{key:_t.COL_ROW_RESIZE,interaction:EN,enable:!nt()&&t},{key:_t.DATA_CELL_MULTI_SELECTION,interaction:SN,enable:!nt()&&i},{key:_t.RANGE_SELECTION,interaction:TN,enable:!nt()&&o},{key:_t.SELECTED_CELL_MOVE,interaction:LN,enable:!nt()&&a}]},e.prototype.registerInteractions=function(){var r=this,t=this.spreadsheet.options.interaction.customInteractions;this.interactions.clear();var n=this.getDefaultInteractions();n.forEach(function(i){var o=i.key,a=i.interaction,l=i.enable;l!==!1&&r.interactions.set(o,new a(r.spreadsheet))}),H(t)||te(t,function(i){var o=i.interaction;r.interactions.set(i.key,new o(r.spreadsheet))})},e.prototype.registerEventController=function(){this.eventController=new xN(this.spreadsheet)},e.prototype.draw=function(){this.spreadsheet.container.draw()},e.prototype.clearState=function(){wy(this.spreadsheet)&&this.draw()},e.prototype.changeState=function(r){var t=this,n=this.spreadsheet.interaction,i=r.cells,o=i===void 0?[]:i,a=r.force,l=r.stateName,s=r.onUpdateCells;if(H(o)&&l===q.SELECTED){a&&n.changeState({cells:[],stateName:q.UNSELECTED});return}this.getCurrentStateName()===q.ALL_SELECTED&&this.clearStyleIndependent(),this.clearState(),this.setState(r);var u=function(){t.updatePanelGroupAllDataCells()};s?s(this,u):u(),this.draw()},e.prototype.updatePanelGroupAllDataCells=function(){this.updateCells(this.getPanelGroupAllDataCells())},e.prototype.updateCells=function(r){r===void 0&&(r=[]),r.forEach(function(t){t.update()})},e.prototype.addIntercepts=function(r){var t=this;r===void 0&&(r=[]),r.forEach(function(n){t.intercepts.add(n)})},e.prototype.hasIntercepts=function(r){var t=this;return r===void 0&&(r=[]),r.some(function(n){return t.intercepts.has(n)})},e.prototype.removeIntercepts=function(r){var t=this;r===void 0&&(r=[]),r.forEach(function(n){t.intercepts.delete(n)})},e.prototype.clearHoverTimer=function(){clearTimeout(this.hoverTimer)},e.prototype.setHoverTimer=function(r){this.hoverTimer=r},e.prototype.getHoverTimer=function(){return this.hoverTimer},e.prototype.getSelectedCellHighlight=function(){var r=this.spreadsheet.options.interaction.selectedCellHighlight;if(Br(r))return{rowHeader:r,colHeader:r,currentRow:!1,currentCol:!1};var t=r??{},n=t.rowHeader,i=n===void 0?!1:n,o=t.colHeader,a=o===void 0?!1:o,l=t.currentRow,s=l===void 0?!1:l,u=t.currentCol,f=u===void 0?!1:u;return{rowHeader:i,colHeader:a,currentRow:s,currentCol:f}},e.prototype.getHoverAfterScroll=function(){return this.spreadsheet.options.interaction.hoverAfterScroll},e.prototype.getHoverHighlight=function(){var r=this.spreadsheet.options.interaction.hoverHighlight;if(Br(r))return{rowHeader:r,colHeader:r,currentRow:r,currentCol:r};var t=r??{},n=t.rowHeader,i=n===void 0?!1:n,o=t.colHeader,a=o===void 0?!1:o,l=t.currentRow,s=l===void 0?!1:l,u=t.currentCol,f=u===void 0?!1:u;return{rowHeader:i,colHeader:a,currentRow:s,currentCol:f}},e.prototype.getBrushSelection=function(){var r=this.spreadsheet.options.interaction.brushSelection;if(Br(r))return{data:r,row:r,col:r};var t=r??{},n=t.data,i=n===void 0?!1:n,o=t.row,a=o===void 0?!1:o,l=t.col,s=l===void 0?!1:l;return{data:i,row:a,col:s}},e}(),RN=function(){function e(r){var t=this;this.viewport=window,this.isDevicePixelRatioChange=!1,this.init=function(){t.initDevicePixelRatioListener(),t.initDeviceZoomListener()},this.destroy=function(){t.removeDevicePixelRatioListener(),t.removeDeviceZoomListener()},this.removeDevicePixelRatioListener=function(){var n;!((n=t.devicePixelRatioMedia)===null||n===void 0)&&n.removeEventListener?t.devicePixelRatioMedia.removeEventListener("change",t.renderByDevicePixelRatioChanged):t.devicePixelRatioMedia.removeListener(t.renderByDevicePixelRatioChanged)},this.initDeviceZoomListener=function(){var n,i;nt()||(i=(n=t.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.addEventListener("resize",t.renderByZoomScaleWithoutResizeEffect)},this.removeDeviceZoomListener=function(){var n,i;nt()||(i=(n=t.viewport)===null||n===void 0?void 0:n.visualViewport)===null||i===void 0||i.removeEventListener("resize",t.renderByZoomScaleWithoutResizeEffect)},this.renderByZoomScaleWithoutResizeEffect=function(n){t.isDevicePixelRatioChange=!1,t.renderByZoomScale(n)},this.renderByDevicePixelRatioChanged=function(){t.isDevicePixelRatioChange=!0,t.renderByDevicePixelRatio()},this.renderByDevicePixelRatio=function(n){n===void 0&&(n=window.devicePixelRatio);var i=t.spreadsheet,o=i.container,a=i.options,l=a.width,s=a.height,u=a.devicePixelRatio,f=t.spreadsheet.getCanvasElement(),c=o.get("pixelRatio");if(!(c===n||!f)){var h=Math.max(n,u,tg);o.set("pixelRatio",h),o.changeSize(l,s),t.spreadsheet.render(!1)}},this.renderByZoomScale=No(function(n){var i=Math.ceil(n.target.scale);i>=1&&!t.isDevicePixelRatioChange&&t.renderByDevicePixelRatio(i)},350),this.spreadsheet=r}return e.prototype.initDevicePixelRatioListener=function(){var r;this.devicePixelRatioMedia=window.matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)")),!((r=this.devicePixelRatioMedia)===null||r===void 0)&&r.addEventListener?this.devicePixelRatioMedia.addEventListener("change",this.renderByDevicePixelRatioChanged):this.devicePixelRatioMedia.addListener(this.renderByDevicePixelRatioChanged)},e}(),Gu=function(){function e(r){this.visible=!1,this.position={x:0,y:0},this.spreadsheet=r}return e.prototype.show=function(r){var t,n,i,o=r.position,a=r.options,l=r.content,s=r.event,u=Dy(a).enterable,f=this.spreadsheet.options.tooltip||{},c=f.autoAdjustBoundary,h=f.adjustPosition;this.visible=!0,this.options=r;var d=this.getContainer();this.renderContent(l);var v=I7({spreadsheet:this.spreadsheet,position:o,tooltipContainer:d,autoAdjustBoundary:c}),p=v.x,g=v.y;this.position=(t=h==null?void 0:h({position:{x:p,y:g},event:s}))!==null&&t!==void 0?t:{x:p,y:g},La(d,{style:{left:"".concat((n=this.position)===null||n===void 0?void 0:n.x,"px"),top:"".concat((i=this.position)===null||i===void 0?void 0:i.y,"px"),pointerEvents:u?"all":"none"},visible:!0})},e.prototype.hide=function(){this.visible=!1,this.container&&(La(this.container,{style:{pointerEvents:"none"},visible:!1}),this.resetPosition())},e.prototype.destroy=function(){var r,t;this.visible=!1,this.container&&(this.resetPosition(),(t=(r=this.container).remove)===null||t===void 0||t.call(r),this.container=null)},e.prototype.renderContent=function(r){if(this.container){this.clearContent();var t=(this.spreadsheet.options.tooltip||{}).content,n=r??t;if(!rt(n)){if(typeof n=="string"){this.container.innerHTML=n;return}n instanceof Element&&this.container.appendChild(n)}}},e.prototype.clearContent=function(){this.container&&(this.container.innerHTML="")},e.prototype.disablePointerEvent=function(){this.container&&this.container.style.pointerEvents!=="none"&&La(this.container,{style:{pointerEvents:"none"}})},e.prototype.resetPosition=function(){this.position={x:0,y:0}},e.prototype.getContainer=function(){var r;if(!this.container){var t=this.spreadsheet.options.tooltip,n=((r=t.getContainer)===null||r===void 0?void 0:r.call(t))||document.body,i=document.createElement("div");return La(i,{style:t.style,className:[Ec].concat(t.className)}),n.appendChild(i),this.container=i,this.container}return this.container},e}(),Vy=function(e){Q(r,e);function r(t,n,i){var o=e.call(this)||this;return o.store=new v9,o.untypedOn=o.on,o.untypedEmit=o.emit,o.on=function(a,l){return o.untypedOn(a,l)},o.emit=function(a){for(var l=[],s=1;s<arguments.length;s++)l[s-1]=arguments[s];return o.untypedEmit.apply(o,$([a],I(l),!1))},o.initHiddenColumnsDetail=function(){var a=o.options.interaction.hiddenColumnFields,l=o.store.get("hiddenColumnsDetail");H(a)&&H(l)||Nc(o,a,!0)},o.measureText=si(function(a,l){var s;if(a===void 0&&(a=""),!l)return null;var u=(s=o.getCanvasElement())===null||s===void 0?void 0:s.getContext("2d"),f=l,c=f.fontSize,h=f.fontFamily,d=f.fontWeight,v=f.fontStyle,p=f.fontVariant;return u.font=[v,p,d,"".concat(c,"px"),h].join(" ").trim(),u.measureText(String(a))},function(a,l){return $([a],I(Kr(l)),!1).join("")}),o.measureTextWidth=function(a,l){a===void 0&&(a="");var s=o.measureText(a,l);return(s==null?void 0:s.width)||0},o.measureTextHeight=function(a,l){a===void 0&&(a="");var s=o.measureText(a,l);return s?s.actualBoundingBoxAscent+s.actualBoundingBoxDescent:0},o.measureTextWidthRoughly=function(a,l){var s,u;l===void 0&&(l={});var f=o.measureTextWidth("a",l),c=o.measureTextWidth("蚂",l),h=0;if(!a)return h;try{for(var d=tr(a),v=d.next();!v.done;v=d.next()){var p=v.value,g=p.charCodeAt(0);h+=g>=0&&g<=255?f:c}}catch(C){s={error:C}}finally{try{v&&!v.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return h},o.dataCfg=Ls(n),o.options=tp(i),o.dataSet=o.getDataSet(o.options),o.setDebug(),o.initTooltip(),o.initGroups(t),o.bindEvents(),o.initInteraction(),o.initTheme(),o.initHdAdapter(),o.registerIcons(),o.setOverscrollBehavior(),o}return r.prototype.setOverscrollBehavior=function(){var t=this.options.interaction.overscrollBehavior,n=window.getComputedStyle(document.body).getPropertyValue("overscroll-behavior"),i=n&&n!=="auto";i?this.store.set("initOverscrollBehavior",n):t&&(document.body.style.overscrollBehavior=t)},r.prototype.restoreOverscrollBehavior=function(){document.body.style.overscrollBehavior=this.store.get("initOverscrollBehavior")||""},r.prototype.setDebug=function(){en.getInstance().setDebug(this.options.debug)},r.prototype.initTheme=function(){this.setThemeCfg({name:"default"})},r.prototype.getMountContainer=function(t){var n=Ki(t)?document.querySelector(t):t;if(!n)throw new Error("Target mount container is not a DOM element");return n},r.prototype.initHdAdapter=function(){this.options.hdAdapter&&(this.hdAdapter=new RN(this),this.hdAdapter.init())},r.prototype.initInteraction=function(){var t,n;(n=(t=this.interaction)===null||t===void 0?void 0:t.destroy)===null||n===void 0||n.call(t),this.interaction=new AN(this)},r.prototype.initTooltip=function(){var t,n,i,o;(n=(t=this.tooltip)===null||t===void 0?void 0:t.destroy)===null||n===void 0||n.call(t),this.tooltip=this.renderTooltip(),this.tooltip instanceof Gu||console.warn("[Custom Tooltip]: ".concat((o=(i=this.tooltip)===null||i===void 0?void 0:i.constructor)===null||o===void 0?void 0:o.toString()," should be extends from BaseTooltip"))},r.prototype.renderTooltip=function(){var t,n;return((n=(t=this.options.tooltip)===null||t===void 0?void 0:t.renderTooltip)===null||n===void 0?void 0:n.call(t,this))||new Gu(this)},r.prototype.showTooltip=function(t){var n,i,o=t.content,a=t.event,l=this.getCell(a==null?void 0:a.target),s=ft(o)?o(l,t):o;(i=(n=this.tooltip).show)===null||i===void 0||i.call(n,L(L({},t),{content:s}))},r.prototype.showTooltipWithInfo=function(t,n,i){var o,a=Vc(this,t),l=a.showTooltip,s=a.content;if(l){var u=this.getCell(t==null?void 0:t.target),f=(o=i==null?void 0:i.data)!==null&&o!==void 0?o:z7({spreadsheet:this,cellInfos:n,targetCell:u,options:L({enableFormat:!0},i)});this.showTooltip({data:f,position:{x:t.clientX,y:t.clientY},options:L({enterable:!0},i),event:t,content:s})}},r.prototype.hideTooltip=function(){var t,n;(n=(t=this.tooltip).hide)===null||n===void 0||n.call(t)},r.prototype.destroyTooltip=function(){var t,n;(n=(t=this.tooltip).destroy)===null||n===void 0||n.call(t)},r.prototype.registerIcons=function(){var t=this.options.customSVGIcons;H(t)||te(t,function(n){kC(n.name,n.svg)})},r.prototype.setDataCfg=function(t,n){this.store.set("originalDataCfg",t),n?this.dataCfg=Ls(t):this.dataCfg=Ls(this.dataCfg,t),U7(this)},r.prototype.setOptions=function(t,n){var i;this.hideTooltip(),n?this.options=tp(t):this.options=Lr(this.options,t),(n||!((i=t.tooltip)===null||i===void 0)&&i.renderTooltip)&&this.initTooltip(),this.registerIcons()},r.prototype.render=function(t,n){if(t===void 0&&(t=!0),n===void 0&&(n={}),!!this.getCanvasElement()){var i=n.reBuildDataSet,o=i===void 0?!1:i,a=n.reBuildHiddenColumnsDetail,l=a===void 0?!0:a;this.emit(T.LAYOUT_BEFORE_RENDER),o&&(this.dataSet=this.getDataSet(this.options)),t&&(this.clearDrillDownData("",!0),this.dataSet.setDataCfg(this.dataCfg)),this.buildFacet(),l&&this.initHiddenColumnsDetail(),this.emit(T.LAYOUT_AFTER_RENDER)}},r.prototype.destroy=function(){var t,n,i,o,a;this.restoreOverscrollBehavior(),this.emit(T.LAYOUT_DESTROY),(t=this.facet)===null||t===void 0||t.destroy(),(n=this.hdAdapter)===null||n===void 0||n.destroy(),(i=this.interaction)===null||i===void 0||i.destroy(),(o=this.store)===null||o===void 0||o.clear(),this.destroyTooltip(),this.clearCanvasEvent(),(a=this.container)===null||a===void 0||a.destroy(),M9()},r.prototype.setThemeCfg=function(t){t===void 0&&(t={});var n=(t==null?void 0:t.theme)||{},i=WD(L(L({},t),{spreadsheet:this}));this.theme=Lr(i,n)},r.prototype.setTheme=function(t){this.theme=Lr(this.theme,t)},r.prototype.updatePagination=function(t){this.options=Lr(this.options,{pagination:t}),this.store.set("scrollX",0),this.store.set("scrollY",0)},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.changeSize=function(t,n){t===void 0&&(t=this.options.width),n===void 0&&(n=this.options.height),this.changeSheetSize(t,n)},r.prototype.changeSheetSize=function(t,n){t===void 0&&(t=this.options.width),n===void 0&&(n=this.options.height);var i=this.getCanvasElement(),o=this.container.get("width"),a=this.container.get("height"),l=t!==o||n!==a;!l||!i||(this.options=Lr(this.options,{width:t,height:n}),this.container.changeSize(t,n))},r.prototype.getCanvasElement=function(){return this.container.get("el")},r.prototype.getLayoutWidthType=function(){return this.options.style.layoutWidthType},r.prototype.getRowNodes=function(t){return t===void 0&&(t=-1),t===-1?this.facet.layoutResult.rowNodes:this.facet.layoutResult.rowNodes.filter(function(n){return n.level===t})},r.prototype.getRowLeafNodes=function(){var t;return((t=this.facet)===null||t===void 0?void 0:t.layoutResult.rowLeafNodes)||[]},r.prototype.getColumnNodes=function(t){var n;t===void 0&&(t=-1);var i=((n=this.facet)===null||n===void 0?void 0:n.layoutResult.colNodes)||[];return t===-1?i:i.filter(function(o){return o.level===t})},r.prototype.getColumnLeafNodes=function(){var t;return((t=this.facet)===null||t===void 0?void 0:t.layoutResult.colLeafNodes)||[]},r.prototype.updateScrollOffset=function(t){var n={offsetX:{value:void 0,animate:!1},offsetY:{value:void 0,animate:!1},rowHeaderOffsetX:{value:void 0,animate:!1}};this.facet.updateScrollOffset(Lr(n,t))},r.prototype.getTooltipDataItemMappingCallback=function(){var t;return(t=this.options)===null||t===void 0?void 0:t.mappingDisplayDataItem},r.prototype.getCell=function(t){for(var n,i=t;i&&!(i instanceof Cd);){if(i instanceof $c)return i;i=(n=i.get)===null||n===void 0?void 0:n.call(i,"parent")}return null},r.prototype.getCellType=function(t){var n=this.getCell(t);return n==null?void 0:n.cellType},r.prototype.getTotalsConfig=function(t){var n=this.options.totals,i=this.dataSet.fields.rows,o=j(n,Tt(i,t)?"row":"col",{}),a=o.showSubTotals&&Tt(o.subTotalsDimensions,t)?o.showSubTotals:!1;return L(L({label:ke("总计"),subLabel:ke("小计"),totalsGroupDimensions:[],subTotalsGroupDimensions:[]},o),{showSubTotals:a})},r.prototype.initGroups=function(t){var n=this.options,i=n.width,o=n.height,a=n.supportCSSTransform,l=n.devicePixelRatio;this.container=new Cd({container:this.getMountContainer(t),width:i,height:o,localRefresh:!1,supportCSSTransform:a,pixelRatio:Math.max(l,tg)}),this.backgroundGroup=this.container.addGroup({name:Kx,zIndex:Wx}),this.panelGroup=this.container.addGroup({name:Qx,zIndex:Vx}),this.foregroundGroup=this.container.addGroup({name:Zx,zIndex:Gx}),this.initPanelGroupChildren(),this.updateContainerStyle()},r.prototype.updateContainerStyle=function(){var t=this.getCanvasElement();t&&(t.style.display="block")},r.prototype.initPanelGroupChildren=function(){this.panelScrollGroup=new hN({name:Jx,zIndex:jx,s2:this}),this.panelGroup.add(this.panelScrollGroup)},r.prototype.getInitColumnLeafNodes=function(){return this.store.get("initColumnLeafNodes",[])},r.prototype.clearColumnLeafNodes=function(){this.store.set("initColumnLeafNodes",void 0)},r.prototype.clearCanvasEvent=function(){var t=this,n=this.getEvents();G1(n,function(i,o){t.off(o)})},r.prototype.updateSortMethodMap=function(t,n,i){var o;i===void 0&&(i=!1);var a=i?null:this.store.get("sortMethodMap");this.store.set("sortMethodMap",L(L({},a),(o={},o[t]=n,o)))},r.prototype.getMenuDefaultSelectedKeys=function(t){var n=this.store.get("sortMethodMap"),i=j(n,t);return i?[i]:[]},r}(hl),ON=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.getDataSet=function(t){var n=t.dataSet,i=t.hierarchyType;if(n)return n(this);var o=i==="customTree"?new j7(this):new ku(this);return o},r.prototype.getContentHeight=function(){return this.facet.getContentHeight()},r.prototype.isPivotMode=function(){return!0},r.prototype.isTableMode=function(){return!1},r.prototype.isHierarchyTreeType=function(){var t=this.options.hierarchyType;return t==="tree"||t==="customTree"},r.prototype.isScrollContainsRowHeader=function(){return!this.isFrozenRowHeader()},r.prototype.isFrozenRowHeader=function(){var t;return(t=this.options)===null||t===void 0?void 0:t.frozenRowHeader},r.prototype.isValueInCols=function(){return this.dataSet.fields.valueInCols},r.prototype.clearDrillDownData=function(t,n){this.dataSet instanceof ku&&(this.dataSet.clearDrillDownData(t),n||(this.interaction.reset(),this.render(!1)))},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,n=this.dataSet,i=n.fields,o=n.meta,a=this.options,l=a.style,s=a.dataCell,u=function(f){return new Fn(f,t)};return L(L(L(L({},this.options),i),l),{meta:o,spreadsheet:this,dataSet:this.dataSet,dataCell:s??u})},r.prototype.buildFacet=function(){var t,n=this.getFacetCfgFromDataSetAndOptions();(t=this.facet)===null||t===void 0||t.destroy(),this.facet=new uN(n),this.facet.render()},r.prototype.bindEvents=function(){this.off(T.ROW_CELL_COLLAPSE_TREE_ROWS),this.off(T.LAYOUT_TREE_ROWS_COLLAPSE_ALL),this.on(T.ROW_CELL_COLLAPSE_TREE_ROWS,this.handleRowCellCollapseTreeRows),this.on(T.LAYOUT_TREE_ROWS_COLLAPSE_ALL,this.handleTreeRowsCollapseAll)},r.prototype.handleRowCellCollapseTreeRows=function(t){var n,i=t.id,o=t.isCollapsed,a={style:{collapsedRows:(n={},n[i]=o,n)}};this.emit(T.LAYOUT_COLLAPSE_ROWS,{collapsedRows:a.style.collapsedRows,meta:t==null?void 0:t.node}),this.setOptions(a),this.render(!1),this.emit(T.LAYOUT_AFTER_COLLAPSE_ROWS,{collapsedRows:a.style.collapsedRows,meta:t==null?void 0:t.node})},r.prototype.handleTreeRowsCollapseAll=function(t){var n={style:{hierarchyCollapse:!t,collapsedRows:null,rowExpandDepth:null}};this.setOptions(n),this.render(!1)},r.prototype.groupSortByMethod=function(t,n){var i=this.dataCfg.fields,o=i.rows,a=i.columns,l=this.options.style.colCfg.hideMeasureColumn,s=this.isValueInCols()?Ie(o):Ie(a),u=n.query,f=n.value,c=Qo(u),h=f;l&&this.isValueInCols()&&(h=this.dataSet.fields.values[0],c[fe]=h);var d={sortFieldId:s,sortMethod:t,sortByMeasure:h,query:c},v=this.dataCfg.sortParams.filter(function(g){return(g==null?void 0:g.sortFieldId)!==s});this.updateSortMethodMap(n.id,t,!0);var p=$($([],I(v),!1),[d],!1);this.emit(T.RANGE_SORT,p),this.setDataCfg(L(L({},this.dataCfg),{sortParams:p})),this.render()},r.prototype.handleGroupSort=function(t,n){var i=this;t.stopPropagation(),this.interaction.addIntercepts([le.HOVER]);var o=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),a={onClick:function(l){var s=l.key,u=s;i.groupSortByMethod(u,n),i.emit(T.RANGE_SORTED,t)},menus:FD(),defaultSelectedKeys:o};this.showTooltipWithInfo(t,[],{operator:a,onlyMenu:!0,forceRender:!0})},r}(Vy),IN=function(e){Q(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(Xy),MN=function(e){Q(r,e);function r(){var t=e!==null&&e.apply(this,arguments)||this;return t.onSortTooltipClick=function(n,i){var o=n.key,a=i.field,l={sortFieldId:a,sortMethod:o};t.updateSortMethodMap(i.id,o),t.emit(T.RANGE_SORT,[l])},t}return r.prototype.getDataSet=function(t){var n=t.dataSet;return n?n(this):new V7(this)},r.prototype.isPivotMode=function(){return!1},r.prototype.isTableMode=function(){return!0},r.prototype.isHierarchyTreeType=function(){return!1},r.prototype.isScrollContainsRowHeader=function(){return!1},r.prototype.isFrozenRowHeader=function(){return!1},r.prototype.clearDrillDownData=function(){},r.prototype.isValueInCols=function(){return!1},r.prototype.bindEvents=function(){},r.prototype.initPanelGroupChildren=function(){var t,n=this;e.prototype.initPanelGroupChildren.call(this);var i={zIndex:qx,s2:this};t=I([e2,j0,t2,r2,n2,i2].map(function(o){var a=new IN(L({name:o},i));return n.panelGroup.add(a),a}),6),this.frozenRowGroup=t[0],this.frozenColGroup=t[1],this.frozenTrailingRowGroup=t[2],this.frozenTrailingColGroup=t[3],this.frozenTopGroup=t[4],this.frozenBottomGroup=t[5]},r.prototype.getFacetCfgFromDataSetAndOptions=function(){var t=this,n=this.dataSet,i=n.fields,o=n.meta,a=this.options,l=a.style,s=a.dataCell,u=function(f){return t.options.showSeriesNumber&&f.colIndex===0?new yy(f,t):new Ul(f,t)};return L(L(L(L({},this.options),i),l),{meta:o,spreadsheet:this,dataSet:this.dataSet,dataCell:s??u})},r.prototype.buildFacet=function(){var t,n=this.getFacetCfgFromDataSetAndOptions();(t=this.facet)===null||t===void 0||t.destroy(),this.facet=new cN(n),this.facet.render()},r.prototype.clearFrozenGroups=function(){this.frozenRowGroup.set("children",[]),this.frozenColGroup.set("children",[]),this.frozenTrailingRowGroup.set("children",[]),this.frozenTrailingColGroup.set("children",[]),this.frozenTopGroup.set("children",[]),this.frozenBottomGroup.set("children",[])},r.prototype.destroy=function(){e.prototype.destroy.call(this),this.clearFrozenGroups(),this.off(T.RANGE_SORT),this.off(T.RANGE_FILTER)},r.prototype.handleGroupSort=function(t,n){var i=this;t.stopPropagation(),this.interaction.addIntercepts([le.HOVER]);var o=this.getMenuDefaultSelectedKeys(n==null?void 0:n.id),a={onClick:function(l){var s=l.key,u=s;i.onSortTooltipClick({key:u},n)},menus:HD(),defaultSelectedKeys:o};this.showTooltipWithInfo(t,[],{operator:a,onlyMenu:!0,forceRender:!0})},r}(Vy),BN=Object.defineProperty,DN=Object.defineProperties,$N=Object.getOwnPropertyDescriptors,fp=Object.getOwnPropertySymbols,PN=Object.prototype.hasOwnProperty,NN=Object.prototype.propertyIsEnumerable,cp=(e,r,t)=>r in e?BN(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,Zc=(e,r)=>{for(var t in r||(r={}))PN.call(r,t)&&cp(e,t,r[t]);if(fp)for(var t of fp(r))NN.call(r,t)&&cp(e,t,r[t]);return e},Qc=(e,r)=>DN(e,$N(r));const FN={选择分析信息:"Select Analysis Information",切换指标:"Switch indicator",确定:"Ok",取消:"Cancel",重置:"Reset",请输入关键字搜索:"Please enter a keyword search",搜索:"Search",恢复:"Recover","已选 {} 项":"selected {} item",所选项:"selected items",选择下钻维度:"Select drill down dimension",恢复默认:"Restore default",搜索字段:"Search field",行列切换:"Switch Dimensions",行头:"Rows",列头:"Cols",值:"Values",展开子项:"Expand Children",首字母:"Alphabetical order",手动排序:"Custom order",其他字段:"Other field",高级排序:"Advanced order",设置顺序:"SetManual",可选字段:"Fields","按以下规则进行排序（优先级由低到高）":"Order according to the following rules (from low to high priority)",按:"By",说明:"Description",复制原始数据:"Copy raw data",复制格式化数据:"Copy formatted data",下载原始数据:"Download raw data",下载格式化数据:"Download formatted data",操作成功:"Operation successful",操作失败:"Operation failed",时间:"Date",指标:"Measure",目标值:"Target Value"},HN={选择分析信息:"选择分析信息",切换指标:"切换指标",确定:"确定",取消:"取消",重置:"重置",请输入关键字搜索:"请输入关键字搜索",搜索:"搜索",恢复:"恢复","已选 {} 项":"已选 {} 项",所选项:"所选项",选择下钻维度:"选择下钻维度",恢复默认:"恢复默认",搜索字段:"搜索字段",行列切换:"行列切换",行头:"行头",列头:"列头",值:"值",展开子项:"展开子项",首字母:"首字母",手动排序:"手动排序",其他字段:"其他字段",高级排序:"高级排序",设置顺序:"设置顺序",可选字段:"可选字段","按以下规则进行排序（优先级由低到高）":"按以下规则进行排序（优先级由低到高）",按:"按",说明:"说明",复制原始数据:"复制原始数据",复制格式化数据:"复制格式化数据",下载原始数据:"下载原始数据",下载格式化数据:"下载格式化数据",操作成功:"操作成功",操作失败:"操作失败",时间:"时间",指标:"指标",目标值:"目标值"},zN={zh_CN:HN,en_US:FN},kN={tooltip:{showTooltip:!0,autoAdjustBoundary:"body",operation:{hiddenColumns:!0,trend:!1,sort:!0}},showDefaultHeaderActionIcon:!0},WN=200,GN="s2-drill-down",UN=(...e)=>Lr(rg,kN,...e);var YN=typeof global=="object"&&global&&global.Object===Object&&global,jy=YN,XN=typeof self=="object"&&self&&self.Object===Object&&self,VN=jy||XN||Function("return this")(),br=VN,jN=br.Symbol,kr=jN,qy=Object.prototype,qN=qy.hasOwnProperty,KN=qy.toString,lo=kr?kr.toStringTag:void 0;function ZN(e){var r=qN.call(e,lo),t=e[lo];try{e[lo]=void 0;var n=!0}catch{}var i=KN.call(e);return n&&(r?e[lo]=t:delete e[lo]),i}var QN=Object.prototype,JN=QN.toString;function eF(e){return JN.call(e)}var tF="[object Null]",rF="[object Undefined]",hp=kr?kr.toStringTag:void 0;function zn(e){return e==null?e===void 0?rF:tF:hp&&hp in Object(e)?ZN(e):eF(e)}function Wr(e){return e!=null&&typeof e=="object"}var nF="[object Symbol]";function ql(e){return typeof e=="symbol"||Wr(e)&&zn(e)==nF}function iF(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}var oF=Array.isArray,Ht=oF,aF=1/0,dp=kr?kr.prototype:void 0,vp=dp?dp.toString:void 0;function Ky(e){if(typeof e=="string")return e;if(Ht(e))return iF(e,Ky)+"";if(ql(e))return vp?vp.call(e):"";var r=e+"";return r=="0"&&1/e==-aF?"-0":r}var lF=/\s/;function sF(e){for(var r=e.length;r--&&lF.test(e.charAt(r)););return r}var uF=/^\s+/;function fF(e){return e&&e.slice(0,sF(e)+1).replace(uF,"")}function sn(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var pp=0/0,cF=/^[-+]0x[0-9a-f]+$/i,hF=/^0b[01]+$/i,dF=/^0o[0-7]+$/i,vF=parseInt;function gp(e){if(typeof e=="number")return e;if(ql(e))return pp;if(sn(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=sn(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=fF(e);var t=hF.test(e);return t||dF.test(e)?vF(e.slice(2),t?2:8):cF.test(e)?pp:+e}function pF(e){return e}var gF="[object AsyncFunction]",CF="[object Function]",yF="[object GeneratorFunction]",mF="[object Proxy]";function Zy(e){if(!sn(e))return!1;var r=zn(e);return r==CF||r==yF||r==gF||r==mF}var wF=br["__core-js_shared__"],Os=wF,Cp=function(){var e=/[^.]+$/.exec(Os&&Os.keys&&Os.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _F(e){return!!Cp&&Cp in e}var SF=Function.prototype,xF=SF.toString;function ci(e){if(e!=null){try{return xF.call(e)}catch{}try{return e+""}catch{}}return""}var TF=/[\\^$.*+?()[\]{}|]/g,EF=/^\[object .+?Constructor\]$/,bF=Function.prototype,LF=Object.prototype,AF=bF.toString,RF=LF.hasOwnProperty,OF=RegExp("^"+AF.call(RF).replace(TF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function IF(e){if(!sn(e)||_F(e))return!1;var r=Zy(e)?OF:EF;return r.test(ci(e))}function MF(e,r){return e==null?void 0:e[r]}function hi(e,r){var t=MF(e,r);return IF(t)?t:void 0}var BF=hi(br,"WeakMap"),Uu=BF,yp=Object.create,DF=function(){function e(){}return function(r){if(!sn(r))return{};if(yp)return yp(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),$F=DF;function PF(e,r){var t=-1,n=e.length;for(r||(r=Array(n));++t<n;)r[t]=e[t];return r}var NF=function(){try{var e=hi(Object,"defineProperty");return e({},"",{}),e}catch{}}(),mp=NF;function FF(e,r){for(var t=-1,n=e==null?0:e.length;++t<n&&r(e[t],t,e)!==!1;);return e}var HF=9007199254740991,zF=/^(?:0|[1-9]\d*)$/;function Qy(e,r){var t=typeof e;return r=r??HF,!!r&&(t=="number"||t!="symbol"&&zF.test(e))&&e>-1&&e%1==0&&e<r}function Jy(e,r,t){r=="__proto__"&&mp?mp(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function Jc(e,r){return e===r||e!==e&&r!==r}var kF=Object.prototype,WF=kF.hasOwnProperty;function em(e,r,t){var n=e[r];(!(WF.call(e,r)&&Jc(n,t))||t===void 0&&!(r in e))&&Jy(e,r,t)}function Kl(e,r,t,n){var i=!t;t||(t={});for(var o=-1,a=r.length;++o<a;){var l=r[o],s=n?n(t[l],e[l],l,t,e):void 0;s===void 0&&(s=e[l]),i?Jy(t,l,s):em(t,l,s)}return t}var GF=9007199254740991;function eh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=GF}function ua(e){return e!=null&&eh(e.length)&&!Zy(e)}var UF=Object.prototype;function Zl(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||UF;return e===t}function YF(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}var XF="[object Arguments]";function wp(e){return Wr(e)&&zn(e)==XF}var tm=Object.prototype,VF=tm.hasOwnProperty,jF=tm.propertyIsEnumerable,qF=wp(function(){return arguments}())?wp:function(e){return Wr(e)&&VF.call(e,"callee")&&!jF.call(e,"callee")},th=qF;function KF(){return!1}var rm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_p=rm&&typeof module=="object"&&module&&!module.nodeType&&module,ZF=_p&&_p.exports===rm,Sp=ZF?br.Buffer:void 0,QF=Sp?Sp.isBuffer:void 0,JF=QF||KF,Yo=JF,eH="[object Arguments]",tH="[object Array]",rH="[object Boolean]",nH="[object Date]",iH="[object Error]",oH="[object Function]",aH="[object Map]",lH="[object Number]",sH="[object Object]",uH="[object RegExp]",fH="[object Set]",cH="[object String]",hH="[object WeakMap]",dH="[object ArrayBuffer]",vH="[object DataView]",pH="[object Float32Array]",gH="[object Float64Array]",CH="[object Int8Array]",yH="[object Int16Array]",mH="[object Int32Array]",wH="[object Uint8Array]",_H="[object Uint8ClampedArray]",SH="[object Uint16Array]",xH="[object Uint32Array]",Ne={};Ne[pH]=Ne[gH]=Ne[CH]=Ne[yH]=Ne[mH]=Ne[wH]=Ne[_H]=Ne[SH]=Ne[xH]=!0;Ne[eH]=Ne[tH]=Ne[dH]=Ne[rH]=Ne[vH]=Ne[nH]=Ne[iH]=Ne[oH]=Ne[aH]=Ne[lH]=Ne[sH]=Ne[uH]=Ne[fH]=Ne[cH]=Ne[hH]=!1;function TH(e){return Wr(e)&&eh(e.length)&&!!Ne[zn(e)]}function rh(e){return function(r){return e(r)}}var nm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,To=nm&&typeof module=="object"&&module&&!module.nodeType&&module,EH=To&&To.exports===nm,Is=EH&&jy.process,bH=function(){try{var e=To&&To.require&&To.require("util").types;return e||Is&&Is.binding&&Is.binding("util")}catch{}}(),Hi=bH,xp=Hi&&Hi.isTypedArray,LH=xp?rh(xp):TH,nh=LH,AH=Object.prototype,RH=AH.hasOwnProperty;function im(e,r){var t=Ht(e),n=!t&&th(e),i=!t&&!n&&Yo(e),o=!t&&!n&&!i&&nh(e),a=t||n||i||o,l=a?YF(e.length,String):[],s=l.length;for(var u in e)(r||RH.call(e,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Qy(u,s)))&&l.push(u);return l}function om(e,r){return function(t){return e(r(t))}}var OH=om(Object.keys,Object),IH=OH,MH=Object.prototype,BH=MH.hasOwnProperty;function ih(e){if(!Zl(e))return IH(e);var r=[];for(var t in Object(e))BH.call(e,t)&&t!="constructor"&&r.push(t);return r}function fa(e){return ua(e)?im(e):ih(e)}function DH(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var $H=Object.prototype,PH=$H.hasOwnProperty;function NH(e){if(!sn(e))return DH(e);var r=Zl(e),t=[];for(var n in e)n=="constructor"&&(r||!PH.call(e,n))||t.push(n);return t}function oh(e){return ua(e)?im(e,!0):NH(e)}var FH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,HH=/^\w*$/;function ah(e,r){if(Ht(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||ql(e)?!0:HH.test(e)||!FH.test(e)||r!=null&&e in Object(r)}var zH=hi(Object,"create"),Xo=zH;function kH(){this.__data__=Xo?Xo(null):{},this.size=0}function WH(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var GH="__lodash_hash_undefined__",UH=Object.prototype,YH=UH.hasOwnProperty;function XH(e){var r=this.__data__;if(Xo){var t=r[e];return t===GH?void 0:t}return YH.call(r,e)?r[e]:void 0}var VH=Object.prototype,jH=VH.hasOwnProperty;function qH(e){var r=this.__data__;return Xo?r[e]!==void 0:jH.call(r,e)}var KH="__lodash_hash_undefined__";function ZH(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Xo&&r===void 0?KH:r,this}function ii(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}ii.prototype.clear=kH;ii.prototype.delete=WH;ii.prototype.get=XH;ii.prototype.has=qH;ii.prototype.set=ZH;function QH(){this.__data__=[],this.size=0}function Ql(e,r){for(var t=e.length;t--;)if(Jc(e[t][0],r))return t;return-1}var JH=Array.prototype,ez=JH.splice;function tz(e){var r=this.__data__,t=Ql(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():ez.call(r,t,1),--this.size,!0}function rz(e){var r=this.__data__,t=Ql(r,e);return t<0?void 0:r[t][1]}function nz(e){return Ql(this.__data__,e)>-1}function iz(e,r){var t=this.__data__,n=Ql(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}function gn(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}gn.prototype.clear=QH;gn.prototype.delete=tz;gn.prototype.get=rz;gn.prototype.has=nz;gn.prototype.set=iz;var oz=hi(br,"Map"),Vo=oz;function az(){this.size=0,this.__data__={hash:new ii,map:new(Vo||gn),string:new ii}}function lz(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function Jl(e,r){var t=e.__data__;return lz(r)?t[typeof r=="string"?"string":"hash"]:t.map}function sz(e){var r=Jl(this,e).delete(e);return this.size-=r?1:0,r}function uz(e){return Jl(this,e).get(e)}function fz(e){return Jl(this,e).has(e)}function cz(e,r){var t=Jl(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}function Cn(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}Cn.prototype.clear=az;Cn.prototype.delete=sz;Cn.prototype.get=uz;Cn.prototype.has=fz;Cn.prototype.set=cz;var hz="Expected a function";function lh(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(hz);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=t.cache;if(o.has(i))return o.get(i);var a=e.apply(this,n);return t.cache=o.set(i,a)||o,a};return t.cache=new(lh.Cache||Cn),t}lh.Cache=Cn;var dz=500;function vz(e){var r=lh(e,function(n){return t.size===dz&&t.clear(),n}),t=r.cache;return r}var pz=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gz=/\\(\\)?/g,Cz=vz(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(pz,function(t,n,i,o){r.push(i?o.replace(gz,"$1"):n||t)}),r}),yz=Cz;function mz(e){return e==null?"":Ky(e)}function am(e,r){return Ht(e)?e:ah(e,r)?[e]:yz(mz(e))}var wz=1/0;function es(e){if(typeof e=="string"||ql(e))return e;var r=e+"";return r=="0"&&1/e==-wz?"-0":r}function lm(e,r){r=am(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[es(r[t++])];return t&&t==n?e:void 0}function _z(e,r,t){var n=e==null?void 0:lm(e,r);return n===void 0?t:n}function sm(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}var Sz=om(Object.getPrototypeOf,Object),um=Sz,xz="\\ud800-\\udfff",Tz="\\u0300-\\u036f",Ez="\\ufe20-\\ufe2f",bz="\\u20d0-\\u20ff",Lz=Tz+Ez+bz,Az="\\ufe0e\\ufe0f",Rz="\\u200d",Oz=RegExp("["+Rz+xz+Lz+Az+"]");function Iz(e){return Oz.test(e)}function Mz(e,r,t,n){var i=-1,o=e==null?0:e.length;for(n&&o&&(t=e[++i]);++i<o;)t=r(t,e[i],i,e);return t}function Bz(){this.__data__=new gn,this.size=0}function Dz(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function $z(e){return this.__data__.get(e)}function Pz(e){return this.__data__.has(e)}var Nz=200;function Fz(e,r){var t=this.__data__;if(t instanceof gn){var n=t.__data__;if(!Vo||n.length<Nz-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Cn(n)}return t.set(e,r),this.size=t.size,this}function Fr(e){var r=this.__data__=new gn(e);this.size=r.size}Fr.prototype.clear=Bz;Fr.prototype.delete=Dz;Fr.prototype.get=$z;Fr.prototype.has=Pz;Fr.prototype.set=Fz;function Hz(e,r){return e&&Kl(r,fa(r),e)}function zz(e,r){return e&&Kl(r,oh(r),e)}var fm=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tp=fm&&typeof module=="object"&&module&&!module.nodeType&&module,kz=Tp&&Tp.exports===fm,Ep=kz?br.Buffer:void 0,bp=Ep?Ep.allocUnsafe:void 0;function Wz(e,r){if(r)return e.slice();var t=e.length,n=bp?bp(t):new e.constructor(t);return e.copy(n),n}function cm(e,r){for(var t=-1,n=e==null?0:e.length,i=0,o=[];++t<n;){var a=e[t];r(a,t,e)&&(o[i++]=a)}return o}function hm(){return[]}var Gz=Object.prototype,Uz=Gz.propertyIsEnumerable,Lp=Object.getOwnPropertySymbols,Yz=Lp?function(e){return e==null?[]:(e=Object(e),cm(Lp(e),function(r){return Uz.call(e,r)}))}:hm,sh=Yz;function Xz(e,r){return Kl(e,sh(e),r)}var Vz=Object.getOwnPropertySymbols,jz=Vz?function(e){for(var r=[];e;)sm(r,sh(e)),e=um(e);return r}:hm,dm=jz;function qz(e,r){return Kl(e,dm(e),r)}function vm(e,r,t){var n=r(e);return Ht(e)?n:sm(n,t(e))}function Yu(e){return vm(e,fa,sh)}function Kz(e){return vm(e,oh,dm)}var Zz=hi(br,"DataView"),Xu=Zz,Qz=hi(br,"Promise"),Vu=Qz,Jz=hi(br,"Set"),ju=Jz,Ap="[object Map]",ek="[object Object]",Rp="[object Promise]",Op="[object Set]",Ip="[object WeakMap]",Mp="[object DataView]",tk=ci(Xu),rk=ci(Vo),nk=ci(Vu),ik=ci(ju),ok=ci(Uu),Wn=zn;(Xu&&Wn(new Xu(new ArrayBuffer(1)))!=Mp||Vo&&Wn(new Vo)!=Ap||Vu&&Wn(Vu.resolve())!=Rp||ju&&Wn(new ju)!=Op||Uu&&Wn(new Uu)!=Ip)&&(Wn=function(e){var r=zn(e),t=r==ek?e.constructor:void 0,n=t?ci(t):"";if(n)switch(n){case tk:return Mp;case rk:return Ap;case nk:return Rp;case ik:return Op;case ok:return Ip}return r});var oi=Wn,ak=Object.prototype,lk=ak.hasOwnProperty;function sk(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&lk.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var uk=br.Uint8Array,ul=uk;function uh(e){var r=new e.constructor(e.byteLength);return new ul(r).set(new ul(e)),r}function fk(e,r){var t=r?uh(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var ck=/\w*$/;function hk(e){var r=new e.constructor(e.source,ck.exec(e));return r.lastIndex=e.lastIndex,r}var Bp=kr?kr.prototype:void 0,Dp=Bp?Bp.valueOf:void 0;function dk(e){return Dp?Object(Dp.call(e)):{}}function vk(e,r){var t=r?uh(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var pk="[object Boolean]",gk="[object Date]",Ck="[object Map]",yk="[object Number]",mk="[object RegExp]",wk="[object Set]",_k="[object String]",Sk="[object Symbol]",xk="[object ArrayBuffer]",Tk="[object DataView]",Ek="[object Float32Array]",bk="[object Float64Array]",Lk="[object Int8Array]",Ak="[object Int16Array]",Rk="[object Int32Array]",Ok="[object Uint8Array]",Ik="[object Uint8ClampedArray]",Mk="[object Uint16Array]",Bk="[object Uint32Array]";function Dk(e,r,t){var n=e.constructor;switch(r){case xk:return uh(e);case pk:case gk:return new n(+e);case Tk:return fk(e,t);case Ek:case bk:case Lk:case Ak:case Rk:case Ok:case Ik:case Mk:case Bk:return vk(e,t);case Ck:return new n;case yk:case _k:return new n(e);case mk:return hk(e);case wk:return new n;case Sk:return dk(e)}}function $k(e){return typeof e.constructor=="function"&&!Zl(e)?$F(um(e)):{}}var Pk="[object Map]";function Nk(e){return Wr(e)&&oi(e)==Pk}var $p=Hi&&Hi.isMap,Fk=$p?rh($p):Nk,Hk=Fk,zk="[object Set]";function kk(e){return Wr(e)&&oi(e)==zk}var Pp=Hi&&Hi.isSet,Wk=Pp?rh(Pp):kk,Gk=Wk,Uk=1,Yk=2,Xk=4,pm="[object Arguments]",Vk="[object Array]",jk="[object Boolean]",qk="[object Date]",Kk="[object Error]",gm="[object Function]",Zk="[object GeneratorFunction]",Qk="[object Map]",Jk="[object Number]",Cm="[object Object]",eW="[object RegExp]",tW="[object Set]",rW="[object String]",nW="[object Symbol]",iW="[object WeakMap]",oW="[object ArrayBuffer]",aW="[object DataView]",lW="[object Float32Array]",sW="[object Float64Array]",uW="[object Int8Array]",fW="[object Int16Array]",cW="[object Int32Array]",hW="[object Uint8Array]",dW="[object Uint8ClampedArray]",vW="[object Uint16Array]",pW="[object Uint32Array]",De={};De[pm]=De[Vk]=De[oW]=De[aW]=De[jk]=De[qk]=De[lW]=De[sW]=De[uW]=De[fW]=De[cW]=De[Qk]=De[Jk]=De[Cm]=De[eW]=De[tW]=De[rW]=De[nW]=De[hW]=De[dW]=De[vW]=De[pW]=!0;De[Kk]=De[gm]=De[iW]=!1;function Pa(e,r,t,n,i,o){var a,l=r&Uk,s=r&Yk,u=r&Xk;if(t&&(a=i?t(e,n,i,o):t(e)),a!==void 0)return a;if(!sn(e))return e;var f=Ht(e);if(f){if(a=sk(e),!l)return PF(e,a)}else{var c=oi(e),h=c==gm||c==Zk;if(Yo(e))return Wz(e,l);if(c==Cm||c==pm||h&&!i){if(a=s||h?{}:$k(e),!l)return s?qz(e,zz(a,e)):Xz(e,Hz(a,e))}else{if(!De[c])return i?e:{};a=Dk(e,c,l)}}o||(o=new Fr);var d=o.get(e);if(d)return d;o.set(e,a),Gk(e)?e.forEach(function(g){a.add(Pa(g,r,t,g,e,o))}):Hk(e)&&e.forEach(function(g,C){a.set(C,Pa(g,r,t,C,e,o))});var v=u?s?Kz:Yu:s?oh:fa,p=f?void 0:v(e);return FF(p||e,function(g,C){p&&(C=g,g=e[C]),em(a,C,Pa(g,r,t,C,e,o))}),a}var gW=4;function CW(e){return Pa(e,gW)}var yW="__lodash_hash_undefined__";function mW(e){return this.__data__.set(e,yW),this}function wW(e){return this.__data__.has(e)}function fl(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Cn;++r<t;)this.add(e[r])}fl.prototype.add=fl.prototype.push=mW;fl.prototype.has=wW;function _W(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}function SW(e,r){return e.has(r)}var xW=1,TW=2;function ym(e,r,t,n,i,o){var a=t&xW,l=e.length,s=r.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(e),f=o.get(r);if(u&&f)return u==r&&f==e;var c=-1,h=!0,d=t&TW?new fl:void 0;for(o.set(e,r),o.set(r,e);++c<l;){var v=e[c],p=r[c];if(n)var g=a?n(p,v,c,r,e,o):n(v,p,c,e,r,o);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!_W(r,function(C,y){if(!SW(d,y)&&(v===C||i(v,C,t,n,o)))return d.push(y)})){h=!1;break}}else if(!(v===p||i(v,p,t,n,o))){h=!1;break}}return o.delete(e),o.delete(r),h}function EW(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}function bW(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}var LW=1,AW=2,RW="[object Boolean]",OW="[object Date]",IW="[object Error]",MW="[object Map]",BW="[object Number]",DW="[object RegExp]",$W="[object Set]",PW="[object String]",NW="[object Symbol]",FW="[object ArrayBuffer]",HW="[object DataView]",Np=kr?kr.prototype:void 0,Ms=Np?Np.valueOf:void 0;function zW(e,r,t,n,i,o,a){switch(t){case HW:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case FW:return!(e.byteLength!=r.byteLength||!o(new ul(e),new ul(r)));case RW:case OW:case BW:return Jc(+e,+r);case IW:return e.name==r.name&&e.message==r.message;case DW:case PW:return e==r+"";case MW:var l=EW;case $W:var s=n&LW;if(l||(l=bW),e.size!=r.size&&!s)return!1;var u=a.get(e);if(u)return u==r;n|=AW,a.set(e,r);var f=ym(l(e),l(r),n,i,o,a);return a.delete(e),f;case NW:if(Ms)return Ms.call(e)==Ms.call(r)}return!1}var kW=1,WW=Object.prototype,GW=WW.hasOwnProperty;function UW(e,r,t,n,i,o){var a=t&kW,l=Yu(e),s=l.length,u=Yu(r),f=u.length;if(s!=f&&!a)return!1;for(var c=s;c--;){var h=l[c];if(!(a?h in r:GW.call(r,h)))return!1}var d=o.get(e),v=o.get(r);if(d&&v)return d==r&&v==e;var p=!0;o.set(e,r),o.set(r,e);for(var g=a;++c<s;){h=l[c];var C=e[h],y=r[h];if(n)var m=a?n(y,C,h,r,e,o):n(C,y,h,e,r,o);if(!(m===void 0?C===y||i(C,y,t,n,o):m)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var w=e.constructor,S=r.constructor;w!=S&&"constructor"in e&&"constructor"in r&&!(typeof w=="function"&&w instanceof w&&typeof S=="function"&&S instanceof S)&&(p=!1)}return o.delete(e),o.delete(r),p}var YW=1,Fp="[object Arguments]",Hp="[object Array]",Aa="[object Object]",XW=Object.prototype,zp=XW.hasOwnProperty;function VW(e,r,t,n,i,o){var a=Ht(e),l=Ht(r),s=a?Hp:oi(e),u=l?Hp:oi(r);s=s==Fp?Aa:s,u=u==Fp?Aa:u;var f=s==Aa,c=u==Aa,h=s==u;if(h&&Yo(e)){if(!Yo(r))return!1;a=!0,f=!1}if(h&&!f)return o||(o=new Fr),a||nh(e)?ym(e,r,t,n,i,o):zW(e,r,s,t,n,i,o);if(!(t&YW)){var d=f&&zp.call(e,"__wrapped__"),v=c&&zp.call(r,"__wrapped__");if(d||v){var p=d?e.value():e,g=v?r.value():r;return o||(o=new Fr),i(p,g,t,n,o)}}return h?(o||(o=new Fr),UW(e,r,t,n,i,o)):!1}function fh(e,r,t,n,i){return e===r?!0:e==null||r==null||!Wr(e)&&!Wr(r)?e!==e&&r!==r:VW(e,r,t,n,fh,i)}var jW=1,qW=2;function KW(e,r,t,n){var i=t.length,o=i,a=!n;if(e==null)return!o;for(e=Object(e);i--;){var l=t[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<o;){l=t[i];var s=l[0],u=e[s],f=l[1];if(a&&l[2]){if(u===void 0&&!(s in e))return!1}else{var c=new Fr;if(n)var h=n(u,f,s,e,r,c);if(!(h===void 0?fh(f,u,jW|qW,n,c):h))return!1}}return!0}function mm(e){return e===e&&!sn(e)}function ZW(e){for(var r=fa(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,mm(i)]}return r}function wm(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}function QW(e){var r=ZW(e);return r.length==1&&r[0][2]?wm(r[0][0],r[0][1]):function(t){return t===e||KW(t,e,r)}}function JW(e,r){return e!=null&&r in Object(e)}function eG(e,r,t){r=am(r,e);for(var n=-1,i=r.length,o=!1;++n<i;){var a=es(r[n]);if(!(o=e!=null&&t(e,a)))break;e=e[a]}return o||++n!=i?o:(i=e==null?0:e.length,!!i&&eh(i)&&Qy(a,i)&&(Ht(e)||th(e)))}function tG(e,r){return e!=null&&eG(e,r,JW)}var rG=1,nG=2;function iG(e,r){return ah(e)&&mm(r)?wm(es(e),r):function(t){var n=_z(t,e);return n===void 0&&n===r?tG(t,e):fh(r,n,rG|nG)}}function _m(e){return function(r){return r==null?void 0:r[e]}}function oG(e){return function(r){return lm(r,e)}}function aG(e){return ah(e)?_m(es(e)):oG(e)}function Sm(e){return typeof e=="function"?e:e==null?pF:typeof e=="object"?Ht(e)?iG(e[0],e[1]):QW(e):aG(e)}function lG(e){return function(r,t,n){for(var i=-1,o=Object(r),a=n(r),l=a.length;l--;){var s=a[e?l:++i];if(t(o[s],s,o)===!1)break}return r}}var sG=lG(),uG=sG;function fG(e,r){return e&&uG(e,r,fa)}function cG(e,r){return function(t,n){if(t==null)return t;if(!ua(t))return e(t,n);for(var i=t.length,o=r?i:-1,a=Object(t);(r?o--:++o<i)&&n(a[o],o,a)!==!1;);return t}}var hG=cG(fG),xm=hG,dG=function(){return br.Date.now()},Bs=dG,vG="Expected a function",pG=Math.max,gG=Math.min;function CG(e,r,t){var n,i,o,a,l,s,u=0,f=!1,c=!1,h=!0;if(typeof e!="function")throw new TypeError(vG);r=gp(r)||0,sn(t)&&(f=!!t.leading,c="maxWait"in t,o=c?pG(gp(t.maxWait)||0,r):o,h="trailing"in t?!!t.trailing:h);function d(b){var A=n,O=i;return n=i=void 0,u=b,a=e.apply(O,A),a}function v(b){return u=b,l=setTimeout(C,r),f?d(b):a}function p(b){var A=b-s,O=b-u,B=r-A;return c?gG(B,o-O):B}function g(b){var A=b-s,O=b-u;return s===void 0||A>=r||A<0||c&&O>=o}function C(){var b=Bs();if(g(b))return y(b);l=setTimeout(C,p(b))}function y(b){return l=void 0,h&&n?d(b):(n=i=void 0,a)}function m(){l!==void 0&&clearTimeout(l),u=0,n=s=i=l=void 0}function w(){return l===void 0?a:y(Bs())}function S(){var b=Bs(),A=g(b);if(n=arguments,i=this,s=b,A){if(l===void 0)return v(s);if(c)return clearTimeout(l),l=setTimeout(C,r),d(s)}return l===void 0&&(l=setTimeout(C,r)),a}return S.cancel=m,S.flush=w,S}function yG(e,r){var t=[];return xm(e,function(n,i,o){r(n,i,o)&&t.push(n)}),t}function mG(e,r){var t=Ht(e)?cm:yG;return t(e,Sm(r))}var wG="[object String]";function _G(e){return typeof e=="string"||!Ht(e)&&Wr(e)&&zn(e)==wG}var SG="[object Boolean]";function qu(e){return e===!0||e===!1||Wr(e)&&zn(e)==SG}var xG="[object Map]",TG="[object Set]",EG=Object.prototype,bG=EG.hasOwnProperty;function an(e){if(e==null)return!0;if(ua(e)&&(Ht(e)||typeof e=="string"||typeof e.splice=="function"||Yo(e)||nh(e)||th(e)))return!e.length;var r=oi(e);if(r==xG||r==TG)return!e.size;if(Zl(e))return!ih(e).length;for(var t in e)if(bG.call(e,t))return!1;return!0}var LG=_m("length"),AG=LG,Tm="\\ud800-\\udfff",RG="\\u0300-\\u036f",OG="\\ufe20-\\ufe2f",IG="\\u20d0-\\u20ff",MG=RG+OG+IG,BG="\\ufe0e\\ufe0f",DG="["+Tm+"]",Ku="["+MG+"]",Zu="\\ud83c[\\udffb-\\udfff]",$G="(?:"+Ku+"|"+Zu+")",Em="[^"+Tm+"]",bm="(?:\\ud83c[\\udde6-\\uddff]){2}",Lm="[\\ud800-\\udbff][\\udc00-\\udfff]",PG="\\u200d",Am=$G+"?",Rm="["+BG+"]?",NG="(?:"+PG+"(?:"+[Em,bm,Lm].join("|")+")"+Rm+Am+")*",FG=Rm+Am+NG,HG="(?:"+[Em+Ku+"?",Ku,bm,Lm,DG].join("|")+")",kp=RegExp(Zu+"(?="+Zu+")|"+HG+FG,"g");function zG(e){for(var r=kp.lastIndex=0;kp.test(e);)++r;return r}function kG(e){return Iz(e)?zG(e):AG(e)}function WG(e,r,t,n,i){return i(e,function(o,a,l){t=n?(n=!1,o):r(t,o,a,l)}),t}function GG(e,r,t){var n=Ht(e)?Mz:WG,i=arguments.length<3;return n(e,Sm(r),t,i,xm)}var UG="[object Map]",YG="[object Set]";function XG(e){if(e==null)return 0;if(ua(e))return _G(e)?kG(e):e.length;var r=oi(e);return r==UG||r==YG?e.size:ih(e).length}const VG=(e,r)=>{var t,n,i;return qu(r)?{container:e,adaptiveWidth:!0,adaptiveHeight:!1}:{container:((t=r==null?void 0:r.getContainer)==null?void 0:t.call(r))||e,adaptiveWidth:(n=r==null?void 0:r.width)!=null?n:!0,adaptiveHeight:(i=r==null?void 0:r.height)!=null?i:!0}},jG=e=>{let r=!0;const{s2:t,adaptive:n,container:i,wrapper:o}=e,{container:a,adaptiveWidth:l,adaptiveHeight:s}=VG(o,n);if(!a||!i||!n||!t)return;const u=(d,v)=>{t==null||t.changeSheetSize(d,v),t==null||t.render(!1)},f=CG(u,WN),c=()=>{const{clientWidth:d,clientHeight:v}=i,p=l?Math.floor(d??t.options.width):t.options.width,g=s?Math.floor(v??t.options.height):t.options.height;if(!(!l&&!s)){if(r){u(p,g),r=!1;return}f(p,g)}},h=new ResizeObserver(([d]=[])=>{d&&c()});return h.observe(a,{box:"border-box"}),()=>{h.unobserve(a)}},Om=(e,r)=>{const t=e.store.get("drillDownDataCache",[]),n=t.find(i=>i.rowId===r.id);return{drillDownDataCache:t,drillDownCurrentCache:n}},qG=e=>{const{meta:r,event:t,callback:n}=e,{spreadsheet:i}=r;i.store.set("drillDownNode",r);const{drillDownDataCache:o,drillDownCurrentCache:a}=Om(i,r),l=a!=null&&a.drillField?[a==null?void 0:a.drillField]:[],s=[];o.forEach(u=>{r.id.includes(u.rowId)&&r.id!==u.rowId&&s.push(u.drillField)}),t&&i.emit(T.GLOBAL_ACTION_ICON_CLICK,t),n({sheetInstance:i,cacheDrillFields:l,disabledFields:s,event:t})},KG=e=>{var r;const t=e.spreadsheet,{fields:n}=t.dataCfg,i=((r=n.rows)==null?void 0:r.length)-1,o=an(n.values)?!0:t.isValueInCols();return i<=e.level&&t.isHierarchyTreeType()&&o&&!e.isGrandTotals},ZG=(e,r,t)=>{var n;const i=(n=e==null?void 0:e.headerActionIcons)!=null&&n.length?[...e.headerActionIcons]:[];if(!an(r)){const o={belongsCell:"rowCell",iconNames:["DrillDownIcon"],defaultHide:!0,displayCondition:r.displayCondition||KG,action:a=>{const{iconName:l,meta:s,event:u}=a;l==="DrillDownIcon"&&(s.spreadsheet.store.set("drillDownNode",s),qG({meta:s,event:u,callback:t}))}};i.push(o)}return Qc(Zc({},e),{headerActionIcons:i})},QG=e=>{const{fetchData:r,spreadsheet:t,drillFields:n,drillItemsNum:i=-1}=e;t.store.set("drillItemsNum",i);const o=t.store.get("drillDownNode"),{drillDownDataCache:a,drillDownCurrentCache:l}=Om(t,o);let s=CW(a);l&&(s=mG(a,u=>u.rowId!==o.id)),r&&r(o,n).then(u=>{const{drillData:f,drillField:c}=u;if(t.dataSet.transformDrillDownData(c,f,o),!an(f)){const h=o.level+1,d={rowId:o.id,drillLevel:h,drillData:f,drillField:c};s.push(d),t.store.set("drillDownDataCache",s)}t.interaction.reset(),t.render(!1)})};BD(zN);const ch=e=>{const r=ef();return e({get instance(){var t;return(t=r.value)==null?void 0:t.instance}}),r};var It=(e,r)=>{const t=e.__vccOpts||e;for(const[n,i]of r)t[n]=i;return t};const JG=mt({name:"TooltipDetail",props:["list"],setup(){return{TOOLTIP_PREFIX_CLS:pn}}});function eU(e,r,t,n,i,o){return K(!0),ye(Dt,null,rn(e.list,(a,l)=>(K(),ye("div",{key:`${a.value}-${l}`,class:be(`${e.TOOLTIP_PREFIX_CLS}-detail-list`)},[it("div",{class:be(`${e.TOOLTIP_PREFIX_CLS}-detail-item`)},[it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-detail-item-key`)},Ze(a.name),3),it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-detail-item-val ${e.TOOLTIP_PREFIX_CLS}-highlight`)},Ze(a.value),3)],2)],2))),128)}var tU=It(JG,[["render",eU]]);const rU=mt({name:"TooltipHeadInfo",props:["rows","cols"],setup(){return{TOOLTIP_PREFIX_CLS:pn}},components:{}}),nU={key:0};function iU(e,r,t,n,i,o){var a,l,s,u;return(a=e.cols)!=null&&a.length||(l=e.rows)!=null&&l.length?(K(),ye("div",{key:0,class:be(`${e.TOOLTIP_PREFIX_CLS}-head-info-list`)},[(K(!0),ye(Dt,null,rn(e.cols,f=>(K(),ye("span",{key:f.value},Ze(f.value)+"/",1))),128)),((s=e.cols)==null?void 0:s.length)>0&&((u=e.rows)==null?void 0:u.length)>0?(K(),ye("span",nU,"，")):Et("",!0),(K(!0),ye(Dt,null,rn(e.rows,f=>(K(),ye("span",{key:f.value},Ze(f.value)+"/",1))),128))],2)):Et("",!0)}var oU=It(rU,[["render",iU]]);const aU=mt({name:"TooltipInfos",props:["infos"],setup(){return{TOOLTIP_PREFIX_CLS:pn}},components:{}});function lU(e,r,t,n,i,o){return K(),ye("div",{class:be(`${e.TOOLTIP_PREFIX_CLS}-infos`)},Ze(e.infos),3)}var sU=It(aU,[["render",lU]]);const uU=mt({name:"TooltipSimpleTips",props:["name","tips"],setup(){return{TOOLTIP_PREFIX_CLS:pn}},components:{}});function fU(e,r,t,n,i,o){return K(),ye(Dt,null,[e.name?(K(),ye("div",{key:0,class:be(`${e.TOOLTIP_PREFIX_CLS}-name`)},Ze(e.name),3)):Et("",!0),e.tips?(K(),ye("div",{key:1,class:be(`${e.TOOLTIP_PREFIX_CLS}-tips`)},Ze(e.tips),3)):Et("",!0)],64)}var cU=It(uU,[["render",fU]]);const hU=mt({name:"TooltipSummary",props:["summaries"],setup(e){return{summaryInfo:zi(()=>GG(e.summaries,(t,n)=>(t.count+=XG(n==null?void 0:n.selectedData),(n.value||n.name)&&t.summaries.push(n),t),{count:0,summaries:[]})),i18n:ke,TOOLTIP_PREFIX_CLS:pn}},components:{}});function dU(e,r,t,n,i,o){return K(),ye("div",{class:be(`${e.TOOLTIP_PREFIX_CLS}-summary`)},[it("div",{class:be(`${e.TOOLTIP_PREFIX_CLS}-summary-item`)},[it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-selected`)},Ze(e.summaryInfo.count)+" "+Ze(e.i18n("项")),3),Fa(" "+Ze(e.i18n("已选择")),1)],2),(K(!0),ye(Dt,null,rn(e.summaryInfo.summaries,a=>(K(),ye("div",{key:`${a.name}-${a.value}`,class:be(`${e.TOOLTIP_PREFIX_CLS}-summary-item`)},[it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-summary-key`)},Ze(a.name)+" "+Ze(e.i18n("总和")),3),it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-summary-val ${e.TOOLTIP_PREFIX_CLS}-bold`)},Ze(a.value),3)],2))),128))],2)}var vU=It(hU,[["render",dU]]);const pU=mt({name:"TooltipOperatorTitle",props:["menu"],setup(e){const r=zi(()=>WC(e.menu.icon));return{TOOLTIP_PREFIX_CLS:pn,icon:r}}}),gU=["innerHTML"];function CU(e,r,t,n,i,o){return K(),ye("span",null,[e.icon?(K(),ye("span",{key:0,innerHTML:e.icon,class:be(`${e.TOOLTIP_PREFIX_CLS}-operator-icon`)},null,10,gU)):Et("",!0),it("span",{class:be(`${e.TOOLTIP_PREFIX_CLS}-operator-text`)},Ze(e.menu.text),3)])}var Im=It(pU,[["render",CU]]);const yU=mt({name:"TooltipOperatorMenu",props:["menu","cell"],setup(e){return{onMenuTitleClick:()=>{var t,n;(n=(t=e.menu).onClick)==null||n.call(t,e.cell)},isEmpty:an,TOOLTIP_PREFIX_CLS:pn}},components:{MenuItem:Na.Item,SubMenu:Na.SubMenu,TooltipOperatorTitle:Im}});function mU(e,r,t,n,i,o){const a=Le("TooltipOperatorTitle"),l=Le("TooltipOperatorMenu"),s=Le("MenuItem"),u=Le("SubMenu");return K(),ye(Dt,null,[e.isEmpty(e.menu.children)?Et("",!0):(K(),He(u,{key:e.menu.key,popupClassName:`${e.TOOLTIP_PREFIX_CLS}-operator-submenu-popup`,onTitleClick:e.onMenuTitleClick},{title:bt(()=>[Lt(a,{menu:e.menu,onClick:e.onMenuTitleClick},null,8,["menu","onClick"])]),default:bt(()=>[(K(!0),ye(Dt,null,rn(e.menu.children,f=>{var c;return K(),ye(Dt,{key:f.key},[(c=f==null?void 0:f.children)!=null&&c.length?(K(),He(l,{key:0,menu:f,cell:e.cell},null,8,["menu","cell"])):(K(),He(s,{title:f.text,key:f.key},{default:bt(()=>[Lt(a,{menu:f,onClick:e.onMenuTitleClick},null,8,["menu","onClick"])]),_:2},1032,["title"]))],64)}),128))]),_:1},8,["popupClassName","onTitleClick"])),e.isEmpty(e.menu.children)?(K(),He(s,{title:e.menu.text,key:e.menu.key},{default:bt(()=>[Lt(a,{menu:e.menu,onClick:e.onMenuTitleClick},null,8,["menu","onClick"])]),_:1},8,["title"])):Et("",!0)],64)}var wU=It(yU,[["render",mU]]);const _U=mt({name:"TooltipOperator",props:["menus","onlyMenu","onClick","cell"],setup(e,{emit:r}){return{TOOLTIP_PREFIX_CLS:pn,onMenuClick:(...n)=>{r("click",...n)}}},components:{Menu:Na,Dropdown:Xm,TooltipOperatorTitle:Im,TooltipOperatorMenu:wU}});function SU(e,r,t,n,i,o){const a=Le("TooltipOperatorMenu"),l=Le("Menu"),s=Le("TooltipOperatorTitle"),u=Le("Dropdown");return K(),ye("div",{class:be(`${e.TOOLTIP_PREFIX_CLS}-operator`)},[e.onlyMenu?(K(),He(l,{key:0,class:be(`${e.TOOLTIP_PREFIX_CLS}-operator-menus`),onClick:e.onMenuClick},{default:bt(()=>[(K(!0),ye(Dt,null,rn(e.menus,f=>(K(),He(a,{key:f.key,menu:f,cell:e.cell},null,8,["menu","cell"]))),128))]),_:1},8,["class","onClick"])):(K(!0),ye(Dt,{key:1},rn(e.menus,f=>(K(),He(u,{key:f.key,class:be(`${e.TOOLTIP_PREFIX_CLS}-operator-dropdown`)},{overlay:bt(()=>{var c;return[(c=f==null?void 0:f.children)!=null&&c.length?(K(),He(l,{key:0,class:be(`${e.TOOLTIP_PREFIX_CLS}-operator-menus`),onClick:e.onMenuClick},{default:bt(()=>[(K(!0),ye(Dt,null,rn(e.menus,h=>(K(),He(a,{key:h.key,menu:h,cell:e.cell},null,8,["menu","cell"]))),128))]),_:2},1032,["class","onClick"])):Et("",!0)]}),default:bt(()=>[Lt(s,{menu:f,onClick:c=>{var h;return(h=f.onClick)==null?void 0:h.call(f,e.cell)}},null,8,["menu","onClick"])]),_:2},1032,["class"]))),128))],2)}var xU=It(_U,[["render",SU]]);const TU=mt({name:"TooltipComponent",props:["data","options","cell","position","event","content"],setup(e){const{operator:r,onlyMenu:t}=Dy(e.options);return{operator:r,onlyMenu:t}},components:{TooltipDetail:tU,TooltipHeadInfo:oU,TooltipInfos:sU,TooltipSimpleTips:cU,TooltipSummary:vU,TooltipOperator:xU}});function EU(e,r,t,n,i,o){var a,l,s,u,f,c,h,d,v,p,g,C,y,m,w,S;const b=Le("TooltipOperator"),A=Le("TooltipSimpleTips"),O=Le("TooltipSummary"),B=Le("TooltipHeadInfo"),P=Le("TooltipDetail"),D=Le("TooltipInfos");return e.onlyMenu?(K(),He(b,{key:0,menus:((a=e.operator)==null?void 0:a.menus)||[],onlyMenu:!0,cell:e.cell,onClick:(l=e.operator)==null?void 0:l.onClick},null,8,["menus","cell","onClick"])):(K(),ye(Dt,{key:1},[Lt(b,{menus:((s=e.operator)==null?void 0:s.menus)||[],onlyMenu:!1,cell:e.cell,onClick:(u=e.operator)==null?void 0:u.onClick},null,8,["menus","cell","onClick"]),e.content?Ym(e.$slots,"content",{key:0}):(K(),ye(Dt,{key:1},[Lt(A,{name:(f=e.data)==null?void 0:f.name,tips:(c=e.data)==null?void 0:c.tips},null,8,["name","tips"]),(d=(h=e.data)==null?void 0:h.summaries)!=null&&d.length?(K(),He(O,{key:0,summaries:(v=e.data)==null?void 0:v.summaries},null,8,["summaries"])):Et("",!0),Lt(B,{rows:((g=(p=e.data)==null?void 0:p.headInfo)==null?void 0:g.rows)||[],cols:((y=(C=e.data)==null?void 0:C.headInfo)==null?void 0:y.cols)||[]},null,8,["rows","cols"]),Lt(P,{list:((m=e.data)==null?void 0:m.details)||[]},null,8,["list"]),(w=e.data)!=null&&w.infos?(K(),He(D,{key:1,infos:(S=e.data)==null?void 0:S.infos},null,8,["infos"])):Et("",!0)],64))],64))}var bU=It(TU,[["render",EU]]);class LU extends Gu{constructor(r){super(r)}renderContent(){var r,t;const{tooltip:n}=this.spreadsheet.options,i=this.options,o=this.spreadsheet.getCell((r=i.event)==null?void 0:r.target),a=(t=i.content)!=null?t:n==null?void 0:n.content,l=Qc(Zc({},i),{cell:o,content:a}),s=Lt(bU,l,{content:()=>a});is(null,this.container),is(s,this.container)}destroy(){super.destroy(),this.container&&is(null,this.container)}}const Qu=1,Ju=10,AU=(e,r)=>{var t,n,i,o,a,l;const s=Dr((i=(n=(t=r.options)==null?void 0:t.pagination)==null?void 0:n.current)!=null?i:Qu),u=Dr((l=(a=(o=r.options)==null?void 0:o.pagination)==null?void 0:a.pageSize)!=null?l:Ju),f=Dr(0),c=v=>{s.value=v},h=v=>{u.value=v},d=zi(()=>{var v;return r.showPagination&&!an((v=r.options)==null?void 0:v.pagination)});return Jr([s,u],()=>{var v;if(!e.value)return;const p=an((v=r.options)==null?void 0:v.pagination)?null:{current:s.value,pageSize:u.value};e.value.updatePagination(p),e.value.render(!1)}),Jr([()=>{var v;return(v=r.options)==null?void 0:v.pagination},e],()=>{var v,p,g,C,y,m,w,S,b;s.value=(g=(p=(v=r.options)==null?void 0:v.pagination)==null?void 0:p.current)!=null?g:Qu,u.value=(m=(y=(C=r.options)==null?void 0:C.pagination)==null?void 0:y.pageSize)!=null?m:Ju,f.value=(b=(S=(w=e.value)==null?void 0:w.facet)==null?void 0:S.viewCellHeights.getTotalLength())!=null?b:0},{immediate:!0}),Jr(e,(v,p,g)=>{if(!e.value)return;const C=y=>{var m;an((m=r.options)==null?void 0:m.pagination)||(f.value=y.total)};e.value.on(T.LAYOUT_PAGINATION,C),g(()=>{var y;(y=e.value)==null||y.off(T.LAYOUT_PAGINATION,C)})}),{visible:d,current:s,pageSize:u,total:f,change:c,showSizeChange:h}},RU=`${yf}-pagination`,OU=mt({name:"s2-pagination",props:{current:{type:Number,default:Qu},total:{type:Number,default:0},pageSize:{type:Number,default:Ju}},emits:["change","showSizeChange"],setup:e=>({showQuickJumper:zi(()=>e.total/e.pageSize>5),PRE_CLASS:RU,i18n:ke}),components:{AntDPagination:Um}});function IU(e,r,t,n,i,o){const a=Le("AntDPagination");return K(),ye("div",{class:be(e.PRE_CLASS)},[Lt(a,{"default-current":1,current:e.current,total:e.total,pageSize:e.pageSize,showSizeChanger:!0,onShowSizeChange:r[0]||(r[0]=(l,s)=>e.$emit("showSizeChange",s)),size:"small",showQuickJumper:e.showQuickJumper,onChange:r[1]||(r[1]=l=>e.$emit("change",l))},null,8,["current","total","pageSize","showQuickJumper"]),it("span",{class:be(`${e.PRE_CLASS}-count`)},Ze(e.i18n("共计"))+" "+Ze(e.total||" - ")+" "+Ze(e.i18n("条")),3)],2)}var MU=It(OU,[["render",IU]]);const BU={tooltip:{renderTooltip:e=>new LU(e)}},DU=(...e)=>UN(BU,...e),ge=(e,r,t,n)=>{var i;const o=a=>{const l=I$(a);r(n,l)};(i=e.value)==null||i.on(t,o)},ie=(e,r,t,n)=>{var i;const o=a=>{r(n,a)};(i=e.value)==null||i.on(t,o)},$U=(e,r)=>{Up(()=>{e.value&&(ge(e,r,T.ROW_CELL_HOVER,"rowCellHover"),ge(e,r,T.ROW_CELL_CLICK,"rowCellClick"),ge(e,r,T.ROW_CELL_DOUBLE_CLICK,"rowCellDoubleClick"),ge(e,r,T.ROW_CELL_CONTEXT_MENU,"rowCellContextMenu"),ge(e,r,T.ROW_CELL_MOUSE_DOWN,"rowCellMouseDown"),ge(e,r,T.ROW_CELL_MOUSE_UP,"rowCellMouseUp"),ge(e,r,T.ROW_CELL_MOUSE_MOVE,"rowCellMouseMove"),ie(e,r,T.ROW_CELL_COLLAPSE_TREE_ROWS,"rowCellCollapseTreeRows"),ie(e,r,T.ROW_CELL_SCROLL,"rowCellScroll"),ge(e,r,T.COL_CELL_HOVER,"colCellHover"),ge(e,r,T.COL_CELL_CLICK,"colCellClick"),ge(e,r,T.COL_CELL_DOUBLE_CLICK,"colCellDoubleClick"),ge(e,r,T.COL_CELL_CONTEXT_MENU,"colCellContextMenu"),ge(e,r,T.COL_CELL_MOUSE_DOWN,"colCellMouseDown"),ge(e,r,T.COL_CELL_MOUSE_UP,"colCellMouseUp"),ge(e,r,T.COL_CELL_MOUSE_MOVE,"colCellMouseMove"),ge(e,r,T.DATA_CELL_HOVER,"dataCellHover"),ge(e,r,T.DATA_CELL_CLICK,"dataCellClick"),ge(e,r,T.DATA_CELL_DOUBLE_CLICK,"dataCellDoubleClick"),ge(e,r,T.DATA_CELL_CONTEXT_MENU,"dataCellContextMenu"),ge(e,r,T.DATA_CELL_MOUSE_DOWN,"dataCellMouseDown"),ge(e,r,T.DATA_CELL_MOUSE_UP,"dataCellMouseUp"),ge(e,r,T.DATA_CELL_MOUSE_MOVE,"dataCellMouseMove"),ie(e,r,T.DATA_CELL_TREND_ICON_CLICK,"dataCellTrendIconClick"),ie(e,r,T.DATA_CELL_BRUSH_SELECTION,"dataCellBrushSelection"),ie(e,r,T.DATA_CELL_SELECT_MOVE,"dataCellSelectMove"),ge(e,r,T.CORNER_CELL_HOVER,"cornerCellHover"),ge(e,r,T.CORNER_CELL_CLICK,"cornerCellClick"),ge(e,r,T.CORNER_CELL_DOUBLE_CLICK,"cornerCellDoubleClick"),ge(e,r,T.CORNER_CELL_CONTEXT_MENU,"cornerCellContextMenu"),ge(e,r,T.CORNER_CELL_MOUSE_DOWN,"cornerCellMouseDown"),ge(e,r,T.CORNER_CELL_MOUSE_UP,"cornerCellMouseUp"),ge(e,r,T.CORNER_CELL_MOUSE_MOVE,"cornerCellMouseMove"),ge(e,r,T.MERGED_CELLS_HOVER,"mergedCellsHover"),ge(e,r,T.MERGED_CELLS_CLICK,"mergedCellsClick"),ge(e,r,T.MERGED_CELLS_DOUBLE_CLICK,"mergedCellsDoubleClick"),ge(e,r,T.MERGED_CELLS_CONTEXT_MENU,"mergedCellsContextMenu"),ge(e,r,T.MERGED_CELLS_MOUSE_DOWN,"mergedCellsMouseDown"),ge(e,r,T.MERGED_CELLS_MOUSE_UP,"mergedCellsMouseUp"),ge(e,r,T.MERGED_CELLS_MOUSE_MOVE,"mergedCellsMouseMove"),ie(e,r,T.RANGE_SORT,"rangeSort"),ie(e,r,T.RANGE_SORTED,"rangeSorted"),ie(e,r,T.RANGE_FILTER,"rangeFilter"),ie(e,r,T.RANGE_FILTERED,"rangeFiltered"),ie(e,r,T.LAYOUT_AFTER_HEADER_LAYOUT,"layoutAfterHeaderLayout"),ie(e,r,T.LAYOUT_PAGINATION,"layoutPagination"),ie(e,r,T.LAYOUT_CELL_SCROLL,"layoutCellScroll"),ie(e,r,T.LAYOUT_AFTER_COLLAPSE_ROWS,"layoutAfterCollapseRows"),ie(e,r,T.LAYOUT_TREE_ROWS_COLLAPSE_ALL,"collapseRowsAll"),ie(e,r,T.LAYOUT_COLS_EXPANDED,"layoutColsExpanded"),ie(e,r,T.LAYOUT_COLS_HIDDEN,"layoutColsHidden"),ie(e,r,T.LAYOUT_BEFORE_RENDER,"beforeRender"),ie(e,r,T.LAYOUT_AFTER_RENDER,"afterRender"),ie(e,r,T.LAYOUT_DESTROY,"destroy"),ie(e,r,T.LAYOUT_RESIZE,"layoutResize"),ie(e,r,T.LAYOUT_RESIZE_SERIES_WIDTH,"layoutResizeSeriesWidth"),ie(e,r,T.LAYOUT_RESIZE_ROW_WIDTH,"layoutResizeRowWidth"),ie(e,r,T.LAYOUT_RESIZE_ROW_HEIGHT,"layoutResizeRowHeight"),ie(e,r,T.LAYOUT_RESIZE_COL_WIDTH,"layoutResizeColWidth"),ie(e,r,T.LAYOUT_RESIZE_COL_HEIGHT,"layoutResizeColHeight"),ie(e,r,T.LAYOUT_RESIZE_TREE_WIDTH,"layoutResizeTreeWidth"),ie(e,r,T.LAYOUT_RESIZE_MOUSE_DOWN,"layoutResizeMouseDown"),ie(e,r,T.LAYOUT_RESIZE_MOUSE_UP,"layoutResizeMouseUp"),ie(e,r,T.LAYOUT_RESIZE_MOUSE_MOVE,"layoutResizeMouseMove"),ie(e,r,T.GLOBAL_KEYBOARD_DOWN,"keyBoardDown"),ie(e,r,T.GLOBAL_KEYBOARD_UP,"keyBoardUp"),ie(e,r,T.GLOBAL_COPIED,"copied"),ie(e,r,T.GLOBAL_ACTION_ICON_HOVER,"actionIconHover"),ie(e,r,T.GLOBAL_ACTION_ICON_CLICK,"actionIconClick"),ie(e,r,T.GLOBAL_CONTEXT_MENU,"contextMenu"),ie(e,r,T.GLOBAL_HOVER,"mouseHover"),ie(e,r,T.GLOBAL_CLICK,"click"),ie(e,r,T.GLOBAL_DOUBLE_CLICK,"doubleClick"),ie(e,r,T.GLOBAL_SELECTED,"selected"),ie(e,r,T.GLOBAL_MOUSE_UP,"mouseUp"),ie(e,r,T.GLOBAL_RESET,"reset"),ie(e,r,T.GLOBAL_LINK_FIELD_JUMP,"linkFieldJump"),ie(e,r,T.GLOBAL_SCROLL,"scroll"),ie(e,r,T.LAYOUT_AFTER_REAL_DATA_CELL_RENDER,"layoutAfterRealDataCellRender"),ie(e,r,T.ROW_CELL_BRUSH_SELECTION,"rowCellBrushSelection"),ie(e,r,T.COL_CELL_BRUSH_SELECTION,"colCellBrushSelection"))})},PU=(e,r=!1)=>{const t=Dr(r),n=i=>{t.value=i};return Jr(e,i=>{i==null||i.on(T.LAYOUT_BEFORE_RENDER,()=>{n(!0)}),i==null||i.on(T.LAYOUT_AFTER_RENDER,()=>{n(!1)})}),{loading:t,setLoading:n}},NU=(e,r)=>{const t=Yp({rerender:!1,reloadData:!1,rebuildDataset:!1});Jr(()=>r.options,(n,i)=>{var o,a;t.rerender=!0,Object.is(i==null?void 0:i.hierarchyType,n==null?void 0:n.hierarchyType)||(t.reloadData=!0,t.rebuildDataset=!0),(o=e.value)==null||o.setOptions(n),(a=e.value)==null||a.changeSheetSize(n==null?void 0:n.width,n==null?void 0:n.height)},{deep:rs(r.options)}),Jr(()=>r.dataCfg,(n,i)=>{var o,a,l,s,u,f;((a=(o=i==null?void 0:i.fields)==null?void 0:o.columns)==null?void 0:a.length)!==((s=(l=n==null?void 0:n.fields)==null?void 0:l.columns)==null?void 0:s.length)&&((u=e.value)==null||u.clearColumnLeafNodes()),t.rerender=!0,t.reloadData=!0,(f=e.value)==null||f.setDataCfg(n)},{deep:rs(r.dataCfg)}),Jr(()=>r.themeCfg,n=>{var i;t.rerender=!0,(i=e.value)==null||i.setThemeCfg(n)},{deep:rs(r.themeCfg)}),Jr(t,n=>{var i;n.rerender&&((i=e.value)==null||i.render(n.reloadData,{reBuildDataSet:n.rebuildDataset}),n.rerender=!1,n.reloadData=!1,n.rebuildDataset=!1)})},FU=(e,r,t)=>{const n=Dr();Jr([e,()=>r.adaptive],([i,o],a,l)=>{i&&(n.value=jG({s2:i,adaptive:o,wrapper:t.wrapperRef.value,container:t.containerRef.value}),l(()=>{var s;(s=n.value)==null||s.call(n)}))},{deep:!0})};function HU(e,r){const{dataCfg:t,options:n,themeCfg:i,loading:o,sheetType:a,onSpreadsheet:l,onMounted:s,onGetSpreadSheet:u}=e,f=Dr(),c=Dr(),h=ef(),{loading:d,setLoading:v}=PU(h,o),p=AU(h,e),g=y=>{const m=ns(t),w=ns(n),S=DU(w);return l?l(y,m,S):a==="table"?new MN(y,m,S):new ON(y,m,S)};return Up(()=>{v(!0),h.value=g(c.value),h.value.setThemeCfg(ns(i)),h.value.render(),v(!1),u==null||u(h.value),s==null||s(h.value)}),$U(h,r),NU(h,e),FU(h,e,{wrapperRef:f,containerRef:c}),Gm(()=>{var y;(y=h.value)==null||y.destroy()}),{wrapperRef:f,containerRef:c,s2Ref:h,loading:d,setLoading:v,pagination:p}}const Mm=()=>({sheetType:String,dataCfg:Object,themeCfg:Object,showPagination:{type:[Object,Boolean],default:!1},loading:Boolean,partDrillDown:Object,header:Object,options:{type:Object,default:{}},adaptive:{type:[Object,Boolean],default:!1},onSpreadsheet:Function,onGetSpreadSheet:Function,onMounted:Function}),zU=()=>({className:String,titleText:{type:String,default:ke("选择下钻维度")},searchText:{type:String,default:ke("搜索字段")},clearButtonText:{type:String,default:ke("恢复默认")},extra:Node,dataSet:{type:Array,default:[]},drillFields:Array,disabledFields:Array,getDrillFields:Function,setDrillFields:Function}),kU=()=>["getDrillFields","setDrillFields"],WU=()=>["spreadsheet","getSpreadSheet","rowCellHover","rowCellClick","rowCellDoubleClick","rowCellContextMenu","rowCellMouseDown","rowCellMouseUp","rowCellMouseMove","rowCellCollapseTreeRows","rowCellScroll","colCellHover","colCellClick","colCellDoubleClick","colCellContextMenu","colCellMouseDown","colCellMouseUp","colCellMouseMove","dataCellHover","dataCellClick","dataCellDoubleClick","dataCellContextMenu","dataCellMouseDown","dataCellMouseUp","dataCellMouseMove","dataCellTrendIconClick","dataCellBrushSelection","dataCellSelectMove","cornerCellHover","cornerCellClick","cornerCellDoubleClick","cornerCellContextMenu","cornerCellMouseDown","cornerCellMouseUp","cornerCellMouseMove","mergedCellsHover","mergedCellsClick","mergedCellsDoubleClick","mergedCellsContextMenu","mergedCellsMouseDown","mergedCellsMouseUp","mergedCellsMouseMove","rangeSort","rangeSorted","rangeFilter","rangeFiltered","layoutAfterHeaderLayout","layoutPagination","layoutCellScroll","layoutCollapseRows","layoutAfterCollapseRows","collapseRowsAll","layoutColsExpanded","layoutColsHidden","beforeRender","afterRender","mounted","destroy","layoutResize","layoutResizeSeriesWidth","layoutResizeRowWidth","layoutResizeRowHeight","layoutResizeColWidth","layoutResizeColHeight","layoutResizeTreeWidth","layoutResizeMouseDown","layoutResizeMouseUp","layoutResizeMouseMove","keyBoardDown","keyBoardUp","copied","actionIconHover","actionIconClick","contextMenu","mouseHover","mouseUp","mouseMove","mouseDown","selected","reset","linkFieldJump","click","doubleClick","scroll","hover","layoutAfterRealDataCellRender","rowCellBrushSelection","colCellBrushSelection"],GU=mt({name:"BaseSheet",props:Mm(),emits:WU(),setup(e,r){const{wrapperRef:t,containerRef:n,s2Ref:i,loading:o,pagination:a}=HU(e,r.emit);return r.expose({get instance(){return i.value}}),{S2_PREFIX_CLS:yf,wrapperRef:t,containerRef:n,s2Ref:i,loading:o,pagination:a,handlePageChange:u=>{var f,c;e.showPagination&&!qu(e.showPagination)&&((c=(f=e.showPagination).onChange)==null||c.call(f,u)),a.change(u)},handlePageSizeChange:u=>{var f,c;e.showPagination&&!qu(e.showPagination)&&((c=(f=e.showPagination).onShowSizeChange)==null||c.call(f,u)),a.showSizeChange(u)}}},components:{Spin:Wm,S2Pagination:MU}});function UU(e,r,t,n,i,o){const a=Le("S2Pagination"),l=Le("Spin");return K(),He(l,{wrapperClassName:e.S2_PREFIX_CLS+"-spin",spinning:e.loading},{default:bt(()=>[it("div",{ref:"wrapperRef",class:be(e.S2_PREFIX_CLS+"-wrapper")},[it("div",{ref:"containerRef",class:be(e.S2_PREFIX_CLS+"-container")},null,2),e.pagination.visible.value?(K(),He(a,{key:0,current:e.pagination.current.value,pageSize:e.pagination.pageSize.value,total:e.pagination.total.value,onChange:e.handlePageChange,onShowSizeChange:e.handlePageSizeChange},null,8,["current","pageSize","total","onChange","onShowSizeChange"])):Et("",!0)],2)]),_:1},8,["wrapperClassName","spinning"])}var Bm=It(GU,[["render",UU]]);const YU={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},XU=it("path",{d:"M511.804 222.338c-57.117 0-105.737 20.061-145.86 60.184-40.122 40.123-60.184 88.569-60.184 145.337 0 56.769 20.062 105.214 60.185 145.337 40.122 40.123 88.742 60.185 145.859 60.185 57.116 0 105.736-20.062 145.859-60.185 40.123-40.123 60.184-88.568 60.184-145.337 0-56.768-20.061-105.214-60.184-145.337-40.123-40.123-88.743-60.184-145.86-60.184zm0 338.619c-36.729 0-68.007-12.925-93.835-38.774-25.827-25.85-38.752-57.127-38.773-93.834-.022-36.707 12.902-68.16 38.773-94.357 25.872-26.197 57.15-39.285 93.835-39.263 36.685.022 67.963 13.11 93.834 39.263 25.871 26.154 38.796 57.606 38.774 94.357-.022 36.75-12.946 68.028-38.774 93.834-25.828 25.806-57.106 38.73-93.834 38.774zm366.165-295.766c-21.084-42.168-50.327-79.223-87.73-111.165-37.404-31.941-79.898-57.105-127.484-75.491C614.472 60.845 564.155 52 511.804 52c-52.352 0-103.006 8.845-151.963 26.535-46.911 18.364-89.069 43.528-126.472 75.491-37.403 31.964-66.647 69.019-87.731 111.165C123.879 308.71 113 353.923 113 400.835c0 65.95 15.982 132.924 47.945 200.92 26.524 56.441 63.58 112.198 111.165 167.27 62.556 73.435 134.632 138.71 216.227 195.827 6.81 4.765 14.459 7.148 22.945 7.148 8.485 0 16.47-2.383 23.956-7.148 81.595-57.79 153.67-123.067 216.227-195.828 47.608-55.767 84.663-111.524 111.165-167.27 31.963-67.995 47.945-134.969 47.945-200.919 0-46.912-10.88-92.126-32.638-135.644h.032zm-40.797 136.656c0 55.07-13.6 111.513-40.798 169.326-23.129 49.631-56.452 99.948-99.97 150.95-52.351 61.208-113.885 117.65-184.6 169.326-70.716-51.676-132.25-108.118-184.6-169.326-42.844-51.002-76.167-101.319-99.971-150.95-27.198-57.791-40.797-114.57-40.797-170.338 0-36.032 8.159-70.716 24.478-104.05 16.994-32.638 40.45-61.882 70.368-87.73 30.592-26.525 65.276-47.26 104.05-62.209 40.797-14.97 82.954-22.455 126.472-22.455 43.517 0 85.675 7.485 126.472 22.455 38.752 14.97 73.436 35.706 104.05 62.208 30.593 25.85 54.048 55.093 70.367 87.731 16.32 34.009 24.479 69.03 24.479 105.062z",fill:"currentColor"},null,-1),VU=[XU];function jU(e,r){return K(),ye("svg",YU,VU)}var qU={render:jU};const KU={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},ZU=it("path",{d:"M86.016 805.888H0l143.872-529.92h79.36l144.896 529.92h-91.136l-29.696-109.056H115.2S85.504 805.888 86.016 805.888zM225.28 613.376 181.248 455.68 138.24 613.376h87.04zM519.168 430.08c24.576-16.384 47.616-25.088 69.12-25.088 30.72 0 58.368 14.848 81.92 44.032 24.064 29.184 35.328 72.192 35.328 128.512 0 44.032-7.168 83.456-22.528 118.272-14.848 34.816-35.328 62.976-60.416 83.456-26.112 20.992-57.856 31.232-95.232 31.232-15.36-.512-31.232-1.536-46.592-3.584-4.096-.512-8.704-1.024-12.8-1.536h-66.56V256h81.92v206.336c11.264-12.8 23.04-23.552 35.84-32.256zM483.84 587.264v135.168c13.824 3.072 26.112 4.608 37.376 4.608 27.648 0 50.176-11.776 69.12-36.352 19.456-25.088 28.672-59.392 28.672-104.96 0-32.256-5.12-55.296-14.848-70.144-9.216-13.824-18.432-19.968-28.672-19.968-12.288 0-27.136 7.68-44.544 24.064-16.896 16.896-32.768 39.424-47.104 67.584zm529.92 207.36c-36.864 14.336-71.68 20.992-104.96 20.992-32.768.512-64.512-9.216-91.648-27.136-27.136-18.432-48.64-44.032-62.464-73.728-14.848-30.72-22.528-65.536-22.528-104.448 0-58.88 16.896-108.032 51.2-146.944 33.792-38.912 75.264-58.88 123.392-58.88 34.304 0 70.144 7.168 108.032 21.504l10.24 4.096v95.232l-20.992-10.752c-34.816-17.92-65.536-26.624-92.16-26.624-16.896 0-32.768 4.608-47.104 13.824-13.824 8.704-25.088 23.04-32.768 42.496-8.192 19.968-12.288 41.472-12.288 63.488 0 28.672 7.68 55.808 24.064 82.432 14.848 24.576 37.888 36.352 71.168 36.352 10.752 0 21.504-1.024 31.744-2.56 9.728-1.536 29.696-8.192 58.88-18.944l19.456-7.68v92.672l-11.264 4.608z",fill:"currentColor"},null,-1),QU=[ZU];function JU(e,r){return K(),ye("svg",KU,QU)}var eY={render:JU};const tY={class:"antv-s2-icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"12.6",height:"12.6"},rY=it("path",{d:"M950.016 898.016 744 693.024q88-107.008 88-244.992 0-159.008-112.512-271.488T448 64.032 176.512 176.544 64 448.032 176.512 719.52 448 832.032q138.016 0 244.992-88l206.016 206.016q10.016 10.016 24.992 10.016t26.016-10.016q10.016-11.008 10.016-26.016t-10.016-26.016zM568.992 736Q512 760 448 760t-120.992-24q-56-24-99.488-67.488t-66.496-99.488q-24.992-56.992-24.992-120.992t24.992-120.992q23.008-56 66.496-99.488t99.488-67.488q56.992-24 120.992-24t120.992 24q56 24 99.488 67.488t67.488 99.488q24 56.992 24 120.992t-24 120.992q-24 56-67.488 99.488T568.992 736z",fill:"currentColor"},null,-1),nY=[rY];function iY(e,r){return K(),ye("svg",tY,nY)}var oY={render:iY};const aY=mt({name:"DrillDown",props:zU(),emits:kU(),methods:{},components:{Button:Pm,Input:Nm,Empty:Fm,Menu:Na,MenuItem:Hm,LocationIcon:qU,TextIcon:eY,CalendarIcon:oY},setup(e){const{dataSet:r,disabledFields:t,getDrillFields:n,setDrillFields:i,className:o}=e,l=Dr((()=>r.map(h=>(h.disabled=!!(t&&t.includes(h.value)),h)))()),s=Dr([]);return{options:l,handleSearch:h=>{const{value:d}=h.target;if(!d)l.value=[...r];else{const v=new RegExp(d,"gi"),p=r.filter(g=>v.test(g.name));l.value=[...p]}},handleSelect:h=>{const d=h==null?void 0:h.selectedKeys;s.value=d,n&&n(d),i&&i(d)},handleClear:h=>{h.stopPropagation(),s.value=[],n&&n([]),i&&i([])},className:o,selected:s,isEmpty:an,DRILL_DOWN_PRE_CLASS:GN}}});function lY(e,r,t,n,i,o){const a=Le("Button"),l=Le("Input"),s=Le("Empty"),u=Le("text-icon"),f=Le("calendar-icon"),c=Le("location-icon"),h=Le("MenuItem"),d=Le("Menu");return K(),ye("div",{class:be([e.DRILL_DOWN_PRE_CLASS,e.className])},[it("header",{class:be(`${e.DRILL_DOWN_PRE_CLASS}-header`)},[it("div",null,Ze(e.titleText),1),Lt(a,{type:"link",onClick:e.handleClear},{default:bt(()=>[Fa(Ze(e.clearButtonText),1)]),_:1},8,["onClick"])],2),Lt(l,{class:be(`${e.DRILL_DOWN_PRE_CLASS}-search`),placeholder:e.searchText,onChange:e.handleSearch,onPressEnter:e.handleSearch,allowClear:!0},null,8,["class","placeholder","onChange","onPressEnter"]),e.isEmpty(e.options)?(K(),He(s,{key:0,imageStyle:{height:"64px"},class:be(`${e.DRILL_DOWN_PRE_CLASS}-empty`)},null,8,["class"])):Et("",!0),Lt(d,{class:"`${DRILL_DOWN_PRE_CLASS}-menu`",selectedKeys:e.selected,"onUpdate:selectedKeys":r[0]||(r[0]=v=>e.selected=v),onSelect:e.handleSelect},{default:bt(()=>[(K(!0),ye(Dt,null,rn(e.options,v=>(K(),He(h,{key:v.value,disabled:v.disabled,class:be(`${e.DRILL_DOWN_PRE_CLASS}-menu-item`)},{icon:bt(()=>[v.type==="text"?(K(),He(u,{key:0})):Et("",!0),v.type==="date"?(K(),He(f,{key:1})):Et("",!0),v.type==="location"?(K(),He(c,{key:2})):Et("",!0)]),default:bt(()=>[Fa(" "+Ze(v==null?void 0:v.name),1)]),_:2},1032,["disabled","class"]))),128))]),_:1},8,["selectedKeys","onSelect"])],2)}var sY=It(aY,[["render",lY],["__scopeId","data-v-3a294982"]]);const uY=mt({name:"PivotSheet",props:Mm(),emits:[],setup(e,r){const t=ch(r.expose),{options:n}=hh(e),{dataCfg:i,partDrillDown:o}=hh(e),a=Dr([]),l=f=>{var c,h,d,v,p,g;const C=(c=t==null?void 0:t.value)==null?void 0:c.instance;a.value=f,C==null||C.hideTooltip(),an(f)?C==null||C.clearDrillDownData((h=C==null?void 0:C.store.get("drillDownNode"))==null?void 0:h.id):QG({rows:(v=(d=i.value)==null?void 0:d.fields.rows)!=null?v:[],drillFields:f,fetchData:(p=o.value)==null?void 0:p.fetchData,drillItemsNum:(g=o.value)==null?void 0:g.drillItemsNum,spreadsheet:C})},s=f=>{var c,h;const{event:d,disabledFields:v}=f;if(d){const p=(c=t==null?void 0:t.value)==null?void 0:c.instance,g=Lt(sY,Qc(Zc({},(h=o.value)==null?void 0:h.drillConfig),{setDrillFields:l,drillFields:a.value,disabledFields:v}));p==null||p.showTooltip({position:{x:d.clientX,y:d.clientY},event:d,content:g})}},u=zi(()=>ZG(n.value,o.value,f=>s(f)));return{s2Ref:t,options:u}},components:{BaseSheet:Bm}});function fY(e,r,t,n,i,o){const a=Le("BaseSheet");return K(),He(a,km(e.$props,{ref:"s2Ref",options:e.options}),null,16,["options"])}var Wp=It(uY,[["render",fY]]);const cY=mt({name:"TableSheet",props:[],emits:[],setup(e,r){return{s2Ref:ch(r.expose)}},components:{BaseSheet:Bm}});function hY(e,r,t,n,i,o){const a=Le("BaseSheet");return K(),He(a,{ref:"s2Ref"},null,512)}var Gp=It(cY,[["render",hY]]);const dY=mt({name:"Sheet",props:[],emits:[],setup(e,r){const t=ch(r.expose),n=zi(()=>{switch(r.attrs.sheetType){case"table":return Gp;default:return Wp}});return{s2Ref:t,sheetType:n}},components:{PivotSheet:Wp,TableSheet:Gp}});function vY(e,r,t,n,i,o){return K(),He(zm(e.sheetType),{ref:"s2Ref"},null,512)}var pY=It(dY,[["render",vY]]);const gY={id:"print"},CY={ref:"refTable",class:"big-data-table"},_Y=mt({name:"BigDataTableCom",__name:"BigDataTable",setup(e){const r={width:600,height:480},n=ef({fields:{rows:["province","city"],columns:["type"],values:["price"]},data:[{province:"浙江",city:"杭州",type:"笔",price:"1"},{province:"浙江",city:"杭州",type:"纸张",price:"2"},{province:"浙江",city:"舟山",type:"笔",price:"17"},{province:"浙江",city:"舟山",type:"纸张",price:"6"},{province:"吉林",city:"长春",type:"笔",price:"8"},{province:"吉林",city:"白山",type:"笔",price:"12"},{province:"吉林",city:"长春",type:"纸张",price:"3"},{province:"吉林",city:"白山",type:"纸张",price:"25"},{province:"浙江",city:"杭州",type:"笔",cost:"0.5"},{province:"浙江",city:"杭州",type:"纸张",cost:"20"},{province:"浙江",city:"舟山",type:"笔",cost:"1.7"},{province:"浙江",city:"舟山",type:"纸张",cost:"0.12"},{province:"吉林",city:"长春",type:"笔",cost:"10"},{province:"吉林",city:"白山",type:"笔",cost:"9"},{province:"吉林",city:"长春",type:"纸张",cost:"3"},{province:"吉林",city:"白山",type:"纸张",cost:"1"}]}),i=Yp(r);return(o,a)=>{const l=Le("a-button"),s=Vm("print");return K(),He($m,null,{default:bt(()=>[jm((K(),He(l,{type:"primary",class:"mb-16"},{default:bt(()=>[Fa("打印")]),_:1})),[[s,"#print"]]),it("div",gY,[it("div",CY,[Lt(qm(pY),{dataCfg:n.value,options:i},null,8,["dataCfg","options"])],512)])]),_:1})}}});export{_Y as default};
