import{_ as K}from"./AppIcon.vue_vue_type_script_setup_true_lang-o_ph5tPH.js";import{d as D,v as E,A as I,n as U,T as A,r as L,m as d,q as N,f as v,o as t,l as r,w as k,u as o,c as f,G as M,M as i,Q as y,B as S,g,t as w}from"./index-C9oHGpmd.js";import{_ as C}from"./LayoutMenuSub.vue_vue_type_script_setup_true_lang-Arb4unLf.js";import{M as O,E as V}from"./MenuStore-Ac81LI1-.js";const Q=D({__name:"LayoutMenu",setup(b){const T=E(),$=O(),_=I(),B=U(()=>A.genTreeData(_.state.userInfo.menus,null)),u=L({defaultSelectedKeys:[d.currentRoute.value.meta.menuId??""],selectedKeys:[d.currentRoute.value.meta.menuId??""],openKeys:x()});N(()=>d.currentRoute.value,l=>{u.selectedKeys=[l.meta.menuId??""]});function x(){let n=d.currentRoute.value.meta.levelCode;if(!n)return[];var a=[];if(n.indexOf(".")>-1)for(var m=n.split("."),s=0;s<m.length-1;s++){var p=m[s];a.push(parseInt(p))}return a}function R(l){const n=_.state.userInfo.menus.find(a=>a.id==l.key);d.push({path:(n==null?void 0:n.jumpUrl)??(n==null?void 0:n.router)??"/404"})}return(l,n)=>{const a=v("a-menu-item"),m=v("a-menu");return t(),r(m,{mode:"inline",theme:o(T).state.menuTheme.isDark?"dark":"light",onSelect:R,selectedKeys:u.selectedKeys,"onUpdate:selectedKeys":n[0]||(n[0]=s=>u.selectedKeys=s),openKeys:u.openKeys,"onUpdate:openKeys":n[1]||(n[1]=s=>u.openKeys=s)},{default:k(()=>{var s,p;return[o($).state.menuMode!=o(V).default?(t(!0),f(i,{key:0},M((s=o(_).state.subMenus)==null?void 0:s.filter(e=>e.show),e=>{var c;return t(),f(i,null,[!e.children||((c=e.children)==null?void 0:c.filter(h=>h.show).length)==0&&e.type==2?(t(),r(a,{key:e.id,title:o(y)(`menu.${e.id}`,e.name)},{default:k(()=>[e.icon?(t(),r(K,{key:0,name:e.icon},null,8,["name"])):S("",!0),g("span",null,w(o(y)(`menu.${e.id}`,e.name)),1)]),_:2},1032,["title"])):(t(),r(C,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256)):(t(!0),f(i,{key:1},M((p=B.value)==null?void 0:p.filter(e=>e.show),e=>{var c;return t(),f(i,null,[!e.children||((c=e.children)==null?void 0:c.filter(h=>h.show).length)==0&&e.type==2?(t(),r(a,{key:e.id,title:o(y)(`menu.${e.id}`,e.name)},{default:k(()=>[e.icon?(t(),r(K,{key:0,name:e.icon},null,8,["name"])):S("",!0),g("span",null,w(o(y)(`menu.${e.id}`,e.name)),1)]),_:2},1032,["title"])):(t(),r(C,{key:1,"menu-info":e},null,8,["menu-info"]))],64)}),256))]}),_:1},8,["theme","selectedKeys","openKeys"])}}});export{Q as _};
