import{d as C,r as S,b as N,f as n,o as T,l as $,w as a,a as l,j as f,T as B}from"./index-5ce8de01.js";import{S as _}from"./SysOrganizationService-833430ab.js";const V=C({__name:"Info",props:{onSuccess:{type:Function}},setup(g,{expose:c}){const b=g,e=S({vm:{id:"",form:{}},visible:!1,loading:!1}),v=N();c({open:(m="",o="")=>{var d;e.visible=!0,e.visible&&(e.vm.id=m),(d=v.value)==null||d.resetFields(),e.loading=!0,_.findForm(m).then(u=>{e.loading=!1,u.code==200&&(e.vm=u.data,e.vm.form.parentId=o)})}});function x(){var m;(m=v.value)==null||m.validate().then(async()=>{try{e.loading=!0;const o=await _.saveForm(e.vm.id,e.vm.form);if(e.loading=!1,o.code!=200)return;B.message.success("操作成功!"),b.onSuccess(),e.visible=!1}catch{e.loading=!1}})}return(m,o)=>{const d=n("a-button"),u=n("a-input-number"),r=n("a-form-item"),s=n("a-col"),i=n("a-input"),p=n("a-radio"),w=n("a-radio-group"),y=n("a-row"),U=n("a-form"),F=n("a-spin"),k=n("a-modal");return T(),$(k,{open:e.visible,"onUpdate:open":o[8]||(o[8]=t=>e.visible=t),title:e.vm.id?"编辑":"新建",centered:"",onOk:o[9]||(o[9]=t=>e.visible=!1),width:800},{footer:a(()=>[l(d,{type:"primary",loading:e.loading,onClick:o[0]||(o[0]=t=>x())},{default:a(()=>[f(" 提交")]),_:1},8,["loading"]),l(d,{onClick:o[1]||(o[1]=t=>e.visible=!1)},{default:a(()=>[f("关闭")]),_:1})]),default:a(()=>[l(F,{spinning:e.loading},{default:a(()=>[l(U,{ref_key:"refForm",ref:v,layout:"vertical",model:e.vm.form},{default:a(()=>[l(y,{gutter:[16,0]},{default:a(()=>[l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"排序号"},{default:a(()=>[l(u,{value:e.vm.form.orderNumber,"onUpdate:value":o[2]||(o[2]=t=>e.vm.form.orderNumber=t),min:1,max:999,class:"w100"},null,8,["value"])]),_:1})]),_:1}),l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"部门名称"},{default:a(()=>[l(i,{value:e.vm.form.name,"onUpdate:value":o[3]||(o[3]=t=>e.vm.form.name=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"负责人"},{default:a(()=>[l(i,{value:e.vm.form.leader,"onUpdate:value":o[4]||(o[4]=t=>e.vm.form.leader=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"联系电话"},{default:a(()=>[l(i,{value:e.vm.form.phone,"onUpdate:value":o[5]||(o[5]=t=>e.vm.form.phone=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"邮箱"},{default:a(()=>[l(i,{value:e.vm.form.email,"onUpdate:value":o[6]||(o[6]=t=>e.vm.form.email=t),placeholder:"请输入"},null,8,["value"])]),_:1})]),_:1}),l(s,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[l(r,{label:"状态"},{default:a(()=>[l(w,{value:e.vm.form.state,"onUpdate:value":o[7]||(o[7]=t=>e.vm.form.state=t)},{default:a(()=>[l(p,{value:1},{default:a(()=>[f("正常")]),_:1}),l(p,{value:2},{default:a(()=>[f("停用")]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["open","title"])}}});export{V as _};
