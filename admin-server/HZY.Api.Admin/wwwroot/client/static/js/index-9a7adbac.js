import{j as c,g as w,L,k as N,i as P,c as $,l as A,m as F,f as j,h as B,a as O,d as J,e as X,n as V,o as v,I as _,N as M}from"./CodeGeneration.vue_vue_type_script_setup_true_lang-5f97ed0e.js";import"./index-5ce8de01.js";import"./CodeGenerationService-c4b0b4fb.js";const R=[c("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),c("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),c("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),c("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),c("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),c(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),c("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),c(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),c(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),c('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),c('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],I=new M,T=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function m(e){return(t,r)=>{let n=t.node.getChild("VariableDefinition");return n&&r(n,e),!0}}const W=["FunctionDeclaration"],H={FunctionDeclaration:m("function"),ClassDeclaration:m("class"),ClassExpression:()=>!0,EnumDeclaration:m("constant"),TypeAliasDeclaration:m("type"),NamespaceDeclaration:m("namespace"),VariableDefinition(e,t){e.matchContext(W)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function x(e,t){let r=I.get(t);if(r)return r;let n=[],o=!0;function a(l,i){let f=e.sliceString(l.from,l.to);n.push({label:f,type:i})}return t.cursor(_.IncludeAnonymous).iterate(l=>{if(o)o=!1;else if(l.name){let i=H[l.name];if(i&&i(l,a)||T.has(l.name))return!1}else if(l.to-l.from>8192){for(let i of x(e,l.node))n.push(i);return!1}}),I.set(t,n),n}const b=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,k=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Z(e){let t=w(e.state).resolveInner(e.pos,-1);if(k.indexOf(t.name)>-1)return null;let r=t.name=="VariableName"||t.to-t.from<20&&b.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let n=[];for(let o=t;o;o=o.parent)T.has(o.name)&&(n=n.concat(x(e.state.doc,o)));return{options:n,from:r?t.from:e.pos,validFor:b}}function S(e,t,r){var n;let o=[];for(;;){let a=t.firstChild,l;if((a==null?void 0:a.name)=="VariableName")return o.push(e(a)),{path:o.reverse(),name:r};if((a==null?void 0:a.name)=="MemberExpression"&&((n=l=a.lastChild)===null||n===void 0?void 0:n.name)=="PropertyName")o.push(e(l)),t=a;else return null}}function q(e){let t=n=>e.state.doc.sliceString(n.from,n.to),r=w(e.state).resolveInner(e.pos,-1);return r.name=="PropertyName"?S(t,r.parent,t(r)):k.indexOf(r.name)>-1?null:r.name=="VariableName"||r.to-r.from<20&&b.test(t(r))?{path:[],name:t(r)}:(r.name=="."||r.name=="?.")&&r.parent.name=="MemberExpression"?S(t,r.parent,""):r.name=="MemberExpression"?S(t,r,""):e.explicit?{path:[],name:""}:null}function z(e,t){let r=[],n=new Set;for(let o=0;;o++){for(let l of(Object.getOwnPropertyNames||Object.keys)(e)){if(n.has(l))continue;n.add(l);let i;try{i=e[l]}catch{continue}r.push({label:l,type:typeof i=="function"?/^[A-Z]/.test(l)?"class":t?"function":"method":t?"variable":"property",boost:-o})}let a=Object.getPrototypeOf(e);if(!a)return r;e=a}}function ae(e){let t=new Map;return r=>{let n=q(r);if(!n)return null;let o=e;for(let l of n.path)if(o=o[l],!o)return null;let a=t.get(o);return a||t.set(o,a=z(o,!n.path.length)),{from:r.pos-n.name.length,options:a,validFor:b}}}const p=L.define({name:"javascript",parser:N.configure({props:[P.add({IfStatement:$({except:/^\s*({|else\b)/}),TryStatement:$({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:A,SwitchBody:e=>{let t=e.textAfter,r=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(r?0:n?1:2)*e.unit},Block:F({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":$({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),j.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":B,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),G=p.configure({dialect:"ts"},"typescript"),K=p.configure({dialect:"jsx"}),Q=p.configure({dialect:"jsx ts"},"typescript"),U="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function le(e={}){let t=e.jsx?e.typescript?Q:K:e.typescript?G:p;return new O(t,[p.data.of({autocomplete:J(k,X(R.concat(U)))}),p.data.of({autocomplete:Z}),e.jsx?ee:[]])}function D(e,t,r=e.length){if(!t)return"";let n=t.getChild("JSXIdentifier");return n?e.sliceString(n.from,Math.min(n.to,r)):""}const Y=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ee=V.inputHandler.of((e,t,r,n)=>{if((Y?e.composing:e.compositionStarted)||e.state.readOnly||t!=r||n!=">"&&n!="/"||!p.isActiveAt(e.state,t,-1))return!1;let{state:o}=e,a=o.changeByRange(l=>{var i,f,d;let{head:s}=l,u=w(o).resolveInner(s,-1),y;if(u.name=="JSXStartTag"&&(u=u.parent),n==">"&&u.name=="JSXFragmentTag")return{range:v.cursor(s+1),changes:{from:s,insert:"><>"}};if(n==">"&&u.name=="JSXIdentifier"){if(((f=(i=u.parent)===null||i===void 0?void 0:i.lastChild)===null||f===void 0?void 0:f.name)!="JSXEndTag"&&(y=D(o.doc,u.parent,s)))return{range:v.cursor(s+1),changes:{from:s,insert:`></${y}>`}}}else if(n=="/"&&u.name=="JSXFragmentTag"){let g=u.parent,h=g==null?void 0:g.parent;if(g.from==s-1&&((d=h.lastChild)===null||d===void 0?void 0:d.name)!="JSXEndTag"&&(y=D(o.doc,h==null?void 0:h.firstChild,s))){let C=`/${y}>`;return{range:v.cursor(s+C.length),changes:{from:s,insert:C}}}}return{range:l}});return a.changes.empty?!1:(e.dispatch(a,{userEvent:"input.type",scrollIntoView:!0}),!0)});function ie(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach((r,n)=>{r.meta.docs.recommended&&(t.rules[n]=2)})),r=>{let{state:n}=r,o=[];for(let{from:a,to:l}of p.findRegions(n)){let i=n.doc.lineAt(a),f={line:i.number-1,col:a-i.from,pos:a};for(let d of e.verify(n.sliceDoc(a,l),t))o.push(te(d,n.doc,f))}return o}}function E(e,t,r,n){return r.line(e+n.line).from+t+(e==1?n.col-1:-1)}function te(e,t,r){let n=E(e.line,e.column,t,r),o={from:n,to:e.endLine!=null&&e.endColumn!=1?E(e.endLine,e.endColumn,t,r):n,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:e.severity==1?"warning":"error"};if(e.fix){let{range:a,text:l}=e.fix,i=a[0]+r.pos-n,f=a[1]+r.pos-n;o.actions=[{name:"fix",apply(d,s){d.dispatch({changes:{from:s+i,to:s+f,insert:l},scrollIntoView:!0})}}]}return o}export{ee as autoCloseTags,q as completionPath,ie as esLint,le as javascript,p as javascriptLanguage,K as jsxLanguage,Z as localCompletionSource,ae as scopeCompletionSource,R as snippets,Q as tsxLanguage,G as typescriptLanguage};
