import{d as V,m,b as w,u as P,aa as v,f as s,o as D,c as j,E as A,F,a as o,w as t,g as C,a3 as c,j as y}from"./index-2f681d41.js";import{_ as J}from"./AppIcon.vue_vue_type_script_setup_true_lang-c9c34753.js";const Q={class:"p-16"},G=V({__name:"TableCurd",props:{config:{},isPagination:{type:Boolean,default:!0},expandedRowKeys:{}},emits:["change","paginationChange","showSizeChange","update:expandedRowKeys"],setup(x,{expose:b,emit:p}){const g=x,u=m(()=>g.config),R=w(["10","15","20","100","1000"]),_=w("middle"),n=w([]),S=m({get:()=>g.expandedRowKeys,set:e=>p("update:expandedRowKeys",e)});b({getSelectedRowKeys(){return n.value},setSelectedRowKeys(e){n.value=[],n.value.push(...e)},setSelectedRowKey(e){n.value.findIndex(d=>d==e)>-1||n.value.push(e)},clearSelectedRowKeys(){n.value=[]}});const K=(e,a,d,i)=>{p("change",{pagination:e,filters:a,sorter:d,extra:i})},z=({page:e,pageSize:a})=>{p("paginationChange",{page:e,pageSize:a})},k=({current:e,size:a})=>{p("showSizeChange",{current:e,size:a})},E=m(()=>({selectedRowKeys:P(n),onChange:e=>{n.value=e},hideDefaultSelections:!0,selections:[v.SELECTION_ALL,v.SELECTION_INVERT,v.SELECTION_NONE,{key:"odd",text:"选择奇数行",onSelect:e=>{let a=[];a=e.filter((d,i)=>i%2===0),n.value=a}},{key:"even",text:"选择偶数行",onSelect:e=>{let a=[];a=e.filter((d,i)=>i%2!==0),n.value=a}}]}));return(e,a)=>{const d=s("a-card"),i=s("a-space"),h=s("a-col"),N=s("a-button"),f=s("a-menu-item"),T=s("a-menu"),$=s("a-dropdown"),O=s("a-row"),I=s("a-table");return D(),j("div",null,[A(o(d,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:t(()=>[C("div",Q,[c(e.$slots,"search")])]),_:3},512),[[F,u.value.search.state]]),o(d,{class:"mb-16",bordered:!1,bodyStyle:{padding:0}},{default:t(()=>[o(O,{class:"p-16"},{default:t(()=>[o(h,{xs:24,sm:24,md:12,lg:12,xl:12},{default:t(()=>[o(i,{size:8},{default:t(()=>[c(e.$slots,"toolbar-left")]),_:3})]),_:3}),o(h,{xs:24,sm:24,md:12,lg:12,xl:12,class:"text-right"},{default:t(()=>[o(i,{size:8},{default:t(()=>[c(e.$slots,"toolbar-right"),o($,null,{overlay:t(()=>[o(T,null,{default:t(()=>[o(f,{onClick:a[0]||(a[0]=()=>_.value=void 0)},{default:t(()=>[y(" 默认 ")]),_:1}),o(f,{onClick:a[1]||(a[1]=()=>_.value="middle")},{default:t(()=>[y(" 中等 ")]),_:1}),o(f,{onClick:a[2]||(a[2]=()=>_.value="small")},{default:t(()=>[y(" 紧凑 ")]),_:1})]),_:1})]),default:t(()=>[o(N,{type:"text"},{icon:t(()=>[o(J,{name:"column-height-outlined"})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})]),_:3}),C("div",null,[c(e.$slots,"table",{},()=>[o(I,{size:_.value,"row-selection":E.value,"data-source":u.value.data,pagination:g.isPagination?{size:"default",pageSize:u.value.size,total:u.value.total,current:u.value.page,pageSizeOptions:R.value,showSizeChanger:!0,onChange:(l,r)=>z({page:l,pageSize:r}),onShowSizeChange:(l,r)=>k({current:l,size:r}),showTotal:l=>`共${l}条`,showQuickJumper:!0}:!1,loading:u.value.loading,scroll:{x:"calc(100wh - 300px)"},"row-key":"id",expandedRowKeys:S.value,"onUpdate:expandedRowKeys":a[3]||(a[3]=l=>S.value=l),onChange:a[4]||(a[4]=(l,r,L,B)=>K(l,r,L,B))},{default:t(()=>[c(e.$slots,"table-col")]),_:3},8,["size","row-selection","data-source","pagination","loading","scroll","expandedRowKeys"])])])])}}});export{G as _};
